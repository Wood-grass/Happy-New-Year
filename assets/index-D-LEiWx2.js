(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();function jC(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var I0={exports:{}},If={},N0={exports:{}},yn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qE;function KB(){if(qE)return yn;qE=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.iterator;function v(z){return z===null||typeof z!="object"?null:(z=m&&z[m]||z["@@iterator"],typeof z=="function"?z:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,w={};function C(z,K,xe){this.props=z,this.context=K,this.refs=w,this.updater=xe||y}C.prototype.isReactComponent={},C.prototype.setState=function(z,K){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,K,"setState")},C.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function x(){}x.prototype=C.prototype;function M(z,K,xe){this.props=z,this.context=K,this.refs=w,this.updater=xe||y}var S=M.prototype=new x;S.constructor=M,E(S,C.prototype),S.isPureReactComponent=!0;var R=Array.isArray,N=Object.prototype.hasOwnProperty,I={current:null},O={key:!0,ref:!0,__self:!0,__source:!0};function j(z,K,xe){var De,Ie={},Oe=null,tt=null;if(K!=null)for(De in K.ref!==void 0&&(tt=K.ref),K.key!==void 0&&(Oe=""+K.key),K)N.call(K,De)&&!O.hasOwnProperty(De)&&(Ie[De]=K[De]);var rt=arguments.length-2;if(rt===1)Ie.children=xe;else if(1<rt){for(var gt=Array(rt),kt=0;kt<rt;kt++)gt[kt]=arguments[kt+2];Ie.children=gt}if(z&&z.defaultProps)for(De in rt=z.defaultProps,rt)Ie[De]===void 0&&(Ie[De]=rt[De]);return{$$typeof:r,type:z,key:Oe,ref:tt,props:Ie,_owner:I.current}}function F(z,K){return{$$typeof:r,type:z.type,key:K,ref:z.ref,props:z.props,_owner:z._owner}}function H(z){return typeof z=="object"&&z!==null&&z.$$typeof===r}function ee(z){var K={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(xe){return K[xe]})}var de=/\/+/g;function ve(z,K){return typeof z=="object"&&z!==null&&z.key!=null?ee(""+z.key):K.toString(36)}function Y(z,K,xe,De,Ie){var Oe=typeof z;(Oe==="undefined"||Oe==="boolean")&&(z=null);var tt=!1;if(z===null)tt=!0;else switch(Oe){case"string":case"number":tt=!0;break;case"object":switch(z.$$typeof){case r:case e:tt=!0}}if(tt)return tt=z,Ie=Ie(tt),z=De===""?"."+ve(tt,0):De,R(Ie)?(xe="",z!=null&&(xe=z.replace(de,"$&/")+"/"),Y(Ie,K,xe,"",function(kt){return kt})):Ie!=null&&(H(Ie)&&(Ie=F(Ie,xe+(!Ie.key||tt&&tt.key===Ie.key?"":(""+Ie.key).replace(de,"$&/")+"/")+z)),K.push(Ie)),1;if(tt=0,De=De===""?".":De+":",R(z))for(var rt=0;rt<z.length;rt++){Oe=z[rt];var gt=De+ve(Oe,rt);tt+=Y(Oe,K,xe,gt,Ie)}else if(gt=v(z),typeof gt=="function")for(z=gt.call(z),rt=0;!(Oe=z.next()).done;)Oe=Oe.value,gt=De+ve(Oe,rt++),tt+=Y(Oe,K,xe,gt,Ie);else if(Oe==="object")throw K=String(z),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.");return tt}function me(z,K,xe){if(z==null)return z;var De=[],Ie=0;return Y(z,De,"","",function(Oe){return K.call(xe,Oe,Ie++)}),De}function pe(z){if(z._status===-1){var K=z._result;K=K(),K.then(function(xe){(z._status===0||z._status===-1)&&(z._status=1,z._result=xe)},function(xe){(z._status===0||z._status===-1)&&(z._status=2,z._result=xe)}),z._status===-1&&(z._status=0,z._result=K)}if(z._status===1)return z._result.default;throw z._result}var Ae={current:null},te={transition:null},ce={ReactCurrentDispatcher:Ae,ReactCurrentBatchConfig:te,ReactCurrentOwner:I};function ne(){throw Error("act(...) is not supported in production builds of React.")}return yn.Children={map:me,forEach:function(z,K,xe){me(z,function(){K.apply(this,arguments)},xe)},count:function(z){var K=0;return me(z,function(){K++}),K},toArray:function(z){return me(z,function(K){return K})||[]},only:function(z){if(!H(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},yn.Component=C,yn.Fragment=t,yn.Profiler=i,yn.PureComponent=M,yn.StrictMode=n,yn.Suspense=u,yn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ce,yn.act=ne,yn.cloneElement=function(z,K,xe){if(z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+z+".");var De=E({},z.props),Ie=z.key,Oe=z.ref,tt=z._owner;if(K!=null){if(K.ref!==void 0&&(Oe=K.ref,tt=I.current),K.key!==void 0&&(Ie=""+K.key),z.type&&z.type.defaultProps)var rt=z.type.defaultProps;for(gt in K)N.call(K,gt)&&!O.hasOwnProperty(gt)&&(De[gt]=K[gt]===void 0&&rt!==void 0?rt[gt]:K[gt])}var gt=arguments.length-2;if(gt===1)De.children=xe;else if(1<gt){rt=Array(gt);for(var kt=0;kt<gt;kt++)rt[kt]=arguments[kt+2];De.children=rt}return{$$typeof:r,type:z.type,key:Ie,ref:Oe,props:De,_owner:tt}},yn.createContext=function(z){return z={$$typeof:o,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},z.Provider={$$typeof:s,_context:z},z.Consumer=z},yn.createElement=j,yn.createFactory=function(z){var K=j.bind(null,z);return K.type=z,K},yn.createRef=function(){return{current:null}},yn.forwardRef=function(z){return{$$typeof:l,render:z}},yn.isValidElement=H,yn.lazy=function(z){return{$$typeof:p,_payload:{_status:-1,_result:z},_init:pe}},yn.memo=function(z,K){return{$$typeof:h,type:z,compare:K===void 0?null:K}},yn.startTransition=function(z){var K=te.transition;te.transition={};try{z()}finally{te.transition=K}},yn.unstable_act=ne,yn.useCallback=function(z,K){return Ae.current.useCallback(z,K)},yn.useContext=function(z){return Ae.current.useContext(z)},yn.useDebugValue=function(){},yn.useDeferredValue=function(z){return Ae.current.useDeferredValue(z)},yn.useEffect=function(z,K){return Ae.current.useEffect(z,K)},yn.useId=function(){return Ae.current.useId()},yn.useImperativeHandle=function(z,K,xe){return Ae.current.useImperativeHandle(z,K,xe)},yn.useInsertionEffect=function(z,K){return Ae.current.useInsertionEffect(z,K)},yn.useLayoutEffect=function(z,K){return Ae.current.useLayoutEffect(z,K)},yn.useMemo=function(z,K){return Ae.current.useMemo(z,K)},yn.useReducer=function(z,K,xe){return Ae.current.useReducer(z,K,xe)},yn.useRef=function(z){return Ae.current.useRef(z)},yn.useState=function(z){return Ae.current.useState(z)},yn.useSyncExternalStore=function(z,K,xe){return Ae.current.useSyncExternalStore(z,K,xe)},yn.useTransition=function(){return Ae.current.useTransition()},yn.version="18.3.1",yn}var YE;function xg(){return YE||(YE=1,N0.exports=KB()),N0.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $E;function qB(){if($E)return If;$E=1;var r=xg(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(l,u,h){var p,m={},v=null,y=null;h!==void 0&&(v=""+h),u.key!==void 0&&(v=""+u.key),u.ref!==void 0&&(y=u.ref);for(p in u)n.call(u,p)&&!s.hasOwnProperty(p)&&(m[p]=u[p]);if(l&&l.defaultProps)for(p in u=l.defaultProps,u)m[p]===void 0&&(m[p]=u[p]);return{$$typeof:e,type:l,key:v,ref:y,props:m,_owner:i.current}}return If.Fragment=t,If.jsx=o,If.jsxs=o,If}var QE;function YB(){return QE||(QE=1,I0.exports=qB()),I0.exports}var P=YB(),V=xg();const VC=jC(V);var Xm={},F0={exports:{}},rs={},k0={exports:{}},O0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZE;function $B(){return ZE||(ZE=1,(function(r){function e(te,ce){var ne=te.length;te.push(ce);e:for(;0<ne;){var z=ne-1>>>1,K=te[z];if(0<i(K,ce))te[z]=ce,te[ne]=K,ne=z;else break e}}function t(te){return te.length===0?null:te[0]}function n(te){if(te.length===0)return null;var ce=te[0],ne=te.pop();if(ne!==ce){te[0]=ne;e:for(var z=0,K=te.length,xe=K>>>1;z<xe;){var De=2*(z+1)-1,Ie=te[De],Oe=De+1,tt=te[Oe];if(0>i(Ie,ne))Oe<K&&0>i(tt,Ie)?(te[z]=tt,te[Oe]=ne,z=Oe):(te[z]=Ie,te[De]=ne,z=De);else if(Oe<K&&0>i(tt,ne))te[z]=tt,te[Oe]=ne,z=Oe;else break e}}return ce}function i(te,ce){var ne=te.sortIndex-ce.sortIndex;return ne!==0?ne:te.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();r.unstable_now=function(){return o.now()-l}}var u=[],h=[],p=1,m=null,v=3,y=!1,E=!1,w=!1,C=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(te){for(var ce=t(h);ce!==null;){if(ce.callback===null)n(h);else if(ce.startTime<=te)n(h),ce.sortIndex=ce.expirationTime,e(u,ce);else break;ce=t(h)}}function R(te){if(w=!1,S(te),!E)if(t(u)!==null)E=!0,pe(N);else{var ce=t(h);ce!==null&&Ae(R,ce.startTime-te)}}function N(te,ce){E=!1,w&&(w=!1,x(j),j=-1),y=!0;var ne=v;try{for(S(ce),m=t(u);m!==null&&(!(m.expirationTime>ce)||te&&!ee());){var z=m.callback;if(typeof z=="function"){m.callback=null,v=m.priorityLevel;var K=z(m.expirationTime<=ce);ce=r.unstable_now(),typeof K=="function"?m.callback=K:m===t(u)&&n(u),S(ce)}else n(u);m=t(u)}if(m!==null)var xe=!0;else{var De=t(h);De!==null&&Ae(R,De.startTime-ce),xe=!1}return xe}finally{m=null,v=ne,y=!1}}var I=!1,O=null,j=-1,F=5,H=-1;function ee(){return!(r.unstable_now()-H<F)}function de(){if(O!==null){var te=r.unstable_now();H=te;var ce=!0;try{ce=O(!0,te)}finally{ce?ve():(I=!1,O=null)}}else I=!1}var ve;if(typeof M=="function")ve=function(){M(de)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,me=Y.port2;Y.port1.onmessage=de,ve=function(){me.postMessage(null)}}else ve=function(){C(de,0)};function pe(te){O=te,I||(I=!0,ve())}function Ae(te,ce){j=C(function(){te(r.unstable_now())},ce)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(te){te.callback=null},r.unstable_continueExecution=function(){E||y||(E=!0,pe(N))},r.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<te?Math.floor(1e3/te):5},r.unstable_getCurrentPriorityLevel=function(){return v},r.unstable_getFirstCallbackNode=function(){return t(u)},r.unstable_next=function(te){switch(v){case 1:case 2:case 3:var ce=3;break;default:ce=v}var ne=v;v=ce;try{return te()}finally{v=ne}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(te,ce){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var ne=v;v=te;try{return ce()}finally{v=ne}},r.unstable_scheduleCallback=function(te,ce,ne){var z=r.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?z+ne:z):ne=z,te){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=ne+K,te={id:p++,callback:ce,priorityLevel:te,startTime:ne,expirationTime:K,sortIndex:-1},ne>z?(te.sortIndex=ne,e(h,te),t(u)===null&&te===t(h)&&(w?(x(j),j=-1):w=!0,Ae(R,ne-z))):(te.sortIndex=K,e(u,te),E||y||(E=!0,pe(N))),te},r.unstable_shouldYield=ee,r.unstable_wrapCallback=function(te){var ce=v;return function(){var ne=v;v=ce;try{return te.apply(this,arguments)}finally{v=ne}}}})(O0)),O0}var ex;function QB(){return ex||(ex=1,k0.exports=$B()),k0.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tx;function ZB(){if(tx)return rs;tx=1;var r=xg(),e=QB();function t(a){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+a,g=1;g<arguments.length;g++)c+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function s(a,c){o(a,c),o(a+"Capture",c)}function o(a,c){for(i[a]=c,a=0;a<c.length;a++)n.add(c[a])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function v(a){return u.call(m,a)?!0:u.call(p,a)?!1:h.test(a)?m[a]=!0:(p[a]=!0,!1)}function y(a,c,g,_){if(g!==null&&g.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return _?!1:g!==null?!g.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function E(a,c,g,_){if(c===null||typeof c>"u"||y(a,c,g,_))return!0;if(_)return!1;if(g!==null)switch(g.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function w(a,c,g,_,b,D,G){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=_,this.attributeNamespace=b,this.mustUseProperty=g,this.propertyName=a,this.type=c,this.sanitizeURL=D,this.removeEmptyString=G}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){C[a]=new w(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var c=a[0];C[c]=new w(c,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){C[a]=new w(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){C[a]=new w(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){C[a]=new w(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){C[a]=new w(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){C[a]=new w(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){C[a]=new w(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){C[a]=new w(a,5,!1,a.toLowerCase(),null,!1,!1)});var x=/[\-:]([a-z])/g;function M(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var c=a.replace(x,M);C[c]=new w(c,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var c=a.replace(x,M);C[c]=new w(c,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var c=a.replace(x,M);C[c]=new w(c,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){C[a]=new w(a,1,!1,a.toLowerCase(),null,!1,!1)}),C.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){C[a]=new w(a,1,!1,a.toLowerCase(),null,!0,!0)});function S(a,c,g,_){var b=C.hasOwnProperty(c)?C[c]:null;(b!==null?b.type!==0:_||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(E(c,g,b,_)&&(g=null),_||b===null?v(c)&&(g===null?a.removeAttribute(c):a.setAttribute(c,""+g)):b.mustUseProperty?a[b.propertyName]=g===null?b.type===3?!1:"":g:(c=b.attributeName,_=b.attributeNamespace,g===null?a.removeAttribute(c):(b=b.type,g=b===3||b===4&&g===!0?"":""+g,_?a.setAttributeNS(_,c,g):a.setAttribute(c,g))))}var R=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,N=Symbol.for("react.element"),I=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),H=Symbol.for("react.provider"),ee=Symbol.for("react.context"),de=Symbol.for("react.forward_ref"),ve=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),me=Symbol.for("react.memo"),pe=Symbol.for("react.lazy"),Ae=Symbol.for("react.offscreen"),te=Symbol.iterator;function ce(a){return a===null||typeof a!="object"?null:(a=te&&a[te]||a["@@iterator"],typeof a=="function"?a:null)}var ne=Object.assign,z;function K(a){if(z===void 0)try{throw Error()}catch(g){var c=g.stack.trim().match(/\n( *(at )?)/);z=c&&c[1]||""}return`
`+z+a}var xe=!1;function De(a,c){if(!a||xe)return"";xe=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(be){var _=be}Reflect.construct(a,[],c)}else{try{c.call()}catch(be){_=be}a.call(c.prototype)}else{try{throw Error()}catch(be){_=be}a()}}catch(be){if(be&&_&&typeof be.stack=="string"){for(var b=be.stack.split(`
`),D=_.stack.split(`
`),G=b.length-1,re=D.length-1;1<=G&&0<=re&&b[G]!==D[re];)re--;for(;1<=G&&0<=re;G--,re--)if(b[G]!==D[re]){if(G!==1||re!==1)do if(G--,re--,0>re||b[G]!==D[re]){var he=`
`+b[G].replace(" at new "," at ");return a.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",a.displayName)),he}while(1<=G&&0<=re);break}}}finally{xe=!1,Error.prepareStackTrace=g}return(a=a?a.displayName||a.name:"")?K(a):""}function Ie(a){switch(a.tag){case 5:return K(a.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return a=De(a.type,!1),a;case 11:return a=De(a.type.render,!1),a;case 1:return a=De(a.type,!0),a;default:return""}}function Oe(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case O:return"Fragment";case I:return"Portal";case F:return"Profiler";case j:return"StrictMode";case ve:return"Suspense";case Y:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case ee:return(a.displayName||"Context")+".Consumer";case H:return(a._context.displayName||"Context")+".Provider";case de:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case me:return c=a.displayName||null,c!==null?c:Oe(a.type)||"Memo";case pe:c=a._payload,a=a._init;try{return Oe(a(c))}catch{}}return null}function tt(a){var c=a.type;switch(a.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=c.render,a=a.displayName||a.name||"",c.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Oe(c);case 8:return c===j?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function rt(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function gt(a){var c=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function kt(a){var c=gt(a)?"checked":"value",g=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),_=""+a[c];if(!a.hasOwnProperty(c)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var b=g.get,D=g.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return b.call(this)},set:function(G){_=""+G,D.call(this,G)}}),Object.defineProperty(a,c,{enumerable:g.enumerable}),{getValue:function(){return _},setValue:function(G){_=""+G},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function xt(a){a._valueTracker||(a._valueTracker=kt(a))}function se(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var g=c.getValue(),_="";return a&&(_=gt(a)?a.checked?"true":"false":a.value),a=_,a!==g?(c.setValue(a),!0):!1}function Je(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function Fe(a,c){var g=c.checked;return ne({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:g??a._wrapperState.initialChecked})}function $e(a,c){var g=c.defaultValue==null?"":c.defaultValue,_=c.checked!=null?c.checked:c.defaultChecked;g=rt(c.value!=null?c.value:g),a._wrapperState={initialChecked:_,initialValue:g,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function ze(a,c){c=c.checked,c!=null&&S(a,"checked",c,!1)}function bt(a,c){ze(a,c);var g=rt(c.value),_=c.type;if(g!=null)_==="number"?(g===0&&a.value===""||a.value!=g)&&(a.value=""+g):a.value!==""+g&&(a.value=""+g);else if(_==="submit"||_==="reset"){a.removeAttribute("value");return}c.hasOwnProperty("value")?yt(a,c.type,g):c.hasOwnProperty("defaultValue")&&yt(a,c.type,rt(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(a.defaultChecked=!!c.defaultChecked)}function ft(a,c,g){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var _=c.type;if(!(_!=="submit"&&_!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+a._wrapperState.initialValue,g||c===a.value||(a.value=c),a.defaultValue=c}g=a.name,g!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,g!==""&&(a.name=g)}function yt(a,c,g){(c!=="number"||Je(a.ownerDocument)!==a)&&(g==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+g&&(a.defaultValue=""+g))}var Lt=Array.isArray;function Kt(a,c,g,_){if(a=a.options,c){c={};for(var b=0;b<g.length;b++)c["$"+g[b]]=!0;for(g=0;g<a.length;g++)b=c.hasOwnProperty("$"+a[g].value),a[g].selected!==b&&(a[g].selected=b),b&&_&&(a[g].defaultSelected=!0)}else{for(g=""+rt(g),c=null,b=0;b<a.length;b++){if(a[b].value===g){a[b].selected=!0,_&&(a[b].defaultSelected=!0);return}c!==null||a[b].disabled||(c=a[b])}c!==null&&(c.selected=!0)}}function Mn(a,c){if(c.dangerouslySetInnerHTML!=null)throw Error(t(91));return ne({},c,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function Z(a,c){var g=c.value;if(g==null){if(g=c.children,c=c.defaultValue,g!=null){if(c!=null)throw Error(t(92));if(Lt(g)){if(1<g.length)throw Error(t(93));g=g[0]}c=g}c==null&&(c=""),g=c}a._wrapperState={initialValue:rt(g)}}function W(a,c){var g=rt(c.value),_=rt(c.defaultValue);g!=null&&(g=""+g,g!==a.value&&(a.value=g),c.defaultValue==null&&a.defaultValue!==g&&(a.defaultValue=g)),_!=null&&(a.defaultValue=""+_)}function Se(a){var c=a.textContent;c===a._wrapperState.initialValue&&c!==""&&c!==null&&(a.value=c)}function Ze(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ve(a,c){return a==null||a==="http://www.w3.org/1999/xhtml"?Ze(c):a==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var Ye,Ct=(function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,g,_,b){MSApp.execUnsafeLocalFunction(function(){return a(c,g,_,b)})}:a})(function(a,c){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=c;else{for(Ye=Ye||document.createElement("div"),Ye.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=Ye.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;c.firstChild;)a.appendChild(c.firstChild)}});function nt(a,c){if(c){var g=a.firstChild;if(g&&g===a.lastChild&&g.nodeType===3){g.nodeValue=c;return}}a.textContent=c}var ct={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ut=["Webkit","ms","Moz","O"];Object.keys(ct).forEach(function(a){Ut.forEach(function(c){c=c+a.charAt(0).toUpperCase()+a.substring(1),ct[c]=ct[a]})});function rn(a,c,g){return c==null||typeof c=="boolean"||c===""?"":g||typeof c!="number"||c===0||ct.hasOwnProperty(a)&&ct[a]?(""+c).trim():c+"px"}function Ge(a,c){a=a.style;for(var g in c)if(c.hasOwnProperty(g)){var _=g.indexOf("--")===0,b=rn(g,c[g],_);g==="float"&&(g="cssFloat"),_?a.setProperty(g,b):a[g]=b}}var gn=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ae(a,c){if(c){if(gn[a]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(t(137,a));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(t(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(t(61))}if(c.style!=null&&typeof c.style!="object")throw Error(t(62))}}function Me(a,c){if(a.indexOf("-")===-1)return typeof c.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var He=null;function We(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var ke=null,ue=null,ot=null;function it(a){if(a=no(a)){if(typeof ke!="function")throw Error(t(280));var c=a.stateNode;c&&(c=fd(c),ke(a.stateNode,a.type,c))}}function Ne(a){ue?ot?ot.push(a):ot=[a]:ue=a}function Qe(){if(ue){var a=ue,c=ot;if(ot=ue=null,it(a),c)for(a=0;a<c.length;a++)it(c[a])}}function Bt(a,c){return a(c)}function tn(){}var xn=!1;function Xn(a,c,g){if(xn)return a(c,g);xn=!0;try{return Bt(a,c,g)}finally{xn=!1,(ue!==null||ot!==null)&&(tn(),Qe())}}function un(a,c){var g=a.stateNode;if(g===null)return null;var _=fd(g);if(_===null)return null;g=_[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_=!_.disabled)||(a=a.type,_=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!_;break e;default:a=!1}if(a)return null;if(g&&typeof g!="function")throw Error(t(231,c,typeof g));return g}var lr=!1;if(l)try{var Br={};Object.defineProperty(Br,"passive",{get:function(){lr=!0}}),window.addEventListener("test",Br,Br),window.removeEventListener("test",Br,Br)}catch{lr=!1}function Rs(a,c,g,_,b,D,G,re,he){var be=Array.prototype.slice.call(arguments,3);try{c.apply(g,be)}catch(qe){this.onError(qe)}}var ls=!1,ri=null,kr=!1,Qt=null,ta={onError:function(a){ls=!0,ri=a}};function el(a,c,g,_,b,D,G,re,he){ls=!1,ri=null,Rs.apply(ta,arguments)}function U(a,c,g,_,b,D,G,re,he){if(el.apply(this,arguments),ls){if(ls){var be=ri;ls=!1,ri=null}else throw Error(t(198));kr||(kr=!0,Qt=be)}}function J(a){var c=a,g=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,(c.flags&4098)!==0&&(g=c.return),a=c.return;while(a)}return c.tag===3?g:null}function le(a){if(a.tag===13){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function k(a){if(J(a)!==a)throw Error(t(188))}function q(a){var c=a.alternate;if(!c){if(c=J(a),c===null)throw Error(t(188));return c!==a?null:a}for(var g=a,_=c;;){var b=g.return;if(b===null)break;var D=b.alternate;if(D===null){if(_=b.return,_!==null){g=_;continue}break}if(b.child===D.child){for(D=b.child;D;){if(D===g)return k(b),a;if(D===_)return k(b),c;D=D.sibling}throw Error(t(188))}if(g.return!==_.return)g=b,_=D;else{for(var G=!1,re=b.child;re;){if(re===g){G=!0,g=b,_=D;break}if(re===_){G=!0,_=b,g=D;break}re=re.sibling}if(!G){for(re=D.child;re;){if(re===g){G=!0,g=D,_=b;break}if(re===_){G=!0,_=D,g=b;break}re=re.sibling}if(!G)throw Error(t(189))}}if(g.alternate!==_)throw Error(t(190))}if(g.tag!==3)throw Error(t(188));return g.stateNode.current===g?a:c}function $(a){return a=q(a),a!==null?oe(a):null}function oe(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var c=oe(a);if(c!==null)return c;a=a.sibling}return null}var ie=e.unstable_scheduleCallback,Be=e.unstable_cancelCallback,Te=e.unstable_shouldYield,Pe=e.unstable_requestPaint,Ce=e.unstable_now,At=e.unstable_getCurrentPriorityLevel,je=e.unstable_ImmediatePriority,Ke=e.unstable_UserBlockingPriority,Et=e.unstable_NormalPriority,Nt=e.unstable_LowPriority,Ft=e.unstable_IdlePriority,Vt=null,dt=null;function ut(a){if(dt&&typeof dt.onCommitFiberRoot=="function")try{dt.onCommitFiberRoot(Vt,a,void 0,(a.current.flags&128)===128)}catch{}}var jt=Math.clz32?Math.clz32:Pn,Wt=Math.log,Jt=Math.LN2;function Pn(a){return a>>>=0,a===0?32:31-(Wt(a)/Jt|0)|0}var jn=64,Nn=4194304;function vn(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function on(a,c){var g=a.pendingLanes;if(g===0)return 0;var _=0,b=a.suspendedLanes,D=a.pingedLanes,G=g&268435455;if(G!==0){var re=G&~b;re!==0?_=vn(re):(D&=G,D!==0&&(_=vn(D)))}else G=g&~b,G!==0?_=vn(G):D!==0&&(_=vn(D));if(_===0)return 0;if(c!==0&&c!==_&&(c&b)===0&&(b=_&-_,D=c&-c,b>=D||b===16&&(D&4194240)!==0))return c;if((_&4)!==0&&(_|=g&16),c=a.entangledLanes,c!==0)for(a=a.entanglements,c&=_;0<c;)g=31-jt(c),b=1<<g,_|=a[g],c&=~b;return _}function Qn(a,c){switch(a){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nn(a,c){for(var g=a.suspendedLanes,_=a.pingedLanes,b=a.expirationTimes,D=a.pendingLanes;0<D;){var G=31-jt(D),re=1<<G,he=b[G];he===-1?((re&g)===0||(re&_)!==0)&&(b[G]=Qn(re,c)):he<=c&&(a.expiredLanes|=re),D&=~re}}function pn(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function Fn(){var a=jn;return jn<<=1,(jn&4194240)===0&&(jn=64),a}function vi(a){for(var c=[],g=0;31>g;g++)c.push(a);return c}function Er(a,c,g){a.pendingLanes|=c,c!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,c=31-jt(c),a[c]=g}function Ds(a,c){var g=a.pendingLanes&~c;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=c,a.mutableReadLanes&=c,a.entangledLanes&=c,c=a.entanglements;var _=a.eventTimes;for(a=a.expirationTimes;0<g;){var b=31-jt(g),D=1<<b;c[b]=0,_[b]=-1,a[b]=-1,g&=~D}}function tl(a,c){var g=a.entangledLanes|=c;for(a=a.entanglements;g;){var _=31-jt(g),b=1<<_;b&c|a[_]&c&&(a[_]|=c),g&=~b}}var wn=0;function nl(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var sc,Uh,tm,Nu,Fu,na=!1,ku=[],Ps=null,dn=null,Ks=null,ra=new Map,rl=new Map,Do=[],s0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xr(a,c){switch(a){case"focusin":case"focusout":Ps=null;break;case"dragenter":case"dragleave":dn=null;break;case"mouseover":case"mouseout":Ks=null;break;case"pointerover":case"pointerout":ra.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":rl.delete(c.pointerId)}}function ia(a,c,g,_,b,D){return a===null||a.nativeEvent!==D?(a={blockedOn:c,domEventName:g,eventSystemFlags:_,nativeEvent:D,targetContainers:[b]},c!==null&&(c=no(c),c!==null&&Uh(c)),a):(a.eventSystemFlags|=_,c=a.targetContainers,b!==null&&c.indexOf(b)===-1&&c.push(b),a)}function o0(a,c,g,_,b){switch(c){case"focusin":return Ps=ia(Ps,a,c,g,_,b),!0;case"dragenter":return dn=ia(dn,a,c,g,_,b),!0;case"mouseover":return Ks=ia(Ks,a,c,g,_,b),!0;case"pointerover":var D=b.pointerId;return ra.set(D,ia(ra.get(D)||null,a,c,g,_,b)),!0;case"gotpointercapture":return D=b.pointerId,rl.set(D,ia(rl.get(D)||null,a,c,g,_,b)),!0}return!1}function Ou(a){var c=Oo(a.target);if(c!==null){var g=J(c);if(g!==null){if(c=g.tag,c===13){if(c=le(g),c!==null){a.blockedOn=c,Fu(a.priority,function(){tm(g)});return}}else if(c===3&&g.stateNode.current.memoizedState.isDehydrated){a.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Uu(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0<c.length;){var g=Xi(a.domEventName,a.eventSystemFlags,c[0],a.nativeEvent);if(g===null){g=a.nativeEvent;var _=new g.constructor(g.type,g);He=_,g.target.dispatchEvent(_),He=null}else return c=no(g),c!==null&&Uh(c),a.blockedOn=g,!1;c.shift()}return!0}function oc(a,c,g){Uu(a)&&g.delete(c)}function Ls(){na=!1,Ps!==null&&Uu(Ps)&&(Ps=null),dn!==null&&Uu(dn)&&(dn=null),Ks!==null&&Uu(Ks)&&(Ks=null),ra.forEach(oc),rl.forEach(oc)}function ac(a,c){a.blockedOn===c&&(a.blockedOn=null,na||(na=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ls)))}function lc(a){function c(b){return ac(b,a)}if(0<ku.length){ac(ku[0],a);for(var g=1;g<ku.length;g++){var _=ku[g];_.blockedOn===a&&(_.blockedOn=null)}}for(Ps!==null&&ac(Ps,a),dn!==null&&ac(dn,a),Ks!==null&&ac(Ks,a),ra.forEach(c),rl.forEach(c),g=0;g<Do.length;g++)_=Do[g],_.blockedOn===a&&(_.blockedOn=null);for(;0<Do.length&&(g=Do[0],g.blockedOn===null);)Ou(g),g.blockedOn===null&&Do.shift()}var ii=R.ReactCurrentBatchConfig,Ji=!0;function Hu(a,c,g,_){var b=wn,D=ii.transition;ii.transition=null;try{wn=1,zu(a,c,g,_)}finally{wn=b,ii.transition=D}}function Hh(a,c,g,_){var b=wn,D=ii.transition;ii.transition=null;try{wn=4,zu(a,c,g,_)}finally{wn=b,ii.transition=D}}function zu(a,c,g,_){if(Ji){var b=Xi(a,c,g,_);if(b===null)ad(a,c,_,Gu,g),xr(a,_);else if(o0(b,a,c,g,_))_.stopPropagation();else if(xr(a,_),c&4&&-1<s0.indexOf(a)){for(;b!==null;){var D=no(b);if(D!==null&&sc(D),D=Xi(a,c,g,_),D===null&&ad(a,c,_,Gu,g),D===b)break;b=D}b!==null&&_.stopPropagation()}else ad(a,c,_,null,g)}}var Gu=null;function Xi(a,c,g,_){if(Gu=null,a=We(_),a=Oo(a),a!==null)if(c=J(a),c===null)a=null;else if(g=c.tag,g===13){if(a=le(c),a!==null)return a;a=null}else if(g===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null);return Gu=a,null}function nm(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(At()){case je:return 1;case Ke:return 4;case Et:case Nt:return 16;case Ft:return 536870912;default:return 16}default:return 16}}var cs=null,zh=null,yi=null;function cc(){if(yi)return yi;var a,c=zh,g=c.length,_,b="value"in cs?cs.value:cs.textContent,D=b.length;for(a=0;a<g&&c[a]===b[a];a++);var G=g-a;for(_=1;_<=G&&c[g-_]===b[D-_];_++);return yi=b.slice(a,1<_?1-_:void 0)}function sa(a){var c=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&c===13&&(a=13)):a=c,a===10&&(a=13),32<=a||a===13?a:0}function qs(){return!0}function ju(){return!1}function si(a){function c(g,_,b,D,G){this._reactName=g,this._targetInst=b,this.type=_,this.nativeEvent=D,this.target=G,this.currentTarget=null;for(var re in a)a.hasOwnProperty(re)&&(g=a[re],this[re]=g?g(D):D[re]);return this.isDefaultPrevented=(D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1)?qs:ju,this.isPropagationStopped=ju,this}return ne(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=qs)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=qs)},persist:function(){},isPersistent:qs}),c}var oa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uc=si(oa),aa=ne({},oa,{view:0,detail:0}),il=si(aa),Ai,Ki,qi,sl=ne({},aa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lo,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==qi&&(qi&&a.type==="mousemove"?(Ai=a.screenX-qi.screenX,Ki=a.screenY-qi.screenY):Ki=Ai=0,qi=a),Ai)},movementY:function(a){return"movementY"in a?a.movementY:Ki}}),Gh=si(sl),Ys=ne({},sl,{dataTransfer:0}),Po=si(Ys),Vu=ne({},aa,{relatedTarget:0}),Wu=si(Vu),Ju=ne({},oa,{animationName:0,elapsedTime:0,pseudoElement:0}),rm=si(Ju),im=ne({},oa,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),jh=si(im),Xu=ne({},oa,{data:0}),Vh=si(Xu),sm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},om={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ol(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=Wh[a])?!!c[a]:!1}function Lo(){return ol}var Ku=ne({},aa,{key:function(a){if(a.key){var c=sm[a.key]||a.key;if(c!=="Unidentified")return c}return a.type==="keypress"?(a=sa(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?om[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lo,charCode:function(a){return a.type==="keypress"?sa(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?sa(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),qu=si(Ku),Yi=ne({},sl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Di=si(Yi),la=ne({},aa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lo}),$s=si(la),Qs=ne({},oa,{propertyName:0,elapsedTime:0,pseudoElement:0}),ca=si(Qs),am=ne({},sl,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Jh=si(am),Xh=[9,13,27,32],oi=l&&"CompositionEvent"in window,Or=null;l&&"documentMode"in document&&(Or=document.documentMode);var Kn=l&&"TextEvent"in window&&!Or,al=l&&(!oi||Or&&8<Or&&11>=Or),$i=" ",Kh=!1;function qh(a,c){switch(a){case"keyup":return Xh.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yu(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Io=!1;function lm(a,c){switch(a){case"compositionend":return Yu(c);case"keypress":return c.which!==32?null:(Kh=!0,$i);case"textInput":return a=c.data,a===$i&&Kh?null:a;default:return null}}function dc(a,c){if(Io)return a==="compositionend"||!oi&&qh(a,c)?(a=cc(),yi=zh=cs=null,Io=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return al&&c.locale!=="ko"?null:c.data;default:return null}}var ll={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $u(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c==="input"?!!ll[a.type]:c==="textarea"}function cl(a,c,g,_){Ne(_),c=ld(c,"onChange"),0<c.length&&(g=new uc("onChange","change",null,g,_),a.push({event:g,listeners:c}))}var No=null,ul=null;function cm(a){pl(a,0)}function Zs(a){var c=cr(a);if(se(c))return a}function um(a,c){if(a==="change")return c}var dl=!1;if(l){var Ei;if(l){var ua="oninput"in document;if(!ua){var da=document.createElement("div");da.setAttribute("oninput","return;"),ua=typeof da.oninput=="function"}Ei=ua}else Ei=!1;dl=Ei&&(!document.documentMode||9<document.documentMode)}function us(){No&&(No.detachEvent("onpropertychange",Qu),ul=No=null)}function Qu(a){if(a.propertyName==="value"&&Zs(ul)){var c=[];cl(c,ul,a,We(a)),Xn(cm,c)}}function hl(a,c,g){a==="focusin"?(us(),No=c,ul=g,No.attachEvent("onpropertychange",Qu)):a==="focusout"&&us()}function dm(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Zs(ul)}function Yh(a,c){if(a==="click")return Zs(c)}function Zn(a,c){if(a==="input"||a==="change")return Zs(c)}function Zu(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var Pi=typeof Object.is=="function"?Object.is:Zu;function ha(a,c){if(Pi(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var g=Object.keys(a),_=Object.keys(c);if(g.length!==_.length)return!1;for(_=0;_<g.length;_++){var b=g[_];if(!u.call(c,b)||!Pi(a[b],c[b]))return!1}return!0}function hc(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Li(a,c){var g=hc(a);a=0;for(var _;g;){if(g.nodeType===3){if(_=a+g.textContent.length,a<=c&&_>=c)return{node:g,offset:c-a};a=_}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=hc(g)}}function fa(a,c){return a&&c?a===c?!0:a&&a.nodeType===3?!1:c&&c.nodeType===3?fa(a,c.parentNode):"contains"in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&16):!1:!1}function er(){for(var a=window,c=Je();c instanceof a.HTMLIFrameElement;){try{var g=typeof c.contentWindow.location.href=="string"}catch{g=!1}if(g)a=c.contentWindow;else break;c=Je(a.document)}return c}function br(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c&&(c==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||c==="textarea"||a.contentEditable==="true")}function Mr(a){var c=er(),g=a.focusedElem,_=a.selectionRange;if(c!==g&&g&&g.ownerDocument&&fa(g.ownerDocument.documentElement,g)){if(_!==null&&br(g)){if(c=_.start,a=_.end,a===void 0&&(a=c),"selectionStart"in g)g.selectionStart=c,g.selectionEnd=Math.min(a,g.value.length);else if(a=(c=g.ownerDocument||document)&&c.defaultView||window,a.getSelection){a=a.getSelection();var b=g.textContent.length,D=Math.min(_.start,b);_=_.end===void 0?D:Math.min(_.end,b),!a.extend&&D>_&&(b=_,_=D,D=b),b=Li(g,D);var G=Li(g,_);b&&G&&(a.rangeCount!==1||a.anchorNode!==b.node||a.anchorOffset!==b.offset||a.focusNode!==G.node||a.focusOffset!==G.offset)&&(c=c.createRange(),c.setStart(b.node,b.offset),a.removeAllRanges(),D>_?(a.addRange(c),a.extend(G.node,G.offset)):(c.setEnd(G.node,G.offset),a.addRange(c)))}}for(c=[],a=g;a=a.parentNode;)a.nodeType===1&&c.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<c.length;g++)a=c[g],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var ed=l&&"documentMode"in document&&11>=document.documentMode,Is=null,pa=null,fc=null,Tr=!1;function td(a,c,g){var _=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;Tr||Is==null||Is!==Je(_)||(_=Is,"selectionStart"in _&&br(_)?_={start:_.selectionStart,end:_.selectionEnd}:(_=(_.ownerDocument&&_.ownerDocument.defaultView||window).getSelection(),_={anchorNode:_.anchorNode,anchorOffset:_.anchorOffset,focusNode:_.focusNode,focusOffset:_.focusOffset}),fc&&ha(fc,_)||(fc=_,_=ld(pa,"onSelect"),0<_.length&&(c=new uc("onSelect","select",null,c,g),a.push({event:c,listeners:_}),c.target=Is)))}function fl(a,c){var g={};return g[a.toLowerCase()]=c.toLowerCase(),g["Webkit"+a]="webkit"+c,g["Moz"+a]="moz"+c,g}var Fo={animationend:fl("Animation","AnimationEnd"),animationiteration:fl("Animation","AnimationIteration"),animationstart:fl("Animation","AnimationStart"),transitionend:fl("Transition","TransitionEnd")},ds={},hs={};l&&(hs=document.createElement("div").style,"AnimationEvent"in window||(delete Fo.animationend.animation,delete Fo.animationiteration.animation,delete Fo.animationstart.animation),"TransitionEvent"in window||delete Fo.transitionend.transition);function Ns(a){if(ds[a])return ds[a];if(!Fo[a])return a;var c=Fo[a],g;for(g in c)if(c.hasOwnProperty(g)&&g in hs)return ds[a]=c[g];return a}var pc=Ns("animationend"),mc=Ns("animationiteration"),$h=Ns("animationstart"),Qh=Ns("transitionend"),Zh=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function eo(a,c){Zh.set(a,c),s(c,[a])}for(var nd=0;nd<ef.length;nd++){var gc=ef[nd],vc=gc.toLowerCase(),hm=gc[0].toUpperCase()+gc.slice(1);eo(vc,"on"+hm)}eo(pc,"onAnimationEnd"),eo(mc,"onAnimationIteration"),eo($h,"onAnimationStart"),eo("dblclick","onDoubleClick"),eo("focusin","onFocus"),eo("focusout","onBlur"),eo(Qh,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ko="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rd=new Set("cancel close invalid load scroll toggle".split(" ").concat(ko));function id(a,c,g){var _=a.type||"unknown-event";a.currentTarget=g,U(_,c,void 0,a),a.currentTarget=null}function pl(a,c){c=(c&4)!==0;for(var g=0;g<a.length;g++){var _=a[g],b=_.event;_=_.listeners;e:{var D=void 0;if(c)for(var G=_.length-1;0<=G;G--){var re=_[G],he=re.instance,be=re.currentTarget;if(re=re.listener,he!==D&&b.isPropagationStopped())break e;id(b,re,be),D=he}else for(G=0;G<_.length;G++){if(re=_[G],he=re.instance,be=re.currentTarget,re=re.listener,he!==D&&b.isPropagationStopped())break e;id(b,re,be),D=he}}}if(kr)throw a=Qt,kr=!1,Qt=null,a}function Hn(a,c){var g=c[va];g===void 0&&(g=c[va]=new Set);var _=a+"__bubble";g.has(_)||(od(c,a,2,!1),g.add(_))}function sd(a,c,g){var _=0;c&&(_|=4),od(g,a,_,c)}var yc="_reactListening"+Math.random().toString(36).slice(2);function ml(a){if(!a[yc]){a[yc]=!0,n.forEach(function(g){g!=="selectionchange"&&(rd.has(g)||sd(g,!1,a),sd(g,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[yc]||(c[yc]=!0,sd("selectionchange",!1,c))}}function od(a,c,g,_){switch(nm(c)){case 1:var b=Hu;break;case 4:b=Hh;break;default:b=zu}g=b.bind(null,c,g,a),b=void 0,!lr||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(b=!0),_?b!==void 0?a.addEventListener(c,g,{capture:!0,passive:b}):a.addEventListener(c,g,!0):b!==void 0?a.addEventListener(c,g,{passive:b}):a.addEventListener(c,g,!1)}function ad(a,c,g,_,b){var D=_;if((c&1)===0&&(c&2)===0&&_!==null)e:for(;;){if(_===null)return;var G=_.tag;if(G===3||G===4){var re=_.stateNode.containerInfo;if(re===b||re.nodeType===8&&re.parentNode===b)break;if(G===4)for(G=_.return;G!==null;){var he=G.tag;if((he===3||he===4)&&(he=G.stateNode.containerInfo,he===b||he.nodeType===8&&he.parentNode===b))return;G=G.return}for(;re!==null;){if(G=Oo(re),G===null)return;if(he=G.tag,he===5||he===6){_=D=G;continue e}re=re.parentNode}}_=_.return}Xn(function(){var be=D,qe=We(g),et=[];e:{var Xe=Zh.get(a);if(Xe!==void 0){var _t=uc,Mt=a;switch(a){case"keypress":if(sa(g)===0)break e;case"keydown":case"keyup":_t=qu;break;case"focusin":Mt="focus",_t=Wu;break;case"focusout":Mt="blur",_t=Wu;break;case"beforeblur":case"afterblur":_t=Wu;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_t=Gh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_t=Po;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_t=$s;break;case pc:case mc:case $h:_t=rm;break;case Qh:_t=ca;break;case"scroll":_t=il;break;case"wheel":_t=Jh;break;case"copy":case"cut":case"paste":_t=jh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_t=Di}var Tt=(c&4)!==0,Cr=!Tt&&a==="scroll",Ee=Tt?Xe!==null?Xe+"Capture":null:Xe;Tt=[];for(var fe=be,_e;fe!==null;){_e=fe;var at=_e.stateNode;if(_e.tag===5&&at!==null&&(_e=at,Ee!==null&&(at=un(fe,Ee),at!=null&&Tt.push(gl(fe,at,_e)))),Cr)break;fe=fe.return}0<Tt.length&&(Xe=new _t(Xe,Mt,null,g,qe),et.push({event:Xe,listeners:Tt}))}}if((c&7)===0){e:{if(Xe=a==="mouseover"||a==="pointerover",_t=a==="mouseout"||a==="pointerout",Xe&&g!==He&&(Mt=g.relatedTarget||g.fromElement)&&(Oo(Mt)||Mt[Ii]))break e;if((_t||Xe)&&(Xe=qe.window===qe?qe:(Xe=qe.ownerDocument)?Xe.defaultView||Xe.parentWindow:window,_t?(Mt=g.relatedTarget||g.toElement,_t=be,Mt=Mt?Oo(Mt):null,Mt!==null&&(Cr=J(Mt),Mt!==Cr||Mt.tag!==5&&Mt.tag!==6)&&(Mt=null)):(_t=null,Mt=be),_t!==Mt)){if(Tt=Gh,at="onMouseLeave",Ee="onMouseEnter",fe="mouse",(a==="pointerout"||a==="pointerover")&&(Tt=Di,at="onPointerLeave",Ee="onPointerEnter",fe="pointer"),Cr=_t==null?Xe:cr(_t),_e=Mt==null?Xe:cr(Mt),Xe=new Tt(at,fe+"leave",_t,g,qe),Xe.target=Cr,Xe.relatedTarget=_e,at=null,Oo(qe)===be&&(Tt=new Tt(Ee,fe+"enter",Mt,g,qe),Tt.target=_e,Tt.relatedTarget=Cr,at=Tt),Cr=at,_t&&Mt)t:{for(Tt=_t,Ee=Mt,fe=0,_e=Tt;_e;_e=ma(_e))fe++;for(_e=0,at=Ee;at;at=ma(at))_e++;for(;0<fe-_e;)Tt=ma(Tt),fe--;for(;0<_e-fe;)Ee=ma(Ee),_e--;for(;fe--;){if(Tt===Ee||Ee!==null&&Tt===Ee.alternate)break t;Tt=ma(Tt),Ee=ma(Ee)}Tt=null}else Tt=null;_t!==null&&fm(et,Xe,_t,Tt,!1),Mt!==null&&Cr!==null&&fm(et,Cr,Mt,Tt,!0)}}e:{if(Xe=be?cr(be):window,_t=Xe.nodeName&&Xe.nodeName.toLowerCase(),_t==="select"||_t==="input"&&Xe.type==="file")var Pt=um;else if($u(Xe))if(dl)Pt=Zn;else{Pt=dm;var Ht=hl}else(_t=Xe.nodeName)&&_t.toLowerCase()==="input"&&(Xe.type==="checkbox"||Xe.type==="radio")&&(Pt=Yh);if(Pt&&(Pt=Pt(a,be))){cl(et,Pt,g,qe);break e}Ht&&Ht(a,Xe,be),a==="focusout"&&(Ht=Xe._wrapperState)&&Ht.controlled&&Xe.type==="number"&&yt(Xe,"number",Xe.value)}switch(Ht=be?cr(be):window,a){case"focusin":($u(Ht)||Ht.contentEditable==="true")&&(Is=Ht,pa=be,fc=null);break;case"focusout":fc=pa=Is=null;break;case"mousedown":Tr=!0;break;case"contextmenu":case"mouseup":case"dragend":Tr=!1,td(et,g,qe);break;case"selectionchange":if(ed)break;case"keydown":case"keyup":td(et,g,qe)}var zt;if(oi)e:{switch(a){case"compositionstart":var Yt="onCompositionStart";break e;case"compositionend":Yt="onCompositionEnd";break e;case"compositionupdate":Yt="onCompositionUpdate";break e}Yt=void 0}else Io?qh(a,g)&&(Yt="onCompositionEnd"):a==="keydown"&&g.keyCode===229&&(Yt="onCompositionStart");Yt&&(al&&g.locale!=="ko"&&(Io||Yt!=="onCompositionStart"?Yt==="onCompositionEnd"&&Io&&(zt=cc()):(cs=qe,zh="value"in cs?cs.value:cs.textContent,Io=!0)),Ht=ld(be,Yt),0<Ht.length&&(Yt=new Vh(Yt,a,null,g,qe),et.push({event:Yt,listeners:Ht}),zt?Yt.data=zt:(zt=Yu(g),zt!==null&&(Yt.data=zt)))),(zt=Kn?lm(a,g):dc(a,g))&&(be=ld(be,"onBeforeInput"),0<be.length&&(qe=new Vh("onBeforeInput","beforeinput",null,g,qe),et.push({event:qe,listeners:be}),qe.data=zt))}pl(et,c)})}function gl(a,c,g){return{instance:a,listener:c,currentTarget:g}}function ld(a,c){for(var g=c+"Capture",_=[];a!==null;){var b=a,D=b.stateNode;b.tag===5&&D!==null&&(b=D,D=un(a,g),D!=null&&_.unshift(gl(a,D,b)),D=un(a,c),D!=null&&_.push(gl(a,D,b))),a=a.return}return _}function ma(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function fm(a,c,g,_,b){for(var D=c._reactName,G=[];g!==null&&g!==_;){var re=g,he=re.alternate,be=re.stateNode;if(he!==null&&he===_)break;re.tag===5&&be!==null&&(re=be,b?(he=un(g,D),he!=null&&G.unshift(gl(g,he,re))):b||(he=un(g,D),he!=null&&G.push(gl(g,he,re)))),g=g.return}G.length!==0&&a.push({event:c,listeners:G})}var a0=/\r\n?/g,pm=/\u0000|\uFFFD/g;function tf(a){return(typeof a=="string"?a:""+a).replace(a0,`
`).replace(pm,"")}function Ac(a,c,g){if(c=tf(c),tf(a)!==c&&g)throw Error(t(425))}function Ec(){}var vl=null,nf=null;function rf(a,c){return a==="textarea"||a==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var sf=typeof setTimeout=="function"?setTimeout:void 0,of=typeof clearTimeout=="function"?clearTimeout:void 0,cd=typeof Promise=="function"?Promise:void 0,l0=typeof queueMicrotask=="function"?queueMicrotask:typeof cd<"u"?function(a){return cd.resolve(null).then(a).catch(mm)}:sf;function mm(a){setTimeout(function(){throw a})}function ud(a,c){var g=c,_=0;do{var b=g.nextSibling;if(a.removeChild(g),b&&b.nodeType===8)if(g=b.data,g==="/$"){if(_===0){a.removeChild(b),lc(c);return}_--}else g!=="$"&&g!=="$?"&&g!=="$!"||_++;g=b}while(g);lc(c)}function to(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return a}function af(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var g=a.data;if(g==="$"||g==="$!"||g==="$?"){if(c===0)return a;c--}else g==="/$"&&c++}a=a.previousSibling}return null}var ga=Math.random().toString(36).slice(2),_r="__reactFiber$"+ga,yl="__reactProps$"+ga,Ii="__reactContainer$"+ga,va="__reactEvents$"+ga,dd="__reactListeners$"+ga,hd="__reactHandles$"+ga;function Oo(a){var c=a[_r];if(c)return c;for(var g=a.parentNode;g;){if(c=g[Ii]||g[_r]){if(g=c.alternate,c.child!==null||g!==null&&g.child!==null)for(a=af(a);a!==null;){if(g=a[_r])return g;a=af(a)}return c}a=g,g=a.parentNode}return null}function no(a){return a=a[_r]||a[Ii],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function cr(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(t(33))}function fd(a){return a[yl]||null}var lf=[],Rr=-1;function rr(a){return{current:a}}function zn(a){0>Rr||(a.current=lf[Rr],lf[Rr]=null,Rr--)}function kn(a,c){Rr++,lf[Rr]=a.current,a.current=c}var ro={},Ur=rr(ro),ai=rr(!1),io=ro;function ya(a,c){var g=a.type.contextTypes;if(!g)return ro;var _=a.stateNode;if(_&&_.__reactInternalMemoizedUnmaskedChildContext===c)return _.__reactInternalMemoizedMaskedChildContext;var b={},D;for(D in g)b[D]=c[D];return _&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=c,a.__reactInternalMemoizedMaskedChildContext=b),b}function Yr(a){return a=a.childContextTypes,a!=null}function xc(){zn(ai),zn(Ur)}function cf(a,c,g){if(Ur.current!==ro)throw Error(t(168));kn(Ur,c),kn(ai,g)}function _c(a,c,g){var _=a.stateNode;if(c=c.childContextTypes,typeof _.getChildContext!="function")return g;_=_.getChildContext();for(var b in _)if(!(b in c))throw Error(t(108,tt(a)||"Unknown",b));return ne({},g,_)}function Aa(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||ro,io=Ur.current,kn(Ur,a),kn(ai,ai.current),!0}function uf(a,c,g){var _=a.stateNode;if(!_)throw Error(t(169));g?(a=_c(a,c,io),_.__reactInternalMemoizedMergedChildContext=a,zn(ai),zn(Ur),kn(Ur,a)):zn(ai),kn(ai,g)}var fs=null,Cc=!1,pd=!1;function wc(a){fs===null?fs=[a]:fs.push(a)}function gm(a){Cc=!0,wc(a)}function Fs(){if(!pd&&fs!==null){pd=!0;var a=0,c=wn;try{var g=fs;for(wn=1;a<g.length;a++){var _=g[a];do _=_(!0);while(_!==null)}fs=null,Cc=!1}catch(b){throw fs!==null&&(fs=fs.slice(a+1)),ie(je,Fs),b}finally{wn=c,pd=!1}}return null}var Ea=[],xi=0,md=null,gd=0,li=[],Dr=0,xa=null,lt=1,Qi="";function so(a,c){Ea[xi++]=gd,Ea[xi++]=md,md=a,gd=c}function df(a,c,g){li[Dr++]=lt,li[Dr++]=Qi,li[Dr++]=xa,xa=a;var _=lt;a=Qi;var b=32-jt(_)-1;_&=~(1<<b),g+=1;var D=32-jt(c)+b;if(30<D){var G=b-b%5;D=(_&(1<<G)-1).toString(32),_>>=G,b-=G,lt=1<<32-jt(c)+b|g<<b|_,Qi=D+a}else lt=1<<D|g<<b|_,Qi=a}function hf(a){a.return!==null&&(so(a,1),df(a,1,0))}function oo(a){for(;a===md;)md=Ea[--xi],Ea[xi]=null,gd=Ea[--xi],Ea[xi]=null;for(;a===xa;)xa=li[--Dr],li[Dr]=null,Qi=li[--Dr],li[Dr]=null,lt=li[--Dr],li[Dr]=null}var Hr=null,ci=null,Vn=!1,Zi=null;function ff(a,c){var g=zs(5,null,null,0);g.elementType="DELETED",g.stateNode=c,g.return=a,c=a.deletions,c===null?(a.deletions=[g],a.flags|=16):c.push(g)}function pf(a,c){switch(a.tag){case 5:var g=a.type;return c=c.nodeType!==1||g.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(a.stateNode=c,Hr=a,ci=to(c.firstChild),!0):!1;case 6:return c=a.pendingProps===""||c.nodeType!==3?null:c,c!==null?(a.stateNode=c,Hr=a,ci=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(g=xa!==null?{id:lt,overflow:Qi}:null,a.memoizedState={dehydrated:c,treeContext:g,retryLane:1073741824},g=zs(18,null,null,0),g.stateNode=c,g.return=a,a.child=g,Hr=a,ci=null,!0):!1;default:return!1}}function vd(a){return(a.mode&1)!==0&&(a.flags&128)===0}function yd(a){if(Vn){var c=ci;if(c){var g=c;if(!pf(a,c)){if(vd(a))throw Error(t(418));c=to(g.nextSibling);var _=Hr;c&&pf(a,c)?ff(_,g):(a.flags=a.flags&-4097|2,Vn=!1,Hr=a)}}else{if(vd(a))throw Error(t(418));a.flags=a.flags&-4097|2,Vn=!1,Hr=a}}}function Ad(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;Hr=a}function Al(a){if(a!==Hr)return!1;if(!Vn)return Ad(a),Vn=!0,!1;var c;if((c=a.tag!==3)&&!(c=a.tag!==5)&&(c=a.type,c=c!=="head"&&c!=="body"&&!rf(a.type,a.memoizedProps)),c&&(c=ci)){if(vd(a))throw mf(),Error(t(418));for(;c;)ff(a,c),c=to(c.nextSibling)}if(Ad(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(t(317));e:{for(a=a.nextSibling,c=0;a;){if(a.nodeType===8){var g=a.data;if(g==="/$"){if(c===0){ci=to(a.nextSibling);break e}c--}else g!=="$"&&g!=="$!"&&g!=="$?"||c++}a=a.nextSibling}ci=null}}else ci=Hr?to(a.stateNode.nextSibling):null;return!0}function mf(){for(var a=ci;a;)a=to(a.nextSibling)}function Uo(){ci=Hr=null,Vn=!1}function El(a){Zi===null?Zi=[a]:Zi.push(a)}var c0=R.ReactCurrentBatchConfig;function Sc(a,c,g){if(a=g.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(g._owner){if(g=g._owner,g){if(g.tag!==1)throw Error(t(309));var _=g.stateNode}if(!_)throw Error(t(147,a));var b=_,D=""+a;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===D?c.ref:(c=function(G){var re=b.refs;G===null?delete re[D]:re[D]=G},c._stringRef=D,c)}if(typeof a!="string")throw Error(t(284));if(!g._owner)throw Error(t(290,a))}return a}function Bc(a,c){throw a=Object.prototype.toString.call(c),Error(t(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a))}function gf(a){var c=a._init;return c(a._payload)}function vf(a){function c(Ee,fe){if(a){var _e=Ee.deletions;_e===null?(Ee.deletions=[fe],Ee.flags|=16):_e.push(fe)}}function g(Ee,fe){if(!a)return null;for(;fe!==null;)c(Ee,fe),fe=fe.sibling;return null}function _(Ee,fe){for(Ee=new Map;fe!==null;)fe.key!==null?Ee.set(fe.key,fe):Ee.set(fe.index,fe),fe=fe.sibling;return Ee}function b(Ee,fe){return Ee=Dl(Ee,fe),Ee.index=0,Ee.sibling=null,Ee}function D(Ee,fe,_e){return Ee.index=_e,a?(_e=Ee.alternate,_e!==null?(_e=_e.index,_e<fe?(Ee.flags|=2,fe):_e):(Ee.flags|=2,fe)):(Ee.flags|=1048576,fe)}function G(Ee){return a&&Ee.alternate===null&&(Ee.flags|=2),Ee}function re(Ee,fe,_e,at){return fe===null||fe.tag!==6?(fe=M0(_e,Ee.mode,at),fe.return=Ee,fe):(fe=b(fe,_e),fe.return=Ee,fe)}function he(Ee,fe,_e,at){var Pt=_e.type;return Pt===O?qe(Ee,fe,_e.props.children,at,_e.key):fe!==null&&(fe.elementType===Pt||typeof Pt=="object"&&Pt!==null&&Pt.$$typeof===pe&&gf(Pt)===fe.type)?(at=b(fe,_e.props),at.ref=Sc(Ee,fe,_e),at.return=Ee,at):(at=Um(_e.type,_e.key,_e.props,null,Ee.mode,at),at.ref=Sc(Ee,fe,_e),at.return=Ee,at)}function be(Ee,fe,_e,at){return fe===null||fe.tag!==4||fe.stateNode.containerInfo!==_e.containerInfo||fe.stateNode.implementation!==_e.implementation?(fe=T0(_e,Ee.mode,at),fe.return=Ee,fe):(fe=b(fe,_e.children||[]),fe.return=Ee,fe)}function qe(Ee,fe,_e,at,Pt){return fe===null||fe.tag!==7?(fe=jc(_e,Ee.mode,at,Pt),fe.return=Ee,fe):(fe=b(fe,_e),fe.return=Ee,fe)}function et(Ee,fe,_e){if(typeof fe=="string"&&fe!==""||typeof fe=="number")return fe=M0(""+fe,Ee.mode,_e),fe.return=Ee,fe;if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case N:return _e=Um(fe.type,fe.key,fe.props,null,Ee.mode,_e),_e.ref=Sc(Ee,null,fe),_e.return=Ee,_e;case I:return fe=T0(fe,Ee.mode,_e),fe.return=Ee,fe;case pe:var at=fe._init;return et(Ee,at(fe._payload),_e)}if(Lt(fe)||ce(fe))return fe=jc(fe,Ee.mode,_e,null),fe.return=Ee,fe;Bc(Ee,fe)}return null}function Xe(Ee,fe,_e,at){var Pt=fe!==null?fe.key:null;if(typeof _e=="string"&&_e!==""||typeof _e=="number")return Pt!==null?null:re(Ee,fe,""+_e,at);if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case N:return _e.key===Pt?he(Ee,fe,_e,at):null;case I:return _e.key===Pt?be(Ee,fe,_e,at):null;case pe:return Pt=_e._init,Xe(Ee,fe,Pt(_e._payload),at)}if(Lt(_e)||ce(_e))return Pt!==null?null:qe(Ee,fe,_e,at,null);Bc(Ee,_e)}return null}function _t(Ee,fe,_e,at,Pt){if(typeof at=="string"&&at!==""||typeof at=="number")return Ee=Ee.get(_e)||null,re(fe,Ee,""+at,Pt);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case N:return Ee=Ee.get(at.key===null?_e:at.key)||null,he(fe,Ee,at,Pt);case I:return Ee=Ee.get(at.key===null?_e:at.key)||null,be(fe,Ee,at,Pt);case pe:var Ht=at._init;return _t(Ee,fe,_e,Ht(at._payload),Pt)}if(Lt(at)||ce(at))return Ee=Ee.get(_e)||null,qe(fe,Ee,at,Pt,null);Bc(fe,at)}return null}function Mt(Ee,fe,_e,at){for(var Pt=null,Ht=null,zt=fe,Yt=fe=0,ei=null;zt!==null&&Yt<_e.length;Yt++){zt.index>Yt?(ei=zt,zt=null):ei=zt.sibling;var Rn=Xe(Ee,zt,_e[Yt],at);if(Rn===null){zt===null&&(zt=ei);break}a&&zt&&Rn.alternate===null&&c(Ee,zt),fe=D(Rn,fe,Yt),Ht===null?Pt=Rn:Ht.sibling=Rn,Ht=Rn,zt=ei}if(Yt===_e.length)return g(Ee,zt),Vn&&so(Ee,Yt),Pt;if(zt===null){for(;Yt<_e.length;Yt++)zt=et(Ee,_e[Yt],at),zt!==null&&(fe=D(zt,fe,Yt),Ht===null?Pt=zt:Ht.sibling=zt,Ht=zt);return Vn&&so(Ee,Yt),Pt}for(zt=_(Ee,zt);Yt<_e.length;Yt++)ei=_t(zt,Ee,Yt,_e[Yt],at),ei!==null&&(a&&ei.alternate!==null&&zt.delete(ei.key===null?Yt:ei.key),fe=D(ei,fe,Yt),Ht===null?Pt=ei:Ht.sibling=ei,Ht=ei);return a&&zt.forEach(function(Pl){return c(Ee,Pl)}),Vn&&so(Ee,Yt),Pt}function Tt(Ee,fe,_e,at){var Pt=ce(_e);if(typeof Pt!="function")throw Error(t(150));if(_e=Pt.call(_e),_e==null)throw Error(t(151));for(var Ht=Pt=null,zt=fe,Yt=fe=0,ei=null,Rn=_e.next();zt!==null&&!Rn.done;Yt++,Rn=_e.next()){zt.index>Yt?(ei=zt,zt=null):ei=zt.sibling;var Pl=Xe(Ee,zt,Rn.value,at);if(Pl===null){zt===null&&(zt=ei);break}a&&zt&&Pl.alternate===null&&c(Ee,zt),fe=D(Pl,fe,Yt),Ht===null?Pt=Pl:Ht.sibling=Pl,Ht=Pl,zt=ei}if(Rn.done)return g(Ee,zt),Vn&&so(Ee,Yt),Pt;if(zt===null){for(;!Rn.done;Yt++,Rn=_e.next())Rn=et(Ee,Rn.value,at),Rn!==null&&(fe=D(Rn,fe,Yt),Ht===null?Pt=Rn:Ht.sibling=Rn,Ht=Rn);return Vn&&so(Ee,Yt),Pt}for(zt=_(Ee,zt);!Rn.done;Yt++,Rn=_e.next())Rn=_t(zt,Ee,Yt,Rn.value,at),Rn!==null&&(a&&Rn.alternate!==null&&zt.delete(Rn.key===null?Yt:Rn.key),fe=D(Rn,fe,Yt),Ht===null?Pt=Rn:Ht.sibling=Rn,Ht=Rn);return a&&zt.forEach(function(XB){return c(Ee,XB)}),Vn&&so(Ee,Yt),Pt}function Cr(Ee,fe,_e,at){if(typeof _e=="object"&&_e!==null&&_e.type===O&&_e.key===null&&(_e=_e.props.children),typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case N:e:{for(var Pt=_e.key,Ht=fe;Ht!==null;){if(Ht.key===Pt){if(Pt=_e.type,Pt===O){if(Ht.tag===7){g(Ee,Ht.sibling),fe=b(Ht,_e.props.children),fe.return=Ee,Ee=fe;break e}}else if(Ht.elementType===Pt||typeof Pt=="object"&&Pt!==null&&Pt.$$typeof===pe&&gf(Pt)===Ht.type){g(Ee,Ht.sibling),fe=b(Ht,_e.props),fe.ref=Sc(Ee,Ht,_e),fe.return=Ee,Ee=fe;break e}g(Ee,Ht);break}else c(Ee,Ht);Ht=Ht.sibling}_e.type===O?(fe=jc(_e.props.children,Ee.mode,at,_e.key),fe.return=Ee,Ee=fe):(at=Um(_e.type,_e.key,_e.props,null,Ee.mode,at),at.ref=Sc(Ee,fe,_e),at.return=Ee,Ee=at)}return G(Ee);case I:e:{for(Ht=_e.key;fe!==null;){if(fe.key===Ht)if(fe.tag===4&&fe.stateNode.containerInfo===_e.containerInfo&&fe.stateNode.implementation===_e.implementation){g(Ee,fe.sibling),fe=b(fe,_e.children||[]),fe.return=Ee,Ee=fe;break e}else{g(Ee,fe);break}else c(Ee,fe);fe=fe.sibling}fe=T0(_e,Ee.mode,at),fe.return=Ee,Ee=fe}return G(Ee);case pe:return Ht=_e._init,Cr(Ee,fe,Ht(_e._payload),at)}if(Lt(_e))return Mt(Ee,fe,_e,at);if(ce(_e))return Tt(Ee,fe,_e,at);Bc(Ee,_e)}return typeof _e=="string"&&_e!==""||typeof _e=="number"?(_e=""+_e,fe!==null&&fe.tag===6?(g(Ee,fe.sibling),fe=b(fe,_e),fe.return=Ee,Ee=fe):(g(Ee,fe),fe=M0(_e,Ee.mode,at),fe.return=Ee,Ee=fe),G(Ee)):g(Ee,fe)}return Cr}var _a=vf(!0),bc=vf(!1),Ca=rr(null),wa=null,ao=null,xl=null;function Sa(){xl=ao=wa=null}function Mc(a){var c=Ca.current;zn(Ca),a._currentValue=c}function Tc(a,c,g){for(;a!==null;){var _=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,_!==null&&(_.childLanes|=c)):_!==null&&(_.childLanes&c)!==c&&(_.childLanes|=c),a===g)break;a=a.return}}function Ho(a,c){wa=a,xl=ao=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&c)!==0&&(ln=!0),a.firstContext=null)}function Ni(a){var c=a._currentValue;if(xl!==a)if(a={context:a,memoizedValue:c,next:null},ao===null){if(wa===null)throw Error(t(308));ao=a,wa.dependencies={lanes:0,firstContext:a}}else ao=ao.next=a;return c}var lo=null;function yf(a){lo===null?lo=[a]:lo.push(a)}function Rc(a,c,g,_){var b=c.interleaved;return b===null?(g.next=g,yf(c)):(g.next=b.next,b.next=g),c.interleaved=g,ps(a,_)}function ps(a,c){a.lanes|=c;var g=a.alternate;for(g!==null&&(g.lanes|=c),g=a,a=a.return;a!==null;)a.childLanes|=c,g=a.alternate,g!==null&&(g.childLanes|=c),g=a,a=a.return;return g.tag===3?g.stateNode:null}var Ln=!1;function an(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ur(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function In(a,c){return{eventTime:a,lane:c,tag:0,payload:null,callback:null,next:null}}function qn(a,c,g){var _=a.updateQueue;if(_===null)return null;if(_=_.shared,(Tn&2)!==0){var b=_.pending;return b===null?c.next=c:(c.next=b.next,b.next=c),_.pending=c,ps(a,g)}return b=_.interleaved,b===null?(c.next=c,yf(_)):(c.next=b.next,b.next=c),_.interleaved=c,ps(a,g)}function $r(a,c,g){if(c=c.updateQueue,c!==null&&(c=c.shared,(g&4194240)!==0)){var _=c.lanes;_&=a.pendingLanes,g|=_,c.lanes=g,tl(a,g)}}function Ba(a,c){var g=a.updateQueue,_=a.alternate;if(_!==null&&(_=_.updateQueue,g===_)){var b=null,D=null;if(g=g.firstBaseUpdate,g!==null){do{var G={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};D===null?b=D=G:D=D.next=G,g=g.next}while(g!==null);D===null?b=D=c:D=D.next=c}else b=D=c;g={baseState:_.baseState,firstBaseUpdate:b,lastBaseUpdate:D,shared:_.shared,effects:_.effects},a.updateQueue=g;return}a=g.lastBaseUpdate,a===null?g.firstBaseUpdate=c:a.next=c,g.lastBaseUpdate=c}function ir(a,c,g,_){var b=a.updateQueue;Ln=!1;var D=b.firstBaseUpdate,G=b.lastBaseUpdate,re=b.shared.pending;if(re!==null){b.shared.pending=null;var he=re,be=he.next;he.next=null,G===null?D=be:G.next=be,G=he;var qe=a.alternate;qe!==null&&(qe=qe.updateQueue,re=qe.lastBaseUpdate,re!==G&&(re===null?qe.firstBaseUpdate=be:re.next=be,qe.lastBaseUpdate=he))}if(D!==null){var et=b.baseState;G=0,qe=be=he=null,re=D;do{var Xe=re.lane,_t=re.eventTime;if((_&Xe)===Xe){qe!==null&&(qe=qe.next={eventTime:_t,lane:0,tag:re.tag,payload:re.payload,callback:re.callback,next:null});e:{var Mt=a,Tt=re;switch(Xe=c,_t=g,Tt.tag){case 1:if(Mt=Tt.payload,typeof Mt=="function"){et=Mt.call(_t,et,Xe);break e}et=Mt;break e;case 3:Mt.flags=Mt.flags&-65537|128;case 0:if(Mt=Tt.payload,Xe=typeof Mt=="function"?Mt.call(_t,et,Xe):Mt,Xe==null)break e;et=ne({},et,Xe);break e;case 2:Ln=!0}}re.callback!==null&&re.lane!==0&&(a.flags|=64,Xe=b.effects,Xe===null?b.effects=[re]:Xe.push(re))}else _t={eventTime:_t,lane:Xe,tag:re.tag,payload:re.payload,callback:re.callback,next:null},qe===null?(be=qe=_t,he=et):qe=qe.next=_t,G|=Xe;if(re=re.next,re===null){if(re=b.shared.pending,re===null)break;Xe=re,re=Xe.next,Xe.next=null,b.lastBaseUpdate=Xe,b.shared.pending=null}}while(!0);if(qe===null&&(he=et),b.baseState=he,b.firstBaseUpdate=be,b.lastBaseUpdate=qe,c=b.shared.interleaved,c!==null){b=c;do G|=b.lane,b=b.next;while(b!==c)}else D===null&&(b.shared.lanes=0);Uc|=G,a.lanes=G,a.memoizedState=et}}function _l(a,c,g){if(a=c.effects,c.effects=null,a!==null)for(c=0;c<a.length;c++){var _=a[c],b=_.callback;if(b!==null){if(_.callback=null,_=g,typeof b!="function")throw Error(t(191,b));b.call(_)}}}var ks={},Fi=rr(ks),ba=rr(ks),co=rr(ks);function fr(a){if(a===ks)throw Error(t(174));return a}function Dc(a,c){switch(kn(co,c),kn(ba,a),kn(Fi,ks),a=c.nodeType,a){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:Ve(null,"");break;default:a=a===8?c.parentNode:c,c=a.namespaceURI||null,a=a.tagName,c=Ve(c,a)}zn(Fi),kn(Fi,c)}function zo(){zn(Fi),zn(ba),zn(co)}function Ma(a){fr(co.current);var c=fr(Fi.current),g=Ve(c,a.type);c!==g&&(kn(ba,a),kn(Fi,g))}function Cl(a){ba.current===a&&(zn(Fi),zn(ba))}var Wn=rr(0);function ms(a){for(var c=a;c!==null;){if(c.tag===13){var g=c.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||g.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var wl=[];function Os(){for(var a=0;a<wl.length;a++)wl[a]._workInProgressVersionPrimary=null;wl.length=0}var Ta=R.ReactCurrentDispatcher,Ra=R.ReactCurrentBatchConfig,uo=0,Gn=null,sr=null,Sn=null,gs=!1,Qr=!1,Go=0,_i=0;function zr(){throw Error(t(321))}function Pc(a,c){if(c===null)return!1;for(var g=0;g<c.length&&g<a.length;g++)if(!Pi(a[g],c[g]))return!1;return!0}function Lc(a,c,g,_,b,D){if(uo=D,Gn=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Ta.current=a===null||a.memoizedState===null?Cm:wm,a=g(_,b),Qr){D=0;do{if(Qr=!1,Go=0,25<=D)throw Error(t(301));D+=1,Sn=sr=null,c.updateQueue=null,Ta.current=Sm,a=g(_,b)}while(Qr)}if(Ta.current=Bd,c=sr!==null&&sr.next!==null,uo=0,Sn=sr=Gn=null,gs=!1,c)throw Error(t(300));return a}function Af(){var a=Go!==0;return Go=0,a}function Gr(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sn===null?Gn.memoizedState=Sn=a:Sn=Sn.next=a,Sn}function ki(){if(sr===null){var a=Gn.alternate;a=a!==null?a.memoizedState:null}else a=sr.next;var c=Sn===null?Gn.memoizedState:Sn.next;if(c!==null)Sn=c,sr=a;else{if(a===null)throw Error(t(310));sr=a,a={memoizedState:sr.memoizedState,baseState:sr.baseState,baseQueue:sr.baseQueue,queue:sr.queue,next:null},Sn===null?Gn.memoizedState=Sn=a:Sn=Sn.next=a}return Sn}function Sl(a,c){return typeof c=="function"?c(a):c}function Ic(a){var c=ki(),g=c.queue;if(g===null)throw Error(t(311));g.lastRenderedReducer=a;var _=sr,b=_.baseQueue,D=g.pending;if(D!==null){if(b!==null){var G=b.next;b.next=D.next,D.next=G}_.baseQueue=b=D,g.pending=null}if(b!==null){D=b.next,_=_.baseState;var re=G=null,he=null,be=D;do{var qe=be.lane;if((uo&qe)===qe)he!==null&&(he=he.next={lane:0,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null}),_=be.hasEagerState?be.eagerState:a(_,be.action);else{var et={lane:qe,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null};he===null?(re=he=et,G=_):he=he.next=et,Gn.lanes|=qe,Uc|=qe}be=be.next}while(be!==null&&be!==D);he===null?G=_:he.next=re,Pi(_,c.memoizedState)||(ln=!0),c.memoizedState=_,c.baseState=G,c.baseQueue=he,g.lastRenderedState=_}if(a=g.interleaved,a!==null){b=a;do D=b.lane,Gn.lanes|=D,Uc|=D,b=b.next;while(b!==a)}else b===null&&(g.lanes=0);return[c.memoizedState,g.dispatch]}function ho(a){var c=ki(),g=c.queue;if(g===null)throw Error(t(311));g.lastRenderedReducer=a;var _=g.dispatch,b=g.pending,D=c.memoizedState;if(b!==null){g.pending=null;var G=b=b.next;do D=a(D,G.action),G=G.next;while(G!==b);Pi(D,c.memoizedState)||(ln=!0),c.memoizedState=D,c.baseQueue===null&&(c.baseState=D),g.lastRenderedState=D}return[D,_]}function Ef(){}function xf(a,c){var g=Gn,_=ki(),b=c(),D=!Pi(_.memoizedState,b);if(D&&(_.memoizedState=b,ln=!0),_=_.queue,wf(vm.bind(null,g,_,a),[a]),_.getSnapshot!==c||D||Sn!==null&&Sn.memoizedState.tag&1){if(g.flags|=2048,vs(9,Nc.bind(null,g,_,b,c),void 0,null),Zr===null)throw Error(t(349));(uo&30)!==0||Ed(g,c,b)}return b}function Ed(a,c,g){a.flags|=16384,a={getSnapshot:c,value:g},c=Gn.updateQueue,c===null?(c={lastEffect:null,stores:null},Gn.updateQueue=c,c.stores=[a]):(g=c.stores,g===null?c.stores=[a]:g.push(a))}function Nc(a,c,g,_){c.value=g,c.getSnapshot=_,ym(c)&&_f(a)}function vm(a,c,g){return g(function(){ym(c)&&_f(a)})}function ym(a){var c=a.getSnapshot;a=a.value;try{var g=c();return!Pi(a,g)}catch{return!0}}function _f(a){var c=ps(a,1);c!==null&&vo(c,a,1,-1)}function Cf(a){var c=Gr();return typeof a=="function"&&(a=a()),c.memoizedState=c.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Sl,lastRenderedState:a},c.queue=a,a=a.dispatch=Da.bind(null,Gn,a),[c.memoizedState,a]}function vs(a,c,g,_){return a={tag:a,create:c,destroy:g,deps:_,next:null},c=Gn.updateQueue,c===null?(c={lastEffect:null,stores:null},Gn.updateQueue=c,c.lastEffect=a.next=a):(g=c.lastEffect,g===null?c.lastEffect=a.next=a:(_=g.next,g.next=a,a.next=_,c.lastEffect=a)),a}function Am(){return ki().memoizedState}function Us(a,c,g,_){var b=Gr();Gn.flags|=a,b.memoizedState=vs(1|c,g,void 0,_===void 0?null:_)}function Fc(a,c,g,_){var b=ki();_=_===void 0?null:_;var D=void 0;if(sr!==null){var G=sr.memoizedState;if(D=G.destroy,_!==null&&Pc(_,G.deps)){b.memoizedState=vs(c,g,D,_);return}}Gn.flags|=a,b.memoizedState=vs(1|c,g,D,_)}function ui(a,c){return Us(8390656,8,a,c)}function wf(a,c){return Fc(2048,8,a,c)}function Sf(a,c){return Fc(4,2,a,c)}function Em(a,c){return Fc(4,4,a,c)}function xm(a,c){if(typeof c=="function")return a=a(),c(a),function(){c(null)};if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function Bf(a,c,g){return g=g!=null?g.concat([a]):null,Fc(4,4,xm.bind(null,c,a),g)}function xd(){}function _m(a,c){var g=ki();c=c===void 0?null:c;var _=g.memoizedState;return _!==null&&c!==null&&Pc(c,_[1])?_[0]:(g.memoizedState=[a,c],a)}function Oi(a,c){var g=ki();c=c===void 0?null:c;var _=g.memoizedState;return _!==null&&c!==null&&Pc(c,_[1])?_[0]:(a=a(),g.memoizedState=[a,c],a)}function _d(a,c,g){return(uo&21)===0?(a.baseState&&(a.baseState=!1,ln=!0),a.memoizedState=g):(Pi(g,c)||(g=Fn(),Gn.lanes|=g,Uc|=g,a.baseState=!0),c)}function u0(a,c){var g=wn;wn=g!==0&&4>g?g:4,a(!0);var _=Ra.transition;Ra.transition={};try{a(!1),c()}finally{wn=g,Ra.transition=_}}function fo(){return ki().memoizedState}function Cd(a,c,g){var _=Tl(a);if(g={lane:_,action:g,hasEagerState:!1,eagerState:null,next:null},kc(a))wd(c,g);else if(g=Rc(a,c,g,_),g!==null){var b=Hi();vo(g,a,_,b),Sd(g,c,_)}}function Da(a,c,g){var _=Tl(a),b={lane:_,action:g,hasEagerState:!1,eagerState:null,next:null};if(kc(a))wd(c,b);else{var D=a.alternate;if(a.lanes===0&&(D===null||D.lanes===0)&&(D=c.lastRenderedReducer,D!==null))try{var G=c.lastRenderedState,re=D(G,g);if(b.hasEagerState=!0,b.eagerState=re,Pi(re,G)){var he=c.interleaved;he===null?(b.next=b,yf(c)):(b.next=he.next,he.next=b),c.interleaved=b;return}}catch{}finally{}g=Rc(a,c,b,_),g!==null&&(b=Hi(),vo(g,a,_,b),Sd(g,c,_))}}function kc(a){var c=a.alternate;return a===Gn||c!==null&&c===Gn}function wd(a,c){Qr=gs=!0;var g=a.pending;g===null?c.next=c:(c.next=g.next,g.next=c),a.pending=c}function Sd(a,c,g){if((g&4194240)!==0){var _=c.lanes;_&=a.pendingLanes,g|=_,c.lanes=g,tl(a,g)}}var Bd={readContext:Ni,useCallback:zr,useContext:zr,useEffect:zr,useImperativeHandle:zr,useInsertionEffect:zr,useLayoutEffect:zr,useMemo:zr,useReducer:zr,useRef:zr,useState:zr,useDebugValue:zr,useDeferredValue:zr,useTransition:zr,useMutableSource:zr,useSyncExternalStore:zr,useId:zr,unstable_isNewReconciler:!1},Cm={readContext:Ni,useCallback:function(a,c){return Gr().memoizedState=[a,c===void 0?null:c],a},useContext:Ni,useEffect:ui,useImperativeHandle:function(a,c,g){return g=g!=null?g.concat([a]):null,Us(4194308,4,xm.bind(null,c,a),g)},useLayoutEffect:function(a,c){return Us(4194308,4,a,c)},useInsertionEffect:function(a,c){return Us(4,2,a,c)},useMemo:function(a,c){var g=Gr();return c=c===void 0?null:c,a=a(),g.memoizedState=[a,c],a},useReducer:function(a,c,g){var _=Gr();return c=g!==void 0?g(c):c,_.memoizedState=_.baseState=c,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:c},_.queue=a,a=a.dispatch=Cd.bind(null,Gn,a),[_.memoizedState,a]},useRef:function(a){var c=Gr();return a={current:a},c.memoizedState=a},useState:Cf,useDebugValue:xd,useDeferredValue:function(a){return Gr().memoizedState=a},useTransition:function(){var a=Cf(!1),c=a[0];return a=u0.bind(null,a[1]),Gr().memoizedState=a,[c,a]},useMutableSource:function(){},useSyncExternalStore:function(a,c,g){var _=Gn,b=Gr();if(Vn){if(g===void 0)throw Error(t(407));g=g()}else{if(g=c(),Zr===null)throw Error(t(349));(uo&30)!==0||Ed(_,c,g)}b.memoizedState=g;var D={value:g,getSnapshot:c};return b.queue=D,ui(vm.bind(null,_,D,a),[a]),_.flags|=2048,vs(9,Nc.bind(null,_,D,g,c),void 0,null),g},useId:function(){var a=Gr(),c=Zr.identifierPrefix;if(Vn){var g=Qi,_=lt;g=(_&~(1<<32-jt(_)-1)).toString(32)+g,c=":"+c+"R"+g,g=Go++,0<g&&(c+="H"+g.toString(32)),c+=":"}else g=_i++,c=":"+c+"r"+g.toString(32)+":";return a.memoizedState=c},unstable_isNewReconciler:!1},wm={readContext:Ni,useCallback:_m,useContext:Ni,useEffect:wf,useImperativeHandle:Bf,useInsertionEffect:Sf,useLayoutEffect:Em,useMemo:Oi,useReducer:Ic,useRef:Am,useState:function(){return Ic(Sl)},useDebugValue:xd,useDeferredValue:function(a){var c=ki();return _d(c,sr.memoizedState,a)},useTransition:function(){var a=Ic(Sl)[0],c=ki().memoizedState;return[a,c]},useMutableSource:Ef,useSyncExternalStore:xf,useId:fo,unstable_isNewReconciler:!1},Sm={readContext:Ni,useCallback:_m,useContext:Ni,useEffect:wf,useImperativeHandle:Bf,useInsertionEffect:Sf,useLayoutEffect:Em,useMemo:Oi,useReducer:ho,useRef:Am,useState:function(){return ho(Sl)},useDebugValue:xd,useDeferredValue:function(a){var c=ki();return sr===null?c.memoizedState=a:_d(c,sr.memoizedState,a)},useTransition:function(){var a=ho(Sl)[0],c=ki().memoizedState;return[a,c]},useMutableSource:Ef,useSyncExternalStore:xf,useId:fo,unstable_isNewReconciler:!1};function es(a,c){if(a&&a.defaultProps){c=ne({},c),a=a.defaultProps;for(var g in a)c[g]===void 0&&(c[g]=a[g]);return c}return c}function Oc(a,c,g,_){c=a.memoizedState,g=g(_,c),g=g==null?c:ne({},c,g),a.memoizedState=g,a.lanes===0&&(a.updateQueue.baseState=g)}var bd={isMounted:function(a){return(a=a._reactInternals)?J(a)===a:!1},enqueueSetState:function(a,c,g){a=a._reactInternals;var _=Hi(),b=Tl(a),D=In(_,b);D.payload=c,g!=null&&(D.callback=g),c=qn(a,D,b),c!==null&&(vo(c,a,b,_),$r(c,a,b))},enqueueReplaceState:function(a,c,g){a=a._reactInternals;var _=Hi(),b=Tl(a),D=In(_,b);D.tag=1,D.payload=c,g!=null&&(D.callback=g),c=qn(a,D,b),c!==null&&(vo(c,a,b,_),$r(c,a,b))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var g=Hi(),_=Tl(a),b=In(g,_);b.tag=2,c!=null&&(b.callback=c),c=qn(a,b,_),c!==null&&(vo(c,a,_,g),$r(c,a,_))}};function Bm(a,c,g,_,b,D,G){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(_,D,G):c.prototype&&c.prototype.isPureReactComponent?!ha(g,_)||!ha(b,D):!0}function d(a,c,g){var _=!1,b=ro,D=c.contextType;return typeof D=="object"&&D!==null?D=Ni(D):(b=Yr(c)?io:Ur.current,_=c.contextTypes,D=(_=_!=null)?ya(a,b):ro),c=new c(g,D),a.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=bd,a.stateNode=c,c._reactInternals=a,_&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=D),c}function f(a,c,g,_){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(g,_),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(g,_),c.state!==a&&bd.enqueueReplaceState(c,c.state,null)}function A(a,c,g,_){var b=a.stateNode;b.props=g,b.state=a.memoizedState,b.refs={},an(a);var D=c.contextType;typeof D=="object"&&D!==null?b.context=Ni(D):(D=Yr(c)?io:Ur.current,b.context=ya(a,D)),b.state=a.memoizedState,D=c.getDerivedStateFromProps,typeof D=="function"&&(Oc(a,c,D,g),b.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(c=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),c!==b.state&&bd.enqueueReplaceState(b,b.state,null),ir(a,g,b,_),b.state=a.memoizedState),typeof b.componentDidMount=="function"&&(a.flags|=4194308)}function B(a,c){try{var g="",_=c;do g+=Ie(_),_=_.return;while(_);var b=g}catch(D){b=`
Error generating stack: `+D.message+`
`+D.stack}return{value:a,source:c,stack:b,digest:null}}function T(a,c,g){return{value:a,source:null,stack:g??null,digest:c??null}}function L(a,c){try{console.error(c.value)}catch(g){setTimeout(function(){throw g})}}var Q=typeof WeakMap=="function"?WeakMap:Map;function ge(a,c,g){g=In(-1,g),g.tag=3,g.payload={element:null};var _=c.value;return g.callback=function(){Lm||(Lm=!0,E0=_),L(a,c)},g}function Le(a,c,g){g=In(-1,g),g.tag=3;var _=a.type.getDerivedStateFromError;if(typeof _=="function"){var b=c.value;g.payload=function(){return _(b)},g.callback=function(){L(a,c)}}var D=a.stateNode;return D!==null&&typeof D.componentDidCatch=="function"&&(g.callback=function(){L(a,c),typeof _!="function"&&(bl===null?bl=new Set([this]):bl.add(this));var G=c.stack;this.componentDidCatch(c.value,{componentStack:G!==null?G:""})}),g}function st(a,c,g){var _=a.pingCache;if(_===null){_=a.pingCache=new Q;var b=new Set;_.set(c,b)}else b=_.get(c),b===void 0&&(b=new Set,_.set(c,b));b.has(g)||(b.add(g),a=FB.bind(null,a,c,g),c.then(a,a))}function wt(a){do{var c;if((c=a.tag===13)&&(c=a.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return a;a=a.return}while(a!==null);return null}function Zt(a,c,g,_,b){return(a.mode&1)===0?(a===c?a.flags|=65536:(a.flags|=128,g.flags|=131072,g.flags&=-52805,g.tag===1&&(g.alternate===null?g.tag=17:(c=In(-1,1),c.tag=2,qn(g,c,1))),g.lanes|=1),a):(a.flags|=65536,a.lanes=b,a)}var Ot=R.ReactCurrentOwner,ln=!1;function vt(a,c,g,_){c.child=a===null?bc(c,null,g,_):_a(c,a.child,g,_)}function jr(a,c,g,_,b){g=g.render;var D=c.ref;return Ho(c,b),_=Lc(a,c,g,_,D,b),g=Af(),a!==null&&!ln?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~b,Pa(a,c,b)):(Vn&&g&&hf(c),c.flags|=1,vt(a,c,_,b),c.child)}function Ui(a,c,g,_,b){if(a===null){var D=g.type;return typeof D=="function"&&!b0(D)&&D.defaultProps===void 0&&g.compare===null&&g.defaultProps===void 0?(c.tag=15,c.type=D,we(a,c,D,_,b)):(a=Um(g.type,null,_,c,c.mode,b),a.ref=c.ref,a.return=c,c.child=a)}if(D=a.child,(a.lanes&b)===0){var G=D.memoizedProps;if(g=g.compare,g=g!==null?g:ha,g(G,_)&&a.ref===c.ref)return Pa(a,c,b)}return c.flags|=1,a=Dl(D,_),a.ref=c.ref,a.return=c,c.child=a}function we(a,c,g,_,b){if(a!==null){var D=a.memoizedProps;if(ha(D,_)&&a.ref===c.ref)if(ln=!1,c.pendingProps=_=D,(a.lanes&b)!==0)(a.flags&131072)!==0&&(ln=!0);else return c.lanes=a.lanes,Pa(a,c,b)}return mt(a,c,g,_,b)}function ye(a,c,g){var _=c.pendingProps,b=_.children,D=a!==null?a.memoizedState:null;if(_.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},kn(Td,ys),ys|=g;else{if((g&1073741824)===0)return a=D!==null?D.baseLanes|g:g,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:a,cachePool:null,transitions:null},c.updateQueue=null,kn(Td,ys),ys|=a,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},_=D!==null?D.baseLanes:g,kn(Td,ys),ys|=_}else D!==null?(_=D.baseLanes|g,c.memoizedState=null):_=g,kn(Td,ys),ys|=_;return vt(a,c,b,g),c.child}function Re(a,c){var g=c.ref;(a===null&&g!==null||a!==null&&a.ref!==g)&&(c.flags|=512,c.flags|=2097152)}function mt(a,c,g,_,b){var D=Yr(g)?io:Ur.current;return D=ya(c,D),Ho(c,b),g=Lc(a,c,g,_,D,b),_=Af(),a!==null&&!ln?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~b,Pa(a,c,b)):(Vn&&_&&hf(c),c.flags|=1,vt(a,c,g,b),c.child)}function Rt(a,c,g,_,b){if(Yr(g)){var D=!0;Aa(c)}else D=!1;if(Ho(c,b),c.stateNode===null)Mm(a,c),d(c,g,_),A(c,g,_,b),_=!0;else if(a===null){var G=c.stateNode,re=c.memoizedProps;G.props=re;var he=G.context,be=g.contextType;typeof be=="object"&&be!==null?be=Ni(be):(be=Yr(g)?io:Ur.current,be=ya(c,be));var qe=g.getDerivedStateFromProps,et=typeof qe=="function"||typeof G.getSnapshotBeforeUpdate=="function";et||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(re!==_||he!==be)&&f(c,G,_,be),Ln=!1;var Xe=c.memoizedState;G.state=Xe,ir(c,_,G,b),he=c.memoizedState,re!==_||Xe!==he||ai.current||Ln?(typeof qe=="function"&&(Oc(c,g,qe,_),he=c.memoizedState),(re=Ln||Bm(c,g,re,_,Xe,he,be))?(et||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount()),typeof G.componentDidMount=="function"&&(c.flags|=4194308)):(typeof G.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=_,c.memoizedState=he),G.props=_,G.state=he,G.context=be,_=re):(typeof G.componentDidMount=="function"&&(c.flags|=4194308),_=!1)}else{G=c.stateNode,ur(a,c),re=c.memoizedProps,be=c.type===c.elementType?re:es(c.type,re),G.props=be,et=c.pendingProps,Xe=G.context,he=g.contextType,typeof he=="object"&&he!==null?he=Ni(he):(he=Yr(g)?io:Ur.current,he=ya(c,he));var _t=g.getDerivedStateFromProps;(qe=typeof _t=="function"||typeof G.getSnapshotBeforeUpdate=="function")||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(re!==et||Xe!==he)&&f(c,G,_,he),Ln=!1,Xe=c.memoizedState,G.state=Xe,ir(c,_,G,b);var Mt=c.memoizedState;re!==et||Xe!==Mt||ai.current||Ln?(typeof _t=="function"&&(Oc(c,g,_t,_),Mt=c.memoizedState),(be=Ln||Bm(c,g,be,_,Xe,Mt,he)||!1)?(qe||typeof G.UNSAFE_componentWillUpdate!="function"&&typeof G.componentWillUpdate!="function"||(typeof G.componentWillUpdate=="function"&&G.componentWillUpdate(_,Mt,he),typeof G.UNSAFE_componentWillUpdate=="function"&&G.UNSAFE_componentWillUpdate(_,Mt,he)),typeof G.componentDidUpdate=="function"&&(c.flags|=4),typeof G.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof G.componentDidUpdate!="function"||re===a.memoizedProps&&Xe===a.memoizedState||(c.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||re===a.memoizedProps&&Xe===a.memoizedState||(c.flags|=1024),c.memoizedProps=_,c.memoizedState=Mt),G.props=_,G.state=Mt,G.context=he,_=be):(typeof G.componentDidUpdate!="function"||re===a.memoizedProps&&Xe===a.memoizedState||(c.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||re===a.memoizedProps&&Xe===a.memoizedState||(c.flags|=1024),_=!1)}return sn(a,c,g,_,D,b)}function sn(a,c,g,_,b,D){Re(a,c);var G=(c.flags&128)!==0;if(!_&&!G)return b&&uf(c,g,!1),Pa(a,c,D);_=c.stateNode,Ot.current=c;var re=G&&typeof g.getDerivedStateFromError!="function"?null:_.render();return c.flags|=1,a!==null&&G?(c.child=_a(c,a.child,null,D),c.child=_a(c,null,re,D)):vt(a,c,re,D),c.memoizedState=_.state,b&&uf(c,g,!0),c.child}function en(a){var c=a.stateNode;c.pendingContext?cf(a,c.pendingContext,c.pendingContext!==c.context):c.context&&cf(a,c.context,!1),Dc(a,c.containerInfo)}function _n(a,c,g,_,b){return Uo(),El(b),c.flags|=256,vt(a,c,g,_),c.child}var pr={dehydrated:null,treeContext:null,retryLane:0};function En(a){return{baseLanes:a,cachePool:null,transitions:null}}function po(a,c,g){var _=c.pendingProps,b=Wn.current,D=!1,G=(c.flags&128)!==0,re;if((re=G)||(re=a!==null&&a.memoizedState===null?!1:(b&2)!==0),re?(D=!0,c.flags&=-129):(a===null||a.memoizedState!==null)&&(b|=1),kn(Wn,b&1),a===null)return yd(c),a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((c.mode&1)===0?c.lanes=1:a.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(G=_.children,a=_.fallback,D?(_=c.mode,D=c.child,G={mode:"hidden",children:G},(_&1)===0&&D!==null?(D.childLanes=0,D.pendingProps=G):D=Hm(G,_,0,null),a=jc(a,_,g,null),D.return=c,a.return=c,D.sibling=a,c.child=D,c.child.memoizedState=En(g),c.memoizedState=pr,a):bf(c,G));if(b=a.memoizedState,b!==null&&(re=b.dehydrated,re!==null))return wB(a,c,G,_,re,b,g);if(D){D=_.fallback,G=c.mode,b=a.child,re=b.sibling;var he={mode:"hidden",children:_.children};return(G&1)===0&&c.child!==b?(_=c.child,_.childLanes=0,_.pendingProps=he,c.deletions=null):(_=Dl(b,he),_.subtreeFlags=b.subtreeFlags&14680064),re!==null?D=Dl(re,D):(D=jc(D,G,g,null),D.flags|=2),D.return=c,_.return=c,_.sibling=D,c.child=_,_=D,D=c.child,G=a.child.memoizedState,G=G===null?En(g):{baseLanes:G.baseLanes|g,cachePool:null,transitions:G.transitions},D.memoizedState=G,D.childLanes=a.childLanes&~g,c.memoizedState=pr,_}return D=a.child,a=D.sibling,_=Dl(D,{mode:"visible",children:_.children}),(c.mode&1)===0&&(_.lanes=g),_.return=c,_.sibling=null,a!==null&&(g=c.deletions,g===null?(c.deletions=[a],c.flags|=16):g.push(a)),c.child=_,c.memoizedState=null,_}function bf(a,c){return c=Hm({mode:"visible",children:c},a.mode,0,null),c.return=a,a.child=c}function bm(a,c,g,_){return _!==null&&El(_),_a(c,a.child,null,g),a=bf(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function wB(a,c,g,_,b,D,G){if(g)return c.flags&256?(c.flags&=-257,_=T(Error(t(422))),bm(a,c,G,_)):c.memoizedState!==null?(c.child=a.child,c.flags|=128,null):(D=_.fallback,b=c.mode,_=Hm({mode:"visible",children:_.children},b,0,null),D=jc(D,b,G,null),D.flags|=2,_.return=c,D.return=c,_.sibling=D,c.child=_,(c.mode&1)!==0&&_a(c,a.child,null,G),c.child.memoizedState=En(G),c.memoizedState=pr,D);if((c.mode&1)===0)return bm(a,c,G,null);if(b.data==="$!"){if(_=b.nextSibling&&b.nextSibling.dataset,_)var re=_.dgst;return _=re,D=Error(t(419)),_=T(D,_,void 0),bm(a,c,G,_)}if(re=(G&a.childLanes)!==0,ln||re){if(_=Zr,_!==null){switch(G&-G){case 4:b=2;break;case 16:b=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:b=32;break;case 536870912:b=268435456;break;default:b=0}b=(b&(_.suspendedLanes|G))!==0?0:b,b!==0&&b!==D.retryLane&&(D.retryLane=b,ps(a,b),vo(_,a,b,-1))}return B0(),_=T(Error(t(421))),bm(a,c,G,_)}return b.data==="$?"?(c.flags|=128,c.child=a.child,c=kB.bind(null,a),b._reactRetry=c,null):(a=D.treeContext,ci=to(b.nextSibling),Hr=c,Vn=!0,Zi=null,a!==null&&(li[Dr++]=lt,li[Dr++]=Qi,li[Dr++]=xa,lt=a.id,Qi=a.overflow,xa=c),c=bf(c,_.children),c.flags|=4096,c)}function yE(a,c,g){a.lanes|=c;var _=a.alternate;_!==null&&(_.lanes|=c),Tc(a.return,c,g)}function d0(a,c,g,_,b){var D=a.memoizedState;D===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:_,tail:g,tailMode:b}:(D.isBackwards=c,D.rendering=null,D.renderingStartTime=0,D.last=_,D.tail=g,D.tailMode=b)}function AE(a,c,g){var _=c.pendingProps,b=_.revealOrder,D=_.tail;if(vt(a,c,_.children,g),_=Wn.current,(_&2)!==0)_=_&1|2,c.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&yE(a,g,c);else if(a.tag===19)yE(a,g,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}_&=1}if(kn(Wn,_),(c.mode&1)===0)c.memoizedState=null;else switch(b){case"forwards":for(g=c.child,b=null;g!==null;)a=g.alternate,a!==null&&ms(a)===null&&(b=g),g=g.sibling;g=b,g===null?(b=c.child,c.child=null):(b=g.sibling,g.sibling=null),d0(c,!1,b,g,D);break;case"backwards":for(g=null,b=c.child,c.child=null;b!==null;){if(a=b.alternate,a!==null&&ms(a)===null){c.child=b;break}a=b.sibling,b.sibling=g,g=b,b=a}d0(c,!0,g,null,D);break;case"together":d0(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Mm(a,c){(c.mode&1)===0&&a!==null&&(a.alternate=null,c.alternate=null,c.flags|=2)}function Pa(a,c,g){if(a!==null&&(c.dependencies=a.dependencies),Uc|=c.lanes,(g&c.childLanes)===0)return null;if(a!==null&&c.child!==a.child)throw Error(t(153));if(c.child!==null){for(a=c.child,g=Dl(a,a.pendingProps),c.child=g,g.return=c;a.sibling!==null;)a=a.sibling,g=g.sibling=Dl(a,a.pendingProps),g.return=c;g.sibling=null}return c.child}function SB(a,c,g){switch(c.tag){case 3:en(c),Uo();break;case 5:Ma(c);break;case 1:Yr(c.type)&&Aa(c);break;case 4:Dc(c,c.stateNode.containerInfo);break;case 10:var _=c.type._context,b=c.memoizedProps.value;kn(Ca,_._currentValue),_._currentValue=b;break;case 13:if(_=c.memoizedState,_!==null)return _.dehydrated!==null?(kn(Wn,Wn.current&1),c.flags|=128,null):(g&c.child.childLanes)!==0?po(a,c,g):(kn(Wn,Wn.current&1),a=Pa(a,c,g),a!==null?a.sibling:null);kn(Wn,Wn.current&1);break;case 19:if(_=(g&c.childLanes)!==0,(a.flags&128)!==0){if(_)return AE(a,c,g);c.flags|=128}if(b=c.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),kn(Wn,Wn.current),_)break;return null;case 22:case 23:return c.lanes=0,ye(a,c,g)}return Pa(a,c,g)}var EE,h0,xE,_E;EE=function(a,c){for(var g=c.child;g!==null;){if(g.tag===5||g.tag===6)a.appendChild(g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===c)break;for(;g.sibling===null;){if(g.return===null||g.return===c)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},h0=function(){},xE=function(a,c,g,_){var b=a.memoizedProps;if(b!==_){a=c.stateNode,fr(Fi.current);var D=null;switch(g){case"input":b=Fe(a,b),_=Fe(a,_),D=[];break;case"select":b=ne({},b,{value:void 0}),_=ne({},_,{value:void 0}),D=[];break;case"textarea":b=Mn(a,b),_=Mn(a,_),D=[];break;default:typeof b.onClick!="function"&&typeof _.onClick=="function"&&(a.onclick=Ec)}ae(g,_);var G;g=null;for(be in b)if(!_.hasOwnProperty(be)&&b.hasOwnProperty(be)&&b[be]!=null)if(be==="style"){var re=b[be];for(G in re)re.hasOwnProperty(G)&&(g||(g={}),g[G]="")}else be!=="dangerouslySetInnerHTML"&&be!=="children"&&be!=="suppressContentEditableWarning"&&be!=="suppressHydrationWarning"&&be!=="autoFocus"&&(i.hasOwnProperty(be)?D||(D=[]):(D=D||[]).push(be,null));for(be in _){var he=_[be];if(re=b!=null?b[be]:void 0,_.hasOwnProperty(be)&&he!==re&&(he!=null||re!=null))if(be==="style")if(re){for(G in re)!re.hasOwnProperty(G)||he&&he.hasOwnProperty(G)||(g||(g={}),g[G]="");for(G in he)he.hasOwnProperty(G)&&re[G]!==he[G]&&(g||(g={}),g[G]=he[G])}else g||(D||(D=[]),D.push(be,g)),g=he;else be==="dangerouslySetInnerHTML"?(he=he?he.__html:void 0,re=re?re.__html:void 0,he!=null&&re!==he&&(D=D||[]).push(be,he)):be==="children"?typeof he!="string"&&typeof he!="number"||(D=D||[]).push(be,""+he):be!=="suppressContentEditableWarning"&&be!=="suppressHydrationWarning"&&(i.hasOwnProperty(be)?(he!=null&&be==="onScroll"&&Hn("scroll",a),D||re===he||(D=[])):(D=D||[]).push(be,he))}g&&(D=D||[]).push("style",g);var be=D;(c.updateQueue=be)&&(c.flags|=4)}},_E=function(a,c,g,_){g!==_&&(c.flags|=4)};function Mf(a,c){if(!Vn)switch(a.tailMode){case"hidden":c=a.tail;for(var g=null;c!==null;)c.alternate!==null&&(g=c),c=c.sibling;g===null?a.tail=null:g.sibling=null;break;case"collapsed":g=a.tail;for(var _=null;g!==null;)g.alternate!==null&&(_=g),g=g.sibling;_===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:_.sibling=null}}function Ci(a){var c=a.alternate!==null&&a.alternate.child===a.child,g=0,_=0;if(c)for(var b=a.child;b!==null;)g|=b.lanes|b.childLanes,_|=b.subtreeFlags&14680064,_|=b.flags&14680064,b.return=a,b=b.sibling;else for(b=a.child;b!==null;)g|=b.lanes|b.childLanes,_|=b.subtreeFlags,_|=b.flags,b.return=a,b=b.sibling;return a.subtreeFlags|=_,a.childLanes=g,c}function BB(a,c,g){var _=c.pendingProps;switch(oo(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ci(c),null;case 1:return Yr(c.type)&&xc(),Ci(c),null;case 3:return _=c.stateNode,zo(),zn(ai),zn(Ur),Os(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),(a===null||a.child===null)&&(Al(c)?c.flags|=4:a===null||a.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Zi!==null&&(C0(Zi),Zi=null))),h0(a,c),Ci(c),null;case 5:Cl(c);var b=fr(co.current);if(g=c.type,a!==null&&c.stateNode!=null)xE(a,c,g,_,b),a.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!_){if(c.stateNode===null)throw Error(t(166));return Ci(c),null}if(a=fr(Fi.current),Al(c)){_=c.stateNode,g=c.type;var D=c.memoizedProps;switch(_[_r]=c,_[yl]=D,a=(c.mode&1)!==0,g){case"dialog":Hn("cancel",_),Hn("close",_);break;case"iframe":case"object":case"embed":Hn("load",_);break;case"video":case"audio":for(b=0;b<ko.length;b++)Hn(ko[b],_);break;case"source":Hn("error",_);break;case"img":case"image":case"link":Hn("error",_),Hn("load",_);break;case"details":Hn("toggle",_);break;case"input":$e(_,D),Hn("invalid",_);break;case"select":_._wrapperState={wasMultiple:!!D.multiple},Hn("invalid",_);break;case"textarea":Z(_,D),Hn("invalid",_)}ae(g,D),b=null;for(var G in D)if(D.hasOwnProperty(G)){var re=D[G];G==="children"?typeof re=="string"?_.textContent!==re&&(D.suppressHydrationWarning!==!0&&Ac(_.textContent,re,a),b=["children",re]):typeof re=="number"&&_.textContent!==""+re&&(D.suppressHydrationWarning!==!0&&Ac(_.textContent,re,a),b=["children",""+re]):i.hasOwnProperty(G)&&re!=null&&G==="onScroll"&&Hn("scroll",_)}switch(g){case"input":xt(_),ft(_,D,!0);break;case"textarea":xt(_),Se(_);break;case"select":case"option":break;default:typeof D.onClick=="function"&&(_.onclick=Ec)}_=b,c.updateQueue=_,_!==null&&(c.flags|=4)}else{G=b.nodeType===9?b:b.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=Ze(g)),a==="http://www.w3.org/1999/xhtml"?g==="script"?(a=G.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof _.is=="string"?a=G.createElement(g,{is:_.is}):(a=G.createElement(g),g==="select"&&(G=a,_.multiple?G.multiple=!0:_.size&&(G.size=_.size))):a=G.createElementNS(a,g),a[_r]=c,a[yl]=_,EE(a,c,!1,!1),c.stateNode=a;e:{switch(G=Me(g,_),g){case"dialog":Hn("cancel",a),Hn("close",a),b=_;break;case"iframe":case"object":case"embed":Hn("load",a),b=_;break;case"video":case"audio":for(b=0;b<ko.length;b++)Hn(ko[b],a);b=_;break;case"source":Hn("error",a),b=_;break;case"img":case"image":case"link":Hn("error",a),Hn("load",a),b=_;break;case"details":Hn("toggle",a),b=_;break;case"input":$e(a,_),b=Fe(a,_),Hn("invalid",a);break;case"option":b=_;break;case"select":a._wrapperState={wasMultiple:!!_.multiple},b=ne({},_,{value:void 0}),Hn("invalid",a);break;case"textarea":Z(a,_),b=Mn(a,_),Hn("invalid",a);break;default:b=_}ae(g,b),re=b;for(D in re)if(re.hasOwnProperty(D)){var he=re[D];D==="style"?Ge(a,he):D==="dangerouslySetInnerHTML"?(he=he?he.__html:void 0,he!=null&&Ct(a,he)):D==="children"?typeof he=="string"?(g!=="textarea"||he!=="")&&nt(a,he):typeof he=="number"&&nt(a,""+he):D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&D!=="autoFocus"&&(i.hasOwnProperty(D)?he!=null&&D==="onScroll"&&Hn("scroll",a):he!=null&&S(a,D,he,G))}switch(g){case"input":xt(a),ft(a,_,!1);break;case"textarea":xt(a),Se(a);break;case"option":_.value!=null&&a.setAttribute("value",""+rt(_.value));break;case"select":a.multiple=!!_.multiple,D=_.value,D!=null?Kt(a,!!_.multiple,D,!1):_.defaultValue!=null&&Kt(a,!!_.multiple,_.defaultValue,!0);break;default:typeof b.onClick=="function"&&(a.onclick=Ec)}switch(g){case"button":case"input":case"select":case"textarea":_=!!_.autoFocus;break e;case"img":_=!0;break e;default:_=!1}}_&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Ci(c),null;case 6:if(a&&c.stateNode!=null)_E(a,c,a.memoizedProps,_);else{if(typeof _!="string"&&c.stateNode===null)throw Error(t(166));if(g=fr(co.current),fr(Fi.current),Al(c)){if(_=c.stateNode,g=c.memoizedProps,_[_r]=c,(D=_.nodeValue!==g)&&(a=Hr,a!==null))switch(a.tag){case 3:Ac(_.nodeValue,g,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&Ac(_.nodeValue,g,(a.mode&1)!==0)}D&&(c.flags|=4)}else _=(g.nodeType===9?g:g.ownerDocument).createTextNode(_),_[_r]=c,c.stateNode=_}return Ci(c),null;case 13:if(zn(Wn),_=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(Vn&&ci!==null&&(c.mode&1)!==0&&(c.flags&128)===0)mf(),Uo(),c.flags|=98560,D=!1;else if(D=Al(c),_!==null&&_.dehydrated!==null){if(a===null){if(!D)throw Error(t(318));if(D=c.memoizedState,D=D!==null?D.dehydrated:null,!D)throw Error(t(317));D[_r]=c}else Uo(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Ci(c),D=!1}else Zi!==null&&(C0(Zi),Zi=null),D=!0;if(!D)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=g,c):(_=_!==null,_!==(a!==null&&a.memoizedState!==null)&&_&&(c.child.flags|=8192,(c.mode&1)!==0&&(a===null||(Wn.current&1)!==0?Vr===0&&(Vr=3):B0())),c.updateQueue!==null&&(c.flags|=4),Ci(c),null);case 4:return zo(),h0(a,c),a===null&&ml(c.stateNode.containerInfo),Ci(c),null;case 10:return Mc(c.type._context),Ci(c),null;case 17:return Yr(c.type)&&xc(),Ci(c),null;case 19:if(zn(Wn),D=c.memoizedState,D===null)return Ci(c),null;if(_=(c.flags&128)!==0,G=D.rendering,G===null)if(_)Mf(D,!1);else{if(Vr!==0||a!==null&&(a.flags&128)!==0)for(a=c.child;a!==null;){if(G=ms(a),G!==null){for(c.flags|=128,Mf(D,!1),_=G.updateQueue,_!==null&&(c.updateQueue=_,c.flags|=4),c.subtreeFlags=0,_=g,g=c.child;g!==null;)D=g,a=_,D.flags&=14680066,G=D.alternate,G===null?(D.childLanes=0,D.lanes=a,D.child=null,D.subtreeFlags=0,D.memoizedProps=null,D.memoizedState=null,D.updateQueue=null,D.dependencies=null,D.stateNode=null):(D.childLanes=G.childLanes,D.lanes=G.lanes,D.child=G.child,D.subtreeFlags=0,D.deletions=null,D.memoizedProps=G.memoizedProps,D.memoizedState=G.memoizedState,D.updateQueue=G.updateQueue,D.type=G.type,a=G.dependencies,D.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),g=g.sibling;return kn(Wn,Wn.current&1|2),c.child}a=a.sibling}D.tail!==null&&Ce()>Rd&&(c.flags|=128,_=!0,Mf(D,!1),c.lanes=4194304)}else{if(!_)if(a=ms(G),a!==null){if(c.flags|=128,_=!0,g=a.updateQueue,g!==null&&(c.updateQueue=g,c.flags|=4),Mf(D,!0),D.tail===null&&D.tailMode==="hidden"&&!G.alternate&&!Vn)return Ci(c),null}else 2*Ce()-D.renderingStartTime>Rd&&g!==1073741824&&(c.flags|=128,_=!0,Mf(D,!1),c.lanes=4194304);D.isBackwards?(G.sibling=c.child,c.child=G):(g=D.last,g!==null?g.sibling=G:c.child=G,D.last=G)}return D.tail!==null?(c=D.tail,D.rendering=c,D.tail=c.sibling,D.renderingStartTime=Ce(),c.sibling=null,g=Wn.current,kn(Wn,_?g&1|2:g&1),c):(Ci(c),null);case 22:case 23:return S0(),_=c.memoizedState!==null,a!==null&&a.memoizedState!==null!==_&&(c.flags|=8192),_&&(c.mode&1)!==0?(ys&1073741824)!==0&&(Ci(c),c.subtreeFlags&6&&(c.flags|=8192)):Ci(c),null;case 24:return null;case 25:return null}throw Error(t(156,c.tag))}function bB(a,c){switch(oo(c),c.tag){case 1:return Yr(c.type)&&xc(),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return zo(),zn(ai),zn(Ur),Os(),a=c.flags,(a&65536)!==0&&(a&128)===0?(c.flags=a&-65537|128,c):null;case 5:return Cl(c),null;case 13:if(zn(Wn),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(t(340));Uo()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return zn(Wn),null;case 4:return zo(),null;case 10:return Mc(c.type._context),null;case 22:case 23:return S0(),null;case 24:return null;default:return null}}var Tm=!1,wi=!1,MB=typeof WeakSet=="function"?WeakSet:Set,St=null;function Md(a,c){var g=a.ref;if(g!==null)if(typeof g=="function")try{g(null)}catch(_){mr(a,c,_)}else g.current=null}function f0(a,c,g){try{g()}catch(_){mr(a,c,_)}}var CE=!1;function TB(a,c){if(vl=Ji,a=er(),br(a)){if("selectionStart"in a)var g={start:a.selectionStart,end:a.selectionEnd};else e:{g=(g=a.ownerDocument)&&g.defaultView||window;var _=g.getSelection&&g.getSelection();if(_&&_.rangeCount!==0){g=_.anchorNode;var b=_.anchorOffset,D=_.focusNode;_=_.focusOffset;try{g.nodeType,D.nodeType}catch{g=null;break e}var G=0,re=-1,he=-1,be=0,qe=0,et=a,Xe=null;t:for(;;){for(var _t;et!==g||b!==0&&et.nodeType!==3||(re=G+b),et!==D||_!==0&&et.nodeType!==3||(he=G+_),et.nodeType===3&&(G+=et.nodeValue.length),(_t=et.firstChild)!==null;)Xe=et,et=_t;for(;;){if(et===a)break t;if(Xe===g&&++be===b&&(re=G),Xe===D&&++qe===_&&(he=G),(_t=et.nextSibling)!==null)break;et=Xe,Xe=et.parentNode}et=_t}g=re===-1||he===-1?null:{start:re,end:he}}else g=null}g=g||{start:0,end:0}}else g=null;for(nf={focusedElem:a,selectionRange:g},Ji=!1,St=c;St!==null;)if(c=St,a=c.child,(c.subtreeFlags&1028)!==0&&a!==null)a.return=c,St=a;else for(;St!==null;){c=St;try{var Mt=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(Mt!==null){var Tt=Mt.memoizedProps,Cr=Mt.memoizedState,Ee=c.stateNode,fe=Ee.getSnapshotBeforeUpdate(c.elementType===c.type?Tt:es(c.type,Tt),Cr);Ee.__reactInternalSnapshotBeforeUpdate=fe}break;case 3:var _e=c.stateNode.containerInfo;_e.nodeType===1?_e.textContent="":_e.nodeType===9&&_e.documentElement&&_e.removeChild(_e.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(at){mr(c,c.return,at)}if(a=c.sibling,a!==null){a.return=c.return,St=a;break}St=c.return}return Mt=CE,CE=!1,Mt}function Tf(a,c,g){var _=c.updateQueue;if(_=_!==null?_.lastEffect:null,_!==null){var b=_=_.next;do{if((b.tag&a)===a){var D=b.destroy;b.destroy=void 0,D!==void 0&&f0(c,g,D)}b=b.next}while(b!==_)}}function Rm(a,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var g=c=c.next;do{if((g.tag&a)===a){var _=g.create;g.destroy=_()}g=g.next}while(g!==c)}}function p0(a){var c=a.ref;if(c!==null){var g=a.stateNode;switch(a.tag){case 5:a=g;break;default:a=g}typeof c=="function"?c(a):c.current=a}}function wE(a){var c=a.alternate;c!==null&&(a.alternate=null,wE(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&(delete c[_r],delete c[yl],delete c[va],delete c[dd],delete c[hd])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function SE(a){return a.tag===5||a.tag===3||a.tag===4}function BE(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||SE(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function m0(a,c,g){var _=a.tag;if(_===5||_===6)a=a.stateNode,c?g.nodeType===8?g.parentNode.insertBefore(a,c):g.insertBefore(a,c):(g.nodeType===8?(c=g.parentNode,c.insertBefore(a,g)):(c=g,c.appendChild(a)),g=g._reactRootContainer,g!=null||c.onclick!==null||(c.onclick=Ec));else if(_!==4&&(a=a.child,a!==null))for(m0(a,c,g),a=a.sibling;a!==null;)m0(a,c,g),a=a.sibling}function g0(a,c,g){var _=a.tag;if(_===5||_===6)a=a.stateNode,c?g.insertBefore(a,c):g.appendChild(a);else if(_!==4&&(a=a.child,a!==null))for(g0(a,c,g),a=a.sibling;a!==null;)g0(a,c,g),a=a.sibling}var di=null,mo=!1;function Bl(a,c,g){for(g=g.child;g!==null;)bE(a,c,g),g=g.sibling}function bE(a,c,g){if(dt&&typeof dt.onCommitFiberUnmount=="function")try{dt.onCommitFiberUnmount(Vt,g)}catch{}switch(g.tag){case 5:wi||Md(g,c);case 6:var _=di,b=mo;di=null,Bl(a,c,g),di=_,mo=b,di!==null&&(mo?(a=di,g=g.stateNode,a.nodeType===8?a.parentNode.removeChild(g):a.removeChild(g)):di.removeChild(g.stateNode));break;case 18:di!==null&&(mo?(a=di,g=g.stateNode,a.nodeType===8?ud(a.parentNode,g):a.nodeType===1&&ud(a,g),lc(a)):ud(di,g.stateNode));break;case 4:_=di,b=mo,di=g.stateNode.containerInfo,mo=!0,Bl(a,c,g),di=_,mo=b;break;case 0:case 11:case 14:case 15:if(!wi&&(_=g.updateQueue,_!==null&&(_=_.lastEffect,_!==null))){b=_=_.next;do{var D=b,G=D.destroy;D=D.tag,G!==void 0&&((D&2)!==0||(D&4)!==0)&&f0(g,c,G),b=b.next}while(b!==_)}Bl(a,c,g);break;case 1:if(!wi&&(Md(g,c),_=g.stateNode,typeof _.componentWillUnmount=="function"))try{_.props=g.memoizedProps,_.state=g.memoizedState,_.componentWillUnmount()}catch(re){mr(g,c,re)}Bl(a,c,g);break;case 21:Bl(a,c,g);break;case 22:g.mode&1?(wi=(_=wi)||g.memoizedState!==null,Bl(a,c,g),wi=_):Bl(a,c,g);break;default:Bl(a,c,g)}}function ME(a){var c=a.updateQueue;if(c!==null){a.updateQueue=null;var g=a.stateNode;g===null&&(g=a.stateNode=new MB),c.forEach(function(_){var b=OB.bind(null,a,_);g.has(_)||(g.add(_),_.then(b,b))})}}function go(a,c){var g=c.deletions;if(g!==null)for(var _=0;_<g.length;_++){var b=g[_];try{var D=a,G=c,re=G;e:for(;re!==null;){switch(re.tag){case 5:di=re.stateNode,mo=!1;break e;case 3:di=re.stateNode.containerInfo,mo=!0;break e;case 4:di=re.stateNode.containerInfo,mo=!0;break e}re=re.return}if(di===null)throw Error(t(160));bE(D,G,b),di=null,mo=!1;var he=b.alternate;he!==null&&(he.return=null),b.return=null}catch(be){mr(b,c,be)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)TE(c,a),c=c.sibling}function TE(a,c){var g=a.alternate,_=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(go(c,a),jo(a),_&4){try{Tf(3,a,a.return),Rm(3,a)}catch(Tt){mr(a,a.return,Tt)}try{Tf(5,a,a.return)}catch(Tt){mr(a,a.return,Tt)}}break;case 1:go(c,a),jo(a),_&512&&g!==null&&Md(g,g.return);break;case 5:if(go(c,a),jo(a),_&512&&g!==null&&Md(g,g.return),a.flags&32){var b=a.stateNode;try{nt(b,"")}catch(Tt){mr(a,a.return,Tt)}}if(_&4&&(b=a.stateNode,b!=null)){var D=a.memoizedProps,G=g!==null?g.memoizedProps:D,re=a.type,he=a.updateQueue;if(a.updateQueue=null,he!==null)try{re==="input"&&D.type==="radio"&&D.name!=null&&ze(b,D),Me(re,G);var be=Me(re,D);for(G=0;G<he.length;G+=2){var qe=he[G],et=he[G+1];qe==="style"?Ge(b,et):qe==="dangerouslySetInnerHTML"?Ct(b,et):qe==="children"?nt(b,et):S(b,qe,et,be)}switch(re){case"input":bt(b,D);break;case"textarea":W(b,D);break;case"select":var Xe=b._wrapperState.wasMultiple;b._wrapperState.wasMultiple=!!D.multiple;var _t=D.value;_t!=null?Kt(b,!!D.multiple,_t,!1):Xe!==!!D.multiple&&(D.defaultValue!=null?Kt(b,!!D.multiple,D.defaultValue,!0):Kt(b,!!D.multiple,D.multiple?[]:"",!1))}b[yl]=D}catch(Tt){mr(a,a.return,Tt)}}break;case 6:if(go(c,a),jo(a),_&4){if(a.stateNode===null)throw Error(t(162));b=a.stateNode,D=a.memoizedProps;try{b.nodeValue=D}catch(Tt){mr(a,a.return,Tt)}}break;case 3:if(go(c,a),jo(a),_&4&&g!==null&&g.memoizedState.isDehydrated)try{lc(c.containerInfo)}catch(Tt){mr(a,a.return,Tt)}break;case 4:go(c,a),jo(a);break;case 13:go(c,a),jo(a),b=a.child,b.flags&8192&&(D=b.memoizedState!==null,b.stateNode.isHidden=D,!D||b.alternate!==null&&b.alternate.memoizedState!==null||(A0=Ce())),_&4&&ME(a);break;case 22:if(qe=g!==null&&g.memoizedState!==null,a.mode&1?(wi=(be=wi)||qe,go(c,a),wi=be):go(c,a),jo(a),_&8192){if(be=a.memoizedState!==null,(a.stateNode.isHidden=be)&&!qe&&(a.mode&1)!==0)for(St=a,qe=a.child;qe!==null;){for(et=St=qe;St!==null;){switch(Xe=St,_t=Xe.child,Xe.tag){case 0:case 11:case 14:case 15:Tf(4,Xe,Xe.return);break;case 1:Md(Xe,Xe.return);var Mt=Xe.stateNode;if(typeof Mt.componentWillUnmount=="function"){_=Xe,g=Xe.return;try{c=_,Mt.props=c.memoizedProps,Mt.state=c.memoizedState,Mt.componentWillUnmount()}catch(Tt){mr(_,g,Tt)}}break;case 5:Md(Xe,Xe.return);break;case 22:if(Xe.memoizedState!==null){PE(et);continue}}_t!==null?(_t.return=Xe,St=_t):PE(et)}qe=qe.sibling}e:for(qe=null,et=a;;){if(et.tag===5){if(qe===null){qe=et;try{b=et.stateNode,be?(D=b.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none"):(re=et.stateNode,he=et.memoizedProps.style,G=he!=null&&he.hasOwnProperty("display")?he.display:null,re.style.display=rn("display",G))}catch(Tt){mr(a,a.return,Tt)}}}else if(et.tag===6){if(qe===null)try{et.stateNode.nodeValue=be?"":et.memoizedProps}catch(Tt){mr(a,a.return,Tt)}}else if((et.tag!==22&&et.tag!==23||et.memoizedState===null||et===a)&&et.child!==null){et.child.return=et,et=et.child;continue}if(et===a)break e;for(;et.sibling===null;){if(et.return===null||et.return===a)break e;qe===et&&(qe=null),et=et.return}qe===et&&(qe=null),et.sibling.return=et.return,et=et.sibling}}break;case 19:go(c,a),jo(a),_&4&&ME(a);break;case 21:break;default:go(c,a),jo(a)}}function jo(a){var c=a.flags;if(c&2){try{e:{for(var g=a.return;g!==null;){if(SE(g)){var _=g;break e}g=g.return}throw Error(t(160))}switch(_.tag){case 5:var b=_.stateNode;_.flags&32&&(nt(b,""),_.flags&=-33);var D=BE(a);g0(a,D,b);break;case 3:case 4:var G=_.stateNode.containerInfo,re=BE(a);m0(a,re,G);break;default:throw Error(t(161))}}catch(he){mr(a,a.return,he)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function RB(a,c,g){St=a,RE(a)}function RE(a,c,g){for(var _=(a.mode&1)!==0;St!==null;){var b=St,D=b.child;if(b.tag===22&&_){var G=b.memoizedState!==null||Tm;if(!G){var re=b.alternate,he=re!==null&&re.memoizedState!==null||wi;re=Tm;var be=wi;if(Tm=G,(wi=he)&&!be)for(St=b;St!==null;)G=St,he=G.child,G.tag===22&&G.memoizedState!==null?LE(b):he!==null?(he.return=G,St=he):LE(b);for(;D!==null;)St=D,RE(D),D=D.sibling;St=b,Tm=re,wi=be}DE(a)}else(b.subtreeFlags&8772)!==0&&D!==null?(D.return=b,St=D):DE(a)}}function DE(a){for(;St!==null;){var c=St;if((c.flags&8772)!==0){var g=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:wi||Rm(5,c);break;case 1:var _=c.stateNode;if(c.flags&4&&!wi)if(g===null)_.componentDidMount();else{var b=c.elementType===c.type?g.memoizedProps:es(c.type,g.memoizedProps);_.componentDidUpdate(b,g.memoizedState,_.__reactInternalSnapshotBeforeUpdate)}var D=c.updateQueue;D!==null&&_l(c,D,_);break;case 3:var G=c.updateQueue;if(G!==null){if(g=null,c.child!==null)switch(c.child.tag){case 5:g=c.child.stateNode;break;case 1:g=c.child.stateNode}_l(c,G,g)}break;case 5:var re=c.stateNode;if(g===null&&c.flags&4){g=re;var he=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":he.autoFocus&&g.focus();break;case"img":he.src&&(g.src=he.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var be=c.alternate;if(be!==null){var qe=be.memoizedState;if(qe!==null){var et=qe.dehydrated;et!==null&&lc(et)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}wi||c.flags&512&&p0(c)}catch(Xe){mr(c,c.return,Xe)}}if(c===a){St=null;break}if(g=c.sibling,g!==null){g.return=c.return,St=g;break}St=c.return}}function PE(a){for(;St!==null;){var c=St;if(c===a){St=null;break}var g=c.sibling;if(g!==null){g.return=c.return,St=g;break}St=c.return}}function LE(a){for(;St!==null;){var c=St;try{switch(c.tag){case 0:case 11:case 15:var g=c.return;try{Rm(4,c)}catch(he){mr(c,g,he)}break;case 1:var _=c.stateNode;if(typeof _.componentDidMount=="function"){var b=c.return;try{_.componentDidMount()}catch(he){mr(c,b,he)}}var D=c.return;try{p0(c)}catch(he){mr(c,D,he)}break;case 5:var G=c.return;try{p0(c)}catch(he){mr(c,G,he)}}}catch(he){mr(c,c.return,he)}if(c===a){St=null;break}var re=c.sibling;if(re!==null){re.return=c.return,St=re;break}St=c.return}}var DB=Math.ceil,Dm=R.ReactCurrentDispatcher,v0=R.ReactCurrentOwner,Hs=R.ReactCurrentBatchConfig,Tn=0,Zr=null,Pr=null,hi=0,ys=0,Td=rr(0),Vr=0,Rf=null,Uc=0,Pm=0,y0=0,Df=null,ts=null,A0=0,Rd=1/0,La=null,Lm=!1,E0=null,bl=null,Im=!1,Ml=null,Nm=0,Pf=0,x0=null,Fm=-1,km=0;function Hi(){return(Tn&6)!==0?Ce():Fm!==-1?Fm:Fm=Ce()}function Tl(a){return(a.mode&1)===0?1:(Tn&2)!==0&&hi!==0?hi&-hi:c0.transition!==null?(km===0&&(km=Fn()),km):(a=wn,a!==0||(a=window.event,a=a===void 0?16:nm(a.type)),a)}function vo(a,c,g,_){if(50<Pf)throw Pf=0,x0=null,Error(t(185));Er(a,g,_),((Tn&2)===0||a!==Zr)&&(a===Zr&&((Tn&2)===0&&(Pm|=g),Vr===4&&Rl(a,hi)),ns(a,_),g===1&&Tn===0&&(c.mode&1)===0&&(Rd=Ce()+500,Cc&&Fs()))}function ns(a,c){var g=a.callbackNode;nn(a,c);var _=on(a,a===Zr?hi:0);if(_===0)g!==null&&Be(g),a.callbackNode=null,a.callbackPriority=0;else if(c=_&-_,a.callbackPriority!==c){if(g!=null&&Be(g),c===1)a.tag===0?gm(NE.bind(null,a)):wc(NE.bind(null,a)),l0(function(){(Tn&6)===0&&Fs()}),g=null;else{switch(nl(_)){case 1:g=je;break;case 4:g=Ke;break;case 16:g=Et;break;case 536870912:g=Ft;break;default:g=Et}g=jE(g,IE.bind(null,a))}a.callbackPriority=c,a.callbackNode=g}}function IE(a,c){if(Fm=-1,km=0,(Tn&6)!==0)throw Error(t(327));var g=a.callbackNode;if(Dd()&&a.callbackNode!==g)return null;var _=on(a,a===Zr?hi:0);if(_===0)return null;if((_&30)!==0||(_&a.expiredLanes)!==0||c)c=Om(a,_);else{c=_;var b=Tn;Tn|=2;var D=kE();(Zr!==a||hi!==c)&&(La=null,Rd=Ce()+500,zc(a,c));do try{IB();break}catch(re){FE(a,re)}while(!0);Sa(),Dm.current=D,Tn=b,Pr!==null?c=0:(Zr=null,hi=0,c=Vr)}if(c!==0){if(c===2&&(b=pn(a),b!==0&&(_=b,c=_0(a,b))),c===1)throw g=Rf,zc(a,0),Rl(a,_),ns(a,Ce()),g;if(c===6)Rl(a,_);else{if(b=a.current.alternate,(_&30)===0&&!PB(b)&&(c=Om(a,_),c===2&&(D=pn(a),D!==0&&(_=D,c=_0(a,D))),c===1))throw g=Rf,zc(a,0),Rl(a,_),ns(a,Ce()),g;switch(a.finishedWork=b,a.finishedLanes=_,c){case 0:case 1:throw Error(t(345));case 2:Gc(a,ts,La);break;case 3:if(Rl(a,_),(_&130023424)===_&&(c=A0+500-Ce(),10<c)){if(on(a,0)!==0)break;if(b=a.suspendedLanes,(b&_)!==_){Hi(),a.pingedLanes|=a.suspendedLanes&b;break}a.timeoutHandle=sf(Gc.bind(null,a,ts,La),c);break}Gc(a,ts,La);break;case 4:if(Rl(a,_),(_&4194240)===_)break;for(c=a.eventTimes,b=-1;0<_;){var G=31-jt(_);D=1<<G,G=c[G],G>b&&(b=G),_&=~D}if(_=b,_=Ce()-_,_=(120>_?120:480>_?480:1080>_?1080:1920>_?1920:3e3>_?3e3:4320>_?4320:1960*DB(_/1960))-_,10<_){a.timeoutHandle=sf(Gc.bind(null,a,ts,La),_);break}Gc(a,ts,La);break;case 5:Gc(a,ts,La);break;default:throw Error(t(329))}}}return ns(a,Ce()),a.callbackNode===g?IE.bind(null,a):null}function _0(a,c){var g=Df;return a.current.memoizedState.isDehydrated&&(zc(a,c).flags|=256),a=Om(a,c),a!==2&&(c=ts,ts=g,c!==null&&C0(c)),a}function C0(a){ts===null?ts=a:ts.push.apply(ts,a)}function PB(a){for(var c=a;;){if(c.flags&16384){var g=c.updateQueue;if(g!==null&&(g=g.stores,g!==null))for(var _=0;_<g.length;_++){var b=g[_],D=b.getSnapshot;b=b.value;try{if(!Pi(D(),b))return!1}catch{return!1}}}if(g=c.child,c.subtreeFlags&16384&&g!==null)g.return=c,c=g;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Rl(a,c){for(c&=~y0,c&=~Pm,a.suspendedLanes|=c,a.pingedLanes&=~c,a=a.expirationTimes;0<c;){var g=31-jt(c),_=1<<g;a[g]=-1,c&=~_}}function NE(a){if((Tn&6)!==0)throw Error(t(327));Dd();var c=on(a,0);if((c&1)===0)return ns(a,Ce()),null;var g=Om(a,c);if(a.tag!==0&&g===2){var _=pn(a);_!==0&&(c=_,g=_0(a,_))}if(g===1)throw g=Rf,zc(a,0),Rl(a,c),ns(a,Ce()),g;if(g===6)throw Error(t(345));return a.finishedWork=a.current.alternate,a.finishedLanes=c,Gc(a,ts,La),ns(a,Ce()),null}function w0(a,c){var g=Tn;Tn|=1;try{return a(c)}finally{Tn=g,Tn===0&&(Rd=Ce()+500,Cc&&Fs())}}function Hc(a){Ml!==null&&Ml.tag===0&&(Tn&6)===0&&Dd();var c=Tn;Tn|=1;var g=Hs.transition,_=wn;try{if(Hs.transition=null,wn=1,a)return a()}finally{wn=_,Hs.transition=g,Tn=c,(Tn&6)===0&&Fs()}}function S0(){ys=Td.current,zn(Td)}function zc(a,c){a.finishedWork=null,a.finishedLanes=0;var g=a.timeoutHandle;if(g!==-1&&(a.timeoutHandle=-1,of(g)),Pr!==null)for(g=Pr.return;g!==null;){var _=g;switch(oo(_),_.tag){case 1:_=_.type.childContextTypes,_!=null&&xc();break;case 3:zo(),zn(ai),zn(Ur),Os();break;case 5:Cl(_);break;case 4:zo();break;case 13:zn(Wn);break;case 19:zn(Wn);break;case 10:Mc(_.type._context);break;case 22:case 23:S0()}g=g.return}if(Zr=a,Pr=a=Dl(a.current,null),hi=ys=c,Vr=0,Rf=null,y0=Pm=Uc=0,ts=Df=null,lo!==null){for(c=0;c<lo.length;c++)if(g=lo[c],_=g.interleaved,_!==null){g.interleaved=null;var b=_.next,D=g.pending;if(D!==null){var G=D.next;D.next=b,_.next=G}g.pending=_}lo=null}return a}function FE(a,c){do{var g=Pr;try{if(Sa(),Ta.current=Bd,gs){for(var _=Gn.memoizedState;_!==null;){var b=_.queue;b!==null&&(b.pending=null),_=_.next}gs=!1}if(uo=0,Sn=sr=Gn=null,Qr=!1,Go=0,v0.current=null,g===null||g.return===null){Vr=1,Rf=c,Pr=null;break}e:{var D=a,G=g.return,re=g,he=c;if(c=hi,re.flags|=32768,he!==null&&typeof he=="object"&&typeof he.then=="function"){var be=he,qe=re,et=qe.tag;if((qe.mode&1)===0&&(et===0||et===11||et===15)){var Xe=qe.alternate;Xe?(qe.updateQueue=Xe.updateQueue,qe.memoizedState=Xe.memoizedState,qe.lanes=Xe.lanes):(qe.updateQueue=null,qe.memoizedState=null)}var _t=wt(G);if(_t!==null){_t.flags&=-257,Zt(_t,G,re,D,c),_t.mode&1&&st(D,be,c),c=_t,he=be;var Mt=c.updateQueue;if(Mt===null){var Tt=new Set;Tt.add(he),c.updateQueue=Tt}else Mt.add(he);break e}else{if((c&1)===0){st(D,be,c),B0();break e}he=Error(t(426))}}else if(Vn&&re.mode&1){var Cr=wt(G);if(Cr!==null){(Cr.flags&65536)===0&&(Cr.flags|=256),Zt(Cr,G,re,D,c),El(B(he,re));break e}}D=he=B(he,re),Vr!==4&&(Vr=2),Df===null?Df=[D]:Df.push(D),D=G;do{switch(D.tag){case 3:D.flags|=65536,c&=-c,D.lanes|=c;var Ee=ge(D,he,c);Ba(D,Ee);break e;case 1:re=he;var fe=D.type,_e=D.stateNode;if((D.flags&128)===0&&(typeof fe.getDerivedStateFromError=="function"||_e!==null&&typeof _e.componentDidCatch=="function"&&(bl===null||!bl.has(_e)))){D.flags|=65536,c&=-c,D.lanes|=c;var at=Le(D,re,c);Ba(D,at);break e}}D=D.return}while(D!==null)}UE(g)}catch(Pt){c=Pt,Pr===g&&g!==null&&(Pr=g=g.return);continue}break}while(!0)}function kE(){var a=Dm.current;return Dm.current=Bd,a===null?Bd:a}function B0(){(Vr===0||Vr===3||Vr===2)&&(Vr=4),Zr===null||(Uc&268435455)===0&&(Pm&268435455)===0||Rl(Zr,hi)}function Om(a,c){var g=Tn;Tn|=2;var _=kE();(Zr!==a||hi!==c)&&(La=null,zc(a,c));do try{LB();break}catch(b){FE(a,b)}while(!0);if(Sa(),Tn=g,Dm.current=_,Pr!==null)throw Error(t(261));return Zr=null,hi=0,Vr}function LB(){for(;Pr!==null;)OE(Pr)}function IB(){for(;Pr!==null&&!Te();)OE(Pr)}function OE(a){var c=GE(a.alternate,a,ys);a.memoizedProps=a.pendingProps,c===null?UE(a):Pr=c,v0.current=null}function UE(a){var c=a;do{var g=c.alternate;if(a=c.return,(c.flags&32768)===0){if(g=BB(g,c,ys),g!==null){Pr=g;return}}else{if(g=bB(g,c),g!==null){g.flags&=32767,Pr=g;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{Vr=6,Pr=null;return}}if(c=c.sibling,c!==null){Pr=c;return}Pr=c=a}while(c!==null);Vr===0&&(Vr=5)}function Gc(a,c,g){var _=wn,b=Hs.transition;try{Hs.transition=null,wn=1,NB(a,c,g,_)}finally{Hs.transition=b,wn=_}return null}function NB(a,c,g,_){do Dd();while(Ml!==null);if((Tn&6)!==0)throw Error(t(327));g=a.finishedWork;var b=a.finishedLanes;if(g===null)return null;if(a.finishedWork=null,a.finishedLanes=0,g===a.current)throw Error(t(177));a.callbackNode=null,a.callbackPriority=0;var D=g.lanes|g.childLanes;if(Ds(a,D),a===Zr&&(Pr=Zr=null,hi=0),(g.subtreeFlags&2064)===0&&(g.flags&2064)===0||Im||(Im=!0,jE(Et,function(){return Dd(),null})),D=(g.flags&15990)!==0,(g.subtreeFlags&15990)!==0||D){D=Hs.transition,Hs.transition=null;var G=wn;wn=1;var re=Tn;Tn|=4,v0.current=null,TB(a,g),TE(g,a),Mr(nf),Ji=!!vl,nf=vl=null,a.current=g,RB(g),Pe(),Tn=re,wn=G,Hs.transition=D}else a.current=g;if(Im&&(Im=!1,Ml=a,Nm=b),D=a.pendingLanes,D===0&&(bl=null),ut(g.stateNode),ns(a,Ce()),c!==null)for(_=a.onRecoverableError,g=0;g<c.length;g++)b=c[g],_(b.value,{componentStack:b.stack,digest:b.digest});if(Lm)throw Lm=!1,a=E0,E0=null,a;return(Nm&1)!==0&&a.tag!==0&&Dd(),D=a.pendingLanes,(D&1)!==0?a===x0?Pf++:(Pf=0,x0=a):Pf=0,Fs(),null}function Dd(){if(Ml!==null){var a=nl(Nm),c=Hs.transition,g=wn;try{if(Hs.transition=null,wn=16>a?16:a,Ml===null)var _=!1;else{if(a=Ml,Ml=null,Nm=0,(Tn&6)!==0)throw Error(t(331));var b=Tn;for(Tn|=4,St=a.current;St!==null;){var D=St,G=D.child;if((St.flags&16)!==0){var re=D.deletions;if(re!==null){for(var he=0;he<re.length;he++){var be=re[he];for(St=be;St!==null;){var qe=St;switch(qe.tag){case 0:case 11:case 15:Tf(8,qe,D)}var et=qe.child;if(et!==null)et.return=qe,St=et;else for(;St!==null;){qe=St;var Xe=qe.sibling,_t=qe.return;if(wE(qe),qe===be){St=null;break}if(Xe!==null){Xe.return=_t,St=Xe;break}St=_t}}}var Mt=D.alternate;if(Mt!==null){var Tt=Mt.child;if(Tt!==null){Mt.child=null;do{var Cr=Tt.sibling;Tt.sibling=null,Tt=Cr}while(Tt!==null)}}St=D}}if((D.subtreeFlags&2064)!==0&&G!==null)G.return=D,St=G;else e:for(;St!==null;){if(D=St,(D.flags&2048)!==0)switch(D.tag){case 0:case 11:case 15:Tf(9,D,D.return)}var Ee=D.sibling;if(Ee!==null){Ee.return=D.return,St=Ee;break e}St=D.return}}var fe=a.current;for(St=fe;St!==null;){G=St;var _e=G.child;if((G.subtreeFlags&2064)!==0&&_e!==null)_e.return=G,St=_e;else e:for(G=fe;St!==null;){if(re=St,(re.flags&2048)!==0)try{switch(re.tag){case 0:case 11:case 15:Rm(9,re)}}catch(Pt){mr(re,re.return,Pt)}if(re===G){St=null;break e}var at=re.sibling;if(at!==null){at.return=re.return,St=at;break e}St=re.return}}if(Tn=b,Fs(),dt&&typeof dt.onPostCommitFiberRoot=="function")try{dt.onPostCommitFiberRoot(Vt,a)}catch{}_=!0}return _}finally{wn=g,Hs.transition=c}}return!1}function HE(a,c,g){c=B(g,c),c=ge(a,c,1),a=qn(a,c,1),c=Hi(),a!==null&&(Er(a,1,c),ns(a,c))}function mr(a,c,g){if(a.tag===3)HE(a,a,g);else for(;c!==null;){if(c.tag===3){HE(c,a,g);break}else if(c.tag===1){var _=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(bl===null||!bl.has(_))){a=B(g,a),a=Le(c,a,1),c=qn(c,a,1),a=Hi(),c!==null&&(Er(c,1,a),ns(c,a));break}}c=c.return}}function FB(a,c,g){var _=a.pingCache;_!==null&&_.delete(c),c=Hi(),a.pingedLanes|=a.suspendedLanes&g,Zr===a&&(hi&g)===g&&(Vr===4||Vr===3&&(hi&130023424)===hi&&500>Ce()-A0?zc(a,0):y0|=g),ns(a,c)}function zE(a,c){c===0&&((a.mode&1)===0?c=1:(c=Nn,Nn<<=1,(Nn&130023424)===0&&(Nn=4194304)));var g=Hi();a=ps(a,c),a!==null&&(Er(a,c,g),ns(a,g))}function kB(a){var c=a.memoizedState,g=0;c!==null&&(g=c.retryLane),zE(a,g)}function OB(a,c){var g=0;switch(a.tag){case 13:var _=a.stateNode,b=a.memoizedState;b!==null&&(g=b.retryLane);break;case 19:_=a.stateNode;break;default:throw Error(t(314))}_!==null&&_.delete(c),zE(a,g)}var GE;GE=function(a,c,g){if(a!==null)if(a.memoizedProps!==c.pendingProps||ai.current)ln=!0;else{if((a.lanes&g)===0&&(c.flags&128)===0)return ln=!1,SB(a,c,g);ln=(a.flags&131072)!==0}else ln=!1,Vn&&(c.flags&1048576)!==0&&df(c,gd,c.index);switch(c.lanes=0,c.tag){case 2:var _=c.type;Mm(a,c),a=c.pendingProps;var b=ya(c,Ur.current);Ho(c,g),b=Lc(null,c,_,a,b,g);var D=Af();return c.flags|=1,typeof b=="object"&&b!==null&&typeof b.render=="function"&&b.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,Yr(_)?(D=!0,Aa(c)):D=!1,c.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,an(c),b.updater=bd,c.stateNode=b,b._reactInternals=c,A(c,_,a,g),c=sn(null,c,_,!0,D,g)):(c.tag=0,Vn&&D&&hf(c),vt(null,c,b,g),c=c.child),c;case 16:_=c.elementType;e:{switch(Mm(a,c),a=c.pendingProps,b=_._init,_=b(_._payload),c.type=_,b=c.tag=HB(_),a=es(_,a),b){case 0:c=mt(null,c,_,a,g);break e;case 1:c=Rt(null,c,_,a,g);break e;case 11:c=jr(null,c,_,a,g);break e;case 14:c=Ui(null,c,_,es(_.type,a),g);break e}throw Error(t(306,_,""))}return c;case 0:return _=c.type,b=c.pendingProps,b=c.elementType===_?b:es(_,b),mt(a,c,_,b,g);case 1:return _=c.type,b=c.pendingProps,b=c.elementType===_?b:es(_,b),Rt(a,c,_,b,g);case 3:e:{if(en(c),a===null)throw Error(t(387));_=c.pendingProps,D=c.memoizedState,b=D.element,ur(a,c),ir(c,_,null,g);var G=c.memoizedState;if(_=G.element,D.isDehydrated)if(D={element:_,isDehydrated:!1,cache:G.cache,pendingSuspenseBoundaries:G.pendingSuspenseBoundaries,transitions:G.transitions},c.updateQueue.baseState=D,c.memoizedState=D,c.flags&256){b=B(Error(t(423)),c),c=_n(a,c,_,g,b);break e}else if(_!==b){b=B(Error(t(424)),c),c=_n(a,c,_,g,b);break e}else for(ci=to(c.stateNode.containerInfo.firstChild),Hr=c,Vn=!0,Zi=null,g=bc(c,null,_,g),c.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(Uo(),_===b){c=Pa(a,c,g);break e}vt(a,c,_,g)}c=c.child}return c;case 5:return Ma(c),a===null&&yd(c),_=c.type,b=c.pendingProps,D=a!==null?a.memoizedProps:null,G=b.children,rf(_,b)?G=null:D!==null&&rf(_,D)&&(c.flags|=32),Re(a,c),vt(a,c,G,g),c.child;case 6:return a===null&&yd(c),null;case 13:return po(a,c,g);case 4:return Dc(c,c.stateNode.containerInfo),_=c.pendingProps,a===null?c.child=_a(c,null,_,g):vt(a,c,_,g),c.child;case 11:return _=c.type,b=c.pendingProps,b=c.elementType===_?b:es(_,b),jr(a,c,_,b,g);case 7:return vt(a,c,c.pendingProps,g),c.child;case 8:return vt(a,c,c.pendingProps.children,g),c.child;case 12:return vt(a,c,c.pendingProps.children,g),c.child;case 10:e:{if(_=c.type._context,b=c.pendingProps,D=c.memoizedProps,G=b.value,kn(Ca,_._currentValue),_._currentValue=G,D!==null)if(Pi(D.value,G)){if(D.children===b.children&&!ai.current){c=Pa(a,c,g);break e}}else for(D=c.child,D!==null&&(D.return=c);D!==null;){var re=D.dependencies;if(re!==null){G=D.child;for(var he=re.firstContext;he!==null;){if(he.context===_){if(D.tag===1){he=In(-1,g&-g),he.tag=2;var be=D.updateQueue;if(be!==null){be=be.shared;var qe=be.pending;qe===null?he.next=he:(he.next=qe.next,qe.next=he),be.pending=he}}D.lanes|=g,he=D.alternate,he!==null&&(he.lanes|=g),Tc(D.return,g,c),re.lanes|=g;break}he=he.next}}else if(D.tag===10)G=D.type===c.type?null:D.child;else if(D.tag===18){if(G=D.return,G===null)throw Error(t(341));G.lanes|=g,re=G.alternate,re!==null&&(re.lanes|=g),Tc(G,g,c),G=D.sibling}else G=D.child;if(G!==null)G.return=D;else for(G=D;G!==null;){if(G===c){G=null;break}if(D=G.sibling,D!==null){D.return=G.return,G=D;break}G=G.return}D=G}vt(a,c,b.children,g),c=c.child}return c;case 9:return b=c.type,_=c.pendingProps.children,Ho(c,g),b=Ni(b),_=_(b),c.flags|=1,vt(a,c,_,g),c.child;case 14:return _=c.type,b=es(_,c.pendingProps),b=es(_.type,b),Ui(a,c,_,b,g);case 15:return we(a,c,c.type,c.pendingProps,g);case 17:return _=c.type,b=c.pendingProps,b=c.elementType===_?b:es(_,b),Mm(a,c),c.tag=1,Yr(_)?(a=!0,Aa(c)):a=!1,Ho(c,g),d(c,_,b),A(c,_,b,g),sn(null,c,_,!0,a,g);case 19:return AE(a,c,g);case 22:return ye(a,c,g)}throw Error(t(156,c.tag))};function jE(a,c){return ie(a,c)}function UB(a,c,g,_){this.tag=a,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zs(a,c,g,_){return new UB(a,c,g,_)}function b0(a){return a=a.prototype,!(!a||!a.isReactComponent)}function HB(a){if(typeof a=="function")return b0(a)?1:0;if(a!=null){if(a=a.$$typeof,a===de)return 11;if(a===me)return 14}return 2}function Dl(a,c){var g=a.alternate;return g===null?(g=zs(a.tag,c,a.key,a.mode),g.elementType=a.elementType,g.type=a.type,g.stateNode=a.stateNode,g.alternate=a,a.alternate=g):(g.pendingProps=c,g.type=a.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=a.flags&14680064,g.childLanes=a.childLanes,g.lanes=a.lanes,g.child=a.child,g.memoizedProps=a.memoizedProps,g.memoizedState=a.memoizedState,g.updateQueue=a.updateQueue,c=a.dependencies,g.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},g.sibling=a.sibling,g.index=a.index,g.ref=a.ref,g}function Um(a,c,g,_,b,D){var G=2;if(_=a,typeof a=="function")b0(a)&&(G=1);else if(typeof a=="string")G=5;else e:switch(a){case O:return jc(g.children,b,D,c);case j:G=8,b|=8;break;case F:return a=zs(12,g,c,b|2),a.elementType=F,a.lanes=D,a;case ve:return a=zs(13,g,c,b),a.elementType=ve,a.lanes=D,a;case Y:return a=zs(19,g,c,b),a.elementType=Y,a.lanes=D,a;case Ae:return Hm(g,b,D,c);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case H:G=10;break e;case ee:G=9;break e;case de:G=11;break e;case me:G=14;break e;case pe:G=16,_=null;break e}throw Error(t(130,a==null?a:typeof a,""))}return c=zs(G,g,c,b),c.elementType=a,c.type=_,c.lanes=D,c}function jc(a,c,g,_){return a=zs(7,a,_,c),a.lanes=g,a}function Hm(a,c,g,_){return a=zs(22,a,_,c),a.elementType=Ae,a.lanes=g,a.stateNode={isHidden:!1},a}function M0(a,c,g){return a=zs(6,a,null,c),a.lanes=g,a}function T0(a,c,g){return c=zs(4,a.children!==null?a.children:[],a.key,c),c.lanes=g,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}function zB(a,c,g,_,b){this.tag=c,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vi(0),this.expirationTimes=vi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vi(0),this.identifierPrefix=_,this.onRecoverableError=b,this.mutableSourceEagerHydrationData=null}function R0(a,c,g,_,b,D,G,re,he){return a=new zB(a,c,g,re,he),c===1?(c=1,D===!0&&(c|=8)):c=0,D=zs(3,null,null,c),a.current=D,D.stateNode=a,D.memoizedState={element:_,isDehydrated:g,cache:null,transitions:null,pendingSuspenseBoundaries:null},an(D),a}function GB(a,c,g){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:I,key:_==null?null:""+_,children:a,containerInfo:c,implementation:g}}function VE(a){if(!a)return ro;a=a._reactInternals;e:{if(J(a)!==a||a.tag!==1)throw Error(t(170));var c=a;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(Yr(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(t(171))}if(a.tag===1){var g=a.type;if(Yr(g))return _c(a,g,c)}return c}function WE(a,c,g,_,b,D,G,re,he){return a=R0(g,_,!0,a,b,D,G,re,he),a.context=VE(null),g=a.current,_=Hi(),b=Tl(g),D=In(_,b),D.callback=c??null,qn(g,D,b),a.current.lanes=b,Er(a,b,_),ns(a,_),a}function zm(a,c,g,_){var b=c.current,D=Hi(),G=Tl(b);return g=VE(g),c.context===null?c.context=g:c.pendingContext=g,c=In(D,G),c.payload={element:a},_=_===void 0?null:_,_!==null&&(c.callback=_),a=qn(b,c,G),a!==null&&(vo(a,b,G,D),$r(a,b,G)),G}function Gm(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function JE(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var g=a.retryLane;a.retryLane=g!==0&&g<c?g:c}}function D0(a,c){JE(a,c),(a=a.alternate)&&JE(a,c)}function jB(){return null}var XE=typeof reportError=="function"?reportError:function(a){console.error(a)};function P0(a){this._internalRoot=a}jm.prototype.render=P0.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(t(409));zm(a,c,null,null)},jm.prototype.unmount=P0.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;Hc(function(){zm(null,a,null,null)}),c[Ii]=null}};function jm(a){this._internalRoot=a}jm.prototype.unstable_scheduleHydration=function(a){if(a){var c=Nu();a={blockedOn:null,target:a,priority:c};for(var g=0;g<Do.length&&c!==0&&c<Do[g].priority;g++);Do.splice(g,0,a),g===0&&Ou(a)}};function L0(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function Vm(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function KE(){}function VB(a,c,g,_,b){if(b){if(typeof _=="function"){var D=_;_=function(){var be=Gm(G);D.call(be)}}var G=WE(c,_,a,0,null,!1,!1,"",KE);return a._reactRootContainer=G,a[Ii]=G.current,ml(a.nodeType===8?a.parentNode:a),Hc(),G}for(;b=a.lastChild;)a.removeChild(b);if(typeof _=="function"){var re=_;_=function(){var be=Gm(he);re.call(be)}}var he=R0(a,0,!1,null,null,!1,!1,"",KE);return a._reactRootContainer=he,a[Ii]=he.current,ml(a.nodeType===8?a.parentNode:a),Hc(function(){zm(c,he,g,_)}),he}function Wm(a,c,g,_,b){var D=g._reactRootContainer;if(D){var G=D;if(typeof b=="function"){var re=b;b=function(){var he=Gm(G);re.call(he)}}zm(c,G,a,b)}else G=VB(g,c,a,b,_);return Gm(G)}sc=function(a){switch(a.tag){case 3:var c=a.stateNode;if(c.current.memoizedState.isDehydrated){var g=vn(c.pendingLanes);g!==0&&(tl(c,g|1),ns(c,Ce()),(Tn&6)===0&&(Rd=Ce()+500,Fs()))}break;case 13:Hc(function(){var _=ps(a,1);if(_!==null){var b=Hi();vo(_,a,1,b)}}),D0(a,1)}},Uh=function(a){if(a.tag===13){var c=ps(a,134217728);if(c!==null){var g=Hi();vo(c,a,134217728,g)}D0(a,134217728)}},tm=function(a){if(a.tag===13){var c=Tl(a),g=ps(a,c);if(g!==null){var _=Hi();vo(g,a,c,_)}D0(a,c)}},Nu=function(){return wn},Fu=function(a,c){var g=wn;try{return wn=a,c()}finally{wn=g}},ke=function(a,c,g){switch(c){case"input":if(bt(a,g),c=g.name,g.type==="radio"&&c!=null){for(g=a;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<g.length;c++){var _=g[c];if(_!==a&&_.form===a.form){var b=fd(_);if(!b)throw Error(t(90));se(_),bt(_,b)}}}break;case"textarea":W(a,g);break;case"select":c=g.value,c!=null&&Kt(a,!!g.multiple,c,!1)}},Bt=w0,tn=Hc;var WB={usingClientEntryPoint:!1,Events:[no,cr,fd,Ne,Qe,w0]},Lf={findFiberByHostInstance:Oo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},JB={bundleType:Lf.bundleType,version:Lf.version,rendererPackageName:Lf.rendererPackageName,rendererConfig:Lf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:R.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=$(a),a===null?null:a.stateNode},findFiberByHostInstance:Lf.findFiberByHostInstance||jB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jm.isDisabled&&Jm.supportsFiber)try{Vt=Jm.inject(JB),dt=Jm}catch{}}return rs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WB,rs.createPortal=function(a,c){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!L0(c))throw Error(t(200));return GB(a,c,null,g)},rs.createRoot=function(a,c){if(!L0(a))throw Error(t(299));var g=!1,_="",b=XE;return c!=null&&(c.unstable_strictMode===!0&&(g=!0),c.identifierPrefix!==void 0&&(_=c.identifierPrefix),c.onRecoverableError!==void 0&&(b=c.onRecoverableError)),c=R0(a,1,!1,null,null,g,!1,_,b),a[Ii]=c.current,ml(a.nodeType===8?a.parentNode:a),new P0(c)},rs.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(t(188)):(a=Object.keys(a).join(","),Error(t(268,a)));return a=$(c),a=a===null?null:a.stateNode,a},rs.flushSync=function(a){return Hc(a)},rs.hydrate=function(a,c,g){if(!Vm(c))throw Error(t(200));return Wm(null,a,c,!0,g)},rs.hydrateRoot=function(a,c,g){if(!L0(a))throw Error(t(405));var _=g!=null&&g.hydratedSources||null,b=!1,D="",G=XE;if(g!=null&&(g.unstable_strictMode===!0&&(b=!0),g.identifierPrefix!==void 0&&(D=g.identifierPrefix),g.onRecoverableError!==void 0&&(G=g.onRecoverableError)),c=WE(c,null,a,1,g??null,b,!1,D,G),a[Ii]=c.current,ml(a),_)for(a=0;a<_.length;a++)g=_[a],b=g._getVersion,b=b(g._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[g,b]:c.mutableSourceEagerHydrationData.push(g,b);return new jm(c)},rs.render=function(a,c,g){if(!Vm(c))throw Error(t(200));return Wm(null,a,c,!1,g)},rs.unmountComponentAtNode=function(a){if(!Vm(a))throw Error(t(40));return a._reactRootContainer?(Hc(function(){Wm(null,null,a,!1,function(){a._reactRootContainer=null,a[Ii]=null})}),!0):!1},rs.unstable_batchedUpdates=w0,rs.unstable_renderSubtreeIntoContainer=function(a,c,g,_){if(!Vm(g))throw Error(t(200));if(a==null||a._reactInternals===void 0)throw Error(t(38));return Wm(a,c,g,!1,_)},rs.version="18.3.1-next-f1338f8080-20240426",rs}var nx;function eb(){if(nx)return F0.exports;nx=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),F0.exports=ZB(),F0.exports}var rx;function tb(){if(rx)return Xm;rx=1;var r=eb();return Xm.createRoot=r.createRoot,Xm.hydrateRoot=r.hydrateRoot,Xm}var nb=tb();/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var ix="popstate";function rb(r={}){function e(n,i){let{pathname:s,search:o,hash:l}=n.location;return ey("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(n,i){return typeof i=="string"?i:up(i)}return sb(e,t,null,r)}function hr(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function qo(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ib(){return Math.random().toString(36).substring(2,10)}function sx(r,e){return{usr:r.state,key:r.key,idx:e}}function ey(r,e,t=null,n){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?Rh(e):e,state:t,key:e&&e.key||n||ib()}}function up({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function Rh(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substring(n),r=r.substring(0,n)),r&&(e.pathname=r)}return e}function sb(r,e,t,n={}){let{window:i=document.defaultView,v5Compat:s=!1}=n,o=i.history,l="POP",u=null,h=p();h==null&&(h=0,o.replaceState({...o.state,idx:h},""));function p(){return(o.state||{idx:null}).idx}function m(){l="POP";let C=p(),x=C==null?null:C-h;h=C,u&&u({action:l,location:w.location,delta:x})}function v(C,x){l="PUSH";let M=ey(w.location,C,x);h=p()+1;let S=sx(M,h),R=w.createHref(M);try{o.pushState(S,"",R)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;i.location.assign(R)}s&&u&&u({action:l,location:w.location,delta:1})}function y(C,x){l="REPLACE";let M=ey(w.location,C,x);h=p();let S=sx(M,h),R=w.createHref(M);o.replaceState(S,"",R),s&&u&&u({action:l,location:w.location,delta:0})}function E(C){return ob(C)}let w={get action(){return l},get location(){return r(i,o)},listen(C){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(ix,m),u=C,()=>{i.removeEventListener(ix,m),u=null}},createHref(C){return e(i,C)},createURL:E,encodeLocation(C){let x=E(C);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:v,replace:y,go(C){return o.go(C)}};return w}function ob(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),hr(t,"No window.location.(origin|href) available to create URL");let n=typeof r=="string"?r:up(r);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=t+n),new URL(n,t)}function WC(r,e,t="/"){return ab(r,e,t,!1)}function ab(r,e,t,n){let i=typeof e=="string"?Rh(e):e,s=Ya(i.pathname||"/",t);if(s==null)return null;let o=JC(r);lb(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let h=Ab(s);l=vb(o[u],h,n)}return l}function JC(r,e=[],t=[],n="",i=!1){let s=(o,l,u=i,h)=>{let p={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(n)&&u)return;hr(p.relativePath.startsWith(n),`Absolute route path "${p.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(n.length)}let m=Ja([n,p.relativePath]),v=t.concat(p);o.children&&o.children.length>0&&(hr(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),JC(o.children,e,v,m,u)),!(o.path==null&&!o.index)&&e.push({path:m,score:mb(m,o.index),routesMeta:v})};return r.forEach((o,l)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))s(o,l);else for(let h of XC(o.path))s(o,l,!0,h)}),e}function XC(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let o=XC(n.join("/")),l=[];return l.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&l.push(...o),l.map(u=>r.startsWith("/")&&u===""?"/":u)}function lb(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:gb(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var cb=/^:[\w-]+$/,ub=3,db=2,hb=1,fb=10,pb=-2,ox=r=>r==="*";function mb(r,e){let t=r.split("/"),n=t.length;return t.some(ox)&&(n+=pb),e&&(n+=db),t.filter(i=>!ox(i)).reduce((i,s)=>i+(cb.test(s)?ub:s===""?hb:fb),n)}function gb(r,e){return r.length===e.length&&r.slice(0,-1).every((n,i)=>n===e[i])?r[r.length-1]-e[e.length-1]:0}function vb(r,e,t=!1){let{routesMeta:n}=r,i={},s="/",o=[];for(let l=0;l<n.length;++l){let u=n[l],h=l===n.length-1,p=s==="/"?e:e.slice(s.length)||"/",m=cg({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},p),v=u.route;if(!m&&h&&t&&!n[n.length-1].route.index&&(m=cg({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},p)),!m)return null;Object.assign(i,m.params),o.push({params:i,pathname:Ja([s,m.pathname]),pathnameBase:Cb(Ja([s,m.pathnameBase])),route:v}),m.pathnameBase!=="/"&&(s=Ja([s,m.pathnameBase]))}return o}function cg(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=yb(r.path,r.caseSensitive,r.end),i=e.match(t);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:n.reduce((h,{paramName:p,isOptional:m},v)=>{if(p==="*"){let E=l[v]||"";o=s.slice(0,s.length-E.length).replace(/(.)\/+$/,"$1")}const y=l[v];return m&&!y?h[p]=void 0:h[p]=(y||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:o,pattern:r}}function yb(r,e=!1,t=!0){qo(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let n=[],i="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(n.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(n.push({paramName:"*"}),i+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":r!==""&&r!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function Ab(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return qo(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function Ya(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}var Eb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function xb(r,e="/"){let{pathname:t,search:n="",hash:i=""}=typeof r=="string"?Rh(r):r,s;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?s=ax(t.substring(1),"/"):s=ax(t,e)):s=e,{pathname:s,search:wb(n),hash:Sb(i)}}function ax(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function U0(r,e,t,n){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function _b(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function KC(r){let e=_b(r);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function qC(r,e,t,n=!1){let i;typeof r=="string"?i=Rh(r):(i={...r},hr(!i.pathname||!i.pathname.includes("?"),U0("?","pathname","search",i)),hr(!i.pathname||!i.pathname.includes("#"),U0("#","pathname","hash",i)),hr(!i.search||!i.search.includes("#"),U0("#","search","hash",i)));let s=r===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=t;else{let m=e.length-1;if(!n&&o.startsWith("..")){let v=o.split("/");for(;v[0]==="..";)v.shift(),m-=1;i.pathname=v.join("/")}l=m>=0?e[m]:"/"}let u=xb(i,l),h=o&&o!=="/"&&o.endsWith("/"),p=(s||o===".")&&t.endsWith("/");return!u.pathname.endsWith("/")&&(h||p)&&(u.pathname+="/"),u}var Ja=r=>r.join("/").replace(/\/\/+/g,"/"),Cb=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),wb=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,Sb=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r,Bb=class{constructor(r,e,t,n=!1){this.status=r,this.statusText=e||"",this.internal=n,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function bb(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function Mb(r){return r.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var YC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function $C(r,e){let t=r;if(typeof t!="string"||!Eb.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let n=t,i=!1;if(YC)try{let s=new URL(window.location.href),o=t.startsWith("//")?new URL(s.protocol+t):new URL(t),l=Ya(o.pathname,e);o.origin===s.origin&&l!=null?t=l+o.search+o.hash:i=!0}catch{qo(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:i,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var QC=["POST","PUT","PATCH","DELETE"];new Set(QC);var Tb=["GET",...QC];new Set(Tb);var Dh=V.createContext(null);Dh.displayName="DataRouter";var _g=V.createContext(null);_g.displayName="DataRouterState";var Rb=V.createContext(!1),ZC=V.createContext({isTransitioning:!1});ZC.displayName="ViewTransition";var Db=V.createContext(new Map);Db.displayName="Fetchers";var Pb=V.createContext(null);Pb.displayName="Await";var Js=V.createContext(null);Js.displayName="Navigation";var Np=V.createContext(null);Np.displayName="Location";var ea=V.createContext({outlet:null,matches:[],isDataRoute:!1});ea.displayName="Route";var lA=V.createContext(null);lA.displayName="RouteError";var ew="REACT_ROUTER_ERROR",Lb="REDIRECT",Ib="ROUTE_ERROR_RESPONSE";function Nb(r){if(r.startsWith(`${ew}:${Lb}:{`))try{let e=JSON.parse(r.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function Fb(r){if(r.startsWith(`${ew}:${Ib}:{`))try{let e=JSON.parse(r.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new Bb(e.status,e.statusText,e.data)}catch{}}function kb(r,{relative:e}={}){hr(Fp(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=V.useContext(Js),{hash:i,pathname:s,search:o}=kp(r,{relative:e}),l=s;return t!=="/"&&(l=s==="/"?t:Ja([t,s])),n.createHref({pathname:l,search:o,hash:i})}function Fp(){return V.useContext(Np)!=null}function ec(){return hr(Fp(),"useLocation() may be used only in the context of a <Router> component."),V.useContext(Np).location}var tw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function nw(r){V.useContext(Js).static||V.useLayoutEffect(r)}function tc(){let{isDataRoute:r}=V.useContext(ea);return r?$b():Ob()}function Ob(){hr(Fp(),"useNavigate() may be used only in the context of a <Router> component.");let r=V.useContext(Dh),{basename:e,navigator:t}=V.useContext(Js),{matches:n}=V.useContext(ea),{pathname:i}=ec(),s=JSON.stringify(KC(n)),o=V.useRef(!1);return nw(()=>{o.current=!0}),V.useCallback((u,h={})=>{if(qo(o.current,tw),!o.current)return;if(typeof u=="number"){t.go(u);return}let p=qC(u,JSON.parse(s),i,h.relative==="path");r==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Ja([e,p.pathname])),(h.replace?t.replace:t.push)(p,h.state,h)},[e,t,s,i,r])}V.createContext(null);function Ub(){let{matches:r}=V.useContext(ea),e=r[r.length-1];return e?e.params:{}}function kp(r,{relative:e}={}){let{matches:t}=V.useContext(ea),{pathname:n}=ec(),i=JSON.stringify(KC(t));return V.useMemo(()=>qC(r,JSON.parse(i),n,e==="path"),[r,i,n,e])}function Hb(r,e){return rw(r,e)}function rw(r,e,t,n,i){var M;hr(Fp(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=V.useContext(Js),{matches:o}=V.useContext(ea),l=o[o.length-1],u=l?l.params:{},h=l?l.pathname:"/",p=l?l.pathnameBase:"/",m=l&&l.route;{let S=m&&m.path||"";sw(h,!m||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let v=ec(),y;if(e){let S=typeof e=="string"?Rh(e):e;hr(p==="/"||((M=S.pathname)==null?void 0:M.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${S.pathname}" was given in the \`location\` prop.`),y=S}else y=v;let E=y.pathname||"/",w=E;if(p!=="/"){let S=p.replace(/^\//,"").split("/");w="/"+E.replace(/^\//,"").split("/").slice(S.length).join("/")}let C=WC(r,{pathname:w});qo(m||C!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),qo(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=Wb(C&&C.map(S=>Object.assign({},S,{params:Object.assign({},u,S.params),pathname:Ja([p,s.encodeLocation?s.encodeLocation(S.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?p:Ja([p,s.encodeLocation?s.encodeLocation(S.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathnameBase])})),o,t,n,i);return e&&x?V.createElement(Np.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},x):x}function zb(){let r=Yb(),e=bb(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",r),o=V.createElement(V.Fragment,null,V.createElement("p",null," Hey developer "),V.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",V.createElement("code",{style:s},"ErrorBoundary")," or"," ",V.createElement("code",{style:s},"errorElement")," prop on your route.")),V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),t?V.createElement("pre",{style:i},t):null,o)}var Gb=V.createElement(zb,null),iw=class extends V.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.onError?this.props.onError(r,e):console.error("React Router caught the following error during render",r)}render(){let r=this.state.error;if(this.context&&typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){const t=Fb(r.digest);t&&(r=t)}let e=r!==void 0?V.createElement(ea.Provider,{value:this.props.routeContext},V.createElement(lA.Provider,{value:r,children:this.props.component})):this.props.children;return this.context?V.createElement(jb,{error:r},e):e}};iw.contextType=Rb;var H0=new WeakMap;function jb({children:r,error:e}){let{basename:t}=V.useContext(Js);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let n=Nb(e.digest);if(n){let i=H0.get(e);if(i)throw i;let s=$C(n.location,t);if(YC&&!H0.get(e))if(s.isExternal||n.reloadDocument)window.location.href=s.absoluteURL||s.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(s.to,{replace:n.replace}));throw H0.set(e,o),o}return V.createElement("meta",{httpEquiv:"refresh",content:`0;url=${s.absoluteURL||s.to}`})}}return r}function Vb({routeContext:r,match:e,children:t}){let n=V.useContext(Dh);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),V.createElement(ea.Provider,{value:r},t)}function Wb(r,e=[],t=null,n=null,i=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let s=r,o=t==null?void 0:t.errors;if(o!=null){let p=s.findIndex(m=>m.route.id&&(o==null?void 0:o[m.route.id])!==void 0);hr(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,p+1))}let l=!1,u=-1;if(t)for(let p=0;p<s.length;p++){let m=s[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(u=p),m.route.id){let{loaderData:v,errors:y}=t,E=m.route.loader&&!v.hasOwnProperty(m.route.id)&&(!y||y[m.route.id]===void 0);if(m.route.lazy||E){l=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}let h=t&&n?(p,m)=>{var v,y;n(p,{location:t.location,params:((y=(v=t.matches)==null?void 0:v[0])==null?void 0:y.params)??{},unstable_pattern:Mb(t.matches),errorInfo:m})}:void 0;return s.reduceRight((p,m,v)=>{let y,E=!1,w=null,C=null;t&&(y=o&&m.route.id?o[m.route.id]:void 0,w=m.route.errorElement||Gb,l&&(u<0&&v===0?(sw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,C=null):u===v&&(E=!0,C=m.route.hydrateFallbackElement||null)));let x=e.concat(s.slice(0,v+1)),M=()=>{let S;return y?S=w:E?S=C:m.route.Component?S=V.createElement(m.route.Component,null):m.route.element?S=m.route.element:S=p,V.createElement(Vb,{match:m,routeContext:{outlet:p,matches:x,isDataRoute:t!=null},children:S})};return t&&(m.route.ErrorBoundary||m.route.errorElement||v===0)?V.createElement(iw,{location:t.location,revalidation:t.revalidation,component:w,error:y,children:M(),routeContext:{outlet:null,matches:x,isDataRoute:!0},onError:h}):M()},null)}function cA(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Jb(r){let e=V.useContext(Dh);return hr(e,cA(r)),e}function Xb(r){let e=V.useContext(_g);return hr(e,cA(r)),e}function Kb(r){let e=V.useContext(ea);return hr(e,cA(r)),e}function uA(r){let e=Kb(r),t=e.matches[e.matches.length-1];return hr(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function qb(){return uA("useRouteId")}function Yb(){var n;let r=V.useContext(lA),e=Xb("useRouteError"),t=uA("useRouteError");return r!==void 0?r:(n=e.errors)==null?void 0:n[t]}function $b(){let{router:r}=Jb("useNavigate"),e=uA("useNavigate"),t=V.useRef(!1);return nw(()=>{t.current=!0}),V.useCallback(async(i,s={})=>{qo(t.current,tw),t.current&&(typeof i=="number"?await r.navigate(i):await r.navigate(i,{fromRouteId:e,...s}))},[r,e])}var lx={};function sw(r,e,t){!e&&!lx[r]&&(lx[r]=!0,qo(!1,t))}V.memo(Qb);function Qb({routes:r,future:e,state:t,onError:n}){return rw(r,void 0,t,n,e)}function _o(r){hr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Zb({basename:r="/",children:e=null,location:t,navigationType:n="POP",navigator:i,static:s=!1,unstable_useTransitions:o}){hr(!Fp(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=r.replace(/^\/*/,"/"),u=V.useMemo(()=>({basename:l,navigator:i,static:s,unstable_useTransitions:o,future:{}}),[l,i,s,o]);typeof t=="string"&&(t=Rh(t));let{pathname:h="/",search:p="",hash:m="",state:v=null,key:y="default"}=t,E=V.useMemo(()=>{let w=Ya(h,l);return w==null?null:{location:{pathname:w,search:p,hash:m,state:v,key:y},navigationType:n}},[l,h,p,m,v,y,n]);return qo(E!=null,`<Router basename="${l}"> is not able to match the URL "${h}${p}${m}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:V.createElement(Js.Provider,{value:u},V.createElement(Np.Provider,{children:e,value:E}))}function eM({children:r,location:e}){return Hb(ty(r),e)}function ty(r,e=[]){let t=[];return V.Children.forEach(r,(n,i)=>{if(!V.isValidElement(n))return;let s=[...e,i];if(n.type===V.Fragment){t.push.apply(t,ty(n.props.children,s));return}hr(n.type===_o,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),hr(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=ty(n.props.children,s)),t.push(o)}),t}var Q2="get",Z2="application/x-www-form-urlencoded";function Cg(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function tM(r){return Cg(r)&&r.tagName.toLowerCase()==="button"}function nM(r){return Cg(r)&&r.tagName.toLowerCase()==="form"}function rM(r){return Cg(r)&&r.tagName.toLowerCase()==="input"}function iM(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function sM(r,e){return r.button===0&&(!e||e==="_self")&&!iM(r)}var Km=null;function oM(){if(Km===null)try{new FormData(document.createElement("form"),0),Km=!1}catch{Km=!0}return Km}var aM=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function z0(r){return r!=null&&!aM.has(r)?(qo(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Z2}"`),null):r}function lM(r,e){let t,n,i,s,o;if(nM(r)){let l=r.getAttribute("action");n=l?Ya(l,e):null,t=r.getAttribute("method")||Q2,i=z0(r.getAttribute("enctype"))||Z2,s=new FormData(r)}else if(tM(r)||rM(r)&&(r.type==="submit"||r.type==="image")){let l=r.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=r.getAttribute("formaction")||l.getAttribute("action");if(n=u?Ya(u,e):null,t=r.getAttribute("formmethod")||l.getAttribute("method")||Q2,i=z0(r.getAttribute("formenctype"))||z0(l.getAttribute("enctype"))||Z2,s=new FormData(l,r),!oM()){let{name:h,type:p,value:m}=r;if(p==="image"){let v=h?`${h}.`:"";s.append(`${v}x`,"0"),s.append(`${v}y`,"0")}else h&&s.append(h,m)}}else{if(Cg(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Q2,n=null,i=Z2,o=r}return s&&i==="text/plain"&&(o=s,s=void 0),{action:n,method:t.toLowerCase(),encType:i,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function dA(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function cM(r,e,t,n){let i=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return t?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${n}`:i.pathname=`${i.pathname}.${n}`:i.pathname==="/"?i.pathname=`_root.${n}`:e&&Ya(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function uM(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function dM(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function hM(r,e,t){let n=await Promise.all(r.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await uM(s,t);return o.links?o.links():[]}return[]}));return gM(n.flat(1).filter(dM).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function cx(r,e,t,n,i,s){let o=(u,h)=>t[h]?u.route.id!==t[h].route.id:!0,l=(u,h)=>{var p;return t[h].pathname!==u.pathname||((p=t[h].route.path)==null?void 0:p.endsWith("*"))&&t[h].params["*"]!==u.params["*"]};return s==="assets"?e.filter((u,h)=>o(u,h)||l(u,h)):s==="data"?e.filter((u,h)=>{var m;let p=n.routes[u.route.id];if(!p||!p.hasLoader)return!1;if(o(u,h)||l(u,h))return!0;if(u.route.shouldRevalidate){let v=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((m=t[0])==null?void 0:m.params)||{},nextUrl:new URL(r,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function fM(r,e,{includeHydrateFallback:t}={}){return pM(r.map(n=>{let i=e.routes[n.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function pM(r){return[...new Set(r)]}function mM(r){let e={},t=Object.keys(r).sort();for(let n of t)e[n]=r[n];return e}function gM(r,e){let t=new Set;return new Set(e),r.reduce((n,i)=>{let s=JSON.stringify(mM(i));return t.has(s)||(t.add(s),n.push({key:s,link:i})),n},[])}function ow(){let r=V.useContext(Dh);return dA(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function vM(){let r=V.useContext(_g);return dA(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var hA=V.createContext(void 0);hA.displayName="FrameworkContext";function aw(){let r=V.useContext(hA);return dA(r,"You must render this element inside a <HydratedRouter> element"),r}function yM(r,e){let t=V.useContext(hA),[n,i]=V.useState(!1),[s,o]=V.useState(!1),{onFocus:l,onBlur:u,onMouseEnter:h,onMouseLeave:p,onTouchStart:m}=e,v=V.useRef(null);V.useEffect(()=>{if(r==="render"&&o(!0),r==="viewport"){let w=x=>{x.forEach(M=>{o(M.isIntersecting)})},C=new IntersectionObserver(w,{threshold:.5});return v.current&&C.observe(v.current),()=>{C.disconnect()}}},[r]),V.useEffect(()=>{if(n){let w=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(w)}}},[n]);let y=()=>{i(!0)},E=()=>{i(!1),o(!1)};return t?r!=="intent"?[s,v,{}]:[s,v,{onFocus:Nf(l,y),onBlur:Nf(u,E),onMouseEnter:Nf(h,y),onMouseLeave:Nf(p,E),onTouchStart:Nf(m,y)}]:[!1,v,{}]}function Nf(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function AM({page:r,...e}){let{router:t}=ow(),n=V.useMemo(()=>WC(t.routes,r,t.basename),[t.routes,r,t.basename]);return n?V.createElement(xM,{page:r,matches:n,...e}):null}function EM(r){let{manifest:e,routeModules:t}=aw(),[n,i]=V.useState([]);return V.useEffect(()=>{let s=!1;return hM(r,e,t).then(o=>{s||i(o)}),()=>{s=!0}},[r,e,t]),n}function xM({page:r,matches:e,...t}){let n=ec(),{future:i,manifest:s,routeModules:o}=aw(),{basename:l}=ow(),{loaderData:u,matches:h}=vM(),p=V.useMemo(()=>cx(r,e,h,s,n,"data"),[r,e,h,s,n]),m=V.useMemo(()=>cx(r,e,h,s,n,"assets"),[r,e,h,s,n]),v=V.useMemo(()=>{if(r===n.pathname+n.search+n.hash)return[];let w=new Set,C=!1;if(e.forEach(M=>{var R;let S=s.routes[M.route.id];!S||!S.hasLoader||(!p.some(N=>N.route.id===M.route.id)&&M.route.id in u&&((R=o[M.route.id])!=null&&R.shouldRevalidate)||S.hasClientLoader?C=!0:w.add(M.route.id))}),w.size===0)return[];let x=cM(r,l,i.unstable_trailingSlashAwareDataRequests,"data");return C&&w.size>0&&x.searchParams.set("_routes",e.filter(M=>w.has(M.route.id)).map(M=>M.route.id).join(",")),[x.pathname+x.search]},[l,i.unstable_trailingSlashAwareDataRequests,u,n,s,p,e,r,o]),y=V.useMemo(()=>fM(m,s),[m,s]),E=EM(m);return V.createElement(V.Fragment,null,v.map(w=>V.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...t})),y.map(w=>V.createElement("link",{key:w,rel:"modulepreload",href:w,...t})),E.map(({key:w,link:C})=>V.createElement("link",{key:w,nonce:t.nonce,...C,crossOrigin:C.crossOrigin??t.crossOrigin})))}function _M(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var CM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{CM&&(window.__reactRouterVersion="7.13.0")}catch{}function wM({basename:r,children:e,unstable_useTransitions:t,window:n}){let i=V.useRef();i.current==null&&(i.current=rb({window:n,v5Compat:!0}));let s=i.current,[o,l]=V.useState({action:s.action,location:s.location}),u=V.useCallback(h=>{t===!1?l(h):V.startTransition(()=>l(h))},[t]);return V.useLayoutEffect(()=>s.listen(u),[s,u]),V.createElement(Zb,{basename:r,children:e,location:o.location,navigationType:o.action,navigator:s,unstable_useTransitions:t})}var lw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mi=V.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:i,reloadDocument:s,replace:o,state:l,target:u,to:h,preventScrollReset:p,viewTransition:m,unstable_defaultShouldRevalidate:v,...y},E){let{basename:w,unstable_useTransitions:C}=V.useContext(Js),x=typeof h=="string"&&lw.test(h),M=$C(h,w);h=M.to;let S=kb(h,{relative:i}),[R,N,I]=yM(n,y),O=MM(h,{replace:o,state:l,target:u,preventScrollReset:p,relative:i,viewTransition:m,unstable_defaultShouldRevalidate:v,unstable_useTransitions:C});function j(H){e&&e(H),H.defaultPrevented||O(H)}let F=V.createElement("a",{...y,...I,href:M.absoluteURL||S,onClick:M.isExternal||s?e:j,ref:_M(E,N),target:u,"data-discover":!x&&t==="render"?"true":void 0});return R&&!x?V.createElement(V.Fragment,null,F,V.createElement(AM,{page:S})):F});mi.displayName="Link";var SM=V.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:i=!1,style:s,to:o,viewTransition:l,children:u,...h},p){let m=kp(o,{relative:h.relative}),v=ec(),y=V.useContext(_g),{navigator:E,basename:w}=V.useContext(Js),C=y!=null&&LM(m)&&l===!0,x=E.encodeLocation?E.encodeLocation(m).pathname:m.pathname,M=v.pathname,S=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;t||(M=M.toLowerCase(),S=S?S.toLowerCase():null,x=x.toLowerCase()),S&&w&&(S=Ya(S,w)||S);const R=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let N=M===x||!i&&M.startsWith(x)&&M.charAt(R)==="/",I=S!=null&&(S===x||!i&&S.startsWith(x)&&S.charAt(x.length)==="/"),O={isActive:N,isPending:I,isTransitioning:C},j=N?e:void 0,F;typeof n=="function"?F=n(O):F=[n,N?"active":null,I?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let H=typeof s=="function"?s(O):s;return V.createElement(mi,{...h,"aria-current":j,className:F,ref:p,style:H,to:o,viewTransition:l},typeof u=="function"?u(O):u)});SM.displayName="NavLink";var BM=V.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:i,state:s,method:o=Q2,action:l,onSubmit:u,relative:h,preventScrollReset:p,viewTransition:m,unstable_defaultShouldRevalidate:v,...y},E)=>{let{unstable_useTransitions:w}=V.useContext(Js),C=DM(),x=PM(l,{relative:h}),M=o.toLowerCase()==="get"?"get":"post",S=typeof l=="string"&&lw.test(l),R=N=>{if(u&&u(N),N.defaultPrevented)return;N.preventDefault();let I=N.nativeEvent.submitter,O=(I==null?void 0:I.getAttribute("formmethod"))||o,j=()=>C(I||N.currentTarget,{fetcherKey:e,method:O,navigate:t,replace:i,state:s,relative:h,preventScrollReset:p,viewTransition:m,unstable_defaultShouldRevalidate:v});w&&t!==!1?V.startTransition(()=>j()):j()};return V.createElement("form",{ref:E,method:M,action:x,onSubmit:n?u:R,...y,"data-discover":!S&&r==="render"?"true":void 0})});BM.displayName="Form";function bM(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cw(r){let e=V.useContext(Dh);return hr(e,bM(r)),e}function MM(r,{target:e,replace:t,state:n,preventScrollReset:i,relative:s,viewTransition:o,unstable_defaultShouldRevalidate:l,unstable_useTransitions:u}={}){let h=tc(),p=ec(),m=kp(r,{relative:s});return V.useCallback(v=>{if(sM(v,e)){v.preventDefault();let y=t!==void 0?t:up(p)===up(m),E=()=>h(r,{replace:y,state:n,preventScrollReset:i,relative:s,viewTransition:o,unstable_defaultShouldRevalidate:l});u?V.startTransition(()=>E()):E()}},[p,h,m,t,n,e,r,i,s,o,l,u])}var TM=0,RM=()=>`__${String(++TM)}__`;function DM(){let{router:r}=cw("useSubmit"),{basename:e}=V.useContext(Js),t=qb(),n=r.fetch,i=r.navigate;return V.useCallback(async(s,o={})=>{let{action:l,method:u,encType:h,formData:p,body:m}=lM(s,e);if(o.navigate===!1){let v=o.fetcherKey||RM();await n(v,t,o.action||l,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:p,body:m,formMethod:o.method||u,formEncType:o.encType||h,flushSync:o.flushSync})}else await i(o.action||l,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:p,body:m,formMethod:o.method||u,formEncType:o.encType||h,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[n,i,e,t])}function PM(r,{relative:e}={}){let{basename:t}=V.useContext(Js),n=V.useContext(ea);hr(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),s={...kp(r||".",{relative:e})},o=ec();if(r==null){s.search=o.search;let l=new URLSearchParams(s.search),u=l.getAll("index");if(u.some(p=>p==="")){l.delete("index"),u.filter(m=>m).forEach(m=>l.append("index",m));let p=l.toString();s.search=p?`?${p}`:""}}return(!r||r===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(s.pathname=s.pathname==="/"?t:Ja([t,s.pathname])),up(s)}function LM(r,{relative:e}={}){let t=V.useContext(ZC);hr(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=cw("useViewTransitionState"),i=kp(r,{relative:e});if(!t.isTransitioning)return!1;let s=Ya(t.currentLocation.pathname,n)||t.currentLocation.pathname,o=Ya(t.nextLocation.pathname,n)||t.nextLocation.pathname;return cg(i.pathname,o)!=null||cg(i.pathname,s)!=null}function wg(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function IM(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function l(p){try{h(n.next(p))}catch(m){o(m)}}function u(p){try{h(n.throw(p))}catch(m){o(m)}}function h(p){p.done?s(p.value):i(p.value).then(l,u)}h((n=n.apply(r,e||[])).next())})}const NM=r=>r?(...e)=>r(...e):(...e)=>fetch(...e);class fA extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class FM extends fA{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class ux extends fA{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class dx extends fA{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ny;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(ny||(ny={}));class kM{constructor(e,{headers:t={},customFetch:n,region:i=ny.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=NM(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return IM(this,arguments,void 0,function*(t,n={}){var i;let s,o;try{const{headers:l,method:u,body:h,signal:p,timeout:m}=n;let v={},{region:y}=n;y||(y=this.region);const E=new URL(`${this.url}/${t}`);y&&y!=="any"&&(v["x-region"]=y,E.searchParams.set("forceFunctionRegion",y));let w;h&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(v["Content-Type"]="application/octet-stream",w=h):typeof h=="string"?(v["Content-Type"]="text/plain",w=h):typeof FormData<"u"&&h instanceof FormData?w=h:(v["Content-Type"]="application/json",w=JSON.stringify(h)):h&&typeof h!="string"&&!(typeof Blob<"u"&&h instanceof Blob)&&!(h instanceof ArrayBuffer)&&!(typeof FormData<"u"&&h instanceof FormData)?w=JSON.stringify(h):w=h;let C=p;m&&(o=new AbortController,s=setTimeout(()=>o.abort(),m),p?(C=o.signal,p.addEventListener("abort",()=>o.abort())):C=o.signal);const x=yield this.fetch(E.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},v),this.headers),l),body:w,signal:C}).catch(N=>{throw new FM(N)}),M=x.headers.get("x-relay-error");if(M&&M==="true")throw new ux(x);if(!x.ok)throw new dx(x);let S=((i=x.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),R;return S==="application/json"?R=yield x.json():S==="application/octet-stream"||S==="application/pdf"?R=yield x.blob():S==="text/event-stream"?R=x:S==="multipart/form-data"?R=yield x.formData():R=yield x.text(),{data:R,error:null,response:x}}catch(l){return{data:null,error:l,response:l instanceof dx||l instanceof ux?l.context:void 0}}finally{s&&clearTimeout(s)}})}}var OM=class extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}},UM=class{constructor(r){var e,t,n;this.shouldThrowOnError=!1,this.method=r.method,this.url=r.url,this.headers=new Headers(r.headers),this.schema=r.schema,this.body=r.body,this.shouldThrowOnError=(e=r.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=r.signal,this.isMaybeSingle=(t=r.isMaybeSingle)!==null&&t!==void 0?t:!1,this.urlLengthLimit=(n=r.urlLengthLimit)!==null&&n!==void 0?n:8e3,r.fetch?this.fetch=r.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(r,e){return this.headers=new Headers(this.headers),this.headers.set(r,e),this}then(r,e){var t=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{let o=null,l=null,u=null,h=s.status,p=s.statusText;if(s.ok){var m,v;if(t.method!=="HEAD"){var y;const x=await s.text();x===""||(t.headers.get("Accept")==="text/csv"||t.headers.get("Accept")&&(!((y=t.headers.get("Accept"))===null||y===void 0)&&y.includes("application/vnd.pgrst.plan+text"))?l=x:l=JSON.parse(x))}const w=(m=t.headers.get("Prefer"))===null||m===void 0?void 0:m.match(/count=(exact|planned|estimated)/),C=(v=s.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");w&&C&&C.length>1&&(u=parseInt(C[1])),t.isMaybeSingle&&t.method==="GET"&&Array.isArray(l)&&(l.length>1?(o={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,u=null,h=406,p="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var E;const w=await s.text();try{o=JSON.parse(w),Array.isArray(o)&&s.status===404&&(l=[],o=null,h=200,p="OK")}catch{s.status===404&&w===""?(h=204,p="No Content"):o={message:w}}if(o&&t.isMaybeSingle&&(!(o==null||(E=o.details)===null||E===void 0)&&E.includes("0 rows"))&&(o=null,h=200,p="OK"),o&&t.shouldThrowOnError)throw new OM(o)}return{error:o,data:l,count:u,status:h,statusText:p}});return this.shouldThrowOnError||(i=i.catch(s=>{var o;let l="",u="",h="";const p=s==null?void 0:s.cause;if(p){var m,v,y,E;const x=(m=p==null?void 0:p.message)!==null&&m!==void 0?m:"",M=(v=p==null?void 0:p.code)!==null&&v!==void 0?v:"";l=`${(y=s==null?void 0:s.name)!==null&&y!==void 0?y:"FetchError"}: ${s==null?void 0:s.message}`,l+=`

Caused by: ${(E=p==null?void 0:p.name)!==null&&E!==void 0?E:"Error"}: ${x}`,M&&(l+=` (${M})`),p!=null&&p.stack&&(l+=`
${p.stack}`)}else{var w;l=(w=s==null?void 0:s.stack)!==null&&w!==void 0?w:""}const C=this.url.toString().length;return(s==null?void 0:s.name)==="AbortError"||(s==null?void 0:s.code)==="ABORT_ERR"?(h="",u="Request was aborted (timeout or manual cancellation)",C>this.urlLengthLimit&&(u+=`. Note: Your request URL is ${C} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((p==null?void 0:p.name)==="HeadersOverflowError"||(p==null?void 0:p.code)==="UND_ERR_HEADERS_OVERFLOW")&&(h="",u="HTTP headers exceeded server limits (typically 16KB)",C>this.urlLengthLimit&&(u+=`. Your request URL is ${C} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:l,hint:u,code:h},data:null,count:null,status:0,statusText:""}})),i.then(r,e)}returns(){return this}overrideTypes(){return this}},HM=class extends UM{select(r){let e=!1;const t=(r??"*").split("").map(n=>/\s/.test(n)&&!e?"":(n==='"'&&(e=!e),n)).join("");return this.url.searchParams.set("select",t),this.headers.append("Prefer","return=representation"),this}order(r,{ascending:e=!0,nullsFirst:t,foreignTable:n,referencedTable:i=n}={}){const s=i?`${i}.order`:"order",o=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${o?`${o},`:""}${r}.${e?"asc":"desc"}${t===void 0?"":t?".nullsfirst":".nullslast"}`),this}limit(r,{foreignTable:e,referencedTable:t=e}={}){const n=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(n,`${r}`),this}range(r,e,{foreignTable:t,referencedTable:n=t}={}){const i=typeof n>"u"?"offset":`${n}.offset`,s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${r}`),this.url.searchParams.set(s,`${e-r+1}`),this}abortSignal(r){return this.signal=r,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:r=!1,verbose:e=!1,settings:t=!1,buffers:n=!1,wal:i=!1,format:s="text"}={}){var o;const l=[r?"analyze":null,e?"verbose":null,t?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${s}; for="${u}"; options=${l};`),s==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(r){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${r}`),this}};const hx=new RegExp("[,()]");var lh=class extends HM{eq(r,e){return this.url.searchParams.append(r,`eq.${e}`),this}neq(r,e){return this.url.searchParams.append(r,`neq.${e}`),this}gt(r,e){return this.url.searchParams.append(r,`gt.${e}`),this}gte(r,e){return this.url.searchParams.append(r,`gte.${e}`),this}lt(r,e){return this.url.searchParams.append(r,`lt.${e}`),this}lte(r,e){return this.url.searchParams.append(r,`lte.${e}`),this}like(r,e){return this.url.searchParams.append(r,`like.${e}`),this}likeAllOf(r,e){return this.url.searchParams.append(r,`like(all).{${e.join(",")}}`),this}likeAnyOf(r,e){return this.url.searchParams.append(r,`like(any).{${e.join(",")}}`),this}ilike(r,e){return this.url.searchParams.append(r,`ilike.${e}`),this}ilikeAllOf(r,e){return this.url.searchParams.append(r,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(r,e){return this.url.searchParams.append(r,`ilike(any).{${e.join(",")}}`),this}regexMatch(r,e){return this.url.searchParams.append(r,`match.${e}`),this}regexIMatch(r,e){return this.url.searchParams.append(r,`imatch.${e}`),this}is(r,e){return this.url.searchParams.append(r,`is.${e}`),this}isDistinct(r,e){return this.url.searchParams.append(r,`isdistinct.${e}`),this}in(r,e){const t=Array.from(new Set(e)).map(n=>typeof n=="string"&&hx.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(r,`in.(${t})`),this}notIn(r,e){const t=Array.from(new Set(e)).map(n=>typeof n=="string"&&hx.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(r,`not.in.(${t})`),this}contains(r,e){return typeof e=="string"?this.url.searchParams.append(r,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(r,`cs.{${e.join(",")}}`):this.url.searchParams.append(r,`cs.${JSON.stringify(e)}`),this}containedBy(r,e){return typeof e=="string"?this.url.searchParams.append(r,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(r,`cd.{${e.join(",")}}`):this.url.searchParams.append(r,`cd.${JSON.stringify(e)}`),this}rangeGt(r,e){return this.url.searchParams.append(r,`sr.${e}`),this}rangeGte(r,e){return this.url.searchParams.append(r,`nxl.${e}`),this}rangeLt(r,e){return this.url.searchParams.append(r,`sl.${e}`),this}rangeLte(r,e){return this.url.searchParams.append(r,`nxr.${e}`),this}rangeAdjacent(r,e){return this.url.searchParams.append(r,`adj.${e}`),this}overlaps(r,e){return typeof e=="string"?this.url.searchParams.append(r,`ov.${e}`):this.url.searchParams.append(r,`ov.{${e.join(",")}}`),this}textSearch(r,e,{config:t,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const s=t===void 0?"":`(${t})`;return this.url.searchParams.append(r,`${i}fts${s}.${e}`),this}match(r){return Object.entries(r).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(r,e,t){return this.url.searchParams.append(r,`not.${e}.${t}`),this}or(r,{foreignTable:e,referencedTable:t=e}={}){const n=t?`${t}.or`:"or";return this.url.searchParams.append(n,`(${r})`),this}filter(r,e,t){return this.url.searchParams.append(r,`${e}.${t}`),this}},zM=class{constructor(r,{headers:e={},schema:t,fetch:n,urlLengthLimit:i=8e3}){this.url=r,this.headers=new Headers(e),this.schema=t,this.fetch=n,this.urlLengthLimit=i}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(r,e){const{head:t=!1,count:n}=e??{},i=t?"HEAD":"GET";let s=!1;const o=(r??"*").split("").map(h=>/\s/.test(h)&&!s?"":(h==='"'&&(s=!s),h)).join(""),{url:l,headers:u}=this.cloneRequestState();return l.searchParams.set("select",o),n&&u.append("Prefer",`count=${n}`),new lh({method:i,url:l,headers:u,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(r,{count:e,defaultToNull:t=!0}={}){var n;const i="POST",{url:s,headers:o}=this.cloneRequestState();if(e&&o.append("Prefer",`count=${e}`),t||o.append("Prefer","missing=default"),Array.isArray(r)){const l=r.reduce((u,h)=>u.concat(Object.keys(h)),[]);if(l.length>0){const u=[...new Set(l)].map(h=>`"${h}"`);s.searchParams.set("columns",u.join(","))}}return new lh({method:i,url:s,headers:o,schema:this.schema,body:r,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(r,{onConflict:e,ignoreDuplicates:t=!1,count:n,defaultToNull:i=!0}={}){var s;const o="POST",{url:l,headers:u}=this.cloneRequestState();if(u.append("Prefer",`resolution=${t?"ignore":"merge"}-duplicates`),e!==void 0&&l.searchParams.set("on_conflict",e),n&&u.append("Prefer",`count=${n}`),i||u.append("Prefer","missing=default"),Array.isArray(r)){const h=r.reduce((p,m)=>p.concat(Object.keys(m)),[]);if(h.length>0){const p=[...new Set(h)].map(m=>`"${m}"`);l.searchParams.set("columns",p.join(","))}}return new lh({method:o,url:l,headers:u,schema:this.schema,body:r,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch,urlLengthLimit:this.urlLengthLimit})}update(r,{count:e}={}){var t;const n="PATCH",{url:i,headers:s}=this.cloneRequestState();return e&&s.append("Prefer",`count=${e}`),new lh({method:n,url:i,headers:s,schema:this.schema,body:r,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:r}={}){var e;const t="DELETE",{url:n,headers:i}=this.cloneRequestState();return r&&i.append("Prefer",`count=${r}`),new lh({method:t,url:n,headers:i,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch,urlLengthLimit:this.urlLengthLimit})}};function dp(r){"@babel/helpers - typeof";return dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dp(r)}function GM(r,e){if(dp(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(dp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function jM(r){var e=GM(r,"string");return dp(e)=="symbol"?e:e+""}function VM(r,e,t){return(e=jM(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function fx(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function qm(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?fx(Object(t),!0).forEach(function(n){VM(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):fx(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var WM=class uw{constructor(e,{headers:t={},schema:n,fetch:i,timeout:s,urlLengthLimit:o=8e3}={}){this.url=e,this.headers=new Headers(t),this.schemaName=n,this.urlLengthLimit=o;const l=i??globalThis.fetch;s!==void 0&&s>0?this.fetch=(u,h)=>{const p=new AbortController,m=setTimeout(()=>p.abort(),s),v=h==null?void 0:h.signal;if(v){if(v.aborted)return clearTimeout(m),l(u,h);const y=()=>{clearTimeout(m),p.abort()};return v.addEventListener("abort",y,{once:!0}),l(u,qm(qm({},h),{},{signal:p.signal})).finally(()=>{clearTimeout(m),v.removeEventListener("abort",y)})}return l(u,qm(qm({},h),{},{signal:p.signal})).finally(()=>clearTimeout(m))}:this.fetch=l}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new zM(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(e){return new uw(this.url,{headers:this.headers,schema:e,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(e,t={},{head:n=!1,get:i=!1,count:s}={}){var o;let l;const u=new URL(`${this.url}/rpc/${e}`);let h;const p=y=>y!==null&&typeof y=="object"&&(!Array.isArray(y)||y.some(p)),m=n&&Object.values(t).some(p);m?(l="POST",h=t):n||i?(l=n?"HEAD":"GET",Object.entries(t).filter(([y,E])=>E!==void 0).map(([y,E])=>[y,Array.isArray(E)?`{${E.join(",")}}`:`${E}`]).forEach(([y,E])=>{u.searchParams.append(y,E)})):(l="POST",h=t);const v=new Headers(this.headers);return m?v.set("Prefer",s?`count=${s},return=minimal`:"return=minimal"):s&&v.set("Prefer",`count=${s}`),new lh({method:l,url:u,headers:v,schema:this.schemaName,body:h,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch,urlLengthLimit:this.urlLengthLimit})}};class JM{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const t=globalThis.process;if(t){const n=t.versions;if(n&&n.node){const i=n.node,s=parseInt(i.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const n=this.getWebSocketConstructor();return new n(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const XM="2.95.3",KM=`realtime-js/${XM}`,qM="1.0.0",dw="2.0.0",px=dw,ry=1e4,YM=1e3,$M=100;var Gl;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(Gl||(Gl={}));var Wr;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(Wr||(Wr={}));var Bo;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(Bo||(Bo={}));var iy;(function(r){r.websocket="websocket"})(iy||(iy={}));var au;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(au||(au={}));class QM{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer((t=e.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,n;const i=(n=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var t,n;const i=(n=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,t,n){var i,s;const o=e.topic,l=(i=e.ref)!==null&&i!==void 0?i:"",u=(s=e.join_ref)!==null&&s!==void 0?s:"",h=e.payload.event,p=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},m=Object.keys(p).length===0?"":JSON.stringify(p);if(u.length>255)throw new Error(`joinRef length ${u.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`userEvent length ${h.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`metadata length ${m.length} exceeds maximum of 255`);const v=this.USER_BROADCAST_PUSH_META_LENGTH+u.length+l.length+o.length+h.length+m.length,y=new ArrayBuffer(this.HEADER_LENGTH+v);let E=new DataView(y),w=0;E.setUint8(w++,this.KINDS.userBroadcastPush),E.setUint8(w++,u.length),E.setUint8(w++,l.length),E.setUint8(w++,o.length),E.setUint8(w++,h.length),E.setUint8(w++,m.length),E.setUint8(w++,t),Array.from(u,x=>E.setUint8(w++,x.charCodeAt(0))),Array.from(l,x=>E.setUint8(w++,x.charCodeAt(0))),Array.from(o,x=>E.setUint8(w++,x.charCodeAt(0))),Array.from(h,x=>E.setUint8(w++,x.charCodeAt(0))),Array.from(m,x=>E.setUint8(w++,x.charCodeAt(0)));var C=new Uint8Array(y.byteLength+n.byteLength);return C.set(new Uint8Array(y),0),C.set(new Uint8Array(n),y.byteLength),C.buffer}decode(e,t){if(this._isArrayBuffer(e)){let n=this._binaryDecode(e);return t(n)}if(typeof e=="string"){const n=JSON.parse(e),[i,s,o,l,u]=n;return t({join_ref:i,ref:s,topic:o,event:l,payload:u})}return t({})}_binaryDecode(e){const t=new DataView(e),n=t.getUint8(0),i=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,t,i)}}_decodeUserBroadcast(e,t,n){const i=t.getUint8(1),s=t.getUint8(2),o=t.getUint8(3),l=t.getUint8(4);let u=this.HEADER_LENGTH+4;const h=n.decode(e.slice(u,u+i));u=u+i;const p=n.decode(e.slice(u,u+s));u=u+s;const m=n.decode(e.slice(u,u+o));u=u+o;const v=e.slice(u,e.byteLength),y=l===this.JSON_ENCODING?JSON.parse(n.decode(v)):v,E={type:this.BROADCAST_EVENT,event:p,payload:y};return o>0&&(E.meta=JSON.parse(m)),{join_ref:null,ref:null,topic:h,event:this.BROADCAST_EVENT,payload:E}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}_pick(e,t){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([n])=>t.includes(n)))}}class hw{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Yn;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(Yn||(Yn={}));const mx=(r,e,t={})=>{var n;const i=(n=t.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((s,o)=>(s[o]=ZM(o,r,e,i),s),{}):{}},ZM=(r,e,t,n)=>{const i=e.find(l=>l.name===r),s=i==null?void 0:i.type,o=t[r];return s&&!n.includes(s)?fw(s,o):sy(o)},fw=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return rT(e,t)}switch(r){case Yn.bool:return eT(e);case Yn.float4:case Yn.float8:case Yn.int2:case Yn.int4:case Yn.int8:case Yn.numeric:case Yn.oid:return tT(e);case Yn.json:case Yn.jsonb:return nT(e);case Yn.timestamp:return iT(e);case Yn.abstime:case Yn.date:case Yn.daterange:case Yn.int4range:case Yn.int8range:case Yn.money:case Yn.reltime:case Yn.text:case Yn.time:case Yn.timestamptz:case Yn.timetz:case Yn.tsrange:case Yn.tstzrange:return sy(e);default:return sy(e)}},sy=r=>r,eT=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},tT=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},nT=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch{return r}return r},rT=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,n=r[t];if(r[0]==="{"&&n==="}"){let s;const o=r.slice(1,t);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(l=>fw(e,l))}return r},iT=r=>typeof r=="string"?r.replace(" ","T"):r,pw=r=>{const e=new URL(r);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class G0{constructor(e,t,n={},i=ry){this.channel=e,this.event=t,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var gx;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(gx||(gx={}));class tp{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:s,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=tp.syncState(this.state,i,s,o),this.pendingDiffs.forEach(u=>{this.state=tp.syncDiff(this.state,u,s,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=tp.syncDiff(this.state,i,s,o),l())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,i){const s=this.cloneDeep(e),o=this.transformState(t),l={},u={};return this.map(s,(h,p)=>{o[h]||(u[h]=p)}),this.map(o,(h,p)=>{const m=s[h];if(m){const v=p.map(C=>C.presence_ref),y=m.map(C=>C.presence_ref),E=p.filter(C=>y.indexOf(C.presence_ref)<0),w=m.filter(C=>v.indexOf(C.presence_ref)<0);E.length>0&&(l[h]=E),w.length>0&&(u[h]=w)}else l[h]=p}),this.syncDiff(s,{joins:l,leaves:u},n,i)}static syncDiff(e,t,n,i){const{joins:s,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(s,(l,u)=>{var h;const p=(h=e[l])!==null&&h!==void 0?h:[];if(e[l]=this.cloneDeep(u),p.length>0){const m=e[l].map(y=>y.presence_ref),v=p.filter(y=>m.indexOf(y.presence_ref)<0);e[l].unshift(...v)}n(l,p,u)}),this.map(o,(l,u)=>{let h=e[l];if(!h)return;const p=u.map(m=>m.presence_ref);h=h.filter(m=>p.indexOf(m.presence_ref)<0),e[l]=h,i(l,h,u),h.length===0&&delete e[l]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const i=e[n];return"metas"in i?t[n]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[n]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var vx;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(vx||(vx={}));var np;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(np||(np={}));var Ha;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(Ha||(Ha={}));class fh{constructor(e,t={config:{}},n){var i,s;if(this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=Wr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new G0(this,Bo.join,this.params,this.timeout),this.rejoinTimer=new hw(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Wr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Wr.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Wr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Wr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Wr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Bo.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new tp(this),this.broadcastEndpointURL=pw(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var n,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Wr.closed){const{config:{broadcast:o,presence:l,private:u}}=this.params,h=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(y=>y.filter))!==null&&i!==void 0?i:[],p=!!this.bindings[np.PRESENCE]&&this.bindings[np.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,m={},v={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:p}),postgres_changes:h,private:u};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(y=>e==null?void 0:e(Ha.CHANNEL_ERROR,y)),this._onClose(()=>e==null?void 0:e(Ha.CLOSED)),this.updateJoinPayload(Object.assign({config:v},m)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:y})=>{var E;if(this.socket._isManualToken()||this.socket.setAuth(),y===void 0){e==null||e(Ha.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,C=(E=w==null?void 0:w.length)!==null&&E!==void 0?E:0,x=[];for(let M=0;M<C;M++){const S=w[M],{filter:{event:R,schema:N,table:I,filter:O}}=S,j=y&&y[M];if(j&&j.event===R&&fh.isFilterValueEqual(j.schema,N)&&fh.isFilterValueEqual(j.table,I)&&fh.isFilterValueEqual(j.filter,O))x.push(Object.assign(Object.assign({},S),{id:j.id}));else{this.unsubscribe(),this.state=Wr.errored,e==null||e(Ha.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,e&&e(Ha.SUBSCRIBED);return}}).receive("error",y=>{this.state=Wr.errored,e==null||e(Ha.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ha.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this.state===Wr.joined&&e===np.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,t,n)}async httpSend(e,t,n={}){var i;if(t==null)return Promise.reject("Payload is required for httpSend()");const s={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(s.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:s,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);if(l.status===202)return{success:!0};let u=l.statusText;try{const h=await l.json();u=h.error||h.message||u}catch{}return Promise.reject(new Error(u))}async send(e,t={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:o}=e,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const u={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(n=t.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=h.body)===null||i===void 0?void 0:i.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,l,u;const h=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((u=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||u===void 0)&&u.ack)&&s("ok"),h.receive("ok",()=>s("ok")),h.receive("error",()=>s("error")),h.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Wr.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Bo.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new G0(this,Bo.leave,{},e),n.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Wr.closed,this.bindings={}}async _fetchWithTimeout(e,t,n){const i=new AbortController,s=setTimeout(()=>i.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(s),o}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new G0(this,e,t,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>$M){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var i,s;const o=e.toLocaleLowerCase(),{close:l,error:u,leave:h,join:p}=Bo;if(n&&[l,u,h,p].indexOf(o)>=0&&n!==this._joinRef())return;let v=this._onMessage(o,t,n);if(t&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(y=>{var E,w,C;return((E=y.filter)===null||E===void 0?void 0:E.event)==="*"||((C=(w=y.filter)===null||w===void 0?void 0:w.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===o}).map(y=>y.callback(v,n)):(s=this.bindings[o])===null||s===void 0||s.filter(y=>{var E,w,C,x,M,S;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in y){const R=y.id,N=(E=y.filter)===null||E===void 0?void 0:E.event;return R&&((w=t.ids)===null||w===void 0?void 0:w.includes(R))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((C=t.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const R=(M=(x=y==null?void 0:y.filter)===null||x===void 0?void 0:x.event)===null||M===void 0?void 0:M.toLocaleLowerCase();return R==="*"||R===((S=t==null?void 0:t.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===o}).map(y=>{if(typeof v=="object"&&"ids"in v){const E=v.data,{schema:w,table:C,commit_timestamp:x,type:M,errors:S}=E;v=Object.assign(Object.assign({},{schema:w,table:C,commit_timestamp:x,eventType:M,new:{},old:{},errors:S}),this._getPayloadRecords(E))}y.callback(v,n)})}_isClosed(){return this.state===Wr.closed}_isJoined(){return this.state===Wr.joined}_isJoining(){return this.state===Wr.joining}_isLeaving(){return this.state===Wr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const i=e.toLocaleLowerCase(),s={type:i,filter:t,callback:n};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===n&&fh.isEqual(i.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}static isFilterValueEqual(e,t){return(e??void 0)===(t??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Bo.close,{},e)}_onError(e){this._on(Bo.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Wr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=mx(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=mx(e.columns,e.old_record)),t}}const j0=()=>{},Ym={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},sT=[1e3,2e3,5e3,1e4],oT=1e4,aT=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class lT{constructor(e,t){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ry,this.transport=null,this.heartbeatIntervalMs=Ym.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=j0,this.ref=0,this.reconnectTimer=null,this.vsn=px,this.logger=j0,this.conn=null,this.sendBuffer=[],this.serializer=new QM,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=i=>i?(...s)=>i(...s):(...s)=>fetch(...s),!(!((n=t==null?void 0:t.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${iy.websocket}`,this.httpEndpoint=pw(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=JM.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return t==="ok"&&this._remove(e),this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Gl.connecting:return au.Connecting;case Gl.open:return au.Open;case Gl.closing:return au.Closing;default:return au.Closed}}isConnected(){return this.connectionState()===au.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const n=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===n);if(i)return i;{const s=new fh(`realtime:${e}`,t,this);return this.channels.push(s),s}}push(e){const{topic:t,event:n,payload:i,ref:s}=e,o=()=>{this.encode(e,l=>{var u;(u=this.conn)===null||u===void 0||u.send(l)})};this.log("push",`${t} ${n} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(YM,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Ym.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply"&&t.ref&&t.ref===this.pendingHeartbeatRef){const h=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error",h)}catch(p){this.log("error","error in heartbeat callback",p)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:i,payload:s,ref:o}=t,l=o?`(${o})`:"",u=s.status||"";this.log("receive",`${u} ${n} ${i} ${l}`.trim(),s),this.channels.filter(h=>h._isMember(n)).forEach(h=>h._trigger(i,s,o)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Gl.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Gl.open||this.conn.readyState===Gl.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this._terminateWorker()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(t){this.log("error","error in heartbeat callback",t)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(Bo.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${n}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const n=new Blob([aT],{type:"application/javascript"});t=URL.createObjectURL(n)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t,n=!1;if(e)t=e,n=!0;else if(this.accessToken)try{t=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),t=this.accessTokenValue}else t=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(i=>{const s={access_token:t,version:KM};t&&i.updateJoinPayload(s),i.joinedOnce&&i._isJoined()&&i._push(Bo.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(t=>{this.log("error",`Error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new hw(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ym.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,n,i,s,o,l,u,h,p,m,v,y;switch(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:ry,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:Ym.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=e==null?void 0:e.heartbeatCallback)!==null&&l!==void 0?l:j0,this.vsn=(u=e==null?void 0:e.vsn)!==null&&u!==void 0?u:px,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=e==null?void 0:e.reconnectAfterMs)!==null&&h!==void 0?h:(E=>sT[E-1]||oT),this.vsn){case qM:this.encode=(p=e==null?void 0:e.encode)!==null&&p!==void 0?p:((E,w)=>w(JSON.stringify(E))),this.decode=(m=e==null?void 0:e.decode)!==null&&m!==void 0?m:((E,w)=>w(JSON.parse(E)));break;case dw:this.encode=(v=e==null?void 0:e.encode)!==null&&v!==void 0?v:this.serializer.encode.bind(this.serializer),this.decode=(y=e==null?void 0:e.decode)!==null&&y!==void 0?y:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var hp=class extends Error{constructor(r,e){var t;super(r),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((t=e.icebergType)==null?void 0:t.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function cT(r,e,t){const n=new URL(e,r);if(t)for(const[i,s]of Object.entries(t))s!==void 0&&n.searchParams.set(i,s);return n.toString()}async function uT(r){return!r||r.type==="none"?{}:r.type==="bearer"?{Authorization:`Bearer ${r.token}`}:r.type==="header"?{[r.name]:r.value}:r.type==="custom"?await r.getHeaders():{}}function dT(r){const e=r.fetchImpl??globalThis.fetch;return{async request({method:t,path:n,query:i,body:s,headers:o}){const l=cT(r.baseUrl,n,i),u=await uT(r.auth),h=await e(l,{method:t,headers:{...s?{"Content-Type":"application/json"}:{},...u,...o},body:s?JSON.stringify(s):void 0}),p=await h.text(),m=(h.headers.get("content-type")||"").includes("application/json"),v=m&&p?JSON.parse(p):p;if(!h.ok){const y=m?v:void 0,E=y==null?void 0:y.error;throw new hp((E==null?void 0:E.message)??`Request failed with status ${h.status}`,{status:h.status,icebergType:E==null?void 0:E.type,icebergCode:E==null?void 0:E.code,details:y})}return{status:h.status,headers:h.headers,data:v}}}}function $m(r){return r.join("")}var hT=class{constructor(r,e=""){this.client=r,this.prefix=e}async listNamespaces(r){const e=r?{parent:$m(r.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(r,e){const t={namespace:r.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:t})).data}async dropNamespace(r){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${$m(r.namespace)}`})}async loadNamespaceMetadata(r){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${$m(r.namespace)}`})).data.properties}}async namespaceExists(r){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${$m(r.namespace)}`}),!0}catch(e){if(e instanceof hp&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(r,e){try{return await this.createNamespace(r,e)}catch(t){if(t instanceof hp&&t.status===409)return;throw t}}};function Pd(r){return r.join("")}var fT=class{constructor(r,e="",t){this.client=r,this.prefix=e,this.accessDelegation=t}async listTables(r){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Pd(r.namespace)}/tables`})).data.identifiers}async createTable(r,e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Pd(r.namespace)}/tables`,body:e,headers:t})).data.metadata}async updateTable(r,e){const t=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Pd(r.namespace)}/tables/${r.name}`,body:e});return{"metadata-location":t.data["metadata-location"],metadata:t.data.metadata}}async dropTable(r,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Pd(r.namespace)}/tables/${r.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(r){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Pd(r.namespace)}/tables/${r.name}`,headers:e})).data.metadata}async tableExists(r){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Pd(r.namespace)}/tables/${r.name}`,headers:e}),!0}catch(t){if(t instanceof hp&&t.status===404)return!1;throw t}}async createTableIfNotExists(r,e){try{return await this.createTable(r,e)}catch(t){if(t instanceof hp&&t.status===409)return await this.loadTable({namespace:r.namespace,name:e.name});throw t}}},pT=class{constructor(r){var n;let e="v1";r.catalogName&&(e+=`/${r.catalogName}`);const t=r.baseUrl.endsWith("/")?r.baseUrl:`${r.baseUrl}/`;this.client=dT({baseUrl:t,auth:r.auth,fetchImpl:r.fetch}),this.accessDelegation=(n=r.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new hT(this.client,e),this.tableOps=new fT(this.client,e,this.accessDelegation)}async listNamespaces(r){return this.namespaceOps.listNamespaces(r)}async createNamespace(r,e){return this.namespaceOps.createNamespace(r,e)}async dropNamespace(r){await this.namespaceOps.dropNamespace(r)}async loadNamespaceMetadata(r){return this.namespaceOps.loadNamespaceMetadata(r)}async listTables(r){return this.tableOps.listTables(r)}async createTable(r,e){return this.tableOps.createTable(r,e)}async updateTable(r,e){return this.tableOps.updateTable(r,e)}async dropTable(r,e){await this.tableOps.dropTable(r,e)}async loadTable(r){return this.tableOps.loadTable(r)}async namespaceExists(r){return this.namespaceOps.namespaceExists(r)}async tableExists(r){return this.tableOps.tableExists(r)}async createNamespaceIfNotExists(r,e){return this.namespaceOps.createNamespaceIfNotExists(r,e)}async createTableIfNotExists(r,e){return this.tableOps.createTableIfNotExists(r,e)}},Sg=class extends Error{constructor(r,e="storage",t,n){super(r),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=t,this.statusCode=n}};function Bg(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}var Qm=class extends Sg{constructor(r,e,t,n="storage"){super(r,n,e,t),this.name=n==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=t}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},mw=class extends Sg{constructor(r,e,t="storage"){super(r,t),this.name=t==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};const mT=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),gT=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},oy=r=>{if(Array.isArray(r))return r.map(t=>oy(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,n])=>{const i=t.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=oy(n)}),e},vT=r=>!r||typeof r!="string"||r.length===0||r.length>100||r.trim()!==r||r.includes("/")||r.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(r);function fp(r){"@babel/helpers - typeof";return fp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fp(r)}function yT(r,e){if(fp(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(fp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function AT(r){var e=yT(r,"string");return fp(e)=="symbol"?e:e+""}function ET(r,e,t){return(e=AT(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function yx(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function qt(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?yx(Object(t),!0).forEach(function(n){ET(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):yx(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}const Ax=r=>{var e;return r.msg||r.message||r.error_description||(typeof r.error=="string"?r.error:(e=r.error)===null||e===void 0?void 0:e.message)||JSON.stringify(r)},xT=async(r,e,t,n)=>{if(r&&typeof r=="object"&&"status"in r&&"ok"in r&&typeof r.status=="number"&&!(t!=null&&t.noResolveJson)){const i=r,s=i.status||500;if(typeof i.json=="function")i.json().then(o=>{const l=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||s+"";e(new Qm(Ax(o),s,l,n))}).catch(()=>{if(n==="vectors"){const o=s+"";e(new Qm(i.statusText||`HTTP ${s} error`,s,o,n))}else{const o=s+"";e(new Qm(i.statusText||`HTTP ${s} error`,s,o,n))}});else{const o=s+"";e(new Qm(i.statusText||`HTTP ${s} error`,s,o,n))}}else e(new mw(Ax(r),r,n))},_T=(r,e,t,n)=>{const i={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"||r==="HEAD"||!n?qt(qt({},i),t):(gT(n)?(i.headers=qt({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n)):i.body=n,e!=null&&e.duplex&&(i.duplex=e.duplex),qt(qt({},i),t))};async function Ff(r,e,t,n,i,s,o){return new Promise((l,u)=>{r(t,_T(e,n,i,s)).then(h=>{if(!h.ok)throw h;if(n!=null&&n.noResolveJson)return h;if(o==="vectors"){const p=h.headers.get("content-type");if(h.headers.get("content-length")==="0"||h.status===204)return{};if(!p||!p.includes("application/json"))return{}}return h.json()}).then(h=>l(h)).catch(h=>xT(h,u,n,o))})}function gw(r="storage"){return{get:async(e,t,n,i)=>Ff(e,"GET",t,n,i,void 0,r),post:async(e,t,n,i,s)=>Ff(e,"POST",t,i,s,n,r),put:async(e,t,n,i,s)=>Ff(e,"PUT",t,i,s,n,r),head:async(e,t,n,i)=>Ff(e,"HEAD",t,qt(qt({},n),{},{noResolveJson:!0}),i,void 0,r),remove:async(e,t,n,i,s)=>Ff(e,"DELETE",t,i,s,n,r)}}const CT=gw("storage"),{get:pp,post:wo,put:ay,head:wT,remove:pA}=CT,_s=gw("vectors");var Ph=class{constructor(r,e={},t,n="storage"){this.shouldThrowOnError=!1,this.url=r,this.headers=e,this.fetch=mT(t),this.namespace=n}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(r){var e=this;try{return{data:await r(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Bg(t))return{data:null,error:t};throw t}}},ST=class{constructor(r,e){this.downloadFn=r,this.shouldThrowOnError=e}then(r,e){return this.execute().then(r,e)}async execute(){var r=this;try{return{data:(await r.downloadFn()).body,error:null}}catch(e){if(r.shouldThrowOnError)throw e;if(Bg(e))return{data:null,error:e};throw e}}};let vw;vw=Symbol.toStringTag;var BT=class{constructor(r,e){this.downloadFn=r,this.shouldThrowOnError=e,this[vw]="BlobDownloadBuilder",this.promise=null}asStream(){return new ST(this.downloadFn,this.shouldThrowOnError)}then(r,e){return this.getPromise().then(r,e)}catch(r){return this.getPromise().catch(r)}finally(r){return this.getPromise().finally(r)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var r=this;try{return{data:await(await r.downloadFn()).blob(),error:null}}catch(e){if(r.shouldThrowOnError)throw e;if(Bg(e))return{data:null,error:e};throw e}}};const bT={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ex={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var MT=class extends Ph{constructor(r,e={},t,n){super(r,e,n,"storage"),this.bucketId=t}async uploadOrUpdate(r,e,t,n){var i=this;return i.handleOperation(async()=>{let s;const o=qt(qt({},Ex),n);let l=qt(qt({},i.headers),r==="POST"&&{"x-upsert":String(o.upsert)});const u=o.metadata;typeof Blob<"u"&&t instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),u&&s.append("metadata",i.encodeMetadata(u)),s.append("",t)):typeof FormData<"u"&&t instanceof FormData?(s=t,s.has("cacheControl")||s.append("cacheControl",o.cacheControl),u&&!s.has("metadata")&&s.append("metadata",i.encodeMetadata(u))):(s=t,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,u&&(l["x-metadata"]=i.toBase64(i.encodeMetadata(u))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!o.duplex&&(o.duplex="half")),n!=null&&n.headers&&(l=qt(qt({},l),n.headers));const h=i._removeEmptyFolders(e),p=i._getFinalPath(h),m=await(r=="PUT"?ay:wo)(i.fetch,`${i.url}/object/${p}`,s,qt({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{path:h,id:m.Id,fullPath:m.Key}})}async upload(r,e,t){return this.uploadOrUpdate("POST",r,e,t)}async uploadToSignedUrl(r,e,t,n){var i=this;const s=i._removeEmptyFolders(r),o=i._getFinalPath(s),l=new URL(i.url+`/object/upload/sign/${o}`);return l.searchParams.set("token",e),i.handleOperation(async()=>{let u;const h=qt({upsert:Ex.upsert},n),p=qt(qt({},i.headers),{"x-upsert":String(h.upsert)});return typeof Blob<"u"&&t instanceof Blob?(u=new FormData,u.append("cacheControl",h.cacheControl),u.append("",t)):typeof FormData<"u"&&t instanceof FormData?(u=t,u.append("cacheControl",h.cacheControl)):(u=t,p["cache-control"]=`max-age=${h.cacheControl}`,p["content-type"]=h.contentType),{path:s,fullPath:(await ay(i.fetch,l.toString(),u,{headers:p})).Key}})}async createSignedUploadUrl(r,e){var t=this;return t.handleOperation(async()=>{let n=t._getFinalPath(r);const i=qt({},t.headers);e!=null&&e.upsert&&(i["x-upsert"]="true");const s=await wo(t.fetch,`${t.url}/object/upload/sign/${n}`,{},{headers:i}),o=new URL(t.url+s.url),l=o.searchParams.get("token");if(!l)throw new Sg("No token returned by API");return{signedUrl:o.toString(),path:r,token:l}})}async update(r,e,t){return this.uploadOrUpdate("PUT",r,e,t)}async move(r,e,t){var n=this;return n.handleOperation(async()=>await wo(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:r,destinationKey:e,destinationBucket:t==null?void 0:t.destinationBucket},{headers:n.headers}))}async copy(r,e,t){var n=this;return n.handleOperation(async()=>({path:(await wo(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:r,destinationKey:e,destinationBucket:t==null?void 0:t.destinationBucket},{headers:n.headers})).Key}))}async createSignedUrl(r,e,t){var n=this;return n.handleOperation(async()=>{let i=n._getFinalPath(r),s=await wo(n.fetch,`${n.url}/object/sign/${i}`,qt({expiresIn:e},t!=null&&t.transform?{transform:t.transform}:{}),{headers:n.headers});const o=t!=null&&t.download?`&download=${t.download===!0?"":t.download}`:"";return{signedUrl:encodeURI(`${n.url}${s.signedURL}${o}`)}})}async createSignedUrls(r,e,t){var n=this;return n.handleOperation(async()=>{const i=await wo(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:e,paths:r},{headers:n.headers}),s=t!=null&&t.download?`&download=${t.download===!0?"":t.download}`:"";return i.map(o=>qt(qt({},o),{},{signedUrl:o.signedURL?encodeURI(`${n.url}${o.signedURL}${s}`):null}))})}download(r,e,t){const n=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),s=i?`?${i}`:"",o=this._getFinalPath(r),l=()=>pp(this.fetch,`${this.url}/${n}/${o}${s}`,{headers:this.headers,noResolveJson:!0},t);return new BT(l,this.shouldThrowOnError)}async info(r){var e=this;const t=e._getFinalPath(r);return e.handleOperation(async()=>oy(await pp(e.fetch,`${e.url}/object/info/${t}`,{headers:e.headers})))}async exists(r){var e=this;const t=e._getFinalPath(r);try{return await wT(e.fetch,`${e.url}/object/${t}`,{headers:e.headers}),{data:!0,error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Bg(n)&&n instanceof mw){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}}getPublicUrl(r,e){const t=this._getFinalPath(r),n=[],i=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&n.push(i);const s=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});o!==""&&n.push(o);let l=n.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${t}${l}`)}}}async remove(r){var e=this;return e.handleOperation(async()=>await pA(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:r},{headers:e.headers}))}async list(r,e,t){var n=this;return n.handleOperation(async()=>{const i=qt(qt(qt({},bT),e),{},{prefix:r||""});return await wo(n.fetch,`${n.url}/object/list/${n.bucketId}`,i,{headers:n.headers},t)})}async listV2(r,e){var t=this;return t.handleOperation(async()=>{const n=qt({},r);return await wo(t.fetch,`${t.url}/object/list-v2/${t.bucketId}`,n,{headers:t.headers},e)})}encodeMetadata(r){return JSON.stringify(r)}toBase64(r){return typeof Buffer<"u"?Buffer.from(r).toString("base64"):btoa(r)}_getFinalPath(r){return`${this.bucketId}/${r.replace(/^\/+/,"")}`}_removeEmptyFolders(r){return r.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(r){const e=[];return r.width&&e.push(`width=${r.width}`),r.height&&e.push(`height=${r.height}`),r.resize&&e.push(`resize=${r.resize}`),r.format&&e.push(`format=${r.format}`),r.quality&&e.push(`quality=${r.quality}`),e.join("&")}};const TT="2.95.3",Op={"X-Client-Info":`storage-js/${TT}`};var RT=class extends Ph{constructor(r,e={},t,n){const i=new URL(r);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase."));const s=i.href.replace(/\/$/,""),o=qt(qt({},Op),e);super(s,o,t,"storage")}async listBuckets(r){var e=this;return e.handleOperation(async()=>{const t=e.listBucketOptionsToQueryString(r);return await pp(e.fetch,`${e.url}/bucket${t}`,{headers:e.headers})})}async getBucket(r){var e=this;return e.handleOperation(async()=>await pp(e.fetch,`${e.url}/bucket/${r}`,{headers:e.headers}))}async createBucket(r,e={public:!1}){var t=this;return t.handleOperation(async()=>await wo(t.fetch,`${t.url}/bucket`,{id:r,name:r,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:t.headers}))}async updateBucket(r,e){var t=this;return t.handleOperation(async()=>await ay(t.fetch,`${t.url}/bucket/${r}`,{id:r,name:r,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:t.headers}))}async emptyBucket(r){var e=this;return e.handleOperation(async()=>await wo(e.fetch,`${e.url}/bucket/${r}/empty`,{},{headers:e.headers}))}async deleteBucket(r){var e=this;return e.handleOperation(async()=>await pA(e.fetch,`${e.url}/bucket/${r}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(r){const e={};return r&&("limit"in r&&(e.limit=String(r.limit)),"offset"in r&&(e.offset=String(r.offset)),r.search&&(e.search=r.search),r.sortColumn&&(e.sortColumn=r.sortColumn),r.sortOrder&&(e.sortOrder=r.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},DT=class extends Ph{constructor(r,e={},t){const n=r.replace(/\/$/,""),i=qt(qt({},Op),e);super(n,i,t,"storage")}async createBucket(r){var e=this;return e.handleOperation(async()=>await wo(e.fetch,`${e.url}/bucket`,{name:r},{headers:e.headers}))}async listBuckets(r){var e=this;return e.handleOperation(async()=>{const t=new URLSearchParams;(r==null?void 0:r.limit)!==void 0&&t.set("limit",r.limit.toString()),(r==null?void 0:r.offset)!==void 0&&t.set("offset",r.offset.toString()),r!=null&&r.sortColumn&&t.set("sortColumn",r.sortColumn),r!=null&&r.sortOrder&&t.set("sortOrder",r.sortOrder),r!=null&&r.search&&t.set("search",r.search);const n=t.toString(),i=n?`${e.url}/bucket?${n}`:`${e.url}/bucket`;return await pp(e.fetch,i,{headers:e.headers})})}async deleteBucket(r){var e=this;return e.handleOperation(async()=>await pA(e.fetch,`${e.url}/bucket/${r}`,{},{headers:e.headers}))}from(r){var e=this;if(!vT(r))throw new Sg("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const t=new pT({baseUrl:this.url,catalogName:r,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(t,{get(i,s){const o=i[s];return typeof o!="function"?o:async(...l)=>{try{return{data:await o.apply(i,l),error:null}}catch(u){if(n)throw u;return{data:null,error:u}}}}})}},PT=class extends Ph{constructor(r,e={},t){const n=r.replace(/\/$/,""),i=qt(qt({},Op),{},{"Content-Type":"application/json"},e);super(n,i,t,"vectors")}async createIndex(r){var e=this;return e.handleOperation(async()=>await _s.post(e.fetch,`${e.url}/CreateIndex`,r,{headers:e.headers})||{})}async getIndex(r,e){var t=this;return t.handleOperation(async()=>await _s.post(t.fetch,`${t.url}/GetIndex`,{vectorBucketName:r,indexName:e},{headers:t.headers}))}async listIndexes(r){var e=this;return e.handleOperation(async()=>await _s.post(e.fetch,`${e.url}/ListIndexes`,r,{headers:e.headers}))}async deleteIndex(r,e){var t=this;return t.handleOperation(async()=>await _s.post(t.fetch,`${t.url}/DeleteIndex`,{vectorBucketName:r,indexName:e},{headers:t.headers})||{})}},LT=class extends Ph{constructor(r,e={},t){const n=r.replace(/\/$/,""),i=qt(qt({},Op),{},{"Content-Type":"application/json"},e);super(n,i,t,"vectors")}async putVectors(r){var e=this;if(r.vectors.length<1||r.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await _s.post(e.fetch,`${e.url}/PutVectors`,r,{headers:e.headers})||{})}async getVectors(r){var e=this;return e.handleOperation(async()=>await _s.post(e.fetch,`${e.url}/GetVectors`,r,{headers:e.headers}))}async listVectors(r){var e=this;if(r.segmentCount!==void 0){if(r.segmentCount<1||r.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(r.segmentIndex!==void 0&&(r.segmentIndex<0||r.segmentIndex>=r.segmentCount))throw new Error(`segmentIndex must be between 0 and ${r.segmentCount-1}`)}return e.handleOperation(async()=>await _s.post(e.fetch,`${e.url}/ListVectors`,r,{headers:e.headers}))}async queryVectors(r){var e=this;return e.handleOperation(async()=>await _s.post(e.fetch,`${e.url}/QueryVectors`,r,{headers:e.headers}))}async deleteVectors(r){var e=this;if(r.keys.length<1||r.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await _s.post(e.fetch,`${e.url}/DeleteVectors`,r,{headers:e.headers})||{})}},IT=class extends Ph{constructor(r,e={},t){const n=r.replace(/\/$/,""),i=qt(qt({},Op),{},{"Content-Type":"application/json"},e);super(n,i,t,"vectors")}async createBucket(r){var e=this;return e.handleOperation(async()=>await _s.post(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:r},{headers:e.headers})||{})}async getBucket(r){var e=this;return e.handleOperation(async()=>await _s.post(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:r},{headers:e.headers}))}async listBuckets(r={}){var e=this;return e.handleOperation(async()=>await _s.post(e.fetch,`${e.url}/ListVectorBuckets`,r,{headers:e.headers}))}async deleteBucket(r){var e=this;return e.handleOperation(async()=>await _s.post(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:r},{headers:e.headers})||{})}},NT=class extends IT{constructor(r,e={}){super(r,e.headers||{},e.fetch)}from(r){return new FT(this.url,this.headers,r,this.fetch)}async createBucket(r){var e=()=>super.createBucket,t=this;return e().call(t,r)}async getBucket(r){var e=()=>super.getBucket,t=this;return e().call(t,r)}async listBuckets(r={}){var e=()=>super.listBuckets,t=this;return e().call(t,r)}async deleteBucket(r){var e=()=>super.deleteBucket,t=this;return e().call(t,r)}},FT=class extends PT{constructor(r,e,t,n){super(r,e,n),this.vectorBucketName=t}async createIndex(r){var e=()=>super.createIndex,t=this;return e().call(t,qt(qt({},r),{},{vectorBucketName:t.vectorBucketName}))}async listIndexes(r={}){var e=()=>super.listIndexes,t=this;return e().call(t,qt(qt({},r),{},{vectorBucketName:t.vectorBucketName}))}async getIndex(r){var e=()=>super.getIndex,t=this;return e().call(t,t.vectorBucketName,r)}async deleteIndex(r){var e=()=>super.deleteIndex,t=this;return e().call(t,t.vectorBucketName,r)}index(r){return new kT(this.url,this.headers,this.vectorBucketName,r,this.fetch)}},kT=class extends LT{constructor(r,e,t,n,i){super(r,e,i),this.vectorBucketName=t,this.indexName=n}async putVectors(r){var e=()=>super.putVectors,t=this;return e().call(t,qt(qt({},r),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async getVectors(r){var e=()=>super.getVectors,t=this;return e().call(t,qt(qt({},r),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async listVectors(r={}){var e=()=>super.listVectors,t=this;return e().call(t,qt(qt({},r),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async queryVectors(r){var e=()=>super.queryVectors,t=this;return e().call(t,qt(qt({},r),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async deleteVectors(r){var e=()=>super.deleteVectors,t=this;return e().call(t,qt(qt({},r),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}},OT=class extends RT{constructor(r,e={},t,n){super(r,e,t,n)}from(r){return new MT(this.url,this.headers,r,this.fetch)}get vectors(){return new NT(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new DT(this.url+"/iceberg",this.headers,this.fetch)}};const yw="2.95.3",ch=30*1e3,ly=3,V0=ly*ch,UT="http://localhost:9999",HT="supabase.auth.token",zT={"X-Client-Info":`gotrue-js/${yw}`},cy="X-Supabase-Api-Version",Aw={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},GT=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,jT=600*1e3;class mp extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function It(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class VT extends mp{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}function WT(r){return It(r)&&r.name==="AuthApiError"}class lu extends mp{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Qa extends mp{constructor(e,t,n,i){super(e,n,i),this.name=t,this.status=n}}class xs extends Qa{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function W0(r){return It(r)&&r.name==="AuthSessionMissingError"}class Ld extends Qa{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Zm extends Qa{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class e2 extends Qa{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function JT(r){return It(r)&&r.name==="AuthImplicitGrantRedirectError"}class xx extends Qa{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class XT extends Qa{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class uy extends Qa{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function J0(r){return It(r)&&r.name==="AuthRetryableFetchError"}class _x extends Qa{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class dy extends Qa{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const ug="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Cx=` 	
\r=`.split(""),KT=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<Cx.length;e+=1)r[Cx[e].charCodeAt(0)]=-2;for(let e=0;e<ug.length;e+=1)r[ug[e].charCodeAt(0)]=e;return r})();function wx(r,e,t){if(r!==null)for(e.queue=e.queue<<8|r,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(ug[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(ug[n]),e.queuedBits-=6}}function Ew(r,e,t){const n=KT[r];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function Sx(r){const e=[],t=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{$T(o,n,t)};for(let o=0;o<r.length;o+=1)Ew(r.charCodeAt(o),i,s);return e.join("")}function qT(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function YT(r,e){for(let t=0;t<r.length;t+=1){let n=r.charCodeAt(t);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(r.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}qT(n,e)}}function $T(r,e,t){if(e.utf8seq===0){if(r<=127){t(r);return}for(let n=1;n<6;n+=1)if((r>>7-n&1)===0){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function yh(r){const e=[],t={queue:0,queuedBits:0},n=i=>{e.push(i)};for(let i=0;i<r.length;i+=1)Ew(r.charCodeAt(i),t,n);return new Uint8Array(e)}function QT(r){const e=[];return YT(r,t=>e.push(t)),new Uint8Array(e)}function uu(r){const e=[],t={queue:0,queuedBits:0},n=i=>{e.push(i)};return r.forEach(i=>wx(i,t,n)),wx(null,t,n),e.join("")}function ZT(r){return Math.round(Date.now()/1e3)+r}function e3(){return Symbol("auth-callback")}const pi=()=>typeof window<"u"&&typeof document<"u",Vc={tested:!1,writable:!1},xw=()=>{if(!pi())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Vc.tested)return Vc.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),Vc.tested=!0,Vc.writable=!0}catch{Vc.tested=!0,Vc.writable=!1}return Vc.writable};function t3(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return t.searchParams.forEach((n,i)=>{e[i]=n}),e}const _w=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),n3=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",uh=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},Wc=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},fi=async(r,e)=>{await r.removeItem(e)};class bg{constructor(){this.promise=new bg.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}bg.promiseConstructor=Promise;function t2(r){const e=r.split(".");if(e.length!==3)throw new dy("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!GT.test(e[n]))throw new dy("JWT not in base64url format");return{header:JSON.parse(Sx(e[0])),payload:JSON.parse(Sx(e[1])),signature:yh(e[2]),raw:{header:e[0],payload:e[1]}}}async function r3(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function i3(r,e){return new Promise((n,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await r(s);if(!e(s,null,o)){n(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function s3(r){return("0"+r.toString(16)).substr(-2)}function o3(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let i="";for(let s=0;s<56;s++)i+=t.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,s3).join("")}async function a3(r){const t=new TextEncoder().encode(r),n=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(n);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function l3(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await a3(r);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Id(r,e,t=!1){const n=o3();let i=n;t&&(i+="/PASSWORD_RECOVERY"),await uh(r,`${e}-code-verifier`,i);const s=await l3(n);return[s,n===s?"plain":"s256"]}const c3=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function u3(r){const e=r.headers.get(cy);if(!e||!e.match(c3))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function d3(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function h3(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const f3=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Nd(r){if(!f3.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function X0(){const r={};return new Proxy(r,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const n=t.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function p3(r,e){return new Proxy(r,{get:(t,n,i)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const s=n.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,n,i)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,n,i)}})}function Bx(r){return JSON.parse(JSON.stringify(r))}const nu=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),m3=[502,503,504];async function bx(r){var e;if(!n3(r))throw new uy(nu(r),0);if(m3.includes(r.status))throw new uy(nu(r),r.status);let t;try{t=await r.json()}catch(s){throw new lu(nu(s),s)}let n;const i=u3(r);if(i&&i.getTime()>=Aw["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?n=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(n=t.error_code),n){if(n==="weak_password")throw new _x(nu(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new xs}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new _x(nu(t),r.status,t.weak_password.reasons);throw new VT(nu(t),r.status||500,n)}const g3=(r,e,t,n)=>{const i={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),t))};async function Xt(r,e,t,n){var i;const s=Object.assign({},n==null?void 0:n.headers);s[cy]||(s[cy]=Aw["2024-01-01"].name),n!=null&&n.jwt&&(s.Authorization=`Bearer ${n.jwt}`);const o=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",u=await v3(r,e,t+l,{headers:s,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(u):{data:Object.assign({},u),error:null}}async function v3(r,e,t,n,i,s){const o=g3(e,n,i,s);let l;try{l=await r(t,Object.assign({},o))}catch(u){throw console.error(u),new uy(nu(u),0)}if(l.ok||await bx(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(u){await bx(u)}}function Co(r){var e;let t=null;E3(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=ZT(r.expires_in)));const n=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:n},error:null}}function Mx(r){const e=Co(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,n)=>t&&typeof n=="string",!0)&&(e.data.weak_password=r.weak_password),e}function jl(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function y3(r){return{data:r,error:null}}function A3(r){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:i,verification_type:s}=r,o=wg(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:t,hashed_token:n,redirect_to:i,verification_type:s},u=Object.assign({},o);return{data:{properties:l,user:u},error:null}}function Tx(r){return r}function E3(r){return r.access_token&&r.refresh_token&&r.expires_in}const K0=["global","local","others"];class x3{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=_w(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=K0[0]){if(K0.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${K0.join(", ")}`);try{return await Xt(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(It(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await Xt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:jl})}catch(n){if(It(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=wg(e,["options"]),i=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await Xt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:A3,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(It(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Xt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:jl})}catch(t){if(It(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,i,s,o,l,u;try{const h={nextPage:null,lastPage:0,total:0},p=await Xt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Tx});if(p.error)throw p.error;const m=await p.json(),v=(o=p.headers.get("x-total-count"))!==null&&o!==void 0?o:0,y=(u=(l=p.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&u!==void 0?u:[];return y.length>0&&(y.forEach(E=>{const w=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(E.split(";")[1].split("=")[1]);h[`${C}Page`]=w}),h.total=parseInt(v)),{data:Object.assign(Object.assign({},m),h),error:null}}catch(h){if(It(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){Nd(e);try{return await Xt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:jl})}catch(t){if(It(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Nd(e);try{return await Xt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:jl})}catch(n){if(It(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){Nd(e);try{return await Xt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:jl})}catch(n){if(It(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Nd(e.userId);try{const{data:t,error:n}=await Xt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:n}}catch(t){if(It(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Nd(e.userId),Nd(e.id);try{return{data:await Xt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(It(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,n,i,s,o,l,u;try{const h={nextPage:null,lastPage:0,total:0},p=await Xt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Tx});if(p.error)throw p.error;const m=await p.json(),v=(o=p.headers.get("x-total-count"))!==null&&o!==void 0?o:0,y=(u=(l=p.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&u!==void 0?u:[];return y.length>0&&(y.forEach(E=>{const w=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(E.split(";")[1].split("=")[1]);h[`${C}Page`]=w}),h.total=parseInt(v)),{data:Object.assign(Object.assign({},m),h),error:null}}catch(h){if(It(h))return{data:{clients:[]},error:h};throw h}}async _createOAuthClient(e){try{return await Xt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(It(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await Xt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(It(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await Xt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(It(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await Xt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(It(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await Xt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(It(t))return{data:null,error:t};throw t}}}function Rx(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}const Fd={debug:!!(globalThis&&xw()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Cw extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class _3 extends Cw{}async function C3(r,e,t){Fd.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Fd.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){Fd.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,i.name);try{return await t()}finally{Fd.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,i.name)}}else{if(e===0)throw Fd.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new _3(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(Fd.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function w3(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function ww(r){if(!/^0x[a-fA-F0-9]{40}$/.test(r))throw new Error(`@supabase/auth-js: Address "${r}" is invalid.`);return r.toLowerCase()}function S3(r){return parseInt(r,16)}function B3(r){const e=new TextEncoder().encode(r);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function b3(r){var e;const{chainId:t,domain:n,expirationTime:i,issuedAt:s=new Date,nonce:o,notBefore:l,requestId:u,resources:h,scheme:p,uri:m,version:v}=r;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!m)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((e=r.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${r.statement}`)}const y=ww(r.address),E=p?`${p}://${n}`:n,w=r.statement?`${r.statement}
`:"",C=`${E} wants you to sign in with your Ethereum account:
${y}

${w}`;let x=`URI: ${m}
Version: ${v}
Chain ID: ${t}${o?`
Nonce: ${o}`:""}
Issued At: ${s.toISOString()}`;if(i&&(x+=`
Expiration Time: ${i.toISOString()}`),l&&(x+=`
Not Before: ${l.toISOString()}`),u&&(x+=`
Request ID: ${u}`),h){let M=`
Resources:`;for(const S of h){if(!S||typeof S!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${S}`);M+=`
- ${S}`}x+=M}return`${C}
${x}`}class Ir extends Error{constructor({message:e,code:t,cause:n,name:i}){var s;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(s=i??(n instanceof Error?n.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=t}}class dg extends Ir{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function M3({error:r,options:e}){var t,n,i;const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ir({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else if(r.name==="ConstraintError"){if(((t=s.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new Ir({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:r});if(e.mediation==="conditional"&&((n=s.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Ir({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:r});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Ir({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:r})}else{if(r.name==="InvalidStateError")return new Ir({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:r});if(r.name==="NotAllowedError")return new Ir({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="NotSupportedError")return s.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new Ir({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:r}):new Ir({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:r});if(r.name==="SecurityError"){const o=window.location.hostname;if(Sw(o)){if(s.rp.id!==o)return new Ir({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new Ir({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new Ir({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:r})}else if(r.name==="UnknownError")return new Ir({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new Ir({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}function T3({error:r,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ir({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else{if(r.name==="NotAllowedError")return new Ir({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="SecurityError"){const n=window.location.hostname;if(Sw(n)){if(t.rpId!==n)return new Ir({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new Ir({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="UnknownError")return new Ir({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new Ir({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}class R3{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const D3=new R3;function P3(r){if(!r)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(r);const{challenge:e,user:t,excludeCredentials:n}=r,i=wg(r,["challenge","user","excludeCredentials"]),s=yh(e).buffer,o=Object.assign(Object.assign({},t),{id:yh(t.id).buffer}),l=Object.assign(Object.assign({},i),{challenge:s,user:o});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let u=0;u<n.length;u++){const h=n[u];l.excludeCredentials[u]=Object.assign(Object.assign({},h),{id:yh(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return l}function L3(r){if(!r)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(r);const{challenge:e,allowCredentials:t}=r,n=wg(r,["challenge","allowCredentials"]),i=yh(e).buffer,s=Object.assign(Object.assign({},n),{challenge:i});if(t&&t.length>0){s.allowCredentials=new Array(t.length);for(let o=0;o<t.length;o++){const l=t[o];s.allowCredentials[o]=Object.assign(Object.assign({},l),{id:yh(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return s}function I3(r){var e;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const t=r;return{id:r.id,rawId:r.id,response:{attestationObject:uu(new Uint8Array(r.response.attestationObject)),clientDataJSON:uu(new Uint8Array(r.response.clientDataJSON))},type:"public-key",clientExtensionResults:r.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function N3(r){var e;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const t=r,n=r.getClientExtensionResults(),i=r.response;return{id:r.id,rawId:r.id,response:{authenticatorData:uu(new Uint8Array(i.authenticatorData)),clientDataJSON:uu(new Uint8Array(i.clientDataJSON)),signature:uu(new Uint8Array(i.signature)),userHandle:i.userHandle?uu(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Sw(r){return r==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(r)}function Dx(){var r,e;return!!(pi()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((r=navigator==null?void 0:navigator.credentials)===null||r===void 0?void 0:r.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function F3(r){try{const e=await navigator.credentials.create(r);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new dg("Browser returned unexpected credential type",e)}:{data:null,error:new dg("Empty credential response",e)}}catch(e){return{data:null,error:M3({error:e,options:r})}}}async function k3(r){try{const e=await navigator.credentials.get(r);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new dg("Browser returned unexpected credential type",e)}:{data:null,error:new dg("Empty credential response",e)}}catch(e){return{data:null,error:T3({error:e,options:r})}}}const O3={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},U3={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function hg(...r){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),t=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),n={};for(const i of r)if(i)for(const s in i){const o=i[s];if(o!==void 0)if(Array.isArray(o))n[s]=o;else if(t(o))n[s]=o;else if(e(o)){const l=n[s];e(l)?n[s]=hg(l,o):n[s]=hg(o)}else n[s]=o}return n}function H3(r,e){return hg(O3,r,e||{})}function z3(r,e){return hg(U3,r,e||{})}class G3{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:n,signal:i},s){var o;try{const{data:l,error:u}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!l)return{data:null,error:u};const h=i??D3.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:p}=l.webauthn.credential_options.publicKey;if(!p.name){const m=n;if(m)p.name=`${p.id}:${m}`;else{const y=(await this.client.getUser()).data.user,E=((o=y==null?void 0:y.user_metadata)===null||o===void 0?void 0:o.name)||(y==null?void 0:y.email)||(y==null?void 0:y.id)||"User";p.name=`${p.id}:${E}`}}p.displayName||(p.displayName=p.name)}switch(l.webauthn.type){case"create":{const p=H3(l.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:m,error:v}=await F3({publicKey:p,signal:h});return m?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:m}},error:null}:{data:null,error:v}}case"request":{const p=z3(l.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:m,error:v}=await k3(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:p,signal:h}));return m?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:m}},error:null}:{data:null,error:v}}}}catch(l){return It(l)?{data:null,error:l}:{data:null,error:new lu("Unexpected error in challenge",l)}}}async _verify({challengeId:e,factorId:t,webauthn:n}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!t)return{data:null,error:new mp("rpId is required for WebAuthn authentication")};try{if(!Dx())return{data:null,error:new lu("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:n},signal:i},{request:s});if(!o)return{data:null,error:l};const{webauthn:u}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:u.type,rpId:t,rpOrigins:n,credential_response:u.credential_response}})}catch(o){return It(o)?{data:null,error:o}:{data:null,error:new lu("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!t)return{data:null,error:new mp("rpId is required for WebAuthn registration")};try{if(!Dx())return{data:null,error:new lu("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(p=>{var m;return(m=p.data)===null||m===void 0?void 0:m.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===e&&v.status!=="unverified")}).then(p=>p?this.client.mfa.unenroll({factorId:p==null?void 0:p.id}):void 0),{data:null,error:l};const{data:u,error:h}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:t,rpOrigins:n},signal:i},{create:s});return u?this._verify({factorId:o.id,challengeId:u.challengeId,webauthn:{rpId:t,rpOrigins:n,type:u.webauthn.type,credential_response:u.webauthn.credential_response}}):{data:null,error:h}}catch(o){return It(o)?{data:null,error:o}:{data:null,error:new lu("Unexpected error in register",o)}}}}w3();const j3={url:UT,storageKey:HT,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:zT,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Px(r,e,t){return await t()}const kd={};class gp{get jwks(){var e,t;return(t=(e=kd[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){kd[this.storageKey]=Object.assign(Object.assign({},kd[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=kd[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){kd[this.storageKey]=Object.assign(Object.assign({},kd[this.storageKey]),{cachedAt:e})}constructor(e){var t,n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},j3),e);if(this.storageKey=s.storageKey,this.instanceID=(t=gp.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,gp.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&pi()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new x3({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=_w(s.fetch),this.lock=s.lock||Px,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,this.lockAcquireTimeout=s.lockAcquireTimeout,s.lock?this.lock=s.lock:this.persistSession&&pi()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=C3:this.lock=Px,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new G3(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:xw()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Rx(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Rx(this.memoryStorage)),pi()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o);try{await this._notifyAllSubscribers(o.data.event,o.data.session,!1)}catch(l){this._debug("#broadcastChannel","error",l)}})}this.initialize().catch(o=>{this._debug("#initialize()","error",o)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${yw}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},n="none";if(pi()&&(t=t3(window.location.href),this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce")),pi()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:s}=await this._getSessionFromURL(t,n);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),JT(s)){const u=(e=s.details)===null||e===void 0?void 0:e.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:s}}return{error:s}}const{session:o,redirectType:l}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return It(t)?this._returnResult({error:t}):this._returnResult({error:new lu("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,i;try{const s=await Xt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Co}),{data:o,error:l}=s;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const u=o.session,h=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:h,session:u},error:null})}catch(s){if(It(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(e){var t,n,i;try{let s;if("email"in e){const{email:p,password:m,options:v}=e;let y=null,E=null;this.flowType==="pkce"&&([y,E]=await Id(this.storage,this.storageKey)),s=await Xt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:p,password:m,data:(t=v==null?void 0:v.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:y,code_challenge_method:E},xform:Co})}else if("phone"in e){const{phone:p,password:m,options:v}=e;s=await Xt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:m,data:(n=v==null?void 0:v.data)!==null&&n!==void 0?n:{},channel:(i=v==null?void 0:v.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:Co})}else throw new Zm("You must provide either an email or phone number and a password");const{data:o,error:l}=s;if(l||!o)return await fi(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const u=o.session,h=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:h,session:u},error:null})}catch(s){if(await fi(this.storage,`${this.storageKey}-code-verifier`),It(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:s,password:o,options:l}=e;t=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Mx})}else if("phone"in e){const{phone:s,password:o,options:l}=e;t=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Mx})}else throw new Zm("You must provide either an email or phone number and a password");const{data:n,error:i}=t;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!n||!n.session||!n.user){const s=new Ld;return this._returnResult({data:{user:null,session:null},error:s})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(t){if(It(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,n,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,n,i,s,o,l,u,h,p,m,v;let y,E;if("message"in e)y=e.message,E=e.signature;else{const{chain:w,wallet:C,statement:x,options:M}=e;let S;if(pi())if(typeof C=="object")S=C;else{const F=window;if("ethereum"in F&&typeof F.ethereum=="object"&&"request"in F.ethereum&&typeof F.ethereum.request=="function")S=F.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!(M!=null&&M.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=C}const R=new URL((t=M==null?void 0:M.url)!==null&&t!==void 0?t:window.location.href),N=await S.request({method:"eth_requestAccounts"}).then(F=>F).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!N||N.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const I=ww(N[0]);let O=(n=M==null?void 0:M.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!O){const F=await S.request({method:"eth_chainId"});O=S3(F)}const j={domain:R.host,address:I,statement:x,uri:R.href,version:"1",chainId:O,nonce:(i=M==null?void 0:M.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(s=M==null?void 0:M.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=M==null?void 0:M.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(u=M==null?void 0:M.signInWithEthereum)===null||u===void 0?void 0:u.notBefore,requestId:(h=M==null?void 0:M.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(p=M==null?void 0:M.signInWithEthereum)===null||p===void 0?void 0:p.resources};y=b3(j),E=await S.request({method:"personal_sign",params:[B3(y),I]})}try{const{data:w,error:C}=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:y,signature:E},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Co});if(C)throw C;if(!w||!w.session||!w.user){const x=new Ld;return this._returnResult({data:{user:null,session:null},error:x})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:C})}catch(w){if(It(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async signInWithSolana(e){var t,n,i,s,o,l,u,h,p,m,v,y;let E,w;if("message"in e)E=e.message,w=e.signature;else{const{chain:C,wallet:x,statement:M,options:S}=e;let R;if(pi())if(typeof x=="object")R=x;else{const I=window;if("solana"in I&&typeof I.solana=="object"&&("signIn"in I.solana&&typeof I.solana.signIn=="function"||"signMessage"in I.solana&&typeof I.solana.signMessage=="function"))R=I.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(S!=null&&S.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");R=x}const N=new URL((t=S==null?void 0:S.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in R&&R.signIn){const I=await R.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},S==null?void 0:S.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),M?{statement:M}:null));let O;if(Array.isArray(I)&&I[0]&&typeof I[0]=="object")O=I[0];else if(I&&typeof I=="object"&&"signedMessage"in I&&"signature"in I)O=I;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in O&&"signature"in O&&(typeof O.signedMessage=="string"||O.signedMessage instanceof Uint8Array)&&O.signature instanceof Uint8Array)E=typeof O.signedMessage=="string"?O.signedMessage:new TextDecoder().decode(O.signedMessage),w=O.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in R)||typeof R.signMessage!="function"||!("publicKey"in R)||typeof R!="object"||!R.publicKey||!("toBase58"in R.publicKey)||typeof R.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");E=[`${N.host} wants you to sign in with your Solana account:`,R.publicKey.toBase58(),...M?["",M,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(i=(n=S==null?void 0:S.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=S==null?void 0:S.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${S.signInWithSolana.notBefore}`]:[],...!((o=S==null?void 0:S.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${S.signInWithSolana.expirationTime}`]:[],...!((l=S==null?void 0:S.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${S.signInWithSolana.chainId}`]:[],...!((u=S==null?void 0:S.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${S.signInWithSolana.nonce}`]:[],...!((h=S==null?void 0:S.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${S.signInWithSolana.requestId}`]:[],...!((m=(p=S==null?void 0:S.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||m===void 0)&&m.length?["Resources",...S.signInWithSolana.resources.map(O=>`- ${O}`)]:[]].join(`
`);const I=await R.signMessage(new TextEncoder().encode(E),"utf8");if(!I||!(I instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=I}}try{const{data:C,error:x}=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:E,signature:uu(w)},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:Co});if(x)throw x;if(!C||!C.session||!C.user){const M=new Ld;return this._returnResult({data:{user:null,session:null},error:M})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:Object.assign({},C),error:x})}catch(C){if(It(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async _exchangeCodeForSession(e){const t=await Wc(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(t??"").split("/");try{if(!n&&this.flowType==="pkce")throw new XT;const{data:s,error:o}=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Co});if(await fi(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!s||!s.session||!s.user){const l=new Ld;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(await fi(this.storage,`${this.storageKey}-code-verifier`),It(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(e){try{const{options:t,provider:n,token:i,access_token:s,nonce:o}=e,l=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Co}),{data:u,error:h}=l;if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!u||!u.session||!u.user){const p=new Ld;return this._returnResult({data:{user:null,session:null},error:p})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:u,error:h})}catch(t){if(It(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,n,i,s,o;try{if("email"in e){const{email:l,options:u}=e;let h=null,p=null;this.flowType==="pkce"&&([h,p]=await Id(this.storage,this.storageKey));const{error:m}=await Xt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(t=u==null?void 0:u.data)!==null&&t!==void 0?t:{},create_user:(n=u==null?void 0:u.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},code_challenge:h,code_challenge_method:p},redirectTo:u==null?void 0:u.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:m})}if("phone"in e){const{phone:l,options:u}=e,{data:h,error:p}=await Xt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(i=u==null?void 0:u.data)!==null&&i!==void 0?i:{},create_user:(s=u==null?void 0:u.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},channel:(o=u==null?void 0:u.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:p})}throw new Zm("You must provide either an email or phone number.")}catch(l){if(await fi(this.storage,`${this.storageKey}-code-verifier`),It(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(e){var t,n;try{let i,s;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,s=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await Xt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Co});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const u=o.session,h=o.user;return u!=null&&u.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),this._returnResult({data:{user:h,session:u},error:null})}catch(i){if(It(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var t,n,i,s,o;try{let l=null,u=null;this.flowType==="pkce"&&([l,u]=await Id(this.storage,this.storageKey));const h=await Xt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:u}),headers:this.headers,xform:y3});return!((s=h.data)===null||s===void 0)&&s.url&&pi()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(h.data.url),this._returnResult(h)}catch(l){if(await fi(this.storage,`${this.storageKey}-code-verifier`),It(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new xs;const{error:i}=await Xt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(It(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:s}=e,{error:o}=await Xt(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:n,type:i,options:s}=e,{data:o,error:l}=await Xt(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l})}throw new Zm("You must provide either an email or phone number and a type")}catch(t){if(It(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=t();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Wc(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<V0:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await Wc(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=X0()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=p3(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const t=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return t.data.user&&(this.suppressGetSessionWarning=!0),t}async _getUser(e){try{return e?await Xt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:jl}):await this._useSession(async t=>{var n,i,s;const{data:o,error:l}=t;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new xs}:await Xt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:jl})})}catch(t){if(It(t))return W0(t)&&(await this._removeSession(),await fi(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:i,error:s}=n;if(s)throw s;if(!i.session)throw new xs;const o=i.session;let l=null,u=null;this.flowType==="pkce"&&e.email!=null&&([l,u]=await Id(this.storage,this.storageKey));const{data:h,error:p}=await Xt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:u}),jwt:o.access_token,xform:jl});if(p)throw p;return o.user=h.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(await fi(this.storage,`${this.storageKey}-code-verifier`),It(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new xs;const t=Date.now()/1e3;let n=t,i=!0,s=null;const{payload:o}=t2(e.access_token);if(o.exp&&(n=o.exp,i=n<=t),i){const{data:l,error:u}=await this._callRefreshToken(e.refresh_token);if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l)return{data:{user:null,session:null},error:null};s=l}else{const{data:l,error:u}=await this._getUser(e.access_token);if(u)return this._returnResult({data:{user:null,session:null},error:u});s={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(t){if(It(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:o,error:l}=t;if(l)throw l;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new xs;const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(It(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!pi())throw new e2("No browser detected.");if(e.error||e.error_description||e.error_code)throw new e2(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new xx("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new e2("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new xx("No code detected.");const{data:M,error:S}=await this._exchangeCodeForSession(e.code);if(S)throw S;const R=new URL(window.location.href);return R.searchParams.delete("code"),window.history.replaceState(window.history.state,"",R.toString()),{data:{session:M.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:l,expires_at:u,token_type:h}=e;if(!s||!l||!o||!h)throw new e2("No session defined in URL");const p=Math.round(Date.now()/1e3),m=parseInt(l);let v=p+m;u&&(v=parseInt(u));const y=v-p;y*1e3<=ch&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${m}s`);const E=v-m;p-E>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",E,v,p):p-E<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",E,v,p);const{data:w,error:C}=await this._getUser(s);if(C)throw C;const x={provider_token:n,provider_refresh_token:i,access_token:s,expires_in:m,expires_at:v,refresh_token:o,token_type:h,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:x,redirectType:e.type},error:null})}catch(n){if(It(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Wc(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:i,error:s}=t;if(s&&!W0(s))return this._returnResult({error:s});const o=(n=i.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(WT(l)&&(l.status===404||l.status===401||l.status===403)||W0(l)))return this._returnResult({error:l})}return e!=="others"&&(await this._removeSession(),await fi(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=e3(),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,i;try{const{data:{session:s},error:o}=t;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,t={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await Id(this.storage,this.storageKey,!0));try{return await Xt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(await fi(this.storage,`${this.storageKey}-code-verifier`),It(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(It(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:n,error:i}=await this._useSession(async s=>{var o,l,u,h,p;const{data:m,error:v}=s;if(v)throw v;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(u=e.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await Xt(this.fetch,"GET",y,{headers:this.headers,jwt:(p=(h=m.session)===null||h===void 0?void 0:h.access_token)!==null&&p!==void 0?p:void 0})});if(i)throw i;return pi()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:e.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(It(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var n;try{const{error:i,data:{session:s}}=t;if(i)throw i;const{options:o,provider:l,token:u,access_token:h,nonce:p}=e,m=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=s==null?void 0:s.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:u,access_token:h,nonce:p,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Co}),{data:v,error:y}=m;return y?this._returnResult({data:{user:null,session:null},error:y}):!v||!v.session||!v.user?this._returnResult({data:{user:null,session:null},error:new Ld}):(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),this._returnResult({data:v,error:y}))}catch(i){if(await fi(this.storage,`${this.storageKey}-code-verifier`),It(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,i;const{data:s,error:o}=t;if(o)throw o;return await Xt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(It(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await i3(async i=>(i>0&&await r3(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await Xt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Co})),(i,s)=>{const o=200*Math.pow(2,i);return s&&J0(s)&&Date.now()+o-n<ch})}catch(n){if(this._debug(t,"error",n),It(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),pi()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await Wc(this.storage,this.storageKey);if(i&&this.userStorage){let o=await Wc(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await uh(this.userStorage,this.storageKey+"-user",o)),i.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:X0()}else if(i&&!i.user&&!i.user){const o=await Wc(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await fi(this.storage,this.storageKey+"-user"),await uh(this.storage,this.storageKey,i)):i.user=X0()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const s=((t=i.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<V0;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${V0}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),J0(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(i.access_token);!l&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new xs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new bg;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new xs;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const l={data:s.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(s){if(this._debug(i,"error",s),It(s)){const o={data:null,error:s};return J0(s)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,t)}catch(u){s.push(u)}});if(await Promise.all(o),s.length>0){for(let l=0;l<s.length;l+=1)console.error(s[l]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await fi(this.storage,`${this.storageKey}-code-verifier`);const t=Object.assign({},e),n=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&t.user&&await uh(this.userStorage,this.storageKey+"-user",{user:t.user});const i=Object.assign({},t);delete i.user;const s=Bx(i);await uh(this.storage,this.storageKey,s)}else{const i=Bx(t);await uh(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await fi(this.storage,this.storageKey),await fi(this.storage,this.storageKey+"-code-verifier"),await fi(this.storage,this.storageKey+"-user"),this.userStorage&&await fi(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&pi()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ch);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const t=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const t=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,t&&clearTimeout(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/ch);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${ch}ms, refresh threshold is ${ly} ticks`),i<=ly&&await this._callRefreshToken(n.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Cw)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!pi()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const i=[`provider=${encodeURIComponent(t)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[s,o]=await Id(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(l.toString())}if(n!=null&&n.queryParams){const s=new URLSearchParams(n.queryParams);i.push(s.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:i,error:s}=t;return s?this._returnResult({data:null,error:s}):await Xt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(It(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,i;const{data:s,error:o}=t;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:u,error:h}=await Xt(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return h?this._returnResult({data:null,error:h}):(e.factorType==="totp"&&u.type==="totp"&&(!((i=u==null?void 0:u.totp)===null||i===void 0)&&i.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),this._returnResult({data:u,error:null}))})}catch(t){if(It(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async t=>{var n;const{data:i,error:s}=t;if(s)return this._returnResult({data:null,error:s});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?I3(e.webauthn.credential_response):N3(e.webauthn.credential_response)})}:{code:e.code}),{data:l,error:u}=await Xt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:u}))})}catch(t){if(It(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async t=>{var n;const{data:i,error:s}=t;if(s)return this._returnResult({data:null,error:s});const o=await Xt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:P3(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:L3(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(It(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(e=t==null?void 0:t.factors)!==null&&e!==void 0?e:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(e){var t,n,i,s;if(e)try{const{payload:y}=t2(e);let E=null;y.aal&&(E=y.aal);let w=E;const{data:{user:C},error:x}=await this.getUser(e);if(x)return this._returnResult({data:null,error:x});((n=(t=C==null?void 0:C.factors)===null||t===void 0?void 0:t.filter(R=>R.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(w="aal2");const S=y.amr||[];return{data:{currentLevel:E,nextLevel:w,currentAuthenticationMethods:S},error:null}}catch(y){if(It(y))return this._returnResult({data:null,error:y});throw y}const{data:{session:o},error:l}=await this.getSession();if(l)return this._returnResult({data:null,error:l});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=t2(o.access_token);let h=null;u.aal&&(h=u.aal);let p=h;((s=(i=o.user.factors)===null||i===void 0?void 0:i.filter(y=>y.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(p="aal2");const v=u.amr||[];return{data:{currentLevel:h,nextLevel:p,currentAuthenticationMethods:v},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:n},error:i}=t;return i?this._returnResult({data:null,error:i}):n?await Xt(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new xs})})}catch(t){if(It(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async n=>{const{data:{session:i},error:s}=n;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new xs});const o=await Xt(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&pi()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(It(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,t){try{return await this._useSession(async n=>{const{data:{session:i},error:s}=n;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new xs});const o=await Xt(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&pi()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(It(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;return n?this._returnResult({data:null,error:n}):t?await Xt(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new xs})})}catch(e){if(It(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:n},error:i}=t;return i?this._returnResult({data:null,error:i}):n?(await Xt(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new xs})})}catch(t){if(It(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e,t={keys:[]}){let n=t.keys.find(l=>l.kid===e);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(l=>l.kid===e),n&&this.jwks_cached_at+jT>i)return n;const{data:s,error:o}=await Xt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,n=s.keys.find(l=>l.kid===e),!n)?null:n}async getClaims(e,t={}){try{let n=e;if(!n){const{data:y,error:E}=await this.getSession();if(E||!y.session)return this._returnResult({data:null,error:E});n=y.session.access_token}const{header:i,payload:s,signature:o,raw:{header:l,payload:u}}=t2(n);t!=null&&t.allowExpired||d3(s.exp);const h=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!h){const{error:y}=await this.getUser(n);if(y)throw y;return{data:{claims:s,header:i,signature:o},error:null}}const p=h3(i.alg),m=await crypto.subtle.importKey("jwk",h,p,!0,["verify"]);if(!await crypto.subtle.verify(p,m,o,QT(`${l}.${u}`)))throw new dy("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(n){if(It(n))return this._returnResult({data:null,error:n});throw n}}}gp.nextInstanceID={};const V3=gp,W3="2.95.3";let Qf="";typeof Deno<"u"?Qf="deno":typeof document<"u"?Qf="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Qf="react-native":Qf="node";const J3={"X-Client-Info":`supabase-js-${Qf}/${W3}`},X3={headers:J3},K3={schema:"public"},q3={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Y3={};function vp(r){"@babel/helpers - typeof";return vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vp(r)}function $3(r,e){if(vp(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(vp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Q3(r){var e=$3(r,"string");return vp(e)=="symbol"?e:e+""}function Z3(r,e,t){return(e=Q3(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Lx(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function vr(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Lx(Object(t),!0).forEach(function(n){Z3(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Lx(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}const eR=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),tR=()=>Headers,nR=(r,e,t)=>{const n=eR(t),i=tR();return async(s,o)=>{var l;const u=(l=await e())!==null&&l!==void 0?l:r;let h=new i(o==null?void 0:o.headers);return h.has("apikey")||h.set("apikey",r),h.has("Authorization")||h.set("Authorization",`Bearer ${u}`),n(s,vr(vr({},o),{},{headers:h}))}};function rR(r){return r.endsWith("/")?r:r+"/"}function iR(r,e){var t,n;const{db:i,auth:s,realtime:o,global:l}=r,{db:u,auth:h,realtime:p,global:m}=e,v={db:vr(vr({},u),i),auth:vr(vr({},h),s),realtime:vr(vr({},p),o),storage:{},global:vr(vr(vr({},m),l),{},{headers:vr(vr({},(t=m==null?void 0:m.headers)!==null&&t!==void 0?t:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return r.accessToken?v.accessToken=r.accessToken:delete v.accessToken,v}function sR(r){const e=r==null?void 0:r.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(rR(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var oR=class extends V3{constructor(r){super(r)}},aR=class{constructor(r,e,t){var n,i;this.supabaseUrl=r,this.supabaseKey=e;const s=sR(r);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const o=`sb-${s.hostname.split(".")[0]}-auth-token`,l={db:K3,realtime:Y3,auth:vr(vr({},q3),{},{storageKey:o}),global:X3},u=iR(t??{},l);if(this.storageKey=(n=u.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken)this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(p,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}});else{var h;this.auth=this._initSupabaseAuthClient((h=u.auth)!==null&&h!==void 0?h:{},this.headers,u.global.fetch)}this.fetch=nR(e,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(vr({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(p=>this.realtime.setAuth(p)).catch(p=>console.warn("Failed to set initial Realtime auth token:",p)),this.rest=new WM(new URL("rest/v1",s).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch,timeout:u.db.timeout,urlLengthLimit:u.db.urlLengthLimit}),this.storage=new OT(this.storageUrl.href,this.headers,this.fetch,t==null?void 0:t.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new kM(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(r){return this.rest.from(r)}schema(r){return this.rest.schema(r)}rpc(r,e={},t={head:!1,get:!1,count:void 0}){return this.rest.rpc(r,e,t)}channel(r,e={config:{}}){return this.realtime.channel(r,e)}getChannels(){return this.realtime.getChannels()}removeChannel(r){return this.realtime.removeChannel(r)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var r=this,e,t;if(r.accessToken)return await r.accessToken();const{data:n}=await r.auth.getSession();return(e=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:r.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:r,persistSession:e,detectSessionInUrl:t,storage:n,userStorage:i,storageKey:s,flowType:o,lock:l,debug:u,throwOnError:h},p,m){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new oR({url:this.authUrl.href,headers:vr(vr({},v),p),storageKey:s,autoRefreshToken:r,persistSession:e,detectSessionInUrl:t,storage:n,userStorage:i,flowType:o,lock:l,debug:u,throwOnError:h,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(r){return new lT(this.realtimeUrl.href,vr(vr({},r),{},{params:vr(vr({},{apikey:this.supabaseKey}),r==null?void 0:r.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,e)=>{this._handleTokenChanged(r,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(r,e,t){(r==="TOKEN_REFRESHED"||r==="SIGNED_IN")&&this.changedAccessToken!==t?(this.changedAccessToken=t,this.realtime.setAuth(t)):r==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const lR=(r,e,t)=>new aR(r,e,t);function cR(){if(typeof window<"u")return!1;const r=globalThis.process;if(!r)return!1;const e=r.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}cR()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const uR="https://fdsxqjctbatfbkzzwppp.supabase.co",dR="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZkc3hxamN0YmF0ZmJrenp3cHBwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA2MTYzNzYsImV4cCI6MjA4NjE5MjM3Nn0.KH9Va8wkySXOXKMAjSQ0pO-wXtW7BXwp1UAUwo_4bkk",Sr=lR(uR,dR),Bw=V.createContext({user:null,session:null,loading:!0,signInWithPhone:async()=>({error:null}),verifyOtp:async()=>({error:null,session:null,user:null}),simpleLogin:async()=>({error:null,user:null}),updateUserGene:async()=>{},signOut:async()=>{}}),kf="year-of-horse-user",hR=({children:r})=>{const[e,t]=V.useState(null),[n,i]=V.useState(null),[s,o]=V.useState(!0);V.useEffect(()=>{Sr.auth.getSession().then(({data:{session:y}})=>{if(y!=null&&y.user){i(y),t(y.user),o(!1);return}const E=localStorage.getItem(kf);if(E)try{const w=JSON.parse(E);t(w)}catch(w){console.error("Failed to parse stored user",w),localStorage.removeItem(kf)}o(!1)});const{data:{subscription:v}}=Sr.auth.onAuthStateChange((y,E)=>{E!=null&&E.user&&(i(E),t(E.user)),o(!1)});return()=>v.unsubscribe()},[]);const l=async v=>{const{error:y}=await Sr.auth.signInWithOtp({phone:v});return{error:y}},u=async(v,y)=>{const{data:E,error:w}=await Sr.auth.verifyOtp({phone:v,token:y,type:"sms"});return{error:w,session:E.session,user:E.user}},h=async(v,y,E)=>{try{const{data:w,error:C}=await Sr.from("users").select("*").eq("phone",v).maybeSingle();if(C)throw C;let x=w==null?void 0:w.id,M;if(w){x=w.id;const{error:S}=await Sr.from("users").update({name:y,hometown:E}).eq("id",x);if(S)throw S;M={id:x,phone:v,user_metadata:{name:y,hometown:E},gene_profile:w.gene_profile,role:"user"}}else{const{data:S,error:R}=await Sr.from("users").insert({phone:v,name:y,hometown:E,role:"user"}).select().single();if(R)throw R;x=S.id,M={id:x,phone:v,user_metadata:{name:y,hometown:E},role:"user"}}return t(M),localStorage.setItem(kf,JSON.stringify(M)),{error:null,user:M}}catch(w){return console.error("Simple login failed:",w),{error:w,user:null}}},p=async v=>{if(e)try{await Sr.from("users").update({gene_profile:v}).eq("id",e.id);const y={...e,gene_profile:v};t(y),localStorage.setItem(kf,JSON.stringify(y))}catch(y){console.error("Failed to update gene:",y)}},m=async()=>{await Sr.auth.signOut(),t(null),i(null),localStorage.removeItem(kf)};return P.jsx(Bw.Provider,{value:{user:e,session:n,loading:s,signInWithPhone:l,verifyOtp:u,simpleLogin:h,updateUserGene:p,signOut:m},children:r})},Tu=()=>V.useContext(Bw);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fR=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),pR=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),Ix=r=>{const e=pR(r);return e.charAt(0).toUpperCase()+e.slice(1)},bw=(...r)=>r.filter((e,t,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===t).join(" ").trim(),mR=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var gR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vR=V.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:i="",children:s,iconNode:o,...l},u)=>V.createElement("svg",{ref:u,...gR,width:e,height:e,stroke:r,strokeWidth:n?Number(t)*24/Number(e):t,className:bw("lucide",i),...!s&&!mR(l)&&{"aria-hidden":"true"},...l},[...o.map(([h,p])=>V.createElement(h,p)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=(r,e)=>{const t=V.forwardRef(({className:n,...i},s)=>V.createElement(vR,{ref:s,iconNode:e,className:bw(`lucide-${fR(Ix(r))}`,`lucide-${r}`,n),...i}));return t.displayName=Ix(r),t};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yR=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],fg=Cn("arrow-left",yR);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AR=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Mw=Cn("arrow-right",AR);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ER=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Tw=Cn("book-open",ER);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xR=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],hy=Cn("camera",xR);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _R=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Nx=Cn("check",_R);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CR=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],wR=Cn("chevron-left",CR);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SR=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],BR=Cn("chevron-right",SR);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],MR=Cn("circle-alert",bR);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TR=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Rw=Cn("circle-check-big",TR);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],DR=Cn("circle-x",RR);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],LR=Cn("clock",PR);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IR=[["path",{d:"m10 16 1.5 1.5",key:"11lckj"}],["path",{d:"m14 8-1.5-1.5",key:"1ohn8i"}],["path",{d:"M15 2c-1.798 1.998-2.518 3.995-2.807 5.993",key:"80uv8i"}],["path",{d:"m16.5 10.5 1 1",key:"696xn5"}],["path",{d:"m17 6-2.891-2.891",key:"xu6p2f"}],["path",{d:"M2 15c6.667-6 13.333 0 20-6",key:"1pyr53"}],["path",{d:"m20 9 .891.891",key:"3xwk7g"}],["path",{d:"M3.109 14.109 4 15",key:"q76aoh"}],["path",{d:"m6.5 12.5 1 1",key:"cs35ky"}],["path",{d:"m7 18 2.891 2.891",key:"1sisit"}],["path",{d:"M9 22c1.798-1.998 2.518-3.995 2.807-5.993",key:"q3hbxp"}]],NR=Cn("dna",IR);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FR=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],kR=Cn("download",FR);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OR=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],UR=Cn("eye",OR);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HR=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],zR=Cn("funnel",HR);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GR=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],jR=Cn("heart",GR);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VR=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],WR=Cn("house",VR);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JR=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],XR=Cn("image",JR);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KR=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],eg=Cn("loader-circle",KR);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qR=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],YR=Cn("lock",qR);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $R=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Up=Cn("map-pin",$R);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QR=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],q0=Cn("message-square",QR);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZR=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],eD=Cn("phone",ZR);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tD=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],nD=Cn("refresh-cw",tD);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rD=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],iD=Cn("search",rD);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sD=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Dw=Cn("share-2",sD);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oD=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Pw=Cn("shield-check",oD);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aD=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],lD=Cn("smartphone",aD);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cD=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],uD=Cn("sparkles",cD);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dD=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],hD=Cn("star",dD);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fD=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],pD=Cn("tag",fD);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mD=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],gD=Cn("trending-up",mD);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vD=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],yD=Cn("upload",vD);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AD=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Mg=Cn("user",AD);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ED=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Lw=Cn("x",ED),xD=({children:r})=>{const e=ec(),t=tc(),n=e.pathname==="/";return P.jsxs("div",{"trae-inspector-start-line":"15","trae-inspector-start-column":"4","trae-inspector-end-line":"31","trae-inspector-end-column":"10","trae-inspector-file-path":"src\\\\components\\\\Layout.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"relative min-h-screen",children:[!n&&P.jsx("button",{"trae-inspector-start-line":"17","trae-inspector-start-column":"8","trae-inspector-end-line":"28","trae-inspector-end-column":"17","trae-inspector-file-path":"src\\\\components\\\\Layout.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",onClick:()=>t("/"),className:"fixed top-4 left-4 z-50 p-3 bg-white/80 backdrop-blur-sm hover:bg-white text-red-800 rounded-full shadow-lg border border-red-100 transition-all duration-300 hover:scale-105 group","aria-label":"",children:P.jsxs("div",{"trae-inspector-start-line":"22","trae-inspector-start-column":"10","trae-inspector-end-line":"27","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\Layout.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"flex items-center gap-2",children:[P.jsx(WR,{className:"w-5 h-5"}),P.jsx("span",{"trae-inspector-start-line":"24","trae-inspector-start-column":"12","trae-inspector-end-line":"26","trae-inspector-end-column":"19","trae-inspector-file-path":"src\\\\components\\\\Layout.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E8%BF%94%E5%9B%9E%E9%A6%96%E9%A1%B5%22%2C%22textStartLine%22%3A%2224%22%2C%22textStartColumn%22%3A%22141%22%2C%22textEndLine%22%3A%2226%22%2C%22textEndColumn%22%3A%2212%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"max-w-0 overflow-hidden group-hover:max-w-xs transition-all duration-300 whitespace-nowrap font-medium text-sm",children:""})]})}),r]})};/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Ru="158",ru={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},iu={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Iw=0,fy=1,Nw=2,_D=3,Fw=0,Tg=1,rp=2,So=3,Yo=0,Vi=1,Vs=2,CD=2,Xa=0,yu=1,py=2,my=3,gy=4,kw=5,Vl=100,Ow=101,Uw=102,vy=103,yy=104,Hw=200,zw=201,Gw=202,jw=203,pg=204,mg=205,Vw=206,Ww=207,Jw=208,Xw=209,Kw=210,qw=211,Yw=212,$w=213,Qw=214,Zw=0,e1=1,t1=2,yp=3,n1=4,r1=5,i1=6,s1=7,Hp=0,o1=1,a1=2,Jo=0,l1=1,c1=2,u1=3,mA=4,d1=5,Ay="attached",h1="detached",Rg=300,$o=301,Yl=302,Ch=303,Ap=304,Lh=306,$l=1e3,gi=1001,wh=1002,or=1003,Ep=1004,wD=1004,Ah=1005,SD=1005,Jn=1006,Dg=1007,BD=1007,Qo=1008,bD=1008,Xo=1009,f1=1010,p1=1011,Pg=1012,gA=1013,Va=1014,bi=1015,Mi=1016,vA=1017,yA=1018,Jl=1020,m1=1021,ji=1023,g1=1024,v1=1025,Xl=1026,_u=1027,AA=1028,EA=1029,y1=1030,xA=1031,_A=1033,tg=33776,ng=33777,rg=33778,ig=33779,Ey=35840,xy=35841,_y=35842,Cy=35843,A1=36196,wy=37492,Sy=37496,By=37808,by=37809,My=37810,Ty=37811,Ry=37812,Dy=37813,Py=37814,Ly=37815,Iy=37816,Ny=37817,Fy=37818,ky=37819,Oy=37820,Uy=37821,sg=36492,Hy=36494,zy=36495,E1=36283,Gy=36284,jy=36285,Vy=36286,x1=2200,_1=2201,C1=2202,Sh=2300,Cu=2301,og=2302,du=2400,hu=2401,xp=2402,Lg=2500,CA=2501,w1=0,wA=1,gg=2,SA=3e3,Kl=3001,S1=3200,B1=3201,nc=0,b1=1,Cs="",Xr="srgb",Zo="srgb-linear",Ig="display-p3",zp="display-p3-linear",_p="linear",$n="srgb",Cp="rec709",wp="p3",MD=0,su=7680,TD=7681,RD=7682,DD=7683,PD=34055,LD=34056,ID=5386,ND=512,FD=513,kD=514,OD=515,UD=516,HD=517,zD=518,Wy=519,M1=512,T1=513,R1=514,D1=515,P1=516,L1=517,I1=518,N1=519,Sp=35044,GD=35048,jD=35040,VD=35045,WD=35049,JD=35041,XD=35046,KD=35050,qD=35042,YD="100",Jy="300 es",vg=1035,Vo=2e3,Bp=2001;let Za=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}};const Si=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Fx=1234567;const Au=Math.PI/180,Bh=180/Math.PI;function Bs(){const r=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Si[r&255]+Si[r>>8&255]+Si[r>>16&255]+Si[r>>24&255]+"-"+Si[e&255]+Si[e>>8&255]+"-"+Si[e>>16&15|64]+Si[e>>24&255]+"-"+Si[t&63|128]+Si[t>>8&255]+"-"+Si[t>>16&255]+Si[t>>24&255]+Si[n&255]+Si[n>>8&255]+Si[n>>16&255]+Si[n>>24&255]).toLowerCase()}function yr(r,e,t){return Math.max(e,Math.min(t,r))}function BA(r,e){return(r%e+e)%e}function $D(r,e,t,n,i){return n+(r-e)*(i-n)/(t-e)}function QD(r,e,t){return r!==e?(t-r)/(e-r):0}function ip(r,e,t){return(1-t)*r+t*e}function ZD(r,e,t,n){return ip(r,e,1-Math.exp(-t*n))}function e8(r,e=1){return e-Math.abs(BA(r,e*2)-e)}function t8(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*(3-2*r))}function n8(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*r*(r*(r*6-15)+10))}function r8(r,e){return r+Math.floor(Math.random()*(e-r+1))}function i8(r,e){return r+Math.random()*(e-r)}function s8(r){return r*(.5-Math.random())}function o8(r){r!==void 0&&(Fx=r);let e=Fx+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function a8(r){return r*Au}function l8(r){return r*Bh}function Xy(r){return(r&r-1)===0&&r!==0}function F1(r){return Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))}function yg(r){return Math.pow(2,Math.floor(Math.log(r)/Math.LN2))}function c8(r,e,t,n,i){const s=Math.cos,o=Math.sin,l=s(t/2),u=o(t/2),h=s((e+n)/2),p=o((e+n)/2),m=s((e-n)/2),v=o((e-n)/2),y=s((n-e)/2),E=o((n-e)/2);switch(i){case"XYX":r.set(l*p,u*m,u*v,l*h);break;case"YZY":r.set(u*v,l*p,u*m,l*h);break;case"ZXZ":r.set(u*m,u*v,l*p,l*h);break;case"XZX":r.set(l*p,u*E,u*y,l*h);break;case"YXY":r.set(u*y,l*p,u*E,l*h);break;case"ZYZ":r.set(u*E,u*y,l*p,l*h);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function os(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return r/4294967295;case Uint16Array:return r/65535;case Uint8Array:return r/255;case Int32Array:return Math.max(r/2147483647,-1);case Int16Array:return Math.max(r/32767,-1);case Int8Array:return Math.max(r/127,-1);default:throw new Error("Invalid component type.")}}function fn(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return Math.round(r*4294967295);case Uint16Array:return Math.round(r*65535);case Uint8Array:return Math.round(r*255);case Int32Array:return Math.round(r*2147483647);case Int16Array:return Math.round(r*32767);case Int8Array:return Math.round(r*127);default:throw new Error("Invalid component type.")}}const Wo={DEG2RAD:Au,RAD2DEG:Bh,generateUUID:Bs,clamp:yr,euclideanModulo:BA,mapLinear:$D,inverseLerp:QD,lerp:ip,damp:ZD,pingpong:e8,smoothstep:t8,smootherstep:n8,randInt:r8,randFloat:i8,randFloatSpread:s8,seededRandom:o8,degToRad:a8,radToDeg:l8,isPowerOfTwo:Xy,ceilPowerOfTwo:F1,floorPowerOfTwo:yg,setQuaternionFromProperEuler:c8,normalize:fn,denormalize:os};class Ue{constructor(e=0,t=0){Ue.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(yr(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*n-o*i+e.x,this.y=s*i+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class mn{constructor(e,t,n,i,s,o,l,u,h){mn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,i,s,o,l,u,h)}set(e,t,n,i,s,o,l,u,h){const p=this.elements;return p[0]=e,p[1]=i,p[2]=l,p[3]=t,p[4]=s,p[5]=u,p[6]=n,p[7]=o,p[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,s=this.elements,o=n[0],l=n[3],u=n[6],h=n[1],p=n[4],m=n[7],v=n[2],y=n[5],E=n[8],w=i[0],C=i[3],x=i[6],M=i[1],S=i[4],R=i[7],N=i[2],I=i[5],O=i[8];return s[0]=o*w+l*M+u*N,s[3]=o*C+l*S+u*I,s[6]=o*x+l*R+u*O,s[1]=h*w+p*M+m*N,s[4]=h*C+p*S+m*I,s[7]=h*x+p*R+m*O,s[2]=v*w+y*M+E*N,s[5]=v*C+y*S+E*I,s[8]=v*x+y*R+E*O,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],o=e[4],l=e[5],u=e[6],h=e[7],p=e[8];return t*o*p-t*l*h-n*s*p+n*l*u+i*s*h-i*o*u}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],o=e[4],l=e[5],u=e[6],h=e[7],p=e[8],m=p*o-l*h,v=l*u-p*s,y=h*s-o*u,E=t*m+n*v+i*y;if(E===0)return this.set(0,0,0,0,0,0,0,0,0);const w=1/E;return e[0]=m*w,e[1]=(i*h-p*n)*w,e[2]=(l*n-i*o)*w,e[3]=v*w,e[4]=(p*t-i*u)*w,e[5]=(i*s-l*t)*w,e[6]=y*w,e[7]=(n*u-h*t)*w,e[8]=(o*t-n*s)*w,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,s,o,l){const u=Math.cos(s),h=Math.sin(s);return this.set(n*u,n*h,-n*(u*o+h*l)+o+e,-i*h,i*u,-i*(-h*o+u*l)+l+t,0,0,1),this}scale(e,t){return this.premultiply(Y0.makeScale(e,t)),this}rotate(e){return this.premultiply(Y0.makeRotation(-e)),this}translate(e,t){return this.premultiply(Y0.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Y0=new mn;function k1(r){for(let e=r.length-1;e>=0;--e)if(r[e]>=65535)return!0;return!1}const u8={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function ph(r,e){return new u8[r](e)}function bp(r){return document.createElementNS("http://www.w3.org/1999/xhtml",r)}function O1(){const r=bp("canvas");return r.style.display="block",r}const kx={};function sp(r){r in kx||(kx[r]=!0,console.warn(r))}const Ox=new mn().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),Ux=new mn().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),n2={[Zo]:{transfer:_p,primaries:Cp,toReference:r=>r,fromReference:r=>r},[Xr]:{transfer:$n,primaries:Cp,toReference:r=>r.convertSRGBToLinear(),fromReference:r=>r.convertLinearToSRGB()},[zp]:{transfer:_p,primaries:wp,toReference:r=>r.applyMatrix3(Ux),fromReference:r=>r.applyMatrix3(Ox)},[Ig]:{transfer:$n,primaries:wp,toReference:r=>r.convertSRGBToLinear().applyMatrix3(Ux),fromReference:r=>r.applyMatrix3(Ox).convertLinearToSRGB()}},d8=new Set([Zo,zp]),On={enabled:!0,_workingColorSpace:Zo,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(r){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!r},get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(r){if(!d8.has(r))throw new Error(`Unsupported working color space, "${r}".`);this._workingColorSpace=r},convert:function(r,e,t){if(this.enabled===!1||e===t||!e||!t)return r;const n=n2[e].toReference,i=n2[t].fromReference;return i(n(r))},fromWorkingColorSpace:function(r,e){return this.convert(r,this._workingColorSpace,e)},toWorkingColorSpace:function(r,e){return this.convert(r,e,this._workingColorSpace)},getPrimaries:function(r){return n2[r].primaries},getTransfer:function(r){return r===Cs?_p:n2[r].transfer}};function Eh(r){return r<.04045?r*.0773993808:Math.pow(r*.9478672986+.0521327014,2.4)}function $0(r){return r<.0031308?r*12.92:1.055*Math.pow(r,.41666)-.055}let Od;class bA{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Od===void 0&&(Od=bp("canvas")),Od.width=e.width,Od.height=e.height;const n=Od.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Od}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=bp("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=Eh(s[o]/255)*255;return n.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(Eh(t[n]/255)*255):t[n]=Eh(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let h8=0;class fu{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:h8++}),this.uuid=Bs(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,l=i.length;o<l;o++)i[o].isDataTexture?s.push(Q0(i[o].image)):s.push(Q0(i[o]))}else s=Q0(i);n.url=s}return t||(e.images[this.uuid]=n),n}}function Q0(r){return typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap?bA.getDataURL(r):r.data?{data:Array.from(r.data),width:r.width,height:r.height,type:r.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let f8=0;class ar extends Za{constructor(e=ar.DEFAULT_IMAGE,t=ar.DEFAULT_MAPPING,n=gi,i=gi,s=Jn,o=Qo,l=ji,u=Xo,h=ar.DEFAULT_ANISOTROPY,p=Cs){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:f8++}),this.uuid=Bs(),this.name="",this.source=new fu(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=h,this.format=l,this.internalFormat=null,this.type=u,this.offset=new Ue(0,0),this.repeat=new Ue(1,1),this.center=new Ue(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new mn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof p=="string"?this.colorSpace=p:(sp("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=p===Kl?Xr:Cs),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Rg)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case $l:e.x=e.x-Math.floor(e.x);break;case gi:e.x=e.x<0?0:1;break;case wh:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case $l:e.y=e.y-Math.floor(e.y);break;case gi:e.y=e.y<0?0:1;break;case wh:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return sp("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Xr?Kl:SA}set encoding(e){sp("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===Kl?Xr:Cs}}ar.DEFAULT_IMAGE=null;ar.DEFAULT_MAPPING=Rg;ar.DEFAULT_ANISOTROPY=1;class Un{constructor(e=0,t=0,n=0,i=1){Un.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*n+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*n+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*n+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,s;const u=e.elements,h=u[0],p=u[4],m=u[8],v=u[1],y=u[5],E=u[9],w=u[2],C=u[6],x=u[10];if(Math.abs(p-v)<.01&&Math.abs(m-w)<.01&&Math.abs(E-C)<.01){if(Math.abs(p+v)<.1&&Math.abs(m+w)<.1&&Math.abs(E+C)<.1&&Math.abs(h+y+x-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const S=(h+1)/2,R=(y+1)/2,N=(x+1)/2,I=(p+v)/4,O=(m+w)/4,j=(E+C)/4;return S>R&&S>N?S<.01?(n=0,i=.707106781,s=.707106781):(n=Math.sqrt(S),i=I/n,s=O/n):R>N?R<.01?(n=.707106781,i=0,s=.707106781):(i=Math.sqrt(R),n=I/i,s=j/i):N<.01?(n=.707106781,i=.707106781,s=0):(s=Math.sqrt(N),n=O/s,i=j/s),this.set(n,i,s,t),this}let M=Math.sqrt((C-E)*(C-E)+(m-w)*(m-w)+(v-p)*(v-p));return Math.abs(M)<.001&&(M=1),this.x=(C-E)/M,this.y=(m-w)/M,this.z=(v-p)/M,this.w=Math.acos((h+y+x-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class U1 extends Za{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Un(0,0,e,t),this.scissorTest=!1,this.viewport=new Un(0,0,e,t);const i={width:e,height:t,depth:1};n.encoding!==void 0&&(sp("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===Kl?Xr:Cs),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Jn,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},n),this.texture=new ar(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=n.generateMipmaps,this.texture.internalFormat=n.internalFormat,this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}setSize(e,t,n=1){(this.width!==e||this.height!==t||this.depth!==n)&&(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new fu(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Wi extends U1{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class Ng extends ar{constructor(e=null,t=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=or,this.minFilter=or,this.wrapR=gi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class p8 extends Wi{constructor(e=1,t=1,n=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new Ng(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class MA extends ar{constructor(e=null,t=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=or,this.minFilter=or,this.wrapR=gi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class m8 extends Wi{constructor(e=1,t=1,n=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new MA(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class g8 extends Wi{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<n;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let i=0,s=this.texture.length;i<s;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class ni{constructor(e=0,t=0,n=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,s,o,l){let u=n[i+0],h=n[i+1],p=n[i+2],m=n[i+3];const v=s[o+0],y=s[o+1],E=s[o+2],w=s[o+3];if(l===0){e[t+0]=u,e[t+1]=h,e[t+2]=p,e[t+3]=m;return}if(l===1){e[t+0]=v,e[t+1]=y,e[t+2]=E,e[t+3]=w;return}if(m!==w||u!==v||h!==y||p!==E){let C=1-l;const x=u*v+h*y+p*E+m*w,M=x>=0?1:-1,S=1-x*x;if(S>Number.EPSILON){const N=Math.sqrt(S),I=Math.atan2(N,x*M);C=Math.sin(C*I)/N,l=Math.sin(l*I)/N}const R=l*M;if(u=u*C+v*R,h=h*C+y*R,p=p*C+E*R,m=m*C+w*R,C===1-l){const N=1/Math.sqrt(u*u+h*h+p*p+m*m);u*=N,h*=N,p*=N,m*=N}}e[t]=u,e[t+1]=h,e[t+2]=p,e[t+3]=m}static multiplyQuaternionsFlat(e,t,n,i,s,o){const l=n[i],u=n[i+1],h=n[i+2],p=n[i+3],m=s[o],v=s[o+1],y=s[o+2],E=s[o+3];return e[t]=l*E+p*m+u*y-h*v,e[t+1]=u*E+p*v+h*m-l*y,e[t+2]=h*E+p*y+l*v-u*m,e[t+3]=p*E-l*m-u*v-h*y,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const n=e._x,i=e._y,s=e._z,o=e._order,l=Math.cos,u=Math.sin,h=l(n/2),p=l(i/2),m=l(s/2),v=u(n/2),y=u(i/2),E=u(s/2);switch(o){case"XYZ":this._x=v*p*m+h*y*E,this._y=h*y*m-v*p*E,this._z=h*p*E+v*y*m,this._w=h*p*m-v*y*E;break;case"YXZ":this._x=v*p*m+h*y*E,this._y=h*y*m-v*p*E,this._z=h*p*E-v*y*m,this._w=h*p*m+v*y*E;break;case"ZXY":this._x=v*p*m-h*y*E,this._y=h*y*m+v*p*E,this._z=h*p*E+v*y*m,this._w=h*p*m-v*y*E;break;case"ZYX":this._x=v*p*m-h*y*E,this._y=h*y*m+v*p*E,this._z=h*p*E-v*y*m,this._w=h*p*m+v*y*E;break;case"YZX":this._x=v*p*m+h*y*E,this._y=h*y*m+v*p*E,this._z=h*p*E-v*y*m,this._w=h*p*m-v*y*E;break;case"XZY":this._x=v*p*m-h*y*E,this._y=h*y*m-v*p*E,this._z=h*p*E+v*y*m,this._w=h*p*m+v*y*E;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],s=t[8],o=t[1],l=t[5],u=t[9],h=t[2],p=t[6],m=t[10],v=n+l+m;if(v>0){const y=.5/Math.sqrt(v+1);this._w=.25/y,this._x=(p-u)*y,this._y=(s-h)*y,this._z=(o-i)*y}else if(n>l&&n>m){const y=2*Math.sqrt(1+n-l-m);this._w=(p-u)/y,this._x=.25*y,this._y=(i+o)/y,this._z=(s+h)/y}else if(l>m){const y=2*Math.sqrt(1+l-n-m);this._w=(s-h)/y,this._x=(i+o)/y,this._y=.25*y,this._z=(u+p)/y}else{const y=2*Math.sqrt(1+m-n-l);this._w=(o-i)/y,this._x=(s+h)/y,this._y=(u+p)/y,this._z=.25*y}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(yr(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,s=e._z,o=e._w,l=t._x,u=t._y,h=t._z,p=t._w;return this._x=n*p+o*l+i*h-s*u,this._y=i*p+o*u+s*l-n*h,this._z=s*p+o*h+n*u-i*l,this._w=o*p-n*l-i*u-s*h,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,i=this._y,s=this._z,o=this._w;let l=o*e._w+n*e._x+i*e._y+s*e._z;if(l<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,l=-l):this.copy(e),l>=1)return this._w=o,this._x=n,this._y=i,this._z=s,this;const u=1-l*l;if(u<=Number.EPSILON){const y=1-t;return this._w=y*o+t*this._w,this._x=y*n+t*this._x,this._y=y*i+t*this._y,this._z=y*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const h=Math.sqrt(u),p=Math.atan2(h,l),m=Math.sin((1-t)*p)/h,v=Math.sin(t*p)/h;return this._w=o*m+this._w*v,this._x=n*m+this._x*v,this._y=i*m+this._y*v,this._z=s*m+this._z*v,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(i),n*Math.sin(s),n*Math.cos(s),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class X{constructor(e=0,t=0,n=0){X.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Hx.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Hx.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*i,this.y=s[1]*t+s[4]*n+s[7]*i,this.z=s[2]*t+s[5]*n+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*n+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*n+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*n+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,s=e.x,o=e.y,l=e.z,u=e.w,h=2*(o*i-l*n),p=2*(l*t-s*i),m=2*(s*n-o*t);return this.x=t+u*h+o*m-l*p,this.y=n+u*p+l*h-s*m,this.z=i+u*m+s*p-o*h,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*i,this.y=s[1]*t+s[5]*n+s[9]*i,this.z=s[2]*t+s[6]*n+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,s=e.z,o=t.x,l=t.y,u=t.z;return this.x=i*u-s*l,this.y=s*o-n*u,this.z=n*l-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return Z0.copy(this).projectOnVector(e),this.sub(Z0)}reflect(e){return this.sub(Z0.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(yr(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Z0=new X,Hx=new ni;class Ms{constructor(e=new X(1/0,1/0,1/0),t=new X(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(yo.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(yo.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=yo.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const s=n.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,l=s.count;o<l;o++)e.isMesh===!0?e.getVertexPosition(o,yo):yo.fromBufferAttribute(s,o),yo.applyMatrix4(e.matrixWorld),this.expandByPoint(yo);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),r2.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),r2.copy(n.boundingBox)),r2.applyMatrix4(e.matrixWorld),this.union(r2)}const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,yo),yo.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Of),i2.subVectors(this.max,Of),Ud.subVectors(e.a,Of),Hd.subVectors(e.b,Of),zd.subVectors(e.c,Of),Ll.subVectors(Hd,Ud),Il.subVectors(zd,Hd),Jc.subVectors(Ud,zd);let t=[0,-Ll.z,Ll.y,0,-Il.z,Il.y,0,-Jc.z,Jc.y,Ll.z,0,-Ll.x,Il.z,0,-Il.x,Jc.z,0,-Jc.x,-Ll.y,Ll.x,0,-Il.y,Il.x,0,-Jc.y,Jc.x,0];return!ev(t,Ud,Hd,zd,i2)||(t=[1,0,0,0,1,0,0,0,1],!ev(t,Ud,Hd,zd,i2))?!1:(s2.crossVectors(Ll,Il),t=[s2.x,s2.y,s2.z],ev(t,Ud,Hd,zd,i2))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,yo).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(yo).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ia[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ia[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ia[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ia[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ia[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ia[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ia[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ia[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ia),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Ia=[new X,new X,new X,new X,new X,new X,new X,new X],yo=new X,r2=new Ms,Ud=new X,Hd=new X,zd=new X,Ll=new X,Il=new X,Jc=new X,Of=new X,i2=new X,s2=new X,Xc=new X;function ev(r,e,t,n,i){for(let s=0,o=r.length-3;s<=o;s+=3){Xc.fromArray(r,s);const l=i.x*Math.abs(Xc.x)+i.y*Math.abs(Xc.y)+i.z*Math.abs(Xc.z),u=e.dot(Xc),h=t.dot(Xc),p=n.dot(Xc);if(Math.max(-Math.max(u,h,p),Math.min(u,h,p))>l)return!1}return!0}const v8=new Ms,Uf=new X,tv=new X;class Ts{constructor(e=new X,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):v8.setFromPoints(e).getCenter(n);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Uf.subVectors(e,this.center);const t=Uf.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),i=(n-this.radius)*.5;this.center.addScaledVector(Uf,i/n),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(tv.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Uf.copy(e.center).add(tv)),this.expandByPoint(Uf.copy(e.center).sub(tv))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Na=new X,nv=new X,o2=new X,Nl=new X,rv=new X,a2=new X,iv=new X;class Du{constructor(e=new X,t=new X(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Na)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Na.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Na.copy(this.origin).addScaledVector(this.direction,t),Na.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){nv.copy(e).add(t).multiplyScalar(.5),o2.copy(t).sub(e).normalize(),Nl.copy(this.origin).sub(nv);const s=e.distanceTo(t)*.5,o=-this.direction.dot(o2),l=Nl.dot(this.direction),u=-Nl.dot(o2),h=Nl.lengthSq(),p=Math.abs(1-o*o);let m,v,y,E;if(p>0)if(m=o*u-l,v=o*l-u,E=s*p,m>=0)if(v>=-E)if(v<=E){const w=1/p;m*=w,v*=w,y=m*(m+o*v+2*l)+v*(o*m+v+2*u)+h}else v=s,m=Math.max(0,-(o*v+l)),y=-m*m+v*(v+2*u)+h;else v=-s,m=Math.max(0,-(o*v+l)),y=-m*m+v*(v+2*u)+h;else v<=-E?(m=Math.max(0,-(-o*s+l)),v=m>0?-s:Math.min(Math.max(-s,-u),s),y=-m*m+v*(v+2*u)+h):v<=E?(m=0,v=Math.min(Math.max(-s,-u),s),y=v*(v+2*u)+h):(m=Math.max(0,-(o*s+l)),v=m>0?s:Math.min(Math.max(-s,-u),s),y=-m*m+v*(v+2*u)+h);else v=o>0?-s:s,m=Math.max(0,-(o*v+l)),y=-m*m+v*(v+2*u)+h;return n&&n.copy(this.origin).addScaledVector(this.direction,m),i&&i.copy(nv).addScaledVector(o2,v),y}intersectSphere(e,t){Na.subVectors(e.center,this.origin);const n=Na.dot(this.direction),i=Na.dot(Na)-n*n,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),l=n-o,u=n+o;return u<0?null:l<0?this.at(u,t):this.at(l,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,s,o,l,u;const h=1/this.direction.x,p=1/this.direction.y,m=1/this.direction.z,v=this.origin;return h>=0?(n=(e.min.x-v.x)*h,i=(e.max.x-v.x)*h):(n=(e.max.x-v.x)*h,i=(e.min.x-v.x)*h),p>=0?(s=(e.min.y-v.y)*p,o=(e.max.y-v.y)*p):(s=(e.max.y-v.y)*p,o=(e.min.y-v.y)*p),n>o||s>i||((s>n||isNaN(n))&&(n=s),(o<i||isNaN(i))&&(i=o),m>=0?(l=(e.min.z-v.z)*m,u=(e.max.z-v.z)*m):(l=(e.max.z-v.z)*m,u=(e.min.z-v.z)*m),n>u||l>i)||((l>n||n!==n)&&(n=l),(u<i||i!==i)&&(i=u),i<0)?null:this.at(n>=0?n:i,t)}intersectsBox(e){return this.intersectBox(e,Na)!==null}intersectTriangle(e,t,n,i,s){rv.subVectors(t,e),a2.subVectors(n,e),iv.crossVectors(rv,a2);let o=this.direction.dot(iv),l;if(o>0){if(i)return null;l=1}else if(o<0)l=-1,o=-o;else return null;Nl.subVectors(this.origin,e);const u=l*this.direction.dot(a2.crossVectors(Nl,a2));if(u<0)return null;const h=l*this.direction.dot(rv.cross(Nl));if(h<0||u+h>o)return null;const p=-l*Nl.dot(iv);return p<0?null:this.at(p/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class $t{constructor(e,t,n,i,s,o,l,u,h,p,m,v,y,E,w,C){$t.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,i,s,o,l,u,h,p,m,v,y,E,w,C)}set(e,t,n,i,s,o,l,u,h,p,m,v,y,E,w,C){const x=this.elements;return x[0]=e,x[4]=t,x[8]=n,x[12]=i,x[1]=s,x[5]=o,x[9]=l,x[13]=u,x[2]=h,x[6]=p,x[10]=m,x[14]=v,x[3]=y,x[7]=E,x[11]=w,x[15]=C,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new $t().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/Gd.setFromMatrixColumn(e,0).length(),s=1/Gd.setFromMatrixColumn(e,1).length(),o=1/Gd.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,i=e.y,s=e.z,o=Math.cos(n),l=Math.sin(n),u=Math.cos(i),h=Math.sin(i),p=Math.cos(s),m=Math.sin(s);if(e.order==="XYZ"){const v=o*p,y=o*m,E=l*p,w=l*m;t[0]=u*p,t[4]=-u*m,t[8]=h,t[1]=y+E*h,t[5]=v-w*h,t[9]=-l*u,t[2]=w-v*h,t[6]=E+y*h,t[10]=o*u}else if(e.order==="YXZ"){const v=u*p,y=u*m,E=h*p,w=h*m;t[0]=v+w*l,t[4]=E*l-y,t[8]=o*h,t[1]=o*m,t[5]=o*p,t[9]=-l,t[2]=y*l-E,t[6]=w+v*l,t[10]=o*u}else if(e.order==="ZXY"){const v=u*p,y=u*m,E=h*p,w=h*m;t[0]=v-w*l,t[4]=-o*m,t[8]=E+y*l,t[1]=y+E*l,t[5]=o*p,t[9]=w-v*l,t[2]=-o*h,t[6]=l,t[10]=o*u}else if(e.order==="ZYX"){const v=o*p,y=o*m,E=l*p,w=l*m;t[0]=u*p,t[4]=E*h-y,t[8]=v*h+w,t[1]=u*m,t[5]=w*h+v,t[9]=y*h-E,t[2]=-h,t[6]=l*u,t[10]=o*u}else if(e.order==="YZX"){const v=o*u,y=o*h,E=l*u,w=l*h;t[0]=u*p,t[4]=w-v*m,t[8]=E*m+y,t[1]=m,t[5]=o*p,t[9]=-l*p,t[2]=-h*p,t[6]=y*m+E,t[10]=v-w*m}else if(e.order==="XZY"){const v=o*u,y=o*h,E=l*u,w=l*h;t[0]=u*p,t[4]=-m,t[8]=h*p,t[1]=v*m+w,t[5]=o*p,t[9]=y*m-E,t[2]=E*m-y,t[6]=l*p,t[10]=w*m+v}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(y8,e,A8)}lookAt(e,t,n){const i=this.elements;return As.subVectors(e,t),As.lengthSq()===0&&(As.z=1),As.normalize(),Fl.crossVectors(n,As),Fl.lengthSq()===0&&(Math.abs(n.z)===1?As.x+=1e-4:As.z+=1e-4,As.normalize(),Fl.crossVectors(n,As)),Fl.normalize(),l2.crossVectors(As,Fl),i[0]=Fl.x,i[4]=l2.x,i[8]=As.x,i[1]=Fl.y,i[5]=l2.y,i[9]=As.y,i[2]=Fl.z,i[6]=l2.z,i[10]=As.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,s=this.elements,o=n[0],l=n[4],u=n[8],h=n[12],p=n[1],m=n[5],v=n[9],y=n[13],E=n[2],w=n[6],C=n[10],x=n[14],M=n[3],S=n[7],R=n[11],N=n[15],I=i[0],O=i[4],j=i[8],F=i[12],H=i[1],ee=i[5],de=i[9],ve=i[13],Y=i[2],me=i[6],pe=i[10],Ae=i[14],te=i[3],ce=i[7],ne=i[11],z=i[15];return s[0]=o*I+l*H+u*Y+h*te,s[4]=o*O+l*ee+u*me+h*ce,s[8]=o*j+l*de+u*pe+h*ne,s[12]=o*F+l*ve+u*Ae+h*z,s[1]=p*I+m*H+v*Y+y*te,s[5]=p*O+m*ee+v*me+y*ce,s[9]=p*j+m*de+v*pe+y*ne,s[13]=p*F+m*ve+v*Ae+y*z,s[2]=E*I+w*H+C*Y+x*te,s[6]=E*O+w*ee+C*me+x*ce,s[10]=E*j+w*de+C*pe+x*ne,s[14]=E*F+w*ve+C*Ae+x*z,s[3]=M*I+S*H+R*Y+N*te,s[7]=M*O+S*ee+R*me+N*ce,s[11]=M*j+S*de+R*pe+N*ne,s[15]=M*F+S*ve+R*Ae+N*z,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],s=e[12],o=e[1],l=e[5],u=e[9],h=e[13],p=e[2],m=e[6],v=e[10],y=e[14],E=e[3],w=e[7],C=e[11],x=e[15];return E*(+s*u*m-i*h*m-s*l*v+n*h*v+i*l*y-n*u*y)+w*(+t*u*y-t*h*v+s*o*v-i*o*y+i*h*p-s*u*p)+C*(+t*h*m-t*l*y-s*o*m+n*o*y+s*l*p-n*h*p)+x*(-i*l*p-t*u*m+t*l*v+i*o*m-n*o*v+n*u*p)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],s=e[3],o=e[4],l=e[5],u=e[6],h=e[7],p=e[8],m=e[9],v=e[10],y=e[11],E=e[12],w=e[13],C=e[14],x=e[15],M=m*C*h-w*v*h+w*u*y-l*C*y-m*u*x+l*v*x,S=E*v*h-p*C*h-E*u*y+o*C*y+p*u*x-o*v*x,R=p*w*h-E*m*h+E*l*y-o*w*y-p*l*x+o*m*x,N=E*m*u-p*w*u-E*l*v+o*w*v+p*l*C-o*m*C,I=t*M+n*S+i*R+s*N;if(I===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const O=1/I;return e[0]=M*O,e[1]=(w*v*s-m*C*s-w*i*y+n*C*y+m*i*x-n*v*x)*O,e[2]=(l*C*s-w*u*s+w*i*h-n*C*h-l*i*x+n*u*x)*O,e[3]=(m*u*s-l*v*s-m*i*h+n*v*h+l*i*y-n*u*y)*O,e[4]=S*O,e[5]=(p*C*s-E*v*s+E*i*y-t*C*y-p*i*x+t*v*x)*O,e[6]=(E*u*s-o*C*s-E*i*h+t*C*h+o*i*x-t*u*x)*O,e[7]=(o*v*s-p*u*s+p*i*h-t*v*h-o*i*y+t*u*y)*O,e[8]=R*O,e[9]=(E*m*s-p*w*s-E*n*y+t*w*y+p*n*x-t*m*x)*O,e[10]=(o*w*s-E*l*s+E*n*h-t*w*h-o*n*x+t*l*x)*O,e[11]=(p*l*s-o*m*s-p*n*h+t*m*h+o*n*y-t*l*y)*O,e[12]=N*O,e[13]=(p*w*i-E*m*i+E*n*v-t*w*v-p*n*C+t*m*C)*O,e[14]=(E*l*i-o*w*i-E*n*u+t*w*u+o*n*C-t*l*C)*O,e[15]=(o*m*i-p*l*i+p*n*u-t*m*u-o*n*v+t*l*v)*O,this}scale(e){const t=this.elements,n=e.x,i=e.y,s=e.z;return t[0]*=n,t[4]*=i,t[8]*=s,t[1]*=n,t[5]*=i,t[9]*=s,t[2]*=n,t[6]*=i,t[10]*=s,t[3]*=n,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),s=1-n,o=e.x,l=e.y,u=e.z,h=s*o,p=s*l;return this.set(h*o+n,h*l-i*u,h*u+i*l,0,h*l+i*u,p*l+n,p*u-i*o,0,h*u-i*l,p*u+i*o,s*u*u+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,s,o){return this.set(1,n,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,s=t._x,o=t._y,l=t._z,u=t._w,h=s+s,p=o+o,m=l+l,v=s*h,y=s*p,E=s*m,w=o*p,C=o*m,x=l*m,M=u*h,S=u*p,R=u*m,N=n.x,I=n.y,O=n.z;return i[0]=(1-(w+x))*N,i[1]=(y+R)*N,i[2]=(E-S)*N,i[3]=0,i[4]=(y-R)*I,i[5]=(1-(v+x))*I,i[6]=(C+M)*I,i[7]=0,i[8]=(E+S)*O,i[9]=(C-M)*O,i[10]=(1-(v+w))*O,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let s=Gd.set(i[0],i[1],i[2]).length();const o=Gd.set(i[4],i[5],i[6]).length(),l=Gd.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],Ao.copy(this);const h=1/s,p=1/o,m=1/l;return Ao.elements[0]*=h,Ao.elements[1]*=h,Ao.elements[2]*=h,Ao.elements[4]*=p,Ao.elements[5]*=p,Ao.elements[6]*=p,Ao.elements[8]*=m,Ao.elements[9]*=m,Ao.elements[10]*=m,t.setFromRotationMatrix(Ao),n.x=s,n.y=o,n.z=l,this}makePerspective(e,t,n,i,s,o,l=Vo){const u=this.elements,h=2*s/(t-e),p=2*s/(n-i),m=(t+e)/(t-e),v=(n+i)/(n-i);let y,E;if(l===Vo)y=-(o+s)/(o-s),E=-2*o*s/(o-s);else if(l===Bp)y=-o/(o-s),E=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+l);return u[0]=h,u[4]=0,u[8]=m,u[12]=0,u[1]=0,u[5]=p,u[9]=v,u[13]=0,u[2]=0,u[6]=0,u[10]=y,u[14]=E,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(e,t,n,i,s,o,l=Vo){const u=this.elements,h=1/(t-e),p=1/(n-i),m=1/(o-s),v=(t+e)*h,y=(n+i)*p;let E,w;if(l===Vo)E=(o+s)*m,w=-2*m;else if(l===Bp)E=s*m,w=-1*m;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+l);return u[0]=2*h,u[4]=0,u[8]=0,u[12]=-v,u[1]=0,u[5]=2*p,u[9]=0,u[13]=-y,u[2]=0,u[6]=0,u[10]=w,u[14]=-E,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Gd=new X,Ao=new $t,y8=new X(0,0,0),A8=new X(1,1,1),Fl=new X,l2=new X,As=new X,zx=new $t,Gx=new ni;class Gp{constructor(e=0,t=0,n=0,i=Gp.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,i=this._order){return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const i=e.elements,s=i[0],o=i[4],l=i[8],u=i[1],h=i[5],p=i[9],m=i[2],v=i[6],y=i[10];switch(t){case"XYZ":this._y=Math.asin(yr(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-p,y),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(v,h),this._z=0);break;case"YXZ":this._x=Math.asin(-yr(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(l,y),this._z=Math.atan2(u,h)):(this._y=Math.atan2(-m,s),this._z=0);break;case"ZXY":this._x=Math.asin(yr(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(-m,y),this._z=Math.atan2(-o,h)):(this._y=0,this._z=Math.atan2(u,s));break;case"ZYX":this._y=Math.asin(-yr(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(v,y),this._z=Math.atan2(u,s)):(this._x=0,this._z=Math.atan2(-o,h));break;case"YZX":this._z=Math.asin(yr(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-p,h),this._y=Math.atan2(-m,s)):(this._x=0,this._y=Math.atan2(l,y));break;case"XZY":this._z=Math.asin(-yr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(v,h),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-p,y),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return zx.makeRotationFromQuaternion(e),this.setFromRotationMatrix(zx,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Gx.setFromEuler(this),this.setFromQuaternion(Gx,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Gp.DEFAULT_ORDER="XYZ";class Eu{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let E8=0;const jx=new X,jd=new ni,Fa=new $t,c2=new X,Hf=new X,x8=new X,_8=new ni,Vx=new X(1,0,0),Wx=new X(0,1,0),Jx=new X(0,0,1),C8={type:"added"},w8={type:"removed"};class bn extends Za{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:E8++}),this.uuid=Bs(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=bn.DEFAULT_UP.clone();const e=new X,t=new Gp,n=new ni,i=new X(1,1,1);function s(){n.setFromEuler(t,!1)}function o(){t.setFromQuaternion(n,void 0,!1)}t._onChange(s),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new $t},normalMatrix:{value:new mn}}),this.matrix=new $t,this.matrixWorld=new $t,this.matrixAutoUpdate=bn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=bn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Eu,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return jd.setFromAxisAngle(e,t),this.quaternion.multiply(jd),this}rotateOnWorldAxis(e,t){return jd.setFromAxisAngle(e,t),this.quaternion.premultiply(jd),this}rotateX(e){return this.rotateOnAxis(Vx,e)}rotateY(e){return this.rotateOnAxis(Wx,e)}rotateZ(e){return this.rotateOnAxis(Jx,e)}translateOnAxis(e,t){return jx.copy(e).applyQuaternion(this.quaternion),this.position.add(jx.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Vx,e)}translateY(e){return this.translateOnAxis(Wx,e)}translateZ(e){return this.translateOnAxis(Jx,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Fa.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?c2.copy(e):c2.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),Hf.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Fa.lookAt(Hf,c2,this.up):Fa.lookAt(c2,Hf,this.up),this.quaternion.setFromRotationMatrix(Fa),i&&(Fa.extractRotation(i.matrixWorld),jd.setFromRotationMatrix(Fa),this.quaternion.premultiply(jd.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(C8)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(w8)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Fa.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Fa.multiply(e.parent.matrixWorld)),e.applyMatrix4(Fa),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const o=this.children[n].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t){let n=[];this[e]===t&&n.push(this);for(let i=0,s=this.children.length;i<s;i++){const o=this.children[i].getObjectsByProperty(e,t);o.length>0&&(n=n.concat(o))}return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Hf,e,x8),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Hf,_8,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++){const s=t[n];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.matrixWorldAutoUpdate===!0&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++){const l=i[s];l.matrixWorldAutoUpdate===!0&&l.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function s(l,u){return l[u.uuid]===void 0&&(l[u.uuid]=u.toJSON(e)),u.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const u=l.shapes;if(Array.isArray(u))for(let h=0,p=u.length;h<p;h++){const m=u[h];s(e.shapes,m)}else s(e.shapes,u)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let u=0,h=this.material.length;u<h;u++)l.push(s(e.materials,this.material[u]));i.material=l}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let l=0;l<this.children.length;l++)i.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let l=0;l<this.animations.length;l++){const u=this.animations[l];i.animations.push(s(e.animations,u))}}if(t){const l=o(e.geometries),u=o(e.materials),h=o(e.textures),p=o(e.images),m=o(e.shapes),v=o(e.skeletons),y=o(e.animations),E=o(e.nodes);l.length>0&&(n.geometries=l),u.length>0&&(n.materials=u),h.length>0&&(n.textures=h),p.length>0&&(n.images=p),m.length>0&&(n.shapes=m),v.length>0&&(n.skeletons=v),y.length>0&&(n.animations=y),E.length>0&&(n.nodes=E)}return n.object=i,n;function o(l){const u=[];for(const h in l){const p=l[h];delete p.metadata,u.push(p)}return u}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const i=e.children[n];this.add(i.clone())}return this}}bn.DEFAULT_UP=new X(0,1,0);bn.DEFAULT_MATRIX_AUTO_UPDATE=!0;bn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Eo=new X,ka=new X,sv=new X,Oa=new X,Vd=new X,Wd=new X,Xx=new X,ov=new X,av=new X,lv=new X;let u2=!1;class ss{constructor(e=new X,t=new X,n=new X){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),Eo.subVectors(e,t),i.cross(Eo);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,n,i,s){Eo.subVectors(i,t),ka.subVectors(n,t),sv.subVectors(e,t);const o=Eo.dot(Eo),l=Eo.dot(ka),u=Eo.dot(sv),h=ka.dot(ka),p=ka.dot(sv),m=o*h-l*l;if(m===0)return s.set(-2,-1,-1);const v=1/m,y=(h*u-l*p)*v,E=(o*p-l*u)*v;return s.set(1-y-E,E,y)}static containsPoint(e,t,n,i){return this.getBarycoord(e,t,n,i,Oa),Oa.x>=0&&Oa.y>=0&&Oa.x+Oa.y<=1}static getUV(e,t,n,i,s,o,l,u){return u2===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),u2=!0),this.getInterpolation(e,t,n,i,s,o,l,u)}static getInterpolation(e,t,n,i,s,o,l,u){return this.getBarycoord(e,t,n,i,Oa),u.setScalar(0),u.addScaledVector(s,Oa.x),u.addScaledVector(o,Oa.y),u.addScaledVector(l,Oa.z),u}static isFrontFacing(e,t,n,i){return Eo.subVectors(n,t),ka.subVectors(e,t),Eo.cross(ka).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Eo.subVectors(this.c,this.b),ka.subVectors(this.a,this.b),Eo.cross(ka).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ss.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return ss.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,i,s){return u2===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),u2=!0),ss.getInterpolation(e,this.a,this.b,this.c,t,n,i,s)}getInterpolation(e,t,n,i,s){return ss.getInterpolation(e,this.a,this.b,this.c,t,n,i,s)}containsPoint(e){return ss.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ss.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,i=this.b,s=this.c;let o,l;Vd.subVectors(i,n),Wd.subVectors(s,n),ov.subVectors(e,n);const u=Vd.dot(ov),h=Wd.dot(ov);if(u<=0&&h<=0)return t.copy(n);av.subVectors(e,i);const p=Vd.dot(av),m=Wd.dot(av);if(p>=0&&m<=p)return t.copy(i);const v=u*m-p*h;if(v<=0&&u>=0&&p<=0)return o=u/(u-p),t.copy(n).addScaledVector(Vd,o);lv.subVectors(e,s);const y=Vd.dot(lv),E=Wd.dot(lv);if(E>=0&&y<=E)return t.copy(s);const w=y*h-u*E;if(w<=0&&h>=0&&E<=0)return l=h/(h-E),t.copy(n).addScaledVector(Wd,l);const C=p*E-y*m;if(C<=0&&m-p>=0&&y-E>=0)return Xx.subVectors(s,i),l=(m-p)/(m-p+(y-E)),t.copy(i).addScaledVector(Xx,l);const x=1/(C+w+v);return o=w*x,l=v*x,t.copy(n).addScaledVector(Vd,o).addScaledVector(Wd,l)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const H1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},kl={h:0,s:0,l:0},d2={h:0,s:0,l:0};function cv(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*6*(2/3-t):r}class ht{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Xr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,On.toWorkingColorSpace(this,t),this}setRGB(e,t,n,i=On.workingColorSpace){return this.r=e,this.g=t,this.b=n,On.toWorkingColorSpace(this,i),this}setHSL(e,t,n,i=On.workingColorSpace){if(e=BA(e,1),t=yr(t,0,1),n=yr(n,0,1),t===0)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+t):n+t-n*t,o=2*n-s;this.r=cv(o,s,e+1/3),this.g=cv(o,s,e),this.b=cv(o,s,e-1/3)}return On.toWorkingColorSpace(this,i),this}setStyle(e,t=Xr){function n(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],l=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Xr){const n=H1[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Eh(e.r),this.g=Eh(e.g),this.b=Eh(e.b),this}copyLinearToSRGB(e){return this.r=$0(e.r),this.g=$0(e.g),this.b=$0(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Xr){return On.fromWorkingColorSpace(Bi.copy(this),e),Math.round(yr(Bi.r*255,0,255))*65536+Math.round(yr(Bi.g*255,0,255))*256+Math.round(yr(Bi.b*255,0,255))}getHexString(e=Xr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=On.workingColorSpace){On.fromWorkingColorSpace(Bi.copy(this),t);const n=Bi.r,i=Bi.g,s=Bi.b,o=Math.max(n,i,s),l=Math.min(n,i,s);let u,h;const p=(l+o)/2;if(l===o)u=0,h=0;else{const m=o-l;switch(h=p<=.5?m/(o+l):m/(2-o-l),o){case n:u=(i-s)/m+(i<s?6:0);break;case i:u=(s-n)/m+2;break;case s:u=(n-i)/m+4;break}u/=6}return e.h=u,e.s=h,e.l=p,e}getRGB(e,t=On.workingColorSpace){return On.fromWorkingColorSpace(Bi.copy(this),t),e.r=Bi.r,e.g=Bi.g,e.b=Bi.b,e}getStyle(e=Xr){On.fromWorkingColorSpace(Bi.copy(this),e);const t=Bi.r,n=Bi.g,i=Bi.b;return e!==Xr?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(i*255)})`}offsetHSL(e,t,n){return this.getHSL(kl),this.setHSL(kl.h+e,kl.s+t,kl.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(kl),e.getHSL(d2);const n=ip(kl.h,d2.h,t),i=ip(kl.s,d2.s,t),s=ip(kl.l,d2.l,t);return this.setHSL(n,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*n+s[6]*i,this.g=s[1]*t+s[4]*n+s[7]*i,this.b=s[2]*t+s[5]*n+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Bi=new ht;ht.NAMES=H1;let S8=0;class Fr extends Za{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:S8++}),this.uuid=Bs(),this.name="",this.type="Material",this.blending=yu,this.side=Yo,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=pg,this.blendDst=mg,this.blendEquation=Vl,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new ht(0,0,0),this.blendAlpha=0,this.depthFunc=yp,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Wy,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=su,this.stencilZFail=su,this.stencilZPass=su,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==yu&&(n.blending=this.blending),this.side!==Yo&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==pg&&(n.blendSrc=this.blendSrc),this.blendDst!==mg&&(n.blendDst=this.blendDst),this.blendEquation!==Vl&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==yp&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Wy&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==su&&(n.stencilFail=this.stencilFail),this.stencilZFail!==su&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==su&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function i(s){const o=[];for(const l in s){const u=s[l];delete u.metadata,o.push(u)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(n.textures=s),o.length>0&&(n.images=o)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const i=t.length;n=new Array(i);for(let s=0;s!==i;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class ws extends Fr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ht(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Hp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const ja=B8();function B8(){const r=new ArrayBuffer(4),e=new Float32Array(r),t=new Uint32Array(r),n=new Uint32Array(512),i=new Uint32Array(512);for(let u=0;u<256;++u){const h=u-127;h<-27?(n[u]=0,n[u|256]=32768,i[u]=24,i[u|256]=24):h<-14?(n[u]=1024>>-h-14,n[u|256]=1024>>-h-14|32768,i[u]=-h-1,i[u|256]=-h-1):h<=15?(n[u]=h+15<<10,n[u|256]=h+15<<10|32768,i[u]=13,i[u|256]=13):h<128?(n[u]=31744,n[u|256]=64512,i[u]=24,i[u|256]=24):(n[u]=31744,n[u|256]=64512,i[u]=13,i[u|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),l=new Uint32Array(64);for(let u=1;u<1024;++u){let h=u<<13,p=0;for(;(h&8388608)===0;)h<<=1,p-=8388608;h&=-8388609,p+=947912704,s[u]=h|p}for(let u=1024;u<2048;++u)s[u]=939524096+(u-1024<<13);for(let u=1;u<31;++u)o[u]=u<<23;o[31]=1199570944,o[32]=2147483648;for(let u=33;u<63;++u)o[u]=2147483648+(u-32<<23);o[63]=3347054592;for(let u=1;u<64;++u)u!==32&&(l[u]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:l}}function is(r){Math.abs(r)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),r=yr(r,-65504,65504),ja.floatView[0]=r;const e=ja.uint32View[0],t=e>>23&511;return ja.baseTable[t]+((e&8388607)>>ja.shiftTable[t])}function Zf(r){const e=r>>10;return ja.uint32View[0]=ja.mantissaTable[ja.offsetTable[e]+(r&1023)]+ja.exponentTable[e],ja.floatView[0]}const pu={toHalfFloat:is,fromHalfFloat:Zf},Lr=new X,h2=new Ue;class Dn{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=Sp,this.updateRange={offset:0,count:-1},this.gpuType=bi,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)h2.fromBufferAttribute(this,t),h2.applyMatrix3(e),this.setXY(t,h2.x,h2.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)Lr.fromBufferAttribute(this,t),Lr.applyMatrix3(e),this.setXYZ(t,Lr.x,Lr.y,Lr.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Lr.fromBufferAttribute(this,t),Lr.applyMatrix4(e),this.setXYZ(t,Lr.x,Lr.y,Lr.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Lr.fromBufferAttribute(this,t),Lr.applyNormalMatrix(e),this.setXYZ(t,Lr.x,Lr.y,Lr.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Lr.fromBufferAttribute(this,t),Lr.transformDirection(e),this.setXYZ(t,Lr.x,Lr.y,Lr.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=os(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=fn(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=os(t,this.array)),t}setX(e,t){return this.normalized&&(t=fn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=os(t,this.array)),t}setY(e,t){return this.normalized&&(t=fn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=os(t,this.array)),t}setZ(e,t){return this.normalized&&(t=fn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=os(t,this.array)),t}setW(e,t){return this.normalized&&(t=fn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=fn(t,this.array),n=fn(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=fn(t,this.array),n=fn(n,this.array),i=fn(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,s){return e*=this.itemSize,this.normalized&&(t=fn(t,this.array),n=fn(n,this.array),i=fn(i,this.array),s=fn(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Sp&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}class b8 extends Dn{constructor(e,t,n){super(new Int8Array(e),t,n)}}class M8 extends Dn{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class T8 extends Dn{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class R8 extends Dn{constructor(e,t,n){super(new Int16Array(e),t,n)}}class TA extends Dn{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class D8 extends Dn{constructor(e,t,n){super(new Int32Array(e),t,n)}}class RA extends Dn{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class P8 extends Dn{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=Zf(this.array[e*this.itemSize]);return this.normalized&&(t=os(t,this.array)),t}setX(e,t){return this.normalized&&(t=fn(t,this.array)),this.array[e*this.itemSize]=is(t),this}getY(e){let t=Zf(this.array[e*this.itemSize+1]);return this.normalized&&(t=os(t,this.array)),t}setY(e,t){return this.normalized&&(t=fn(t,this.array)),this.array[e*this.itemSize+1]=is(t),this}getZ(e){let t=Zf(this.array[e*this.itemSize+2]);return this.normalized&&(t=os(t,this.array)),t}setZ(e,t){return this.normalized&&(t=fn(t,this.array)),this.array[e*this.itemSize+2]=is(t),this}getW(e){let t=Zf(this.array[e*this.itemSize+3]);return this.normalized&&(t=os(t,this.array)),t}setW(e,t){return this.normalized&&(t=fn(t,this.array)),this.array[e*this.itemSize+3]=is(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=fn(t,this.array),n=fn(n,this.array)),this.array[e+0]=is(t),this.array[e+1]=is(n),this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=fn(t,this.array),n=fn(n,this.array),i=fn(i,this.array)),this.array[e+0]=is(t),this.array[e+1]=is(n),this.array[e+2]=is(i),this}setXYZW(e,t,n,i,s){return e*=this.itemSize,this.normalized&&(t=fn(t,this.array),n=fn(n,this.array),i=fn(i,this.array),s=fn(s,this.array)),this.array[e+0]=is(t),this.array[e+1]=is(n),this.array[e+2]=is(i),this.array[e+3]=is(s),this}}class Dt extends Dn{constructor(e,t,n){super(new Float32Array(e),t,n)}}class L8 extends Dn{constructor(e,t,n){super(new Float64Array(e),t,n)}}let I8=0;const Gs=new $t,uv=new bn,Jd=new X,Es=new Ms,zf=new Ms,ti=new X;class cn extends Za{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:I8++}),this.uuid=Bs(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(k1(e)?RA:TA)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const s=new mn().getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Gs.makeRotationFromQuaternion(e),this.applyMatrix4(Gs),this}rotateX(e){return Gs.makeRotationX(e),this.applyMatrix4(Gs),this}rotateY(e){return Gs.makeRotationY(e),this.applyMatrix4(Gs),this}rotateZ(e){return Gs.makeRotationZ(e),this.applyMatrix4(Gs),this}translate(e,t,n){return Gs.makeTranslation(e,t,n),this.applyMatrix4(Gs),this}scale(e,t,n){return Gs.makeScale(e,t,n),this.applyMatrix4(Gs),this}lookAt(e){return uv.lookAt(e),uv.updateMatrix(),this.applyMatrix4(uv.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Jd).negate(),this.translate(Jd.x,Jd.y,Jd.z),this}setFromPoints(e){const t=[];for(let n=0,i=e.length;n<i;n++){const s=e[n];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Dt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ms);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new X(-1/0,-1/0,-1/0),new X(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,i=t.length;n<i;n++){const s=t[n];Es.setFromBufferAttribute(s),this.morphTargetsRelative?(ti.addVectors(this.boundingBox.min,Es.min),this.boundingBox.expandByPoint(ti),ti.addVectors(this.boundingBox.max,Es.max),this.boundingBox.expandByPoint(ti)):(this.boundingBox.expandByPoint(Es.min),this.boundingBox.expandByPoint(Es.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ts);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new X,1/0);return}if(e){const n=this.boundingSphere.center;if(Es.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const l=t[s];zf.setFromBufferAttribute(l),this.morphTargetsRelative?(ti.addVectors(Es.min,zf.min),Es.expandByPoint(ti),ti.addVectors(Es.max,zf.max),Es.expandByPoint(ti)):(Es.expandByPoint(zf.min),Es.expandByPoint(zf.max))}Es.getCenter(n);let i=0;for(let s=0,o=e.count;s<o;s++)ti.fromBufferAttribute(e,s),i=Math.max(i,n.distanceToSquared(ti));if(t)for(let s=0,o=t.length;s<o;s++){const l=t[s],u=this.morphTargetsRelative;for(let h=0,p=l.count;h<p;h++)ti.fromBufferAttribute(l,h),u&&(Jd.fromBufferAttribute(e,h),ti.add(Jd)),i=Math.max(i,n.distanceToSquared(ti))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=e.array,i=t.position.array,s=t.normal.array,o=t.uv.array,l=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Dn(new Float32Array(4*l),4));const u=this.getAttribute("tangent").array,h=[],p=[];for(let H=0;H<l;H++)h[H]=new X,p[H]=new X;const m=new X,v=new X,y=new X,E=new Ue,w=new Ue,C=new Ue,x=new X,M=new X;function S(H,ee,de){m.fromArray(i,H*3),v.fromArray(i,ee*3),y.fromArray(i,de*3),E.fromArray(o,H*2),w.fromArray(o,ee*2),C.fromArray(o,de*2),v.sub(m),y.sub(m),w.sub(E),C.sub(E);const ve=1/(w.x*C.y-C.x*w.y);isFinite(ve)&&(x.copy(v).multiplyScalar(C.y).addScaledVector(y,-w.y).multiplyScalar(ve),M.copy(y).multiplyScalar(w.x).addScaledVector(v,-C.x).multiplyScalar(ve),h[H].add(x),h[ee].add(x),h[de].add(x),p[H].add(M),p[ee].add(M),p[de].add(M))}let R=this.groups;R.length===0&&(R=[{start:0,count:n.length}]);for(let H=0,ee=R.length;H<ee;++H){const de=R[H],ve=de.start,Y=de.count;for(let me=ve,pe=ve+Y;me<pe;me+=3)S(n[me+0],n[me+1],n[me+2])}const N=new X,I=new X,O=new X,j=new X;function F(H){O.fromArray(s,H*3),j.copy(O);const ee=h[H];N.copy(ee),N.sub(O.multiplyScalar(O.dot(ee))).normalize(),I.crossVectors(j,ee);const ve=I.dot(p[H])<0?-1:1;u[H*4]=N.x,u[H*4+1]=N.y,u[H*4+2]=N.z,u[H*4+3]=ve}for(let H=0,ee=R.length;H<ee;++H){const de=R[H],ve=de.start,Y=de.count;for(let me=ve,pe=ve+Y;me<pe;me+=3)F(n[me+0]),F(n[me+1]),F(n[me+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new Dn(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let v=0,y=n.count;v<y;v++)n.setXYZ(v,0,0,0);const i=new X,s=new X,o=new X,l=new X,u=new X,h=new X,p=new X,m=new X;if(e)for(let v=0,y=e.count;v<y;v+=3){const E=e.getX(v+0),w=e.getX(v+1),C=e.getX(v+2);i.fromBufferAttribute(t,E),s.fromBufferAttribute(t,w),o.fromBufferAttribute(t,C),p.subVectors(o,s),m.subVectors(i,s),p.cross(m),l.fromBufferAttribute(n,E),u.fromBufferAttribute(n,w),h.fromBufferAttribute(n,C),l.add(p),u.add(p),h.add(p),n.setXYZ(E,l.x,l.y,l.z),n.setXYZ(w,u.x,u.y,u.z),n.setXYZ(C,h.x,h.y,h.z)}else for(let v=0,y=t.count;v<y;v+=3)i.fromBufferAttribute(t,v+0),s.fromBufferAttribute(t,v+1),o.fromBufferAttribute(t,v+2),p.subVectors(o,s),m.subVectors(i,s),p.cross(m),n.setXYZ(v+0,p.x,p.y,p.z),n.setXYZ(v+1,p.x,p.y,p.z),n.setXYZ(v+2,p.x,p.y,p.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)ti.fromBufferAttribute(e,t),ti.normalize(),e.setXYZ(t,ti.x,ti.y,ti.z)}toNonIndexed(){function e(l,u){const h=l.array,p=l.itemSize,m=l.normalized,v=new h.constructor(u.length*p);let y=0,E=0;for(let w=0,C=u.length;w<C;w++){l.isInterleavedBufferAttribute?y=u[w]*l.data.stride+l.offset:y=u[w]*p;for(let x=0;x<p;x++)v[E++]=h[y++]}return new Dn(v,p,m)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new cn,n=this.index.array,i=this.attributes;for(const l in i){const u=i[l],h=e(u,n);t.setAttribute(l,h)}const s=this.morphAttributes;for(const l in s){const u=[],h=s[l];for(let p=0,m=h.length;p<m;p++){const v=h[p],y=e(v,n);u.push(y)}t.morphAttributes[l]=u}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let l=0,u=o.length;l<u;l++){const h=o[l];t.addGroup(h.start,h.count,h.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const u=this.parameters;for(const h in u)u[h]!==void 0&&(e[h]=u[h]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const u in n){const h=n[u];e.data.attributes[u]=h.toJSON(e.data)}const i={};let s=!1;for(const u in this.morphAttributes){const h=this.morphAttributes[u],p=[];for(let m=0,v=h.length;m<v;m++){const y=h[m];p.push(y.toJSON(e.data))}p.length>0&&(i[u]=p,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const l=this.boundingSphere;return l!==null&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(t));const i=e.attributes;for(const h in i){const p=i[h];this.setAttribute(h,p.clone(t))}const s=e.morphAttributes;for(const h in s){const p=[],m=s[h];for(let v=0,y=m.length;v<y;v++)p.push(m[v].clone(t));this.morphAttributes[h]=p}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let h=0,p=o.length;h<p;h++){const m=o[h];this.addGroup(m.start,m.count,m.materialIndex)}const l=e.boundingBox;l!==null&&(this.boundingBox=l.clone());const u=e.boundingSphere;return u!==null&&(this.boundingSphere=u.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Kx=new $t,Kc=new Du,f2=new Ts,qx=new X,Xd=new X,Kd=new X,qd=new X,dv=new X,p2=new X,m2=new Ue,g2=new Ue,v2=new Ue,Yx=new X,$x=new X,Qx=new X,y2=new X,A2=new X;class Nr extends bn{constructor(e=new cn,t=new ws){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const l=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}getVertexPosition(e,t){const n=this.geometry,i=n.attributes.position,s=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(i,e);const l=this.morphTargetInfluences;if(s&&l){p2.set(0,0,0);for(let u=0,h=s.length;u<h;u++){const p=l[u],m=s[u];p!==0&&(dv.fromBufferAttribute(m,e),o?p2.addScaledVector(dv,p):p2.addScaledVector(dv.sub(t),p))}t.add(p2)}return t}raycast(e,t){const n=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),f2.copy(n.boundingSphere),f2.applyMatrix4(s),Kc.copy(e.ray).recast(e.near),!(f2.containsPoint(Kc.origin)===!1&&(Kc.intersectSphere(f2,qx)===null||Kc.origin.distanceToSquared(qx)>(e.far-e.near)**2))&&(Kx.copy(s).invert(),Kc.copy(e.ray).applyMatrix4(Kx),!(n.boundingBox!==null&&Kc.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,Kc)))}_computeIntersections(e,t,n){let i;const s=this.geometry,o=this.material,l=s.index,u=s.attributes.position,h=s.attributes.uv,p=s.attributes.uv1,m=s.attributes.normal,v=s.groups,y=s.drawRange;if(l!==null)if(Array.isArray(o))for(let E=0,w=v.length;E<w;E++){const C=v[E],x=o[C.materialIndex],M=Math.max(C.start,y.start),S=Math.min(l.count,Math.min(C.start+C.count,y.start+y.count));for(let R=M,N=S;R<N;R+=3){const I=l.getX(R),O=l.getX(R+1),j=l.getX(R+2);i=E2(this,x,e,n,h,p,m,I,O,j),i&&(i.faceIndex=Math.floor(R/3),i.face.materialIndex=C.materialIndex,t.push(i))}}else{const E=Math.max(0,y.start),w=Math.min(l.count,y.start+y.count);for(let C=E,x=w;C<x;C+=3){const M=l.getX(C),S=l.getX(C+1),R=l.getX(C+2);i=E2(this,o,e,n,h,p,m,M,S,R),i&&(i.faceIndex=Math.floor(C/3),t.push(i))}}else if(u!==void 0)if(Array.isArray(o))for(let E=0,w=v.length;E<w;E++){const C=v[E],x=o[C.materialIndex],M=Math.max(C.start,y.start),S=Math.min(u.count,Math.min(C.start+C.count,y.start+y.count));for(let R=M,N=S;R<N;R+=3){const I=R,O=R+1,j=R+2;i=E2(this,x,e,n,h,p,m,I,O,j),i&&(i.faceIndex=Math.floor(R/3),i.face.materialIndex=C.materialIndex,t.push(i))}}else{const E=Math.max(0,y.start),w=Math.min(u.count,y.start+y.count);for(let C=E,x=w;C<x;C+=3){const M=C,S=C+1,R=C+2;i=E2(this,o,e,n,h,p,m,M,S,R),i&&(i.faceIndex=Math.floor(C/3),t.push(i))}}}}function N8(r,e,t,n,i,s,o,l){let u;if(e.side===Vi?u=n.intersectTriangle(o,s,i,!0,l):u=n.intersectTriangle(i,s,o,e.side===Yo,l),u===null)return null;A2.copy(l),A2.applyMatrix4(r.matrixWorld);const h=t.ray.origin.distanceTo(A2);return h<t.near||h>t.far?null:{distance:h,point:A2.clone(),object:r}}function E2(r,e,t,n,i,s,o,l,u,h){r.getVertexPosition(l,Xd),r.getVertexPosition(u,Kd),r.getVertexPosition(h,qd);const p=N8(r,e,t,n,Xd,Kd,qd,y2);if(p){i&&(m2.fromBufferAttribute(i,l),g2.fromBufferAttribute(i,u),v2.fromBufferAttribute(i,h),p.uv=ss.getInterpolation(y2,Xd,Kd,qd,m2,g2,v2,new Ue)),s&&(m2.fromBufferAttribute(s,l),g2.fromBufferAttribute(s,u),v2.fromBufferAttribute(s,h),p.uv1=ss.getInterpolation(y2,Xd,Kd,qd,m2,g2,v2,new Ue),p.uv2=p.uv1),o&&(Yx.fromBufferAttribute(o,l),$x.fromBufferAttribute(o,u),Qx.fromBufferAttribute(o,h),p.normal=ss.getInterpolation(y2,Xd,Kd,qd,Yx,$x,Qx,new X),p.normal.dot(n.direction)>0&&p.normal.multiplyScalar(-1));const m={a:l,b:u,c:h,normal:new X,materialIndex:0};ss.getNormal(Xd,Kd,qd,m.normal),p.face=m}return p}class Pu extends cn{constructor(e=1,t=1,n=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:s,depthSegments:o};const l=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const u=[],h=[],p=[],m=[];let v=0,y=0;E("z","y","x",-1,-1,n,t,e,o,s,0),E("z","y","x",1,-1,n,t,-e,o,s,1),E("x","z","y",1,1,e,n,t,i,o,2),E("x","z","y",1,-1,e,n,-t,i,o,3),E("x","y","z",1,-1,e,t,n,i,s,4),E("x","y","z",-1,-1,e,t,-n,i,s,5),this.setIndex(u),this.setAttribute("position",new Dt(h,3)),this.setAttribute("normal",new Dt(p,3)),this.setAttribute("uv",new Dt(m,2));function E(w,C,x,M,S,R,N,I,O,j,F){const H=R/O,ee=N/j,de=R/2,ve=N/2,Y=I/2,me=O+1,pe=j+1;let Ae=0,te=0;const ce=new X;for(let ne=0;ne<pe;ne++){const z=ne*ee-ve;for(let K=0;K<me;K++){const xe=K*H-de;ce[w]=xe*M,ce[C]=z*S,ce[x]=Y,h.push(ce.x,ce.y,ce.z),ce[w]=0,ce[C]=0,ce[x]=I>0?1:-1,p.push(ce.x,ce.y,ce.z),m.push(K/O),m.push(1-ne/j),Ae+=1}}for(let ne=0;ne<j;ne++)for(let z=0;z<O;z++){const K=v+z+me*ne,xe=v+z+me*(ne+1),De=v+(z+1)+me*(ne+1),Ie=v+(z+1)+me*ne;u.push(K,xe,Ie),u.push(xe,De,Ie),te+=6}l.addGroup(y,te,F),y+=te,v+=Ae}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Pu(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function bh(r){const e={};for(const t in r){e[t]={};for(const n in r[t]){const i=r[t][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=i.clone():Array.isArray(i)?e[t][n]=i.slice():e[t][n]=i}}return e}function Gi(r){const e={};for(let t=0;t<r.length;t++){const n=bh(r[t]);for(const i in n)e[i]=n[i]}return e}function F8(r){const e=[];for(let t=0;t<r.length;t++)e.push(r[t].clone());return e}function z1(r){return r.getRenderTarget()===null?r.outputColorSpace:On.workingColorSpace}const DA={clone:bh,merge:Gi};var k8=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,O8=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class as extends Fr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=k8,this.fragmentShader=O8,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=bh(e.uniforms),this.uniformsGroups=F8(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const i in this.extensions)this.extensions[i]===!0&&(n[i]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class jp extends bn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new $t,this.projectionMatrix=new $t,this.projectionMatrixInverse=new $t,this.coordinateSystem=Vo}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Ar extends jp{constructor(e=50,t=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Bh*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Au*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Bh*2*Math.atan(Math.tan(Au*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Au*.5*this.fov)/this.zoom,n=2*t,i=this.aspect*n,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const u=o.fullWidth,h=o.fullHeight;s+=o.offsetX*i/u,t-=o.offsetY*n/h,i*=o.width/u,n*=o.height/h}const l=this.filmOffset;l!==0&&(s+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Yd=-90,$d=1;class G1 extends bn{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Ar(Yd,$d,e,t);i.layers=this.layers,this.add(i);const s=new Ar(Yd,$d,e,t);s.layers=this.layers,this.add(s);const o=new Ar(Yd,$d,e,t);o.layers=this.layers,this.add(o);const l=new Ar(Yd,$d,e,t);l.layers=this.layers,this.add(l);const u=new Ar(Yd,$d,e,t);u.layers=this.layers,this.add(u);const h=new Ar(Yd,$d,e,t);h.layers=this.layers,this.add(h)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,i,s,o,l,u]=t;for(const h of t)this.remove(h);if(e===Vo)n.up.set(0,1,0),n.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),l.up.set(0,1,0),l.lookAt(0,0,1),u.up.set(0,1,0),u.lookAt(0,0,-1);else if(e===Bp)n.up.set(0,-1,0),n.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),l.up.set(0,-1,0),l.lookAt(0,0,1),u.up.set(0,-1,0),u.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const h of t)this.add(h),h.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,l,u,h,p]=this.children,m=e.getRenderTarget(),v=e.getActiveCubeFace(),y=e.getActiveMipmapLevel(),E=e.xr.enabled;e.xr.enabled=!1;const w=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,i),e.render(t,s),e.setRenderTarget(n,1,i),e.render(t,o),e.setRenderTarget(n,2,i),e.render(t,l),e.setRenderTarget(n,3,i),e.render(t,u),e.setRenderTarget(n,4,i),e.render(t,h),n.texture.generateMipmaps=w,e.setRenderTarget(n,5,i),e.render(t,p),e.setRenderTarget(m,v,y),e.xr.enabled=E,n.texture.needsPMREMUpdate=!0}}class Vp extends ar{constructor(e,t,n,i,s,o,l,u,h,p){e=e!==void 0?e:[],t=t!==void 0?t:$o,super(e,t,n,i,s,o,l,u,h,p),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class PA extends Wi{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];t.encoding!==void 0&&(sp("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===Kl?Xr:Cs),this.texture=new Vp(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Jn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Pu(5,5,5),s=new as({name:"CubemapFromEquirect",uniforms:bh(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Vi,blending:Xa});s.uniforms.tEquirect.value=t;const o=new Nr(i,s),l=t.minFilter;return t.minFilter===Qo&&(t.minFilter=Jn),new G1(1,10,this).update(e,o),t.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,n,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,i);e.setRenderTarget(s)}}const hv=new X,U8=new X,H8=new mn;class Ga{constructor(e=new X(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=hv.subVectors(n,t).cross(U8.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(hv),i=this.normal.dot(n);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(n,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||H8.getNormalMatrix(e),i=this.coplanarPoint(hv).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const qc=new Ts,x2=new X;class Fg{constructor(e=new Ga,t=new Ga,n=new Ga,i=new Ga,s=new Ga,o=new Ga){this.planes=[e,t,n,i,s,o]}set(e,t,n,i,s,o){const l=this.planes;return l[0].copy(e),l[1].copy(t),l[2].copy(n),l[3].copy(i),l[4].copy(s),l[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=Vo){const n=this.planes,i=e.elements,s=i[0],o=i[1],l=i[2],u=i[3],h=i[4],p=i[5],m=i[6],v=i[7],y=i[8],E=i[9],w=i[10],C=i[11],x=i[12],M=i[13],S=i[14],R=i[15];if(n[0].setComponents(u-s,v-h,C-y,R-x).normalize(),n[1].setComponents(u+s,v+h,C+y,R+x).normalize(),n[2].setComponents(u+o,v+p,C+E,R+M).normalize(),n[3].setComponents(u-o,v-p,C-E,R-M).normalize(),n[4].setComponents(u-l,v-m,C-w,R-S).normalize(),t===Vo)n[5].setComponents(u+l,v+m,C+w,R+S).normalize();else if(t===Bp)n[5].setComponents(l,m,w,S).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),qc.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),qc.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(qc)}intersectsSprite(e){return qc.center.set(0,0,0),qc.radius=.7071067811865476,qc.applyMatrix4(e.matrixWorld),this.intersectsSphere(qc)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(x2.x=i.normal.x>0?e.max.x:e.min.x,x2.y=i.normal.y>0?e.max.y:e.min.y,x2.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(x2)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function j1(){let r=null,e=!1,t=null,n=null;function i(s,o){t(s,o),n=r.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(n=r.requestAnimationFrame(i),e=!0)},stop:function(){r.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){r=s}}}function z8(r,e){const t=e.isWebGL2,n=new WeakMap;function i(h,p){const m=h.array,v=h.usage,y=r.createBuffer();r.bindBuffer(p,y),r.bufferData(p,m,v),h.onUploadCallback();let E;if(m instanceof Float32Array)E=r.FLOAT;else if(m instanceof Uint16Array)if(h.isFloat16BufferAttribute)if(t)E=r.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else E=r.UNSIGNED_SHORT;else if(m instanceof Int16Array)E=r.SHORT;else if(m instanceof Uint32Array)E=r.UNSIGNED_INT;else if(m instanceof Int32Array)E=r.INT;else if(m instanceof Int8Array)E=r.BYTE;else if(m instanceof Uint8Array)E=r.UNSIGNED_BYTE;else if(m instanceof Uint8ClampedArray)E=r.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+m);return{buffer:y,type:E,bytesPerElement:m.BYTES_PER_ELEMENT,version:h.version}}function s(h,p,m){const v=p.array,y=p.updateRange;r.bindBuffer(m,h),y.count===-1?r.bufferSubData(m,0,v):(t?r.bufferSubData(m,y.offset*v.BYTES_PER_ELEMENT,v,y.offset,y.count):r.bufferSubData(m,y.offset*v.BYTES_PER_ELEMENT,v.subarray(y.offset,y.offset+y.count)),y.count=-1),p.onUploadCallback()}function o(h){return h.isInterleavedBufferAttribute&&(h=h.data),n.get(h)}function l(h){h.isInterleavedBufferAttribute&&(h=h.data);const p=n.get(h);p&&(r.deleteBuffer(p.buffer),n.delete(h))}function u(h,p){if(h.isGLBufferAttribute){const v=n.get(h);(!v||v.version<h.version)&&n.set(h,{buffer:h.buffer,type:h.type,bytesPerElement:h.elementSize,version:h.version});return}h.isInterleavedBufferAttribute&&(h=h.data);const m=n.get(h);m===void 0?n.set(h,i(h,p)):m.version<h.version&&(s(m.buffer,h,p),m.version=h.version)}return{get:o,remove:l,update:u}}class Ih extends cn{constructor(e=1,t=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const s=e/2,o=t/2,l=Math.floor(n),u=Math.floor(i),h=l+1,p=u+1,m=e/l,v=t/u,y=[],E=[],w=[],C=[];for(let x=0;x<p;x++){const M=x*v-o;for(let S=0;S<h;S++){const R=S*m-s;E.push(R,-M,0),w.push(0,0,1),C.push(S/l),C.push(1-x/u)}}for(let x=0;x<u;x++)for(let M=0;M<l;M++){const S=M+h*x,R=M+h*(x+1),N=M+1+h*(x+1),I=M+1+h*x;y.push(S,R,I),y.push(R,N,I)}this.setIndex(y),this.setAttribute("position",new Dt(E,3)),this.setAttribute("normal",new Dt(w,3)),this.setAttribute("uv",new Dt(C,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ih(e.width,e.height,e.widthSegments,e.heightSegments)}}var G8=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,j8=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,V8=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,W8=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,J8=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,X8=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,K8=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,q8=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Y8=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,$8=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Q8=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Z8=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,eP=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,tP=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,nP=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,rP=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,iP=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,sP=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,oP=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,aP=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,lP=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,cP=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,uP=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,dP=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,hP=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,fP=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,pP=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,mP=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,gP="gl_FragColor = linearToOutputTexel( gl_FragColor );",vP=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,yP=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,AP=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,EP=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,xP=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,_P=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,CP=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,wP=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,SP=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,BP=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,bP=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,MP=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,TP=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,RP=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,DP=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,PP=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,LP=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,IP=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,NP=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,FP=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,kP=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,OP=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	anisotropyV /= material.anisotropy;
	material.anisotropy = saturate( material.anisotropy );
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;
#endif`,UP=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,HP=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,zP=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,GP=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,jP=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,VP=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,WP=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,JP=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,XP=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,KP=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,qP=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,YP=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,$P=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,QP=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,ZP=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,e5=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,t5=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,n5=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,r5=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,i5=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,s5=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,o5=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,a5=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,l5=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,c5=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,u5=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,d5=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,h5=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,f5=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,p5=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,m5=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,g5=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,v5=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,y5=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,A5=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,E5=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,x5=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,_5=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,C5=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,w5=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,S5=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,B5=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,b5=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,M5=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,T5=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,R5=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,D5=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,P5=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,L5=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,I5=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,N5=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,F5=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,k5=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,O5=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const U5=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,H5=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,z5=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,G5=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,j5=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,V5=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,W5=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,J5=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,X5=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,K5=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,q5=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Y5=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,$5=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Q5=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Z5=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,eL=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,tL=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,nL=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,rL=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,iL=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,sL=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,oL=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,aL=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,lL=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,cL=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,uL=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,dL=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,hL=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,fL=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,pL=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,mL=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,gL=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,vL=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,yL=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,hn={alphahash_fragment:G8,alphahash_pars_fragment:j8,alphamap_fragment:V8,alphamap_pars_fragment:W8,alphatest_fragment:J8,alphatest_pars_fragment:X8,aomap_fragment:K8,aomap_pars_fragment:q8,begin_vertex:Y8,beginnormal_vertex:$8,bsdfs:Q8,iridescence_fragment:Z8,bumpmap_pars_fragment:eP,clipping_planes_fragment:tP,clipping_planes_pars_fragment:nP,clipping_planes_pars_vertex:rP,clipping_planes_vertex:iP,color_fragment:sP,color_pars_fragment:oP,color_pars_vertex:aP,color_vertex:lP,common:cP,cube_uv_reflection_fragment:uP,defaultnormal_vertex:dP,displacementmap_pars_vertex:hP,displacementmap_vertex:fP,emissivemap_fragment:pP,emissivemap_pars_fragment:mP,colorspace_fragment:gP,colorspace_pars_fragment:vP,envmap_fragment:yP,envmap_common_pars_fragment:AP,envmap_pars_fragment:EP,envmap_pars_vertex:xP,envmap_physical_pars_fragment:LP,envmap_vertex:_P,fog_vertex:CP,fog_pars_vertex:wP,fog_fragment:SP,fog_pars_fragment:BP,gradientmap_pars_fragment:bP,lightmap_fragment:MP,lightmap_pars_fragment:TP,lights_lambert_fragment:RP,lights_lambert_pars_fragment:DP,lights_pars_begin:PP,lights_toon_fragment:IP,lights_toon_pars_fragment:NP,lights_phong_fragment:FP,lights_phong_pars_fragment:kP,lights_physical_fragment:OP,lights_physical_pars_fragment:UP,lights_fragment_begin:HP,lights_fragment_maps:zP,lights_fragment_end:GP,logdepthbuf_fragment:jP,logdepthbuf_pars_fragment:VP,logdepthbuf_pars_vertex:WP,logdepthbuf_vertex:JP,map_fragment:XP,map_pars_fragment:KP,map_particle_fragment:qP,map_particle_pars_fragment:YP,metalnessmap_fragment:$P,metalnessmap_pars_fragment:QP,morphcolor_vertex:ZP,morphnormal_vertex:e5,morphtarget_pars_vertex:t5,morphtarget_vertex:n5,normal_fragment_begin:r5,normal_fragment_maps:i5,normal_pars_fragment:s5,normal_pars_vertex:o5,normal_vertex:a5,normalmap_pars_fragment:l5,clearcoat_normal_fragment_begin:c5,clearcoat_normal_fragment_maps:u5,clearcoat_pars_fragment:d5,iridescence_pars_fragment:h5,opaque_fragment:f5,packing:p5,premultiplied_alpha_fragment:m5,project_vertex:g5,dithering_fragment:v5,dithering_pars_fragment:y5,roughnessmap_fragment:A5,roughnessmap_pars_fragment:E5,shadowmap_pars_fragment:x5,shadowmap_pars_vertex:_5,shadowmap_vertex:C5,shadowmask_pars_fragment:w5,skinbase_vertex:S5,skinning_pars_vertex:B5,skinning_vertex:b5,skinnormal_vertex:M5,specularmap_fragment:T5,specularmap_pars_fragment:R5,tonemapping_fragment:D5,tonemapping_pars_fragment:P5,transmission_fragment:L5,transmission_pars_fragment:I5,uv_pars_fragment:N5,uv_pars_vertex:F5,uv_vertex:k5,worldpos_vertex:O5,background_vert:U5,background_frag:H5,backgroundCube_vert:z5,backgroundCube_frag:G5,cube_vert:j5,cube_frag:V5,depth_vert:W5,depth_frag:J5,distanceRGBA_vert:X5,distanceRGBA_frag:K5,equirect_vert:q5,equirect_frag:Y5,linedashed_vert:$5,linedashed_frag:Q5,meshbasic_vert:Z5,meshbasic_frag:eL,meshlambert_vert:tL,meshlambert_frag:nL,meshmatcap_vert:rL,meshmatcap_frag:iL,meshnormal_vert:sL,meshnormal_frag:oL,meshphong_vert:aL,meshphong_frag:lL,meshphysical_vert:cL,meshphysical_frag:uL,meshtoon_vert:dL,meshtoon_frag:hL,points_vert:fL,points_frag:pL,shadow_vert:mL,shadow_frag:gL,sprite_vert:vL,sprite_frag:yL},pt={common:{diffuse:{value:new ht(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new mn},alphaMap:{value:null},alphaMapTransform:{value:new mn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new mn}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new mn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new mn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new mn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new mn},normalScale:{value:new Ue(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new mn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new mn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new mn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new mn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ht(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ht(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new mn},alphaTest:{value:0},uvTransform:{value:new mn}},sprite:{diffuse:{value:new ht(16777215)},opacity:{value:1},center:{value:new Ue(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new mn},alphaMap:{value:null},alphaMapTransform:{value:new mn},alphaTest:{value:0}}},bo={basic:{uniforms:Gi([pt.common,pt.specularmap,pt.envmap,pt.aomap,pt.lightmap,pt.fog]),vertexShader:hn.meshbasic_vert,fragmentShader:hn.meshbasic_frag},lambert:{uniforms:Gi([pt.common,pt.specularmap,pt.envmap,pt.aomap,pt.lightmap,pt.emissivemap,pt.bumpmap,pt.normalmap,pt.displacementmap,pt.fog,pt.lights,{emissive:{value:new ht(0)}}]),vertexShader:hn.meshlambert_vert,fragmentShader:hn.meshlambert_frag},phong:{uniforms:Gi([pt.common,pt.specularmap,pt.envmap,pt.aomap,pt.lightmap,pt.emissivemap,pt.bumpmap,pt.normalmap,pt.displacementmap,pt.fog,pt.lights,{emissive:{value:new ht(0)},specular:{value:new ht(1118481)},shininess:{value:30}}]),vertexShader:hn.meshphong_vert,fragmentShader:hn.meshphong_frag},standard:{uniforms:Gi([pt.common,pt.envmap,pt.aomap,pt.lightmap,pt.emissivemap,pt.bumpmap,pt.normalmap,pt.displacementmap,pt.roughnessmap,pt.metalnessmap,pt.fog,pt.lights,{emissive:{value:new ht(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:hn.meshphysical_vert,fragmentShader:hn.meshphysical_frag},toon:{uniforms:Gi([pt.common,pt.aomap,pt.lightmap,pt.emissivemap,pt.bumpmap,pt.normalmap,pt.displacementmap,pt.gradientmap,pt.fog,pt.lights,{emissive:{value:new ht(0)}}]),vertexShader:hn.meshtoon_vert,fragmentShader:hn.meshtoon_frag},matcap:{uniforms:Gi([pt.common,pt.bumpmap,pt.normalmap,pt.displacementmap,pt.fog,{matcap:{value:null}}]),vertexShader:hn.meshmatcap_vert,fragmentShader:hn.meshmatcap_frag},points:{uniforms:Gi([pt.points,pt.fog]),vertexShader:hn.points_vert,fragmentShader:hn.points_frag},dashed:{uniforms:Gi([pt.common,pt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:hn.linedashed_vert,fragmentShader:hn.linedashed_frag},depth:{uniforms:Gi([pt.common,pt.displacementmap]),vertexShader:hn.depth_vert,fragmentShader:hn.depth_frag},normal:{uniforms:Gi([pt.common,pt.bumpmap,pt.normalmap,pt.displacementmap,{opacity:{value:1}}]),vertexShader:hn.meshnormal_vert,fragmentShader:hn.meshnormal_frag},sprite:{uniforms:Gi([pt.sprite,pt.fog]),vertexShader:hn.sprite_vert,fragmentShader:hn.sprite_frag},background:{uniforms:{uvTransform:{value:new mn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:hn.background_vert,fragmentShader:hn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:hn.backgroundCube_vert,fragmentShader:hn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:hn.cube_vert,fragmentShader:hn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:hn.equirect_vert,fragmentShader:hn.equirect_frag},distanceRGBA:{uniforms:Gi([pt.common,pt.displacementmap,{referencePosition:{value:new X},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:hn.distanceRGBA_vert,fragmentShader:hn.distanceRGBA_frag},shadow:{uniforms:Gi([pt.lights,pt.fog,{color:{value:new ht(0)},opacity:{value:1}}]),vertexShader:hn.shadow_vert,fragmentShader:hn.shadow_frag}};bo.physical={uniforms:Gi([bo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new mn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new mn},clearcoatNormalScale:{value:new Ue(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new mn},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new mn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new mn},sheen:{value:0},sheenColor:{value:new ht(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new mn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new mn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new mn},transmissionSamplerSize:{value:new Ue},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new mn},attenuationDistance:{value:0},attenuationColor:{value:new ht(0)},specularColor:{value:new ht(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new mn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new mn},anisotropyVector:{value:new Ue},anisotropyMap:{value:null},anisotropyMapTransform:{value:new mn}}]),vertexShader:hn.meshphysical_vert,fragmentShader:hn.meshphysical_frag};const _2={r:0,b:0,g:0};function AL(r,e,t,n,i,s,o){const l=new ht(0);let u=s===!0?0:1,h,p,m=null,v=0,y=null;function E(C,x){let M=!1,S=x.isScene===!0?x.background:null;S&&S.isTexture&&(S=(x.backgroundBlurriness>0?t:e).get(S)),S===null?w(l,u):S&&S.isColor&&(w(S,1),M=!0);const R=r.xr.getEnvironmentBlendMode();R==="additive"?n.buffers.color.setClear(0,0,0,1,o):R==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,o),(r.autoClear||M)&&r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil),S&&(S.isCubeTexture||S.mapping===Lh)?(p===void 0&&(p=new Nr(new Pu(1,1,1),new as({name:"BackgroundCubeMaterial",uniforms:bh(bo.backgroundCube.uniforms),vertexShader:bo.backgroundCube.vertexShader,fragmentShader:bo.backgroundCube.fragmentShader,side:Vi,depthTest:!1,depthWrite:!1,fog:!1})),p.geometry.deleteAttribute("normal"),p.geometry.deleteAttribute("uv"),p.onBeforeRender=function(N,I,O){this.matrixWorld.copyPosition(O.matrixWorld)},Object.defineProperty(p.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(p)),p.material.uniforms.envMap.value=S,p.material.uniforms.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,p.material.uniforms.backgroundBlurriness.value=x.backgroundBlurriness,p.material.uniforms.backgroundIntensity.value=x.backgroundIntensity,p.material.toneMapped=On.getTransfer(S.colorSpace)!==$n,(m!==S||v!==S.version||y!==r.toneMapping)&&(p.material.needsUpdate=!0,m=S,v=S.version,y=r.toneMapping),p.layers.enableAll(),C.unshift(p,p.geometry,p.material,0,0,null)):S&&S.isTexture&&(h===void 0&&(h=new Nr(new Ih(2,2),new as({name:"BackgroundMaterial",uniforms:bh(bo.background.uniforms),vertexShader:bo.background.vertexShader,fragmentShader:bo.background.fragmentShader,side:Yo,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),Object.defineProperty(h.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(h)),h.material.uniforms.t2D.value=S,h.material.uniforms.backgroundIntensity.value=x.backgroundIntensity,h.material.toneMapped=On.getTransfer(S.colorSpace)!==$n,S.matrixAutoUpdate===!0&&S.updateMatrix(),h.material.uniforms.uvTransform.value.copy(S.matrix),(m!==S||v!==S.version||y!==r.toneMapping)&&(h.material.needsUpdate=!0,m=S,v=S.version,y=r.toneMapping),h.layers.enableAll(),C.unshift(h,h.geometry,h.material,0,0,null))}function w(C,x){C.getRGB(_2,z1(r)),n.buffers.color.setClear(_2.r,_2.g,_2.b,x,o)}return{getClearColor:function(){return l},setClearColor:function(C,x=1){l.set(C),u=x,w(l,u)},getClearAlpha:function(){return u},setClearAlpha:function(C){u=C,w(l,u)},render:E}}function EL(r,e,t,n){const i=r.getParameter(r.MAX_VERTEX_ATTRIBS),s=n.isWebGL2?null:e.get("OES_vertex_array_object"),o=n.isWebGL2||s!==null,l={},u=C(null);let h=u,p=!1;function m(Y,me,pe,Ae,te){let ce=!1;if(o){const ne=w(Ae,pe,me);h!==ne&&(h=ne,y(h.object)),ce=x(Y,Ae,pe,te),ce&&M(Y,Ae,pe,te)}else{const ne=me.wireframe===!0;(h.geometry!==Ae.id||h.program!==pe.id||h.wireframe!==ne)&&(h.geometry=Ae.id,h.program=pe.id,h.wireframe=ne,ce=!0)}te!==null&&t.update(te,r.ELEMENT_ARRAY_BUFFER),(ce||p)&&(p=!1,j(Y,me,pe,Ae),te!==null&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t.get(te).buffer))}function v(){return n.isWebGL2?r.createVertexArray():s.createVertexArrayOES()}function y(Y){return n.isWebGL2?r.bindVertexArray(Y):s.bindVertexArrayOES(Y)}function E(Y){return n.isWebGL2?r.deleteVertexArray(Y):s.deleteVertexArrayOES(Y)}function w(Y,me,pe){const Ae=pe.wireframe===!0;let te=l[Y.id];te===void 0&&(te={},l[Y.id]=te);let ce=te[me.id];ce===void 0&&(ce={},te[me.id]=ce);let ne=ce[Ae];return ne===void 0&&(ne=C(v()),ce[Ae]=ne),ne}function C(Y){const me=[],pe=[],Ae=[];for(let te=0;te<i;te++)me[te]=0,pe[te]=0,Ae[te]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:me,enabledAttributes:pe,attributeDivisors:Ae,object:Y,attributes:{},index:null}}function x(Y,me,pe,Ae){const te=h.attributes,ce=me.attributes;let ne=0;const z=pe.getAttributes();for(const K in z)if(z[K].location>=0){const De=te[K];let Ie=ce[K];if(Ie===void 0&&(K==="instanceMatrix"&&Y.instanceMatrix&&(Ie=Y.instanceMatrix),K==="instanceColor"&&Y.instanceColor&&(Ie=Y.instanceColor)),De===void 0||De.attribute!==Ie||Ie&&De.data!==Ie.data)return!0;ne++}return h.attributesNum!==ne||h.index!==Ae}function M(Y,me,pe,Ae){const te={},ce=me.attributes;let ne=0;const z=pe.getAttributes();for(const K in z)if(z[K].location>=0){let De=ce[K];De===void 0&&(K==="instanceMatrix"&&Y.instanceMatrix&&(De=Y.instanceMatrix),K==="instanceColor"&&Y.instanceColor&&(De=Y.instanceColor));const Ie={};Ie.attribute=De,De&&De.data&&(Ie.data=De.data),te[K]=Ie,ne++}h.attributes=te,h.attributesNum=ne,h.index=Ae}function S(){const Y=h.newAttributes;for(let me=0,pe=Y.length;me<pe;me++)Y[me]=0}function R(Y){N(Y,0)}function N(Y,me){const pe=h.newAttributes,Ae=h.enabledAttributes,te=h.attributeDivisors;pe[Y]=1,Ae[Y]===0&&(r.enableVertexAttribArray(Y),Ae[Y]=1),te[Y]!==me&&((n.isWebGL2?r:e.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Y,me),te[Y]=me)}function I(){const Y=h.newAttributes,me=h.enabledAttributes;for(let pe=0,Ae=me.length;pe<Ae;pe++)me[pe]!==Y[pe]&&(r.disableVertexAttribArray(pe),me[pe]=0)}function O(Y,me,pe,Ae,te,ce,ne){ne===!0?r.vertexAttribIPointer(Y,me,pe,te,ce):r.vertexAttribPointer(Y,me,pe,Ae,te,ce)}function j(Y,me,pe,Ae){if(n.isWebGL2===!1&&(Y.isInstancedMesh||Ae.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;S();const te=Ae.attributes,ce=pe.getAttributes(),ne=me.defaultAttributeValues;for(const z in ce){const K=ce[z];if(K.location>=0){let xe=te[z];if(xe===void 0&&(z==="instanceMatrix"&&Y.instanceMatrix&&(xe=Y.instanceMatrix),z==="instanceColor"&&Y.instanceColor&&(xe=Y.instanceColor)),xe!==void 0){const De=xe.normalized,Ie=xe.itemSize,Oe=t.get(xe);if(Oe===void 0)continue;const tt=Oe.buffer,rt=Oe.type,gt=Oe.bytesPerElement,kt=n.isWebGL2===!0&&(rt===r.INT||rt===r.UNSIGNED_INT||xe.gpuType===gA);if(xe.isInterleavedBufferAttribute){const xt=xe.data,se=xt.stride,Je=xe.offset;if(xt.isInstancedInterleavedBuffer){for(let Fe=0;Fe<K.locationSize;Fe++)N(K.location+Fe,xt.meshPerAttribute);Y.isInstancedMesh!==!0&&Ae._maxInstanceCount===void 0&&(Ae._maxInstanceCount=xt.meshPerAttribute*xt.count)}else for(let Fe=0;Fe<K.locationSize;Fe++)R(K.location+Fe);r.bindBuffer(r.ARRAY_BUFFER,tt);for(let Fe=0;Fe<K.locationSize;Fe++)O(K.location+Fe,Ie/K.locationSize,rt,De,se*gt,(Je+Ie/K.locationSize*Fe)*gt,kt)}else{if(xe.isInstancedBufferAttribute){for(let xt=0;xt<K.locationSize;xt++)N(K.location+xt,xe.meshPerAttribute);Y.isInstancedMesh!==!0&&Ae._maxInstanceCount===void 0&&(Ae._maxInstanceCount=xe.meshPerAttribute*xe.count)}else for(let xt=0;xt<K.locationSize;xt++)R(K.location+xt);r.bindBuffer(r.ARRAY_BUFFER,tt);for(let xt=0;xt<K.locationSize;xt++)O(K.location+xt,Ie/K.locationSize,rt,De,Ie*gt,Ie/K.locationSize*xt*gt,kt)}}else if(ne!==void 0){const De=ne[z];if(De!==void 0)switch(De.length){case 2:r.vertexAttrib2fv(K.location,De);break;case 3:r.vertexAttrib3fv(K.location,De);break;case 4:r.vertexAttrib4fv(K.location,De);break;default:r.vertexAttrib1fv(K.location,De)}}}}I()}function F(){de();for(const Y in l){const me=l[Y];for(const pe in me){const Ae=me[pe];for(const te in Ae)E(Ae[te].object),delete Ae[te];delete me[pe]}delete l[Y]}}function H(Y){if(l[Y.id]===void 0)return;const me=l[Y.id];for(const pe in me){const Ae=me[pe];for(const te in Ae)E(Ae[te].object),delete Ae[te];delete me[pe]}delete l[Y.id]}function ee(Y){for(const me in l){const pe=l[me];if(pe[Y.id]===void 0)continue;const Ae=pe[Y.id];for(const te in Ae)E(Ae[te].object),delete Ae[te];delete pe[Y.id]}}function de(){ve(),p=!0,h!==u&&(h=u,y(h.object))}function ve(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:m,reset:de,resetDefaultState:ve,dispose:F,releaseStatesOfGeometry:H,releaseStatesOfProgram:ee,initAttributes:S,enableAttribute:R,disableUnusedAttributes:I}}function xL(r,e,t,n){const i=n.isWebGL2;let s;function o(h){s=h}function l(h,p){r.drawArrays(s,h,p),t.update(p,s,1)}function u(h,p,m){if(m===0)return;let v,y;if(i)v=r,y="drawArraysInstanced";else if(v=e.get("ANGLE_instanced_arrays"),y="drawArraysInstancedANGLE",v===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}v[y](s,h,p,m),t.update(p,s,m)}this.setMode=o,this.render=l,this.renderInstances=u}function _L(r,e,t){let n;function i(){if(n!==void 0)return n;if(e.has("EXT_texture_filter_anisotropic")===!0){const O=e.get("EXT_texture_filter_anisotropic");n=r.getParameter(O.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n}function s(O){if(O==="highp"){if(r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.HIGH_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision>0)return"highp";O="mediump"}return O==="mediump"&&r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.MEDIUM_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&r.constructor.name==="WebGL2RenderingContext";let l=t.precision!==void 0?t.precision:"highp";const u=s(l);u!==l&&(console.warn("THREE.WebGLRenderer:",l,"not supported, using",u,"instead."),l=u);const h=o||e.has("WEBGL_draw_buffers"),p=t.logarithmicDepthBuffer===!0,m=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),v=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS),y=r.getParameter(r.MAX_TEXTURE_SIZE),E=r.getParameter(r.MAX_CUBE_MAP_TEXTURE_SIZE),w=r.getParameter(r.MAX_VERTEX_ATTRIBS),C=r.getParameter(r.MAX_VERTEX_UNIFORM_VECTORS),x=r.getParameter(r.MAX_VARYING_VECTORS),M=r.getParameter(r.MAX_FRAGMENT_UNIFORM_VECTORS),S=v>0,R=o||e.has("OES_texture_float"),N=S&&R,I=o?r.getParameter(r.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:h,getMaxAnisotropy:i,getMaxPrecision:s,precision:l,logarithmicDepthBuffer:p,maxTextures:m,maxVertexTextures:v,maxTextureSize:y,maxCubemapSize:E,maxAttributes:w,maxVertexUniforms:C,maxVaryings:x,maxFragmentUniforms:M,vertexTextures:S,floatFragmentTextures:R,floatVertexTextures:N,maxSamples:I}}function CL(r){const e=this;let t=null,n=0,i=!1,s=!1;const o=new Ga,l=new mn,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(m,v){const y=m.length!==0||v||n!==0||i;return i=v,n=m.length,y},this.beginShadows=function(){s=!0,p(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(m,v){t=p(m,v,0)},this.setState=function(m,v,y){const E=m.clippingPlanes,w=m.clipIntersection,C=m.clipShadows,x=r.get(m);if(!i||E===null||E.length===0||s&&!C)s?p(null):h();else{const M=s?0:n,S=M*4;let R=x.clippingState||null;u.value=R,R=p(E,v,S,y);for(let N=0;N!==S;++N)R[N]=t[N];x.clippingState=R,this.numIntersection=w?this.numPlanes:0,this.numPlanes+=M}};function h(){u.value!==t&&(u.value=t,u.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function p(m,v,y,E){const w=m!==null?m.length:0;let C=null;if(w!==0){if(C=u.value,E!==!0||C===null){const x=y+w*4,M=v.matrixWorldInverse;l.getNormalMatrix(M),(C===null||C.length<x)&&(C=new Float32Array(x));for(let S=0,R=y;S!==w;++S,R+=4)o.copy(m[S]).applyMatrix4(M,l),o.normal.toArray(C,R),C[R+3]=o.constant}u.value=C,u.needsUpdate=!0}return e.numPlanes=w,e.numIntersection=0,C}}function wL(r){let e=new WeakMap;function t(o,l){return l===Ch?o.mapping=$o:l===Ap&&(o.mapping=Yl),o}function n(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const l=o.mapping;if(l===Ch||l===Ap)if(e.has(o)){const u=e.get(o).texture;return t(u,o.mapping)}else{const u=o.image;if(u&&u.height>0){const h=new PA(u.height/2);return h.fromEquirectangularTexture(r,o),e.set(o,h),o.addEventListener("dispose",i),t(h.texture,o.mapping)}else return null}}return o}function i(o){const l=o.target;l.removeEventListener("dispose",i);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function s(){e=new WeakMap}return{get:n,dispose:s}}class Ka extends jp{constructor(e=-1,t=1,n=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=n-e,o=n+e,l=i+t,u=i-t;if(this.view!==null&&this.view.enabled){const h=(this.right-this.left)/this.view.fullWidth/this.zoom,p=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=h*this.view.offsetX,o=s+h*this.view.width,l-=p*this.view.offsetY,u=l-p*this.view.height}this.projectionMatrix.makeOrthographic(s,o,l,u,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const mh=4,Zx=[.125,.215,.35,.446,.526,.582],cu=20,fv=new Ka,e_=new ht;let pv=null,mv=0,gv=0;const ou=(1+Math.sqrt(5))/2,Qd=1/ou,t_=[new X(1,1,1),new X(-1,1,1),new X(1,1,-1),new X(-1,1,-1),new X(0,ou,Qd),new X(0,ou,-Qd),new X(Qd,0,ou),new X(-Qd,0,ou),new X(ou,Qd,0),new X(-ou,Qd,0)];class Ky{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,i=100){pv=this._renderer.getRenderTarget(),mv=this._renderer.getActiveCubeFace(),gv=this._renderer.getActiveMipmapLevel(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,n,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=i_(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=r_(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(pv,mv,gv),e.scissorTest=!1,C2(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===$o||e.mapping===Yl?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),pv=this._renderer.getRenderTarget(),mv=this._renderer.getActiveCubeFace(),gv=this._renderer.getActiveMipmapLevel();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Jn,minFilter:Jn,generateMipmaps:!1,type:Mi,format:ji,colorSpace:Zo,depthBuffer:!1},i=n_(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=n_(e,t,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=SL(s)),this._blurMaterial=BL(s,e,t)}return i}_compileMaterial(e){const t=new Nr(this._lodPlanes[0],e);this._renderer.compile(t,fv)}_sceneToCubeUV(e,t,n,i){const l=new Ar(90,1,t,n),u=[1,-1,1,1,1,1],h=[1,1,1,-1,-1,-1],p=this._renderer,m=p.autoClear,v=p.toneMapping;p.getClearColor(e_),p.toneMapping=Jo,p.autoClear=!1;const y=new ws({name:"PMREM.Background",side:Vi,depthWrite:!1,depthTest:!1}),E=new Nr(new Pu,y);let w=!1;const C=e.background;C?C.isColor&&(y.color.copy(C),e.background=null,w=!0):(y.color.copy(e_),w=!0);for(let x=0;x<6;x++){const M=x%3;M===0?(l.up.set(0,u[x],0),l.lookAt(h[x],0,0)):M===1?(l.up.set(0,0,u[x]),l.lookAt(0,h[x],0)):(l.up.set(0,u[x],0),l.lookAt(0,0,h[x]));const S=this._cubeSize;C2(i,M*S,x>2?S:0,S,S),p.setRenderTarget(i),w&&p.render(E,l),p.render(e,l)}E.geometry.dispose(),E.material.dispose(),p.toneMapping=v,p.autoClear=m,e.background=C}_textureToCubeUV(e,t){const n=this._renderer,i=e.mapping===$o||e.mapping===Yl;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=i_()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=r_());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new Nr(this._lodPlanes[0],s),l=s.uniforms;l.envMap.value=e;const u=this._cubeSize;C2(t,0,0,3*u,2*u),n.setRenderTarget(t),n.render(o,fv)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=t_[(i-1)%t_.length];this._blur(e,i-1,i,s,o)}t.autoClear=n}_blur(e,t,n,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,i,"latitudinal",s),this._halfBlur(o,e,n,n,i,"longitudinal",s)}_halfBlur(e,t,n,i,s,o,l){const u=this._renderer,h=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const p=3,m=new Nr(this._lodPlanes[i],h),v=h.uniforms,y=this._sizeLods[n]-1,E=isFinite(s)?Math.PI/(2*y):2*Math.PI/(2*cu-1),w=s/E,C=isFinite(s)?1+Math.floor(p*w):cu;C>cu&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${C} samples when the maximum is set to ${cu}`);const x=[];let M=0;for(let O=0;O<cu;++O){const j=O/w,F=Math.exp(-j*j/2);x.push(F),O===0?M+=F:O<C&&(M+=2*F)}for(let O=0;O<x.length;O++)x[O]=x[O]/M;v.envMap.value=e.texture,v.samples.value=C,v.weights.value=x,v.latitudinal.value=o==="latitudinal",l&&(v.poleAxis.value=l);const{_lodMax:S}=this;v.dTheta.value=E,v.mipInt.value=S-n;const R=this._sizeLods[i],N=3*R*(i>S-mh?i-S+mh:0),I=4*(this._cubeSize-R);C2(t,N,I,3*R,2*R),u.setRenderTarget(t),u.render(m,fv)}}function SL(r){const e=[],t=[],n=[];let i=r;const s=r-mh+1+Zx.length;for(let o=0;o<s;o++){const l=Math.pow(2,i);t.push(l);let u=1/l;o>r-mh?u=Zx[o-r+mh-1]:o===0&&(u=0),n.push(u);const h=1/(l-2),p=-h,m=1+h,v=[p,p,m,p,m,m,p,p,m,m,p,m],y=6,E=6,w=3,C=2,x=1,M=new Float32Array(w*E*y),S=new Float32Array(C*E*y),R=new Float32Array(x*E*y);for(let I=0;I<y;I++){const O=I%3*2/3-1,j=I>2?0:-1,F=[O,j,0,O+2/3,j,0,O+2/3,j+1,0,O,j,0,O+2/3,j+1,0,O,j+1,0];M.set(F,w*E*I),S.set(v,C*E*I);const H=[I,I,I,I,I,I];R.set(H,x*E*I)}const N=new cn;N.setAttribute("position",new Dn(M,w)),N.setAttribute("uv",new Dn(S,C)),N.setAttribute("faceIndex",new Dn(R,x)),e.push(N),i>mh&&i--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function n_(r,e,t){const n=new Wi(r,e,t);return n.texture.mapping=Lh,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function C2(r,e,t,n,i){r.viewport.set(e,t,n,i),r.scissor.set(e,t,n,i)}function BL(r,e,t){const n=new Float32Array(cu),i=new X(0,1,0);return new as({name:"SphericalGaussianBlur",defines:{n:cu,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${r}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:LA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Xa,depthTest:!1,depthWrite:!1})}function r_(){return new as({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:LA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Xa,depthTest:!1,depthWrite:!1})}function i_(){return new as({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:LA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Xa,depthTest:!1,depthWrite:!1})}function LA(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function bL(r){let e=new WeakMap,t=null;function n(l){if(l&&l.isTexture){const u=l.mapping,h=u===Ch||u===Ap,p=u===$o||u===Yl;if(h||p)if(l.isRenderTargetTexture&&l.needsPMREMUpdate===!0){l.needsPMREMUpdate=!1;let m=e.get(l);return t===null&&(t=new Ky(r)),m=h?t.fromEquirectangular(l,m):t.fromCubemap(l,m),e.set(l,m),m.texture}else{if(e.has(l))return e.get(l).texture;{const m=l.image;if(h&&m&&m.height>0||p&&m&&i(m)){t===null&&(t=new Ky(r));const v=h?t.fromEquirectangular(l):t.fromCubemap(l);return e.set(l,v),l.addEventListener("dispose",s),v.texture}else return null}}}return l}function i(l){let u=0;const h=6;for(let p=0;p<h;p++)l[p]!==void 0&&u++;return u===h}function s(l){const u=l.target;u.removeEventListener("dispose",s);const h=e.get(u);h!==void 0&&(e.delete(u),h.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:o}}function ML(r){const e={};function t(n){if(e[n]!==void 0)return e[n];let i;switch(n){case"WEBGL_depth_texture":i=r.getExtension("WEBGL_depth_texture")||r.getExtension("MOZ_WEBGL_depth_texture")||r.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=r.getExtension("WEBGL_compressed_texture_s3tc")||r.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=r.getExtension(n)}return e[n]=i,i}return{has:function(n){return t(n)!==null},init:function(n){n.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(n){const i=t(n);return i===null&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),i}}}function TL(r,e,t,n){const i={},s=new WeakMap;function o(m){const v=m.target;v.index!==null&&e.remove(v.index);for(const E in v.attributes)e.remove(v.attributes[E]);for(const E in v.morphAttributes){const w=v.morphAttributes[E];for(let C=0,x=w.length;C<x;C++)e.remove(w[C])}v.removeEventListener("dispose",o),delete i[v.id];const y=s.get(v);y&&(e.remove(y),s.delete(v)),n.releaseStatesOfGeometry(v),v.isInstancedBufferGeometry===!0&&delete v._maxInstanceCount,t.memory.geometries--}function l(m,v){return i[v.id]===!0||(v.addEventListener("dispose",o),i[v.id]=!0,t.memory.geometries++),v}function u(m){const v=m.attributes;for(const E in v)e.update(v[E],r.ARRAY_BUFFER);const y=m.morphAttributes;for(const E in y){const w=y[E];for(let C=0,x=w.length;C<x;C++)e.update(w[C],r.ARRAY_BUFFER)}}function h(m){const v=[],y=m.index,E=m.attributes.position;let w=0;if(y!==null){const M=y.array;w=y.version;for(let S=0,R=M.length;S<R;S+=3){const N=M[S+0],I=M[S+1],O=M[S+2];v.push(N,I,I,O,O,N)}}else if(E!==void 0){const M=E.array;w=E.version;for(let S=0,R=M.length/3-1;S<R;S+=3){const N=S+0,I=S+1,O=S+2;v.push(N,I,I,O,O,N)}}else return;const C=new(k1(v)?RA:TA)(v,1);C.version=w;const x=s.get(m);x&&e.remove(x),s.set(m,C)}function p(m){const v=s.get(m);if(v){const y=m.index;y!==null&&v.version<y.version&&h(m)}else h(m);return s.get(m)}return{get:l,update:u,getWireframeAttribute:p}}function RL(r,e,t,n){const i=n.isWebGL2;let s;function o(v){s=v}let l,u;function h(v){l=v.type,u=v.bytesPerElement}function p(v,y){r.drawElements(s,y,l,v*u),t.update(y,s,1)}function m(v,y,E){if(E===0)return;let w,C;if(i)w=r,C="drawElementsInstanced";else if(w=e.get("ANGLE_instanced_arrays"),C="drawElementsInstancedANGLE",w===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}w[C](s,y,l,v*u,E),t.update(y,s,E)}this.setMode=o,this.setIndex=h,this.render=p,this.renderInstances=m}function DL(r){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(s,o,l){switch(t.calls++,o){case r.TRIANGLES:t.triangles+=l*(s/3);break;case r.LINES:t.lines+=l*(s/2);break;case r.LINE_STRIP:t.lines+=l*(s-1);break;case r.LINE_LOOP:t.lines+=l*s;break;case r.POINTS:t.points+=l*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:n}}function PL(r,e){return r[0]-e[0]}function LL(r,e){return Math.abs(e[1])-Math.abs(r[1])}function IL(r,e,t){const n={},i=new Float32Array(8),s=new WeakMap,o=new Un,l=[];for(let h=0;h<8;h++)l[h]=[h,0];function u(h,p,m){const v=h.morphTargetInfluences;if(e.isWebGL2===!0){const E=p.morphAttributes.position||p.morphAttributes.normal||p.morphAttributes.color,w=E!==void 0?E.length:0;let C=s.get(p);if(C===void 0||C.count!==w){let me=function(){ve.dispose(),s.delete(p),p.removeEventListener("dispose",me)};var y=me;C!==void 0&&C.texture.dispose();const S=p.morphAttributes.position!==void 0,R=p.morphAttributes.normal!==void 0,N=p.morphAttributes.color!==void 0,I=p.morphAttributes.position||[],O=p.morphAttributes.normal||[],j=p.morphAttributes.color||[];let F=0;S===!0&&(F=1),R===!0&&(F=2),N===!0&&(F=3);let H=p.attributes.position.count*F,ee=1;H>e.maxTextureSize&&(ee=Math.ceil(H/e.maxTextureSize),H=e.maxTextureSize);const de=new Float32Array(H*ee*4*w),ve=new Ng(de,H,ee,w);ve.type=bi,ve.needsUpdate=!0;const Y=F*4;for(let pe=0;pe<w;pe++){const Ae=I[pe],te=O[pe],ce=j[pe],ne=H*ee*4*pe;for(let z=0;z<Ae.count;z++){const K=z*Y;S===!0&&(o.fromBufferAttribute(Ae,z),de[ne+K+0]=o.x,de[ne+K+1]=o.y,de[ne+K+2]=o.z,de[ne+K+3]=0),R===!0&&(o.fromBufferAttribute(te,z),de[ne+K+4]=o.x,de[ne+K+5]=o.y,de[ne+K+6]=o.z,de[ne+K+7]=0),N===!0&&(o.fromBufferAttribute(ce,z),de[ne+K+8]=o.x,de[ne+K+9]=o.y,de[ne+K+10]=o.z,de[ne+K+11]=ce.itemSize===4?o.w:1)}}C={count:w,texture:ve,size:new Ue(H,ee)},s.set(p,C),p.addEventListener("dispose",me)}let x=0;for(let S=0;S<v.length;S++)x+=v[S];const M=p.morphTargetsRelative?1:1-x;m.getUniforms().setValue(r,"morphTargetBaseInfluence",M),m.getUniforms().setValue(r,"morphTargetInfluences",v),m.getUniforms().setValue(r,"morphTargetsTexture",C.texture,t),m.getUniforms().setValue(r,"morphTargetsTextureSize",C.size)}else{const E=v===void 0?0:v.length;let w=n[p.id];if(w===void 0||w.length!==E){w=[];for(let R=0;R<E;R++)w[R]=[R,0];n[p.id]=w}for(let R=0;R<E;R++){const N=w[R];N[0]=R,N[1]=v[R]}w.sort(LL);for(let R=0;R<8;R++)R<E&&w[R][1]?(l[R][0]=w[R][0],l[R][1]=w[R][1]):(l[R][0]=Number.MAX_SAFE_INTEGER,l[R][1]=0);l.sort(PL);const C=p.morphAttributes.position,x=p.morphAttributes.normal;let M=0;for(let R=0;R<8;R++){const N=l[R],I=N[0],O=N[1];I!==Number.MAX_SAFE_INTEGER&&O?(C&&p.getAttribute("morphTarget"+R)!==C[I]&&p.setAttribute("morphTarget"+R,C[I]),x&&p.getAttribute("morphNormal"+R)!==x[I]&&p.setAttribute("morphNormal"+R,x[I]),i[R]=O,M+=O):(C&&p.hasAttribute("morphTarget"+R)===!0&&p.deleteAttribute("morphTarget"+R),x&&p.hasAttribute("morphNormal"+R)===!0&&p.deleteAttribute("morphNormal"+R),i[R]=0)}const S=p.morphTargetsRelative?1:1-M;m.getUniforms().setValue(r,"morphTargetBaseInfluence",S),m.getUniforms().setValue(r,"morphTargetInfluences",i)}}return{update:u}}function NL(r,e,t,n){let i=new WeakMap;function s(u){const h=n.render.frame,p=u.geometry,m=e.get(u,p);if(i.get(m)!==h&&(e.update(m),i.set(m,h)),u.isInstancedMesh&&(u.hasEventListener("dispose",l)===!1&&u.addEventListener("dispose",l),i.get(u)!==h&&(t.update(u.instanceMatrix,r.ARRAY_BUFFER),u.instanceColor!==null&&t.update(u.instanceColor,r.ARRAY_BUFFER),i.set(u,h))),u.isSkinnedMesh){const v=u.skeleton;i.get(v)!==h&&(v.update(),i.set(v,h))}return m}function o(){i=new WeakMap}function l(u){const h=u.target;h.removeEventListener("dispose",l),t.remove(h.instanceMatrix),h.instanceColor!==null&&t.remove(h.instanceColor)}return{update:s,dispose:o}}const V1=new ar,W1=new Ng,J1=new MA,X1=new Vp,s_=[],o_=[],a_=new Float32Array(16),l_=new Float32Array(9),c_=new Float32Array(4);function Nh(r,e,t){const n=r[0];if(n<=0||n>0)return r;const i=e*t;let s=s_[i];if(s===void 0&&(s=new Float32Array(i),s_[i]=s),e!==0){n.toArray(s,0);for(let o=1,l=0;o!==e;++o)l+=t,r[o].toArray(s,l)}return s}function Kr(r,e){if(r.length!==e.length)return!1;for(let t=0,n=r.length;t<n;t++)if(r[t]!==e[t])return!1;return!0}function qr(r,e){for(let t=0,n=e.length;t<n;t++)r[t]=e[t]}function kg(r,e){let t=o_[e];t===void 0&&(t=new Int32Array(e),o_[e]=t);for(let n=0;n!==e;++n)t[n]=r.allocateTextureUnit();return t}function FL(r,e){const t=this.cache;t[0]!==e&&(r.uniform1f(this.addr,e),t[0]=e)}function kL(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Kr(t,e))return;r.uniform2fv(this.addr,e),qr(t,e)}}function OL(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(r.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Kr(t,e))return;r.uniform3fv(this.addr,e),qr(t,e)}}function UL(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Kr(t,e))return;r.uniform4fv(this.addr,e),qr(t,e)}}function HL(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(Kr(t,e))return;r.uniformMatrix2fv(this.addr,!1,e),qr(t,e)}else{if(Kr(t,n))return;c_.set(n),r.uniformMatrix2fv(this.addr,!1,c_),qr(t,n)}}function zL(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(Kr(t,e))return;r.uniformMatrix3fv(this.addr,!1,e),qr(t,e)}else{if(Kr(t,n))return;l_.set(n),r.uniformMatrix3fv(this.addr,!1,l_),qr(t,n)}}function GL(r,e){const t=this.cache,n=e.elements;if(n===void 0){if(Kr(t,e))return;r.uniformMatrix4fv(this.addr,!1,e),qr(t,e)}else{if(Kr(t,n))return;a_.set(n),r.uniformMatrix4fv(this.addr,!1,a_),qr(t,n)}}function jL(r,e){const t=this.cache;t[0]!==e&&(r.uniform1i(this.addr,e),t[0]=e)}function VL(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Kr(t,e))return;r.uniform2iv(this.addr,e),qr(t,e)}}function WL(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Kr(t,e))return;r.uniform3iv(this.addr,e),qr(t,e)}}function JL(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Kr(t,e))return;r.uniform4iv(this.addr,e),qr(t,e)}}function XL(r,e){const t=this.cache;t[0]!==e&&(r.uniform1ui(this.addr,e),t[0]=e)}function KL(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Kr(t,e))return;r.uniform2uiv(this.addr,e),qr(t,e)}}function qL(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Kr(t,e))return;r.uniform3uiv(this.addr,e),qr(t,e)}}function YL(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Kr(t,e))return;r.uniform4uiv(this.addr,e),qr(t,e)}}function $L(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture2D(e||V1,i)}function QL(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture3D(e||J1,i)}function ZL(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTextureCube(e||X1,i)}function e9(r,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(r.uniform1i(this.addr,i),n[0]=i),t.setTexture2DArray(e||W1,i)}function t9(r){switch(r){case 5126:return FL;case 35664:return kL;case 35665:return OL;case 35666:return UL;case 35674:return HL;case 35675:return zL;case 35676:return GL;case 5124:case 35670:return jL;case 35667:case 35671:return VL;case 35668:case 35672:return WL;case 35669:case 35673:return JL;case 5125:return XL;case 36294:return KL;case 36295:return qL;case 36296:return YL;case 35678:case 36198:case 36298:case 36306:case 35682:return $L;case 35679:case 36299:case 36307:return QL;case 35680:case 36300:case 36308:case 36293:return ZL;case 36289:case 36303:case 36311:case 36292:return e9}}function n9(r,e){r.uniform1fv(this.addr,e)}function r9(r,e){const t=Nh(e,this.size,2);r.uniform2fv(this.addr,t)}function i9(r,e){const t=Nh(e,this.size,3);r.uniform3fv(this.addr,t)}function s9(r,e){const t=Nh(e,this.size,4);r.uniform4fv(this.addr,t)}function o9(r,e){const t=Nh(e,this.size,4);r.uniformMatrix2fv(this.addr,!1,t)}function a9(r,e){const t=Nh(e,this.size,9);r.uniformMatrix3fv(this.addr,!1,t)}function l9(r,e){const t=Nh(e,this.size,16);r.uniformMatrix4fv(this.addr,!1,t)}function c9(r,e){r.uniform1iv(this.addr,e)}function u9(r,e){r.uniform2iv(this.addr,e)}function d9(r,e){r.uniform3iv(this.addr,e)}function h9(r,e){r.uniform4iv(this.addr,e)}function f9(r,e){r.uniform1uiv(this.addr,e)}function p9(r,e){r.uniform2uiv(this.addr,e)}function m9(r,e){r.uniform3uiv(this.addr,e)}function g9(r,e){r.uniform4uiv(this.addr,e)}function v9(r,e,t){const n=this.cache,i=e.length,s=kg(t,i);Kr(n,s)||(r.uniform1iv(this.addr,s),qr(n,s));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||V1,s[o])}function y9(r,e,t){const n=this.cache,i=e.length,s=kg(t,i);Kr(n,s)||(r.uniform1iv(this.addr,s),qr(n,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||J1,s[o])}function A9(r,e,t){const n=this.cache,i=e.length,s=kg(t,i);Kr(n,s)||(r.uniform1iv(this.addr,s),qr(n,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||X1,s[o])}function E9(r,e,t){const n=this.cache,i=e.length,s=kg(t,i);Kr(n,s)||(r.uniform1iv(this.addr,s),qr(n,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||W1,s[o])}function x9(r){switch(r){case 5126:return n9;case 35664:return r9;case 35665:return i9;case 35666:return s9;case 35674:return o9;case 35675:return a9;case 35676:return l9;case 5124:case 35670:return c9;case 35667:case 35671:return u9;case 35668:case 35672:return d9;case 35669:case 35673:return h9;case 5125:return f9;case 36294:return p9;case 36295:return m9;case 36296:return g9;case 35678:case 36198:case 36298:case 36306:case 35682:return v9;case 35679:case 36299:case 36307:return y9;case 35680:case 36300:case 36308:case 36293:return A9;case 36289:case 36303:case 36311:case 36292:return E9}}class _9{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=t9(t.type)}}class C9{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=x9(t.type)}}class w9{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const l=i[s];l.setValue(e,t[l.id],n)}}}const vv=/(\w+)(\])?(\[|\.)?/g;function u_(r,e){r.seq.push(e),r.map[e.id]=e}function S9(r,e,t){const n=r.name,i=n.length;for(vv.lastIndex=0;;){const s=vv.exec(n),o=vv.lastIndex;let l=s[1];const u=s[2]==="]",h=s[3];if(u&&(l=l|0),h===void 0||h==="["&&o+2===i){u_(t,h===void 0?new _9(l,r,e):new C9(l,r,e));break}else{let m=t.map[l];m===void 0&&(m=new w9(l),u_(t,m)),t=m}}}class ag{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<n;++i){const s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);S9(s,o,this)}}setValue(e,t,n,i){const s=this.map[t];s!==void 0&&s.setValue(e,n,i)}setOptional(e,t,n){const i=t[n];i!==void 0&&this.setValue(e,n,i)}static upload(e,t,n,i){for(let s=0,o=t.length;s!==o;++s){const l=t[s],u=n[l.id];u.needsUpdate!==!1&&l.setValue(e,u.value,i)}}static seqWithValue(e,t){const n=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&n.push(o)}return n}}function d_(r,e,t){const n=r.createShader(e);return r.shaderSource(n,t),r.compileShader(n),n}const B9=37297;let b9=0;function M9(r,e){const t=r.split(`
`),n=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const l=o+1;n.push(`${l===e?">":" "} ${l}: ${t[o]}`)}return n.join(`
`)}function T9(r){const e=On.getPrimaries(On.workingColorSpace),t=On.getPrimaries(r);let n;switch(e===t?n="":e===wp&&t===Cp?n="LinearDisplayP3ToLinearSRGB":e===Cp&&t===wp&&(n="LinearSRGBToLinearDisplayP3"),r){case Zo:case zp:return[n,"LinearTransferOETF"];case Xr:case Ig:return[n,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",r),[n,"LinearTransferOETF"]}}function h_(r,e,t){const n=r.getShaderParameter(e,r.COMPILE_STATUS),i=r.getShaderInfoLog(e).trim();if(n&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+M9(r.getShaderSource(e),o)}else return i}function R9(r,e){const t=T9(e);return`vec4 ${r}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function D9(r,e){let t;switch(e){case l1:t="Linear";break;case c1:t="Reinhard";break;case u1:t="OptimizedCineon";break;case mA:t="ACESFilmic";break;case d1:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+r+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function P9(r){return[r.extensionDerivatives||r.envMapCubeUVHeight||r.bumpMap||r.normalMapTangentSpace||r.clearcoatNormalMap||r.flatShading||r.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(r.extensionFragDepth||r.logarithmicDepthBuffer)&&r.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",r.extensionDrawBuffers&&r.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(r.extensionShaderTextureLOD||r.envMap||r.transmission)&&r.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(ep).join(`
`)}function L9(r){const e=[];for(const t in r){const n=r[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function I9(r,e){const t={},n=r.getProgramParameter(e,r.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){const s=r.getActiveAttrib(e,i),o=s.name;let l=1;s.type===r.FLOAT_MAT2&&(l=2),s.type===r.FLOAT_MAT3&&(l=3),s.type===r.FLOAT_MAT4&&(l=4),t[o]={type:s.type,location:r.getAttribLocation(e,o),locationSize:l}}return t}function ep(r){return r!==""}function f_(r,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return r.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function p_(r,e){return r.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const N9=/^[ \t]*#include +<([\w\d./]+)>/gm;function qy(r){return r.replace(N9,k9)}const F9=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function k9(r,e){let t=hn[e];if(t===void 0){const n=F9.get(e);if(n!==void 0)t=hn[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return qy(t)}const O9=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function m_(r){return r.replace(O9,U9)}function U9(r,e,t,n){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function g_(r){let e="precision "+r.precision+` float;
precision `+r.precision+" int;";return r.precision==="highp"?e+=`
#define HIGH_PRECISION`:r.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:r.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function H9(r){let e="SHADOWMAP_TYPE_BASIC";return r.shadowMapType===Tg?e="SHADOWMAP_TYPE_PCF":r.shadowMapType===rp?e="SHADOWMAP_TYPE_PCF_SOFT":r.shadowMapType===So&&(e="SHADOWMAP_TYPE_VSM"),e}function z9(r){let e="ENVMAP_TYPE_CUBE";if(r.envMap)switch(r.envMapMode){case $o:case Yl:e="ENVMAP_TYPE_CUBE";break;case Lh:e="ENVMAP_TYPE_CUBE_UV";break}return e}function G9(r){let e="ENVMAP_MODE_REFLECTION";if(r.envMap)switch(r.envMapMode){case Yl:e="ENVMAP_MODE_REFRACTION";break}return e}function j9(r){let e="ENVMAP_BLENDING_NONE";if(r.envMap)switch(r.combine){case Hp:e="ENVMAP_BLENDING_MULTIPLY";break;case o1:e="ENVMAP_BLENDING_MIX";break;case a1:e="ENVMAP_BLENDING_ADD";break}return e}function V9(r){const e=r.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:n,maxMip:t}}function W9(r,e,t,n){const i=r.getContext(),s=t.defines;let o=t.vertexShader,l=t.fragmentShader;const u=H9(t),h=z9(t),p=G9(t),m=j9(t),v=V9(t),y=t.isWebGL2?"":P9(t),E=L9(s),w=i.createProgram();let C,x,M=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(C=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,E].filter(ep).join(`
`),C.length>0&&(C+=`
`),x=[y,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,E].filter(ep).join(`
`),x.length>0&&(x+=`
`)):(C=[g_(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,E,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+p:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+u:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(ep).join(`
`),x=[y,g_(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,E,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.envMap?"#define "+p:"",t.envMap?"#define "+m:"",v?"#define CUBEUV_TEXEL_WIDTH "+v.texelWidth:"",v?"#define CUBEUV_TEXEL_HEIGHT "+v.texelHeight:"",v?"#define CUBEUV_MAX_MIP "+v.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+u:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Jo?"#define TONE_MAPPING":"",t.toneMapping!==Jo?hn.tonemapping_pars_fragment:"",t.toneMapping!==Jo?D9("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",hn.colorspace_pars_fragment,R9("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(ep).join(`
`)),o=qy(o),o=f_(o,t),o=p_(o,t),l=qy(l),l=f_(l,t),l=p_(l,t),o=m_(o),l=m_(l),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(M=`#version 300 es
`,C=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+C,x=["precision mediump sampler2DArray;","#define varying in",t.glslVersion===Jy?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===Jy?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+x);const S=M+C+o,R=M+x+l,N=d_(i,i.VERTEX_SHADER,S),I=d_(i,i.FRAGMENT_SHADER,R);i.attachShader(w,N),i.attachShader(w,I),t.index0AttributeName!==void 0?i.bindAttribLocation(w,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(w,0,"position"),i.linkProgram(w);function O(ee){if(r.debug.checkShaderErrors){const de=i.getProgramInfoLog(w).trim(),ve=i.getShaderInfoLog(N).trim(),Y=i.getShaderInfoLog(I).trim();let me=!0,pe=!0;if(i.getProgramParameter(w,i.LINK_STATUS)===!1)if(me=!1,typeof r.debug.onShaderError=="function")r.debug.onShaderError(i,w,N,I);else{const Ae=h_(i,N,"vertex"),te=h_(i,I,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(w,i.VALIDATE_STATUS)+`

Program Info Log: `+de+`
`+Ae+`
`+te)}else de!==""?console.warn("THREE.WebGLProgram: Program Info Log:",de):(ve===""||Y==="")&&(pe=!1);pe&&(ee.diagnostics={runnable:me,programLog:de,vertexShader:{log:ve,prefix:C},fragmentShader:{log:Y,prefix:x}})}i.deleteShader(N),i.deleteShader(I),j=new ag(i,w),F=I9(i,w)}let j;this.getUniforms=function(){return j===void 0&&O(this),j};let F;this.getAttributes=function(){return F===void 0&&O(this),F};let H=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return H===!1&&(H=i.getProgramParameter(w,B9)),H},this.destroy=function(){n.releaseStatesOfProgram(this),i.deleteProgram(w),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=b9++,this.cacheKey=e,this.usedTimes=1,this.program=w,this.vertexShader=N,this.fragmentShader=I,this}let J9=0;class X9{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new K9(e),t.set(e,n)),n}}class K9{constructor(e){this.id=J9++,this.code=e,this.usedTimes=0}}function q9(r,e,t,n,i,s,o){const l=new Eu,u=new X9,h=[],p=i.isWebGL2,m=i.logarithmicDepthBuffer,v=i.vertexTextures;let y=i.precision;const E={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function w(F){return F===0?"uv":`uv${F}`}function C(F,H,ee,de,ve){const Y=de.fog,me=ve.geometry,pe=F.isMeshStandardMaterial?de.environment:null,Ae=(F.isMeshStandardMaterial?t:e).get(F.envMap||pe),te=Ae&&Ae.mapping===Lh?Ae.image.height:null,ce=E[F.type];F.precision!==null&&(y=i.getMaxPrecision(F.precision),y!==F.precision&&console.warn("THREE.WebGLProgram.getParameters:",F.precision,"not supported, using",y,"instead."));const ne=me.morphAttributes.position||me.morphAttributes.normal||me.morphAttributes.color,z=ne!==void 0?ne.length:0;let K=0;me.morphAttributes.position!==void 0&&(K=1),me.morphAttributes.normal!==void 0&&(K=2),me.morphAttributes.color!==void 0&&(K=3);let xe,De,Ie,Oe;if(ce){const xn=bo[ce];xe=xn.vertexShader,De=xn.fragmentShader}else xe=F.vertexShader,De=F.fragmentShader,u.update(F),Ie=u.getVertexShaderID(F),Oe=u.getFragmentShaderID(F);const tt=r.getRenderTarget(),rt=ve.isInstancedMesh===!0,gt=!!F.map,kt=!!F.matcap,xt=!!Ae,se=!!F.aoMap,Je=!!F.lightMap,Fe=!!F.bumpMap,$e=!!F.normalMap,ze=!!F.displacementMap,bt=!!F.emissiveMap,ft=!!F.metalnessMap,yt=!!F.roughnessMap,Lt=F.anisotropy>0,Kt=F.clearcoat>0,Mn=F.iridescence>0,Z=F.sheen>0,W=F.transmission>0,Se=Lt&&!!F.anisotropyMap,Ze=Kt&&!!F.clearcoatMap,Ve=Kt&&!!F.clearcoatNormalMap,Ye=Kt&&!!F.clearcoatRoughnessMap,Ct=Mn&&!!F.iridescenceMap,nt=Mn&&!!F.iridescenceThicknessMap,ct=Z&&!!F.sheenColorMap,Ut=Z&&!!F.sheenRoughnessMap,rn=!!F.specularMap,Ge=!!F.specularColorMap,gn=!!F.specularIntensityMap,ae=W&&!!F.transmissionMap,Me=W&&!!F.thicknessMap,He=!!F.gradientMap,We=!!F.alphaMap,ke=F.alphaTest>0,ue=!!F.alphaHash,ot=!!F.extensions,it=!!me.attributes.uv1,Ne=!!me.attributes.uv2,Qe=!!me.attributes.uv3;let Bt=Jo;return F.toneMapped&&(tt===null||tt.isXRRenderTarget===!0)&&(Bt=r.toneMapping),{isWebGL2:p,shaderID:ce,shaderType:F.type,shaderName:F.name,vertexShader:xe,fragmentShader:De,defines:F.defines,customVertexShaderID:Ie,customFragmentShaderID:Oe,isRawShaderMaterial:F.isRawShaderMaterial===!0,glslVersion:F.glslVersion,precision:y,instancing:rt,instancingColor:rt&&ve.instanceColor!==null,supportsVertexTextures:v,outputColorSpace:tt===null?r.outputColorSpace:tt.isXRRenderTarget===!0?tt.texture.colorSpace:Zo,map:gt,matcap:kt,envMap:xt,envMapMode:xt&&Ae.mapping,envMapCubeUVHeight:te,aoMap:se,lightMap:Je,bumpMap:Fe,normalMap:$e,displacementMap:v&&ze,emissiveMap:bt,normalMapObjectSpace:$e&&F.normalMapType===b1,normalMapTangentSpace:$e&&F.normalMapType===nc,metalnessMap:ft,roughnessMap:yt,anisotropy:Lt,anisotropyMap:Se,clearcoat:Kt,clearcoatMap:Ze,clearcoatNormalMap:Ve,clearcoatRoughnessMap:Ye,iridescence:Mn,iridescenceMap:Ct,iridescenceThicknessMap:nt,sheen:Z,sheenColorMap:ct,sheenRoughnessMap:Ut,specularMap:rn,specularColorMap:Ge,specularIntensityMap:gn,transmission:W,transmissionMap:ae,thicknessMap:Me,gradientMap:He,opaque:F.transparent===!1&&F.blending===yu,alphaMap:We,alphaTest:ke,alphaHash:ue,combine:F.combine,mapUv:gt&&w(F.map.channel),aoMapUv:se&&w(F.aoMap.channel),lightMapUv:Je&&w(F.lightMap.channel),bumpMapUv:Fe&&w(F.bumpMap.channel),normalMapUv:$e&&w(F.normalMap.channel),displacementMapUv:ze&&w(F.displacementMap.channel),emissiveMapUv:bt&&w(F.emissiveMap.channel),metalnessMapUv:ft&&w(F.metalnessMap.channel),roughnessMapUv:yt&&w(F.roughnessMap.channel),anisotropyMapUv:Se&&w(F.anisotropyMap.channel),clearcoatMapUv:Ze&&w(F.clearcoatMap.channel),clearcoatNormalMapUv:Ve&&w(F.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ye&&w(F.clearcoatRoughnessMap.channel),iridescenceMapUv:Ct&&w(F.iridescenceMap.channel),iridescenceThicknessMapUv:nt&&w(F.iridescenceThicknessMap.channel),sheenColorMapUv:ct&&w(F.sheenColorMap.channel),sheenRoughnessMapUv:Ut&&w(F.sheenRoughnessMap.channel),specularMapUv:rn&&w(F.specularMap.channel),specularColorMapUv:Ge&&w(F.specularColorMap.channel),specularIntensityMapUv:gn&&w(F.specularIntensityMap.channel),transmissionMapUv:ae&&w(F.transmissionMap.channel),thicknessMapUv:Me&&w(F.thicknessMap.channel),alphaMapUv:We&&w(F.alphaMap.channel),vertexTangents:!!me.attributes.tangent&&($e||Lt),vertexColors:F.vertexColors,vertexAlphas:F.vertexColors===!0&&!!me.attributes.color&&me.attributes.color.itemSize===4,vertexUv1s:it,vertexUv2s:Ne,vertexUv3s:Qe,pointsUvs:ve.isPoints===!0&&!!me.attributes.uv&&(gt||We),fog:!!Y,useFog:F.fog===!0,fogExp2:Y&&Y.isFogExp2,flatShading:F.flatShading===!0,sizeAttenuation:F.sizeAttenuation===!0,logarithmicDepthBuffer:m,skinning:ve.isSkinnedMesh===!0,morphTargets:me.morphAttributes.position!==void 0,morphNormals:me.morphAttributes.normal!==void 0,morphColors:me.morphAttributes.color!==void 0,morphTargetsCount:z,morphTextureStride:K,numDirLights:H.directional.length,numPointLights:H.point.length,numSpotLights:H.spot.length,numSpotLightMaps:H.spotLightMap.length,numRectAreaLights:H.rectArea.length,numHemiLights:H.hemi.length,numDirLightShadows:H.directionalShadowMap.length,numPointLightShadows:H.pointShadowMap.length,numSpotLightShadows:H.spotShadowMap.length,numSpotLightShadowsWithMaps:H.numSpotLightShadowsWithMaps,numLightProbes:H.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:F.dithering,shadowMapEnabled:r.shadowMap.enabled&&ee.length>0,shadowMapType:r.shadowMap.type,toneMapping:Bt,useLegacyLights:r._useLegacyLights,decodeVideoTexture:gt&&F.map.isVideoTexture===!0&&On.getTransfer(F.map.colorSpace)===$n,premultipliedAlpha:F.premultipliedAlpha,doubleSided:F.side===Vs,flipSided:F.side===Vi,useDepthPacking:F.depthPacking>=0,depthPacking:F.depthPacking||0,index0AttributeName:F.index0AttributeName,extensionDerivatives:ot&&F.extensions.derivatives===!0,extensionFragDepth:ot&&F.extensions.fragDepth===!0,extensionDrawBuffers:ot&&F.extensions.drawBuffers===!0,extensionShaderTextureLOD:ot&&F.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:p||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:p||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:p||n.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:F.customProgramCacheKey()}}function x(F){const H=[];if(F.shaderID?H.push(F.shaderID):(H.push(F.customVertexShaderID),H.push(F.customFragmentShaderID)),F.defines!==void 0)for(const ee in F.defines)H.push(ee),H.push(F.defines[ee]);return F.isRawShaderMaterial===!1&&(M(H,F),S(H,F),H.push(r.outputColorSpace)),H.push(F.customProgramCacheKey),H.join()}function M(F,H){F.push(H.precision),F.push(H.outputColorSpace),F.push(H.envMapMode),F.push(H.envMapCubeUVHeight),F.push(H.mapUv),F.push(H.alphaMapUv),F.push(H.lightMapUv),F.push(H.aoMapUv),F.push(H.bumpMapUv),F.push(H.normalMapUv),F.push(H.displacementMapUv),F.push(H.emissiveMapUv),F.push(H.metalnessMapUv),F.push(H.roughnessMapUv),F.push(H.anisotropyMapUv),F.push(H.clearcoatMapUv),F.push(H.clearcoatNormalMapUv),F.push(H.clearcoatRoughnessMapUv),F.push(H.iridescenceMapUv),F.push(H.iridescenceThicknessMapUv),F.push(H.sheenColorMapUv),F.push(H.sheenRoughnessMapUv),F.push(H.specularMapUv),F.push(H.specularColorMapUv),F.push(H.specularIntensityMapUv),F.push(H.transmissionMapUv),F.push(H.thicknessMapUv),F.push(H.combine),F.push(H.fogExp2),F.push(H.sizeAttenuation),F.push(H.morphTargetsCount),F.push(H.morphAttributeCount),F.push(H.numDirLights),F.push(H.numPointLights),F.push(H.numSpotLights),F.push(H.numSpotLightMaps),F.push(H.numHemiLights),F.push(H.numRectAreaLights),F.push(H.numDirLightShadows),F.push(H.numPointLightShadows),F.push(H.numSpotLightShadows),F.push(H.numSpotLightShadowsWithMaps),F.push(H.numLightProbes),F.push(H.shadowMapType),F.push(H.toneMapping),F.push(H.numClippingPlanes),F.push(H.numClipIntersection),F.push(H.depthPacking)}function S(F,H){l.disableAll(),H.isWebGL2&&l.enable(0),H.supportsVertexTextures&&l.enable(1),H.instancing&&l.enable(2),H.instancingColor&&l.enable(3),H.matcap&&l.enable(4),H.envMap&&l.enable(5),H.normalMapObjectSpace&&l.enable(6),H.normalMapTangentSpace&&l.enable(7),H.clearcoat&&l.enable(8),H.iridescence&&l.enable(9),H.alphaTest&&l.enable(10),H.vertexColors&&l.enable(11),H.vertexAlphas&&l.enable(12),H.vertexUv1s&&l.enable(13),H.vertexUv2s&&l.enable(14),H.vertexUv3s&&l.enable(15),H.vertexTangents&&l.enable(16),H.anisotropy&&l.enable(17),H.alphaHash&&l.enable(18),F.push(l.mask),l.disableAll(),H.fog&&l.enable(0),H.useFog&&l.enable(1),H.flatShading&&l.enable(2),H.logarithmicDepthBuffer&&l.enable(3),H.skinning&&l.enable(4),H.morphTargets&&l.enable(5),H.morphNormals&&l.enable(6),H.morphColors&&l.enable(7),H.premultipliedAlpha&&l.enable(8),H.shadowMapEnabled&&l.enable(9),H.useLegacyLights&&l.enable(10),H.doubleSided&&l.enable(11),H.flipSided&&l.enable(12),H.useDepthPacking&&l.enable(13),H.dithering&&l.enable(14),H.transmission&&l.enable(15),H.sheen&&l.enable(16),H.opaque&&l.enable(17),H.pointsUvs&&l.enable(18),H.decodeVideoTexture&&l.enable(19),F.push(l.mask)}function R(F){const H=E[F.type];let ee;if(H){const de=bo[H];ee=DA.clone(de.uniforms)}else ee=F.uniforms;return ee}function N(F,H){let ee;for(let de=0,ve=h.length;de<ve;de++){const Y=h[de];if(Y.cacheKey===H){ee=Y,++ee.usedTimes;break}}return ee===void 0&&(ee=new W9(r,H,F,s),h.push(ee)),ee}function I(F){if(--F.usedTimes===0){const H=h.indexOf(F);h[H]=h[h.length-1],h.pop(),F.destroy()}}function O(F){u.remove(F)}function j(){u.dispose()}return{getParameters:C,getProgramCacheKey:x,getUniforms:R,acquireProgram:N,releaseProgram:I,releaseShaderCache:O,programs:h,dispose:j}}function Y9(){let r=new WeakMap;function e(s){let o=r.get(s);return o===void 0&&(o={},r.set(s,o)),o}function t(s){r.delete(s)}function n(s,o,l){r.get(s)[o]=l}function i(){r=new WeakMap}return{get:e,remove:t,update:n,dispose:i}}function $9(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.material.id!==e.material.id?r.material.id-e.material.id:r.z!==e.z?r.z-e.z:r.id-e.id}function v_(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.z!==e.z?e.z-r.z:r.id-e.id}function y_(){const r=[];let e=0;const t=[],n=[],i=[];function s(){e=0,t.length=0,n.length=0,i.length=0}function o(m,v,y,E,w,C){let x=r[e];return x===void 0?(x={id:m.id,object:m,geometry:v,material:y,groupOrder:E,renderOrder:m.renderOrder,z:w,group:C},r[e]=x):(x.id=m.id,x.object=m,x.geometry=v,x.material=y,x.groupOrder=E,x.renderOrder=m.renderOrder,x.z=w,x.group=C),e++,x}function l(m,v,y,E,w,C){const x=o(m,v,y,E,w,C);y.transmission>0?n.push(x):y.transparent===!0?i.push(x):t.push(x)}function u(m,v,y,E,w,C){const x=o(m,v,y,E,w,C);y.transmission>0?n.unshift(x):y.transparent===!0?i.unshift(x):t.unshift(x)}function h(m,v){t.length>1&&t.sort(m||$9),n.length>1&&n.sort(v||v_),i.length>1&&i.sort(v||v_)}function p(){for(let m=e,v=r.length;m<v;m++){const y=r[m];if(y.id===null)break;y.id=null,y.object=null,y.geometry=null,y.material=null,y.group=null}}return{opaque:t,transmissive:n,transparent:i,init:s,push:l,unshift:u,finish:p,sort:h}}function Q9(){let r=new WeakMap;function e(n,i){const s=r.get(n);let o;return s===void 0?(o=new y_,r.set(n,[o])):i>=s.length?(o=new y_,s.push(o)):o=s[i],o}function t(){r=new WeakMap}return{get:e,dispose:t}}function Z9(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new X,color:new ht};break;case"SpotLight":t={position:new X,direction:new X,color:new ht,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new X,color:new ht,distance:0,decay:0};break;case"HemisphereLight":t={direction:new X,skyColor:new ht,groundColor:new ht};break;case"RectAreaLight":t={color:new ht,position:new X,halfWidth:new X,halfHeight:new X};break}return r[e.id]=t,t}}}function eI(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ue};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ue};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ue,shadowCameraNear:1,shadowCameraFar:1e3};break}return r[e.id]=t,t}}}let tI=0;function nI(r,e){return(e.castShadow?2:0)-(r.castShadow?2:0)+(e.map?1:0)-(r.map?1:0)}function rI(r,e){const t=new Z9,n=eI(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let p=0;p<9;p++)i.probe.push(new X);const s=new X,o=new $t,l=new $t;function u(p,m){let v=0,y=0,E=0;for(let de=0;de<9;de++)i.probe[de].set(0,0,0);let w=0,C=0,x=0,M=0,S=0,R=0,N=0,I=0,O=0,j=0,F=0;p.sort(nI);const H=m===!0?Math.PI:1;for(let de=0,ve=p.length;de<ve;de++){const Y=p[de],me=Y.color,pe=Y.intensity,Ae=Y.distance,te=Y.shadow&&Y.shadow.map?Y.shadow.map.texture:null;if(Y.isAmbientLight)v+=me.r*pe*H,y+=me.g*pe*H,E+=me.b*pe*H;else if(Y.isLightProbe){for(let ce=0;ce<9;ce++)i.probe[ce].addScaledVector(Y.sh.coefficients[ce],pe);F++}else if(Y.isDirectionalLight){const ce=t.get(Y);if(ce.color.copy(Y.color).multiplyScalar(Y.intensity*H),Y.castShadow){const ne=Y.shadow,z=n.get(Y);z.shadowBias=ne.bias,z.shadowNormalBias=ne.normalBias,z.shadowRadius=ne.radius,z.shadowMapSize=ne.mapSize,i.directionalShadow[w]=z,i.directionalShadowMap[w]=te,i.directionalShadowMatrix[w]=Y.shadow.matrix,R++}i.directional[w]=ce,w++}else if(Y.isSpotLight){const ce=t.get(Y);ce.position.setFromMatrixPosition(Y.matrixWorld),ce.color.copy(me).multiplyScalar(pe*H),ce.distance=Ae,ce.coneCos=Math.cos(Y.angle),ce.penumbraCos=Math.cos(Y.angle*(1-Y.penumbra)),ce.decay=Y.decay,i.spot[x]=ce;const ne=Y.shadow;if(Y.map&&(i.spotLightMap[O]=Y.map,O++,ne.updateMatrices(Y),Y.castShadow&&j++),i.spotLightMatrix[x]=ne.matrix,Y.castShadow){const z=n.get(Y);z.shadowBias=ne.bias,z.shadowNormalBias=ne.normalBias,z.shadowRadius=ne.radius,z.shadowMapSize=ne.mapSize,i.spotShadow[x]=z,i.spotShadowMap[x]=te,I++}x++}else if(Y.isRectAreaLight){const ce=t.get(Y);ce.color.copy(me).multiplyScalar(pe),ce.halfWidth.set(Y.width*.5,0,0),ce.halfHeight.set(0,Y.height*.5,0),i.rectArea[M]=ce,M++}else if(Y.isPointLight){const ce=t.get(Y);if(ce.color.copy(Y.color).multiplyScalar(Y.intensity*H),ce.distance=Y.distance,ce.decay=Y.decay,Y.castShadow){const ne=Y.shadow,z=n.get(Y);z.shadowBias=ne.bias,z.shadowNormalBias=ne.normalBias,z.shadowRadius=ne.radius,z.shadowMapSize=ne.mapSize,z.shadowCameraNear=ne.camera.near,z.shadowCameraFar=ne.camera.far,i.pointShadow[C]=z,i.pointShadowMap[C]=te,i.pointShadowMatrix[C]=Y.shadow.matrix,N++}i.point[C]=ce,C++}else if(Y.isHemisphereLight){const ce=t.get(Y);ce.skyColor.copy(Y.color).multiplyScalar(pe*H),ce.groundColor.copy(Y.groundColor).multiplyScalar(pe*H),i.hemi[S]=ce,S++}}M>0&&(e.isWebGL2||r.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=pt.LTC_FLOAT_1,i.rectAreaLTC2=pt.LTC_FLOAT_2):r.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=pt.LTC_HALF_1,i.rectAreaLTC2=pt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=v,i.ambient[1]=y,i.ambient[2]=E;const ee=i.hash;(ee.directionalLength!==w||ee.pointLength!==C||ee.spotLength!==x||ee.rectAreaLength!==M||ee.hemiLength!==S||ee.numDirectionalShadows!==R||ee.numPointShadows!==N||ee.numSpotShadows!==I||ee.numSpotMaps!==O||ee.numLightProbes!==F)&&(i.directional.length=w,i.spot.length=x,i.rectArea.length=M,i.point.length=C,i.hemi.length=S,i.directionalShadow.length=R,i.directionalShadowMap.length=R,i.pointShadow.length=N,i.pointShadowMap.length=N,i.spotShadow.length=I,i.spotShadowMap.length=I,i.directionalShadowMatrix.length=R,i.pointShadowMatrix.length=N,i.spotLightMatrix.length=I+O-j,i.spotLightMap.length=O,i.numSpotLightShadowsWithMaps=j,i.numLightProbes=F,ee.directionalLength=w,ee.pointLength=C,ee.spotLength=x,ee.rectAreaLength=M,ee.hemiLength=S,ee.numDirectionalShadows=R,ee.numPointShadows=N,ee.numSpotShadows=I,ee.numSpotMaps=O,ee.numLightProbes=F,i.version=tI++)}function h(p,m){let v=0,y=0,E=0,w=0,C=0;const x=m.matrixWorldInverse;for(let M=0,S=p.length;M<S;M++){const R=p[M];if(R.isDirectionalLight){const N=i.directional[v];N.direction.setFromMatrixPosition(R.matrixWorld),s.setFromMatrixPosition(R.target.matrixWorld),N.direction.sub(s),N.direction.transformDirection(x),v++}else if(R.isSpotLight){const N=i.spot[E];N.position.setFromMatrixPosition(R.matrixWorld),N.position.applyMatrix4(x),N.direction.setFromMatrixPosition(R.matrixWorld),s.setFromMatrixPosition(R.target.matrixWorld),N.direction.sub(s),N.direction.transformDirection(x),E++}else if(R.isRectAreaLight){const N=i.rectArea[w];N.position.setFromMatrixPosition(R.matrixWorld),N.position.applyMatrix4(x),l.identity(),o.copy(R.matrixWorld),o.premultiply(x),l.extractRotation(o),N.halfWidth.set(R.width*.5,0,0),N.halfHeight.set(0,R.height*.5,0),N.halfWidth.applyMatrix4(l),N.halfHeight.applyMatrix4(l),w++}else if(R.isPointLight){const N=i.point[y];N.position.setFromMatrixPosition(R.matrixWorld),N.position.applyMatrix4(x),y++}else if(R.isHemisphereLight){const N=i.hemi[C];N.direction.setFromMatrixPosition(R.matrixWorld),N.direction.transformDirection(x),C++}}}return{setup:u,setupView:h,state:i}}function A_(r,e){const t=new rI(r,e),n=[],i=[];function s(){n.length=0,i.length=0}function o(m){n.push(m)}function l(m){i.push(m)}function u(m){t.setup(n,m)}function h(m){t.setupView(n,m)}return{init:s,state:{lightsArray:n,shadowsArray:i,lights:t},setupLights:u,setupLightsView:h,pushLight:o,pushShadow:l}}function iI(r,e){let t=new WeakMap;function n(s,o=0){const l=t.get(s);let u;return l===void 0?(u=new A_(r,e),t.set(s,[u])):o>=l.length?(u=new A_(r,e),l.push(u)):u=l[o],u}function i(){t=new WeakMap}return{get:n,dispose:i}}class Og extends Fr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=S1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class IA extends Fr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const sI=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,oI=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function aI(r,e,t){let n=new Fg;const i=new Ue,s=new Ue,o=new Un,l=new Og({depthPacking:B1}),u=new IA,h={},p=t.maxTextureSize,m={[Yo]:Vi,[Vi]:Yo,[Vs]:Vs},v=new as({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ue},radius:{value:4}},vertexShader:sI,fragmentShader:oI}),y=v.clone();y.defines.HORIZONTAL_PASS=1;const E=new cn;E.setAttribute("position",new Dn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const w=new Nr(E,v),C=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Tg;let x=this.type;this.render=function(N,I,O){if(C.enabled===!1||C.autoUpdate===!1&&C.needsUpdate===!1||N.length===0)return;const j=r.getRenderTarget(),F=r.getActiveCubeFace(),H=r.getActiveMipmapLevel(),ee=r.state;ee.setBlending(Xa),ee.buffers.color.setClear(1,1,1,1),ee.buffers.depth.setTest(!0),ee.setScissorTest(!1);const de=x!==So&&this.type===So,ve=x===So&&this.type!==So;for(let Y=0,me=N.length;Y<me;Y++){const pe=N[Y],Ae=pe.shadow;if(Ae===void 0){console.warn("THREE.WebGLShadowMap:",pe,"has no shadow.");continue}if(Ae.autoUpdate===!1&&Ae.needsUpdate===!1)continue;i.copy(Ae.mapSize);const te=Ae.getFrameExtents();if(i.multiply(te),s.copy(Ae.mapSize),(i.x>p||i.y>p)&&(i.x>p&&(s.x=Math.floor(p/te.x),i.x=s.x*te.x,Ae.mapSize.x=s.x),i.y>p&&(s.y=Math.floor(p/te.y),i.y=s.y*te.y,Ae.mapSize.y=s.y)),Ae.map===null||de===!0||ve===!0){const ne=this.type!==So?{minFilter:or,magFilter:or}:{};Ae.map!==null&&Ae.map.dispose(),Ae.map=new Wi(i.x,i.y,ne),Ae.map.texture.name=pe.name+".shadowMap",Ae.camera.updateProjectionMatrix()}r.setRenderTarget(Ae.map),r.clear();const ce=Ae.getViewportCount();for(let ne=0;ne<ce;ne++){const z=Ae.getViewport(ne);o.set(s.x*z.x,s.y*z.y,s.x*z.z,s.y*z.w),ee.viewport(o),Ae.updateMatrices(pe,ne),n=Ae.getFrustum(),R(I,O,Ae.camera,pe,this.type)}Ae.isPointLightShadow!==!0&&this.type===So&&M(Ae,O),Ae.needsUpdate=!1}x=this.type,C.needsUpdate=!1,r.setRenderTarget(j,F,H)};function M(N,I){const O=e.update(w);v.defines.VSM_SAMPLES!==N.blurSamples&&(v.defines.VSM_SAMPLES=N.blurSamples,y.defines.VSM_SAMPLES=N.blurSamples,v.needsUpdate=!0,y.needsUpdate=!0),N.mapPass===null&&(N.mapPass=new Wi(i.x,i.y)),v.uniforms.shadow_pass.value=N.map.texture,v.uniforms.resolution.value=N.mapSize,v.uniforms.radius.value=N.radius,r.setRenderTarget(N.mapPass),r.clear(),r.renderBufferDirect(I,null,O,v,w,null),y.uniforms.shadow_pass.value=N.mapPass.texture,y.uniforms.resolution.value=N.mapSize,y.uniforms.radius.value=N.radius,r.setRenderTarget(N.map),r.clear(),r.renderBufferDirect(I,null,O,y,w,null)}function S(N,I,O,j){let F=null;const H=O.isPointLight===!0?N.customDistanceMaterial:N.customDepthMaterial;if(H!==void 0)F=H;else if(F=O.isPointLight===!0?u:l,r.localClippingEnabled&&I.clipShadows===!0&&Array.isArray(I.clippingPlanes)&&I.clippingPlanes.length!==0||I.displacementMap&&I.displacementScale!==0||I.alphaMap&&I.alphaTest>0||I.map&&I.alphaTest>0){const ee=F.uuid,de=I.uuid;let ve=h[ee];ve===void 0&&(ve={},h[ee]=ve);let Y=ve[de];Y===void 0&&(Y=F.clone(),ve[de]=Y),F=Y}if(F.visible=I.visible,F.wireframe=I.wireframe,j===So?F.side=I.shadowSide!==null?I.shadowSide:I.side:F.side=I.shadowSide!==null?I.shadowSide:m[I.side],F.alphaMap=I.alphaMap,F.alphaTest=I.alphaTest,F.map=I.map,F.clipShadows=I.clipShadows,F.clippingPlanes=I.clippingPlanes,F.clipIntersection=I.clipIntersection,F.displacementMap=I.displacementMap,F.displacementScale=I.displacementScale,F.displacementBias=I.displacementBias,F.wireframeLinewidth=I.wireframeLinewidth,F.linewidth=I.linewidth,O.isPointLight===!0&&F.isMeshDistanceMaterial===!0){const ee=r.properties.get(F);ee.light=O}return F}function R(N,I,O,j,F){if(N.visible===!1)return;if(N.layers.test(I.layers)&&(N.isMesh||N.isLine||N.isPoints)&&(N.castShadow||N.receiveShadow&&F===So)&&(!N.frustumCulled||n.intersectsObject(N))){N.modelViewMatrix.multiplyMatrices(O.matrixWorldInverse,N.matrixWorld);const de=e.update(N),ve=N.material;if(Array.isArray(ve)){const Y=de.groups;for(let me=0,pe=Y.length;me<pe;me++){const Ae=Y[me],te=ve[Ae.materialIndex];if(te&&te.visible){const ce=S(N,te,j,F);r.renderBufferDirect(O,null,de,ce,N,Ae)}}}else if(ve.visible){const Y=S(N,ve,j,F);r.renderBufferDirect(O,null,de,Y,N,null)}}const ee=N.children;for(let de=0,ve=ee.length;de<ve;de++)R(ee[de],I,O,j,F)}}function lI(r,e,t){const n=t.isWebGL2;function i(){let ue=!1;const ot=new Un;let it=null;const Ne=new Un(0,0,0,0);return{setMask:function(Qe){it!==Qe&&!ue&&(r.colorMask(Qe,Qe,Qe,Qe),it=Qe)},setLocked:function(Qe){ue=Qe},setClear:function(Qe,Bt,tn,xn,Xn){Xn===!0&&(Qe*=xn,Bt*=xn,tn*=xn),ot.set(Qe,Bt,tn,xn),Ne.equals(ot)===!1&&(r.clearColor(Qe,Bt,tn,xn),Ne.copy(ot))},reset:function(){ue=!1,it=null,Ne.set(-1,0,0,0)}}}function s(){let ue=!1,ot=null,it=null,Ne=null;return{setTest:function(Qe){Qe?gt(r.DEPTH_TEST):kt(r.DEPTH_TEST)},setMask:function(Qe){ot!==Qe&&!ue&&(r.depthMask(Qe),ot=Qe)},setFunc:function(Qe){if(it!==Qe){switch(Qe){case Zw:r.depthFunc(r.NEVER);break;case e1:r.depthFunc(r.ALWAYS);break;case t1:r.depthFunc(r.LESS);break;case yp:r.depthFunc(r.LEQUAL);break;case n1:r.depthFunc(r.EQUAL);break;case r1:r.depthFunc(r.GEQUAL);break;case i1:r.depthFunc(r.GREATER);break;case s1:r.depthFunc(r.NOTEQUAL);break;default:r.depthFunc(r.LEQUAL)}it=Qe}},setLocked:function(Qe){ue=Qe},setClear:function(Qe){Ne!==Qe&&(r.clearDepth(Qe),Ne=Qe)},reset:function(){ue=!1,ot=null,it=null,Ne=null}}}function o(){let ue=!1,ot=null,it=null,Ne=null,Qe=null,Bt=null,tn=null,xn=null,Xn=null;return{setTest:function(un){ue||(un?gt(r.STENCIL_TEST):kt(r.STENCIL_TEST))},setMask:function(un){ot!==un&&!ue&&(r.stencilMask(un),ot=un)},setFunc:function(un,lr,Br){(it!==un||Ne!==lr||Qe!==Br)&&(r.stencilFunc(un,lr,Br),it=un,Ne=lr,Qe=Br)},setOp:function(un,lr,Br){(Bt!==un||tn!==lr||xn!==Br)&&(r.stencilOp(un,lr,Br),Bt=un,tn=lr,xn=Br)},setLocked:function(un){ue=un},setClear:function(un){Xn!==un&&(r.clearStencil(un),Xn=un)},reset:function(){ue=!1,ot=null,it=null,Ne=null,Qe=null,Bt=null,tn=null,xn=null,Xn=null}}}const l=new i,u=new s,h=new o,p=new WeakMap,m=new WeakMap;let v={},y={},E=new WeakMap,w=[],C=null,x=!1,M=null,S=null,R=null,N=null,I=null,O=null,j=null,F=new ht(0,0,0),H=0,ee=!1,de=null,ve=null,Y=null,me=null,pe=null;const Ae=r.getParameter(r.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let te=!1,ce=0;const ne=r.getParameter(r.VERSION);ne.indexOf("WebGL")!==-1?(ce=parseFloat(/^WebGL (\d)/.exec(ne)[1]),te=ce>=1):ne.indexOf("OpenGL ES")!==-1&&(ce=parseFloat(/^OpenGL ES (\d)/.exec(ne)[1]),te=ce>=2);let z=null,K={};const xe=r.getParameter(r.SCISSOR_BOX),De=r.getParameter(r.VIEWPORT),Ie=new Un().fromArray(xe),Oe=new Un().fromArray(De);function tt(ue,ot,it,Ne){const Qe=new Uint8Array(4),Bt=r.createTexture();r.bindTexture(ue,Bt),r.texParameteri(ue,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(ue,r.TEXTURE_MAG_FILTER,r.NEAREST);for(let tn=0;tn<it;tn++)n&&(ue===r.TEXTURE_3D||ue===r.TEXTURE_2D_ARRAY)?r.texImage3D(ot,0,r.RGBA,1,1,Ne,0,r.RGBA,r.UNSIGNED_BYTE,Qe):r.texImage2D(ot+tn,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,Qe);return Bt}const rt={};rt[r.TEXTURE_2D]=tt(r.TEXTURE_2D,r.TEXTURE_2D,1),rt[r.TEXTURE_CUBE_MAP]=tt(r.TEXTURE_CUBE_MAP,r.TEXTURE_CUBE_MAP_POSITIVE_X,6),n&&(rt[r.TEXTURE_2D_ARRAY]=tt(r.TEXTURE_2D_ARRAY,r.TEXTURE_2D_ARRAY,1,1),rt[r.TEXTURE_3D]=tt(r.TEXTURE_3D,r.TEXTURE_3D,1,1)),l.setClear(0,0,0,1),u.setClear(1),h.setClear(0),gt(r.DEPTH_TEST),u.setFunc(yp),ft(!1),yt(fy),gt(r.CULL_FACE),ze(Xa);function gt(ue){v[ue]!==!0&&(r.enable(ue),v[ue]=!0)}function kt(ue){v[ue]!==!1&&(r.disable(ue),v[ue]=!1)}function xt(ue,ot){return y[ue]!==ot?(r.bindFramebuffer(ue,ot),y[ue]=ot,n&&(ue===r.DRAW_FRAMEBUFFER&&(y[r.FRAMEBUFFER]=ot),ue===r.FRAMEBUFFER&&(y[r.DRAW_FRAMEBUFFER]=ot)),!0):!1}function se(ue,ot){let it=w,Ne=!1;if(ue)if(it=E.get(ot),it===void 0&&(it=[],E.set(ot,it)),ue.isWebGLMultipleRenderTargets){const Qe=ue.texture;if(it.length!==Qe.length||it[0]!==r.COLOR_ATTACHMENT0){for(let Bt=0,tn=Qe.length;Bt<tn;Bt++)it[Bt]=r.COLOR_ATTACHMENT0+Bt;it.length=Qe.length,Ne=!0}}else it[0]!==r.COLOR_ATTACHMENT0&&(it[0]=r.COLOR_ATTACHMENT0,Ne=!0);else it[0]!==r.BACK&&(it[0]=r.BACK,Ne=!0);Ne&&(t.isWebGL2?r.drawBuffers(it):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(it))}function Je(ue){return C!==ue?(r.useProgram(ue),C=ue,!0):!1}const Fe={[Vl]:r.FUNC_ADD,[Ow]:r.FUNC_SUBTRACT,[Uw]:r.FUNC_REVERSE_SUBTRACT};if(n)Fe[vy]=r.MIN,Fe[yy]=r.MAX;else{const ue=e.get("EXT_blend_minmax");ue!==null&&(Fe[vy]=ue.MIN_EXT,Fe[yy]=ue.MAX_EXT)}const $e={[Hw]:r.ZERO,[zw]:r.ONE,[Gw]:r.SRC_COLOR,[pg]:r.SRC_ALPHA,[Kw]:r.SRC_ALPHA_SATURATE,[Jw]:r.DST_COLOR,[Vw]:r.DST_ALPHA,[jw]:r.ONE_MINUS_SRC_COLOR,[mg]:r.ONE_MINUS_SRC_ALPHA,[Xw]:r.ONE_MINUS_DST_COLOR,[Ww]:r.ONE_MINUS_DST_ALPHA,[qw]:r.CONSTANT_COLOR,[Yw]:r.ONE_MINUS_CONSTANT_COLOR,[$w]:r.CONSTANT_ALPHA,[Qw]:r.ONE_MINUS_CONSTANT_ALPHA};function ze(ue,ot,it,Ne,Qe,Bt,tn,xn,Xn,un){if(ue===Xa){x===!0&&(kt(r.BLEND),x=!1);return}if(x===!1&&(gt(r.BLEND),x=!0),ue!==kw){if(ue!==M||un!==ee){if((S!==Vl||I!==Vl)&&(r.blendEquation(r.FUNC_ADD),S=Vl,I=Vl),un)switch(ue){case yu:r.blendFuncSeparate(r.ONE,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case py:r.blendFunc(r.ONE,r.ONE);break;case my:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case gy:r.blendFuncSeparate(r.ZERO,r.SRC_COLOR,r.ZERO,r.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ue);break}else switch(ue){case yu:r.blendFuncSeparate(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case py:r.blendFunc(r.SRC_ALPHA,r.ONE);break;case my:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case gy:r.blendFunc(r.ZERO,r.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ue);break}R=null,N=null,O=null,j=null,F.set(0,0,0),H=0,M=ue,ee=un}return}Qe=Qe||ot,Bt=Bt||it,tn=tn||Ne,(ot!==S||Qe!==I)&&(r.blendEquationSeparate(Fe[ot],Fe[Qe]),S=ot,I=Qe),(it!==R||Ne!==N||Bt!==O||tn!==j)&&(r.blendFuncSeparate($e[it],$e[Ne],$e[Bt],$e[tn]),R=it,N=Ne,O=Bt,j=tn),(xn.equals(F)===!1||Xn!==H)&&(r.blendColor(xn.r,xn.g,xn.b,Xn),F.copy(xn),H=Xn),M=ue,ee=!1}function bt(ue,ot){ue.side===Vs?kt(r.CULL_FACE):gt(r.CULL_FACE);let it=ue.side===Vi;ot&&(it=!it),ft(it),ue.blending===yu&&ue.transparent===!1?ze(Xa):ze(ue.blending,ue.blendEquation,ue.blendSrc,ue.blendDst,ue.blendEquationAlpha,ue.blendSrcAlpha,ue.blendDstAlpha,ue.blendColor,ue.blendAlpha,ue.premultipliedAlpha),u.setFunc(ue.depthFunc),u.setTest(ue.depthTest),u.setMask(ue.depthWrite),l.setMask(ue.colorWrite);const Ne=ue.stencilWrite;h.setTest(Ne),Ne&&(h.setMask(ue.stencilWriteMask),h.setFunc(ue.stencilFunc,ue.stencilRef,ue.stencilFuncMask),h.setOp(ue.stencilFail,ue.stencilZFail,ue.stencilZPass)),Kt(ue.polygonOffset,ue.polygonOffsetFactor,ue.polygonOffsetUnits),ue.alphaToCoverage===!0?gt(r.SAMPLE_ALPHA_TO_COVERAGE):kt(r.SAMPLE_ALPHA_TO_COVERAGE)}function ft(ue){de!==ue&&(ue?r.frontFace(r.CW):r.frontFace(r.CCW),de=ue)}function yt(ue){ue!==Iw?(gt(r.CULL_FACE),ue!==ve&&(ue===fy?r.cullFace(r.BACK):ue===Nw?r.cullFace(r.FRONT):r.cullFace(r.FRONT_AND_BACK))):kt(r.CULL_FACE),ve=ue}function Lt(ue){ue!==Y&&(te&&r.lineWidth(ue),Y=ue)}function Kt(ue,ot,it){ue?(gt(r.POLYGON_OFFSET_FILL),(me!==ot||pe!==it)&&(r.polygonOffset(ot,it),me=ot,pe=it)):kt(r.POLYGON_OFFSET_FILL)}function Mn(ue){ue?gt(r.SCISSOR_TEST):kt(r.SCISSOR_TEST)}function Z(ue){ue===void 0&&(ue=r.TEXTURE0+Ae-1),z!==ue&&(r.activeTexture(ue),z=ue)}function W(ue,ot,it){it===void 0&&(z===null?it=r.TEXTURE0+Ae-1:it=z);let Ne=K[it];Ne===void 0&&(Ne={type:void 0,texture:void 0},K[it]=Ne),(Ne.type!==ue||Ne.texture!==ot)&&(z!==it&&(r.activeTexture(it),z=it),r.bindTexture(ue,ot||rt[ue]),Ne.type=ue,Ne.texture=ot)}function Se(){const ue=K[z];ue!==void 0&&ue.type!==void 0&&(r.bindTexture(ue.type,null),ue.type=void 0,ue.texture=void 0)}function Ze(){try{r.compressedTexImage2D.apply(r,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function Ve(){try{r.compressedTexImage3D.apply(r,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function Ye(){try{r.texSubImage2D.apply(r,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function Ct(){try{r.texSubImage3D.apply(r,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function nt(){try{r.compressedTexSubImage2D.apply(r,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function ct(){try{r.compressedTexSubImage3D.apply(r,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function Ut(){try{r.texStorage2D.apply(r,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function rn(){try{r.texStorage3D.apply(r,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function Ge(){try{r.texImage2D.apply(r,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function gn(){try{r.texImage3D.apply(r,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function ae(ue){Ie.equals(ue)===!1&&(r.scissor(ue.x,ue.y,ue.z,ue.w),Ie.copy(ue))}function Me(ue){Oe.equals(ue)===!1&&(r.viewport(ue.x,ue.y,ue.z,ue.w),Oe.copy(ue))}function He(ue,ot){let it=m.get(ot);it===void 0&&(it=new WeakMap,m.set(ot,it));let Ne=it.get(ue);Ne===void 0&&(Ne=r.getUniformBlockIndex(ot,ue.name),it.set(ue,Ne))}function We(ue,ot){const Ne=m.get(ot).get(ue);p.get(ot)!==Ne&&(r.uniformBlockBinding(ot,Ne,ue.__bindingPointIndex),p.set(ot,Ne))}function ke(){r.disable(r.BLEND),r.disable(r.CULL_FACE),r.disable(r.DEPTH_TEST),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SCISSOR_TEST),r.disable(r.STENCIL_TEST),r.disable(r.SAMPLE_ALPHA_TO_COVERAGE),r.blendEquation(r.FUNC_ADD),r.blendFunc(r.ONE,r.ZERO),r.blendFuncSeparate(r.ONE,r.ZERO,r.ONE,r.ZERO),r.blendColor(0,0,0,0),r.colorMask(!0,!0,!0,!0),r.clearColor(0,0,0,0),r.depthMask(!0),r.depthFunc(r.LESS),r.clearDepth(1),r.stencilMask(4294967295),r.stencilFunc(r.ALWAYS,0,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),r.clearStencil(0),r.cullFace(r.BACK),r.frontFace(r.CCW),r.polygonOffset(0,0),r.activeTexture(r.TEXTURE0),r.bindFramebuffer(r.FRAMEBUFFER,null),n===!0&&(r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),r.bindFramebuffer(r.READ_FRAMEBUFFER,null)),r.useProgram(null),r.lineWidth(1),r.scissor(0,0,r.canvas.width,r.canvas.height),r.viewport(0,0,r.canvas.width,r.canvas.height),v={},z=null,K={},y={},E=new WeakMap,w=[],C=null,x=!1,M=null,S=null,R=null,N=null,I=null,O=null,j=null,F=new ht(0,0,0),H=0,ee=!1,de=null,ve=null,Y=null,me=null,pe=null,Ie.set(0,0,r.canvas.width,r.canvas.height),Oe.set(0,0,r.canvas.width,r.canvas.height),l.reset(),u.reset(),h.reset()}return{buffers:{color:l,depth:u,stencil:h},enable:gt,disable:kt,bindFramebuffer:xt,drawBuffers:se,useProgram:Je,setBlending:ze,setMaterial:bt,setFlipSided:ft,setCullFace:yt,setLineWidth:Lt,setPolygonOffset:Kt,setScissorTest:Mn,activeTexture:Z,bindTexture:W,unbindTexture:Se,compressedTexImage2D:Ze,compressedTexImage3D:Ve,texImage2D:Ge,texImage3D:gn,updateUBOMapping:He,uniformBlockBinding:We,texStorage2D:Ut,texStorage3D:rn,texSubImage2D:Ye,texSubImage3D:Ct,compressedTexSubImage2D:nt,compressedTexSubImage3D:ct,scissor:ae,viewport:Me,reset:ke}}function cI(r,e,t,n,i,s,o){const l=i.isWebGL2,u=i.maxTextures,h=i.maxCubemapSize,p=i.maxTextureSize,m=i.maxSamples,v=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,y=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),E=new WeakMap;let w;const C=new WeakMap;let x=!1;try{x=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function M(Z,W){return x?new OffscreenCanvas(Z,W):bp("canvas")}function S(Z,W,Se,Ze){let Ve=1;if((Z.width>Ze||Z.height>Ze)&&(Ve=Ze/Math.max(Z.width,Z.height)),Ve<1||W===!0)if(typeof HTMLImageElement<"u"&&Z instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Z instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Z instanceof ImageBitmap){const Ye=W?yg:Math.floor,Ct=Ye(Ve*Z.width),nt=Ye(Ve*Z.height);w===void 0&&(w=M(Ct,nt));const ct=Se?M(Ct,nt):w;return ct.width=Ct,ct.height=nt,ct.getContext("2d").drawImage(Z,0,0,Ct,nt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Z.width+"x"+Z.height+") to ("+Ct+"x"+nt+")."),ct}else return"data"in Z&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Z.width+"x"+Z.height+")."),Z;return Z}function R(Z){return Xy(Z.width)&&Xy(Z.height)}function N(Z){return l?!1:Z.wrapS!==gi||Z.wrapT!==gi||Z.minFilter!==or&&Z.minFilter!==Jn}function I(Z,W){return Z.generateMipmaps&&W&&Z.minFilter!==or&&Z.minFilter!==Jn}function O(Z){r.generateMipmap(Z)}function j(Z,W,Se,Ze,Ve=!1){if(l===!1)return W;if(Z!==null){if(r[Z]!==void 0)return r[Z];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Z+"'")}let Ye=W;if(W===r.RED&&(Se===r.FLOAT&&(Ye=r.R32F),Se===r.HALF_FLOAT&&(Ye=r.R16F),Se===r.UNSIGNED_BYTE&&(Ye=r.R8)),W===r.RED_INTEGER&&(Se===r.UNSIGNED_BYTE&&(Ye=r.R8UI),Se===r.UNSIGNED_SHORT&&(Ye=r.R16UI),Se===r.UNSIGNED_INT&&(Ye=r.R32UI),Se===r.BYTE&&(Ye=r.R8I),Se===r.SHORT&&(Ye=r.R16I),Se===r.INT&&(Ye=r.R32I)),W===r.RG&&(Se===r.FLOAT&&(Ye=r.RG32F),Se===r.HALF_FLOAT&&(Ye=r.RG16F),Se===r.UNSIGNED_BYTE&&(Ye=r.RG8)),W===r.RGBA){const Ct=Ve?_p:On.getTransfer(Ze);Se===r.FLOAT&&(Ye=r.RGBA32F),Se===r.HALF_FLOAT&&(Ye=r.RGBA16F),Se===r.UNSIGNED_BYTE&&(Ye=Ct===$n?r.SRGB8_ALPHA8:r.RGBA8),Se===r.UNSIGNED_SHORT_4_4_4_4&&(Ye=r.RGBA4),Se===r.UNSIGNED_SHORT_5_5_5_1&&(Ye=r.RGB5_A1)}return(Ye===r.R16F||Ye===r.R32F||Ye===r.RG16F||Ye===r.RG32F||Ye===r.RGBA16F||Ye===r.RGBA32F)&&e.get("EXT_color_buffer_float"),Ye}function F(Z,W,Se){return I(Z,Se)===!0||Z.isFramebufferTexture&&Z.minFilter!==or&&Z.minFilter!==Jn?Math.log2(Math.max(W.width,W.height))+1:Z.mipmaps!==void 0&&Z.mipmaps.length>0?Z.mipmaps.length:Z.isCompressedTexture&&Array.isArray(Z.image)?W.mipmaps.length:1}function H(Z){return Z===or||Z===Ep||Z===Ah?r.NEAREST:r.LINEAR}function ee(Z){const W=Z.target;W.removeEventListener("dispose",ee),ve(W),W.isVideoTexture&&E.delete(W)}function de(Z){const W=Z.target;W.removeEventListener("dispose",de),me(W)}function ve(Z){const W=n.get(Z);if(W.__webglInit===void 0)return;const Se=Z.source,Ze=C.get(Se);if(Ze){const Ve=Ze[W.__cacheKey];Ve.usedTimes--,Ve.usedTimes===0&&Y(Z),Object.keys(Ze).length===0&&C.delete(Se)}n.remove(Z)}function Y(Z){const W=n.get(Z);r.deleteTexture(W.__webglTexture);const Se=Z.source,Ze=C.get(Se);delete Ze[W.__cacheKey],o.memory.textures--}function me(Z){const W=Z.texture,Se=n.get(Z),Ze=n.get(W);if(Ze.__webglTexture!==void 0&&(r.deleteTexture(Ze.__webglTexture),o.memory.textures--),Z.depthTexture&&Z.depthTexture.dispose(),Z.isWebGLCubeRenderTarget)for(let Ve=0;Ve<6;Ve++){if(Array.isArray(Se.__webglFramebuffer[Ve]))for(let Ye=0;Ye<Se.__webglFramebuffer[Ve].length;Ye++)r.deleteFramebuffer(Se.__webglFramebuffer[Ve][Ye]);else r.deleteFramebuffer(Se.__webglFramebuffer[Ve]);Se.__webglDepthbuffer&&r.deleteRenderbuffer(Se.__webglDepthbuffer[Ve])}else{if(Array.isArray(Se.__webglFramebuffer))for(let Ve=0;Ve<Se.__webglFramebuffer.length;Ve++)r.deleteFramebuffer(Se.__webglFramebuffer[Ve]);else r.deleteFramebuffer(Se.__webglFramebuffer);if(Se.__webglDepthbuffer&&r.deleteRenderbuffer(Se.__webglDepthbuffer),Se.__webglMultisampledFramebuffer&&r.deleteFramebuffer(Se.__webglMultisampledFramebuffer),Se.__webglColorRenderbuffer)for(let Ve=0;Ve<Se.__webglColorRenderbuffer.length;Ve++)Se.__webglColorRenderbuffer[Ve]&&r.deleteRenderbuffer(Se.__webglColorRenderbuffer[Ve]);Se.__webglDepthRenderbuffer&&r.deleteRenderbuffer(Se.__webglDepthRenderbuffer)}if(Z.isWebGLMultipleRenderTargets)for(let Ve=0,Ye=W.length;Ve<Ye;Ve++){const Ct=n.get(W[Ve]);Ct.__webglTexture&&(r.deleteTexture(Ct.__webglTexture),o.memory.textures--),n.remove(W[Ve])}n.remove(W),n.remove(Z)}let pe=0;function Ae(){pe=0}function te(){const Z=pe;return Z>=u&&console.warn("THREE.WebGLTextures: Trying to use "+Z+" texture units while this GPU supports only "+u),pe+=1,Z}function ce(Z){const W=[];return W.push(Z.wrapS),W.push(Z.wrapT),W.push(Z.wrapR||0),W.push(Z.magFilter),W.push(Z.minFilter),W.push(Z.anisotropy),W.push(Z.internalFormat),W.push(Z.format),W.push(Z.type),W.push(Z.generateMipmaps),W.push(Z.premultiplyAlpha),W.push(Z.flipY),W.push(Z.unpackAlignment),W.push(Z.colorSpace),W.join()}function ne(Z,W){const Se=n.get(Z);if(Z.isVideoTexture&&Kt(Z),Z.isRenderTargetTexture===!1&&Z.version>0&&Se.__version!==Z.version){const Ze=Z.image;if(Ze===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ze.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{gt(Se,Z,W);return}}t.bindTexture(r.TEXTURE_2D,Se.__webglTexture,r.TEXTURE0+W)}function z(Z,W){const Se=n.get(Z);if(Z.version>0&&Se.__version!==Z.version){gt(Se,Z,W);return}t.bindTexture(r.TEXTURE_2D_ARRAY,Se.__webglTexture,r.TEXTURE0+W)}function K(Z,W){const Se=n.get(Z);if(Z.version>0&&Se.__version!==Z.version){gt(Se,Z,W);return}t.bindTexture(r.TEXTURE_3D,Se.__webglTexture,r.TEXTURE0+W)}function xe(Z,W){const Se=n.get(Z);if(Z.version>0&&Se.__version!==Z.version){kt(Se,Z,W);return}t.bindTexture(r.TEXTURE_CUBE_MAP,Se.__webglTexture,r.TEXTURE0+W)}const De={[$l]:r.REPEAT,[gi]:r.CLAMP_TO_EDGE,[wh]:r.MIRRORED_REPEAT},Ie={[or]:r.NEAREST,[Ep]:r.NEAREST_MIPMAP_NEAREST,[Ah]:r.NEAREST_MIPMAP_LINEAR,[Jn]:r.LINEAR,[Dg]:r.LINEAR_MIPMAP_NEAREST,[Qo]:r.LINEAR_MIPMAP_LINEAR},Oe={[M1]:r.NEVER,[N1]:r.ALWAYS,[T1]:r.LESS,[D1]:r.LEQUAL,[R1]:r.EQUAL,[I1]:r.GEQUAL,[P1]:r.GREATER,[L1]:r.NOTEQUAL};function tt(Z,W,Se){if(Se?(r.texParameteri(Z,r.TEXTURE_WRAP_S,De[W.wrapS]),r.texParameteri(Z,r.TEXTURE_WRAP_T,De[W.wrapT]),(Z===r.TEXTURE_3D||Z===r.TEXTURE_2D_ARRAY)&&r.texParameteri(Z,r.TEXTURE_WRAP_R,De[W.wrapR]),r.texParameteri(Z,r.TEXTURE_MAG_FILTER,Ie[W.magFilter]),r.texParameteri(Z,r.TEXTURE_MIN_FILTER,Ie[W.minFilter])):(r.texParameteri(Z,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(Z,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),(Z===r.TEXTURE_3D||Z===r.TEXTURE_2D_ARRAY)&&r.texParameteri(Z,r.TEXTURE_WRAP_R,r.CLAMP_TO_EDGE),(W.wrapS!==gi||W.wrapT!==gi)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),r.texParameteri(Z,r.TEXTURE_MAG_FILTER,H(W.magFilter)),r.texParameteri(Z,r.TEXTURE_MIN_FILTER,H(W.minFilter)),W.minFilter!==or&&W.minFilter!==Jn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),W.compareFunction&&(r.texParameteri(Z,r.TEXTURE_COMPARE_MODE,r.COMPARE_REF_TO_TEXTURE),r.texParameteri(Z,r.TEXTURE_COMPARE_FUNC,Oe[W.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const Ze=e.get("EXT_texture_filter_anisotropic");if(W.magFilter===or||W.minFilter!==Ah&&W.minFilter!==Qo||W.type===bi&&e.has("OES_texture_float_linear")===!1||l===!1&&W.type===Mi&&e.has("OES_texture_half_float_linear")===!1)return;(W.anisotropy>1||n.get(W).__currentAnisotropy)&&(r.texParameterf(Z,Ze.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(W.anisotropy,i.getMaxAnisotropy())),n.get(W).__currentAnisotropy=W.anisotropy)}}function rt(Z,W){let Se=!1;Z.__webglInit===void 0&&(Z.__webglInit=!0,W.addEventListener("dispose",ee));const Ze=W.source;let Ve=C.get(Ze);Ve===void 0&&(Ve={},C.set(Ze,Ve));const Ye=ce(W);if(Ye!==Z.__cacheKey){Ve[Ye]===void 0&&(Ve[Ye]={texture:r.createTexture(),usedTimes:0},o.memory.textures++,Se=!0),Ve[Ye].usedTimes++;const Ct=Ve[Z.__cacheKey];Ct!==void 0&&(Ve[Z.__cacheKey].usedTimes--,Ct.usedTimes===0&&Y(W)),Z.__cacheKey=Ye,Z.__webglTexture=Ve[Ye].texture}return Se}function gt(Z,W,Se){let Ze=r.TEXTURE_2D;(W.isDataArrayTexture||W.isCompressedArrayTexture)&&(Ze=r.TEXTURE_2D_ARRAY),W.isData3DTexture&&(Ze=r.TEXTURE_3D);const Ve=rt(Z,W),Ye=W.source;t.bindTexture(Ze,Z.__webglTexture,r.TEXTURE0+Se);const Ct=n.get(Ye);if(Ye.version!==Ct.__version||Ve===!0){t.activeTexture(r.TEXTURE0+Se);const nt=On.getPrimaries(On.workingColorSpace),ct=W.colorSpace===Cs?null:On.getPrimaries(W.colorSpace),Ut=W.colorSpace===Cs||nt===ct?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,W.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,W.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,W.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ut);const rn=N(W)&&R(W.image)===!1;let Ge=S(W.image,rn,!1,p);Ge=Mn(W,Ge);const gn=R(Ge)||l,ae=s.convert(W.format,W.colorSpace);let Me=s.convert(W.type),He=j(W.internalFormat,ae,Me,W.colorSpace,W.isVideoTexture);tt(Ze,W,gn);let We;const ke=W.mipmaps,ue=l&&W.isVideoTexture!==!0,ot=Ct.__version===void 0||Ve===!0,it=F(W,Ge,gn);if(W.isDepthTexture)He=r.DEPTH_COMPONENT,l?W.type===bi?He=r.DEPTH_COMPONENT32F:W.type===Va?He=r.DEPTH_COMPONENT24:W.type===Jl?He=r.DEPTH24_STENCIL8:He=r.DEPTH_COMPONENT16:W.type===bi&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),W.format===Xl&&He===r.DEPTH_COMPONENT&&W.type!==Pg&&W.type!==Va&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),W.type=Va,Me=s.convert(W.type)),W.format===_u&&He===r.DEPTH_COMPONENT&&(He=r.DEPTH_STENCIL,W.type!==Jl&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),W.type=Jl,Me=s.convert(W.type))),ot&&(ue?t.texStorage2D(r.TEXTURE_2D,1,He,Ge.width,Ge.height):t.texImage2D(r.TEXTURE_2D,0,He,Ge.width,Ge.height,0,ae,Me,null));else if(W.isDataTexture)if(ke.length>0&&gn){ue&&ot&&t.texStorage2D(r.TEXTURE_2D,it,He,ke[0].width,ke[0].height);for(let Ne=0,Qe=ke.length;Ne<Qe;Ne++)We=ke[Ne],ue?t.texSubImage2D(r.TEXTURE_2D,Ne,0,0,We.width,We.height,ae,Me,We.data):t.texImage2D(r.TEXTURE_2D,Ne,He,We.width,We.height,0,ae,Me,We.data);W.generateMipmaps=!1}else ue?(ot&&t.texStorage2D(r.TEXTURE_2D,it,He,Ge.width,Ge.height),t.texSubImage2D(r.TEXTURE_2D,0,0,0,Ge.width,Ge.height,ae,Me,Ge.data)):t.texImage2D(r.TEXTURE_2D,0,He,Ge.width,Ge.height,0,ae,Me,Ge.data);else if(W.isCompressedTexture)if(W.isCompressedArrayTexture){ue&&ot&&t.texStorage3D(r.TEXTURE_2D_ARRAY,it,He,ke[0].width,ke[0].height,Ge.depth);for(let Ne=0,Qe=ke.length;Ne<Qe;Ne++)We=ke[Ne],W.format!==ji?ae!==null?ue?t.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,Ne,0,0,0,We.width,We.height,Ge.depth,ae,We.data,0,0):t.compressedTexImage3D(r.TEXTURE_2D_ARRAY,Ne,He,We.width,We.height,Ge.depth,0,We.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ue?t.texSubImage3D(r.TEXTURE_2D_ARRAY,Ne,0,0,0,We.width,We.height,Ge.depth,ae,Me,We.data):t.texImage3D(r.TEXTURE_2D_ARRAY,Ne,He,We.width,We.height,Ge.depth,0,ae,Me,We.data)}else{ue&&ot&&t.texStorage2D(r.TEXTURE_2D,it,He,ke[0].width,ke[0].height);for(let Ne=0,Qe=ke.length;Ne<Qe;Ne++)We=ke[Ne],W.format!==ji?ae!==null?ue?t.compressedTexSubImage2D(r.TEXTURE_2D,Ne,0,0,We.width,We.height,ae,We.data):t.compressedTexImage2D(r.TEXTURE_2D,Ne,He,We.width,We.height,0,We.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ue?t.texSubImage2D(r.TEXTURE_2D,Ne,0,0,We.width,We.height,ae,Me,We.data):t.texImage2D(r.TEXTURE_2D,Ne,He,We.width,We.height,0,ae,Me,We.data)}else if(W.isDataArrayTexture)ue?(ot&&t.texStorage3D(r.TEXTURE_2D_ARRAY,it,He,Ge.width,Ge.height,Ge.depth),t.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,0,Ge.width,Ge.height,Ge.depth,ae,Me,Ge.data)):t.texImage3D(r.TEXTURE_2D_ARRAY,0,He,Ge.width,Ge.height,Ge.depth,0,ae,Me,Ge.data);else if(W.isData3DTexture)ue?(ot&&t.texStorage3D(r.TEXTURE_3D,it,He,Ge.width,Ge.height,Ge.depth),t.texSubImage3D(r.TEXTURE_3D,0,0,0,0,Ge.width,Ge.height,Ge.depth,ae,Me,Ge.data)):t.texImage3D(r.TEXTURE_3D,0,He,Ge.width,Ge.height,Ge.depth,0,ae,Me,Ge.data);else if(W.isFramebufferTexture){if(ot)if(ue)t.texStorage2D(r.TEXTURE_2D,it,He,Ge.width,Ge.height);else{let Ne=Ge.width,Qe=Ge.height;for(let Bt=0;Bt<it;Bt++)t.texImage2D(r.TEXTURE_2D,Bt,He,Ne,Qe,0,ae,Me,null),Ne>>=1,Qe>>=1}}else if(ke.length>0&&gn){ue&&ot&&t.texStorage2D(r.TEXTURE_2D,it,He,ke[0].width,ke[0].height);for(let Ne=0,Qe=ke.length;Ne<Qe;Ne++)We=ke[Ne],ue?t.texSubImage2D(r.TEXTURE_2D,Ne,0,0,ae,Me,We):t.texImage2D(r.TEXTURE_2D,Ne,He,ae,Me,We);W.generateMipmaps=!1}else ue?(ot&&t.texStorage2D(r.TEXTURE_2D,it,He,Ge.width,Ge.height),t.texSubImage2D(r.TEXTURE_2D,0,0,0,ae,Me,Ge)):t.texImage2D(r.TEXTURE_2D,0,He,ae,Me,Ge);I(W,gn)&&O(Ze),Ct.__version=Ye.version,W.onUpdate&&W.onUpdate(W)}Z.__version=W.version}function kt(Z,W,Se){if(W.image.length!==6)return;const Ze=rt(Z,W),Ve=W.source;t.bindTexture(r.TEXTURE_CUBE_MAP,Z.__webglTexture,r.TEXTURE0+Se);const Ye=n.get(Ve);if(Ve.version!==Ye.__version||Ze===!0){t.activeTexture(r.TEXTURE0+Se);const Ct=On.getPrimaries(On.workingColorSpace),nt=W.colorSpace===Cs?null:On.getPrimaries(W.colorSpace),ct=W.colorSpace===Cs||Ct===nt?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,W.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,W.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,W.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,ct);const Ut=W.isCompressedTexture||W.image[0].isCompressedTexture,rn=W.image[0]&&W.image[0].isDataTexture,Ge=[];for(let Ne=0;Ne<6;Ne++)!Ut&&!rn?Ge[Ne]=S(W.image[Ne],!1,!0,h):Ge[Ne]=rn?W.image[Ne].image:W.image[Ne],Ge[Ne]=Mn(W,Ge[Ne]);const gn=Ge[0],ae=R(gn)||l,Me=s.convert(W.format,W.colorSpace),He=s.convert(W.type),We=j(W.internalFormat,Me,He,W.colorSpace),ke=l&&W.isVideoTexture!==!0,ue=Ye.__version===void 0||Ze===!0;let ot=F(W,gn,ae);tt(r.TEXTURE_CUBE_MAP,W,ae);let it;if(Ut){ke&&ue&&t.texStorage2D(r.TEXTURE_CUBE_MAP,ot,We,gn.width,gn.height);for(let Ne=0;Ne<6;Ne++){it=Ge[Ne].mipmaps;for(let Qe=0;Qe<it.length;Qe++){const Bt=it[Qe];W.format!==ji?Me!==null?ke?t.compressedTexSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,Qe,0,0,Bt.width,Bt.height,Me,Bt.data):t.compressedTexImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,Qe,We,Bt.width,Bt.height,0,Bt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ke?t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,Qe,0,0,Bt.width,Bt.height,Me,He,Bt.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,Qe,We,Bt.width,Bt.height,0,Me,He,Bt.data)}}}else{it=W.mipmaps,ke&&ue&&(it.length>0&&ot++,t.texStorage2D(r.TEXTURE_CUBE_MAP,ot,We,Ge[0].width,Ge[0].height));for(let Ne=0;Ne<6;Ne++)if(rn){ke?t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,0,0,0,Ge[Ne].width,Ge[Ne].height,Me,He,Ge[Ne].data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,0,We,Ge[Ne].width,Ge[Ne].height,0,Me,He,Ge[Ne].data);for(let Qe=0;Qe<it.length;Qe++){const tn=it[Qe].image[Ne].image;ke?t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,Qe+1,0,0,tn.width,tn.height,Me,He,tn.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,Qe+1,We,tn.width,tn.height,0,Me,He,tn.data)}}else{ke?t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,0,0,0,Me,He,Ge[Ne]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,0,We,Me,He,Ge[Ne]);for(let Qe=0;Qe<it.length;Qe++){const Bt=it[Qe];ke?t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,Qe+1,0,0,Me,He,Bt.image[Ne]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,Qe+1,We,Me,He,Bt.image[Ne])}}}I(W,ae)&&O(r.TEXTURE_CUBE_MAP),Ye.__version=Ve.version,W.onUpdate&&W.onUpdate(W)}Z.__version=W.version}function xt(Z,W,Se,Ze,Ve,Ye){const Ct=s.convert(Se.format,Se.colorSpace),nt=s.convert(Se.type),ct=j(Se.internalFormat,Ct,nt,Se.colorSpace);if(!n.get(W).__hasExternalTextures){const rn=Math.max(1,W.width>>Ye),Ge=Math.max(1,W.height>>Ye);Ve===r.TEXTURE_3D||Ve===r.TEXTURE_2D_ARRAY?t.texImage3D(Ve,Ye,ct,rn,Ge,W.depth,0,Ct,nt,null):t.texImage2D(Ve,Ye,ct,rn,Ge,0,Ct,nt,null)}t.bindFramebuffer(r.FRAMEBUFFER,Z),Lt(W)?v.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,Ze,Ve,n.get(Se).__webglTexture,0,yt(W)):(Ve===r.TEXTURE_2D||Ve>=r.TEXTURE_CUBE_MAP_POSITIVE_X&&Ve<=r.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&r.framebufferTexture2D(r.FRAMEBUFFER,Ze,Ve,n.get(Se).__webglTexture,Ye),t.bindFramebuffer(r.FRAMEBUFFER,null)}function se(Z,W,Se){if(r.bindRenderbuffer(r.RENDERBUFFER,Z),W.depthBuffer&&!W.stencilBuffer){let Ze=l===!0?r.DEPTH_COMPONENT24:r.DEPTH_COMPONENT16;if(Se||Lt(W)){const Ve=W.depthTexture;Ve&&Ve.isDepthTexture&&(Ve.type===bi?Ze=r.DEPTH_COMPONENT32F:Ve.type===Va&&(Ze=r.DEPTH_COMPONENT24));const Ye=yt(W);Lt(W)?v.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,Ye,Ze,W.width,W.height):r.renderbufferStorageMultisample(r.RENDERBUFFER,Ye,Ze,W.width,W.height)}else r.renderbufferStorage(r.RENDERBUFFER,Ze,W.width,W.height);r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.RENDERBUFFER,Z)}else if(W.depthBuffer&&W.stencilBuffer){const Ze=yt(W);Se&&Lt(W)===!1?r.renderbufferStorageMultisample(r.RENDERBUFFER,Ze,r.DEPTH24_STENCIL8,W.width,W.height):Lt(W)?v.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,Ze,r.DEPTH24_STENCIL8,W.width,W.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,W.width,W.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,Z)}else{const Ze=W.isWebGLMultipleRenderTargets===!0?W.texture:[W.texture];for(let Ve=0;Ve<Ze.length;Ve++){const Ye=Ze[Ve],Ct=s.convert(Ye.format,Ye.colorSpace),nt=s.convert(Ye.type),ct=j(Ye.internalFormat,Ct,nt,Ye.colorSpace),Ut=yt(W);Se&&Lt(W)===!1?r.renderbufferStorageMultisample(r.RENDERBUFFER,Ut,ct,W.width,W.height):Lt(W)?v.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,Ut,ct,W.width,W.height):r.renderbufferStorage(r.RENDERBUFFER,ct,W.width,W.height)}}r.bindRenderbuffer(r.RENDERBUFFER,null)}function Je(Z,W){if(W&&W.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(r.FRAMEBUFFER,Z),!(W.depthTexture&&W.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(W.depthTexture).__webglTexture||W.depthTexture.image.width!==W.width||W.depthTexture.image.height!==W.height)&&(W.depthTexture.image.width=W.width,W.depthTexture.image.height=W.height,W.depthTexture.needsUpdate=!0),ne(W.depthTexture,0);const Ze=n.get(W.depthTexture).__webglTexture,Ve=yt(W);if(W.depthTexture.format===Xl)Lt(W)?v.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,Ze,0,Ve):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,Ze,0);else if(W.depthTexture.format===_u)Lt(W)?v.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,Ze,0,Ve):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,Ze,0);else throw new Error("Unknown depthTexture format")}function Fe(Z){const W=n.get(Z),Se=Z.isWebGLCubeRenderTarget===!0;if(Z.depthTexture&&!W.__autoAllocateDepthBuffer){if(Se)throw new Error("target.depthTexture not supported in Cube render targets");Je(W.__webglFramebuffer,Z)}else if(Se){W.__webglDepthbuffer=[];for(let Ze=0;Ze<6;Ze++)t.bindFramebuffer(r.FRAMEBUFFER,W.__webglFramebuffer[Ze]),W.__webglDepthbuffer[Ze]=r.createRenderbuffer(),se(W.__webglDepthbuffer[Ze],Z,!1)}else t.bindFramebuffer(r.FRAMEBUFFER,W.__webglFramebuffer),W.__webglDepthbuffer=r.createRenderbuffer(),se(W.__webglDepthbuffer,Z,!1);t.bindFramebuffer(r.FRAMEBUFFER,null)}function $e(Z,W,Se){const Ze=n.get(Z);W!==void 0&&xt(Ze.__webglFramebuffer,Z,Z.texture,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,0),Se!==void 0&&Fe(Z)}function ze(Z){const W=Z.texture,Se=n.get(Z),Ze=n.get(W);Z.addEventListener("dispose",de),Z.isWebGLMultipleRenderTargets!==!0&&(Ze.__webglTexture===void 0&&(Ze.__webglTexture=r.createTexture()),Ze.__version=W.version,o.memory.textures++);const Ve=Z.isWebGLCubeRenderTarget===!0,Ye=Z.isWebGLMultipleRenderTargets===!0,Ct=R(Z)||l;if(Ve){Se.__webglFramebuffer=[];for(let nt=0;nt<6;nt++)if(l&&W.mipmaps&&W.mipmaps.length>0){Se.__webglFramebuffer[nt]=[];for(let ct=0;ct<W.mipmaps.length;ct++)Se.__webglFramebuffer[nt][ct]=r.createFramebuffer()}else Se.__webglFramebuffer[nt]=r.createFramebuffer()}else{if(l&&W.mipmaps&&W.mipmaps.length>0){Se.__webglFramebuffer=[];for(let nt=0;nt<W.mipmaps.length;nt++)Se.__webglFramebuffer[nt]=r.createFramebuffer()}else Se.__webglFramebuffer=r.createFramebuffer();if(Ye)if(i.drawBuffers){const nt=Z.texture;for(let ct=0,Ut=nt.length;ct<Ut;ct++){const rn=n.get(nt[ct]);rn.__webglTexture===void 0&&(rn.__webglTexture=r.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(l&&Z.samples>0&&Lt(Z)===!1){const nt=Ye?W:[W];Se.__webglMultisampledFramebuffer=r.createFramebuffer(),Se.__webglColorRenderbuffer=[],t.bindFramebuffer(r.FRAMEBUFFER,Se.__webglMultisampledFramebuffer);for(let ct=0;ct<nt.length;ct++){const Ut=nt[ct];Se.__webglColorRenderbuffer[ct]=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,Se.__webglColorRenderbuffer[ct]);const rn=s.convert(Ut.format,Ut.colorSpace),Ge=s.convert(Ut.type),gn=j(Ut.internalFormat,rn,Ge,Ut.colorSpace,Z.isXRRenderTarget===!0),ae=yt(Z);r.renderbufferStorageMultisample(r.RENDERBUFFER,ae,gn,Z.width,Z.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+ct,r.RENDERBUFFER,Se.__webglColorRenderbuffer[ct])}r.bindRenderbuffer(r.RENDERBUFFER,null),Z.depthBuffer&&(Se.__webglDepthRenderbuffer=r.createRenderbuffer(),se(Se.__webglDepthRenderbuffer,Z,!0)),t.bindFramebuffer(r.FRAMEBUFFER,null)}}if(Ve){t.bindTexture(r.TEXTURE_CUBE_MAP,Ze.__webglTexture),tt(r.TEXTURE_CUBE_MAP,W,Ct);for(let nt=0;nt<6;nt++)if(l&&W.mipmaps&&W.mipmaps.length>0)for(let ct=0;ct<W.mipmaps.length;ct++)xt(Se.__webglFramebuffer[nt][ct],Z,W,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+nt,ct);else xt(Se.__webglFramebuffer[nt],Z,W,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+nt,0);I(W,Ct)&&O(r.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Ye){const nt=Z.texture;for(let ct=0,Ut=nt.length;ct<Ut;ct++){const rn=nt[ct],Ge=n.get(rn);t.bindTexture(r.TEXTURE_2D,Ge.__webglTexture),tt(r.TEXTURE_2D,rn,Ct),xt(Se.__webglFramebuffer,Z,rn,r.COLOR_ATTACHMENT0+ct,r.TEXTURE_2D,0),I(rn,Ct)&&O(r.TEXTURE_2D)}t.unbindTexture()}else{let nt=r.TEXTURE_2D;if((Z.isWebGL3DRenderTarget||Z.isWebGLArrayRenderTarget)&&(l?nt=Z.isWebGL3DRenderTarget?r.TEXTURE_3D:r.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(nt,Ze.__webglTexture),tt(nt,W,Ct),l&&W.mipmaps&&W.mipmaps.length>0)for(let ct=0;ct<W.mipmaps.length;ct++)xt(Se.__webglFramebuffer[ct],Z,W,r.COLOR_ATTACHMENT0,nt,ct);else xt(Se.__webglFramebuffer,Z,W,r.COLOR_ATTACHMENT0,nt,0);I(W,Ct)&&O(nt),t.unbindTexture()}Z.depthBuffer&&Fe(Z)}function bt(Z){const W=R(Z)||l,Se=Z.isWebGLMultipleRenderTargets===!0?Z.texture:[Z.texture];for(let Ze=0,Ve=Se.length;Ze<Ve;Ze++){const Ye=Se[Ze];if(I(Ye,W)){const Ct=Z.isWebGLCubeRenderTarget?r.TEXTURE_CUBE_MAP:r.TEXTURE_2D,nt=n.get(Ye).__webglTexture;t.bindTexture(Ct,nt),O(Ct),t.unbindTexture()}}}function ft(Z){if(l&&Z.samples>0&&Lt(Z)===!1){const W=Z.isWebGLMultipleRenderTargets?Z.texture:[Z.texture],Se=Z.width,Ze=Z.height;let Ve=r.COLOR_BUFFER_BIT;const Ye=[],Ct=Z.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,nt=n.get(Z),ct=Z.isWebGLMultipleRenderTargets===!0;if(ct)for(let Ut=0;Ut<W.length;Ut++)t.bindFramebuffer(r.FRAMEBUFFER,nt.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+Ut,r.RENDERBUFFER,null),t.bindFramebuffer(r.FRAMEBUFFER,nt.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+Ut,r.TEXTURE_2D,null,0);t.bindFramebuffer(r.READ_FRAMEBUFFER,nt.__webglMultisampledFramebuffer),t.bindFramebuffer(r.DRAW_FRAMEBUFFER,nt.__webglFramebuffer);for(let Ut=0;Ut<W.length;Ut++){Ye.push(r.COLOR_ATTACHMENT0+Ut),Z.depthBuffer&&Ye.push(Ct);const rn=nt.__ignoreDepthValues!==void 0?nt.__ignoreDepthValues:!1;if(rn===!1&&(Z.depthBuffer&&(Ve|=r.DEPTH_BUFFER_BIT),Z.stencilBuffer&&(Ve|=r.STENCIL_BUFFER_BIT)),ct&&r.framebufferRenderbuffer(r.READ_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,nt.__webglColorRenderbuffer[Ut]),rn===!0&&(r.invalidateFramebuffer(r.READ_FRAMEBUFFER,[Ct]),r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,[Ct])),ct){const Ge=n.get(W[Ut]).__webglTexture;r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,Ge,0)}r.blitFramebuffer(0,0,Se,Ze,0,0,Se,Ze,Ve,r.NEAREST),y&&r.invalidateFramebuffer(r.READ_FRAMEBUFFER,Ye)}if(t.bindFramebuffer(r.READ_FRAMEBUFFER,null),t.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),ct)for(let Ut=0;Ut<W.length;Ut++){t.bindFramebuffer(r.FRAMEBUFFER,nt.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+Ut,r.RENDERBUFFER,nt.__webglColorRenderbuffer[Ut]);const rn=n.get(W[Ut]).__webglTexture;t.bindFramebuffer(r.FRAMEBUFFER,nt.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+Ut,r.TEXTURE_2D,rn,0)}t.bindFramebuffer(r.DRAW_FRAMEBUFFER,nt.__webglMultisampledFramebuffer)}}function yt(Z){return Math.min(m,Z.samples)}function Lt(Z){const W=n.get(Z);return l&&Z.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&W.__useRenderToTexture!==!1}function Kt(Z){const W=o.render.frame;E.get(Z)!==W&&(E.set(Z,W),Z.update())}function Mn(Z,W){const Se=Z.colorSpace,Ze=Z.format,Ve=Z.type;return Z.isCompressedTexture===!0||Z.isVideoTexture===!0||Z.format===vg||Se!==Zo&&Se!==Cs&&(On.getTransfer(Se)===$n?l===!1?e.has("EXT_sRGB")===!0&&Ze===ji?(Z.format=vg,Z.minFilter=Jn,Z.generateMipmaps=!1):W=bA.sRGBToLinear(W):(Ze!==ji||Ve!==Xo)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Se)),W}this.allocateTextureUnit=te,this.resetTextureUnits=Ae,this.setTexture2D=ne,this.setTexture2DArray=z,this.setTexture3D=K,this.setTextureCube=xe,this.rebindTextures=$e,this.setupRenderTarget=ze,this.updateRenderTargetMipmap=bt,this.updateMultisampleRenderTarget=ft,this.setupDepthRenderbuffer=Fe,this.setupFrameBufferTexture=xt,this.useMultisampledRTT=Lt}function K1(r,e,t){const n=t.isWebGL2;function i(s,o=Cs){let l;const u=On.getTransfer(o);if(s===Xo)return r.UNSIGNED_BYTE;if(s===vA)return r.UNSIGNED_SHORT_4_4_4_4;if(s===yA)return r.UNSIGNED_SHORT_5_5_5_1;if(s===f1)return r.BYTE;if(s===p1)return r.SHORT;if(s===Pg)return r.UNSIGNED_SHORT;if(s===gA)return r.INT;if(s===Va)return r.UNSIGNED_INT;if(s===bi)return r.FLOAT;if(s===Mi)return n?r.HALF_FLOAT:(l=e.get("OES_texture_half_float"),l!==null?l.HALF_FLOAT_OES:null);if(s===m1)return r.ALPHA;if(s===ji)return r.RGBA;if(s===g1)return r.LUMINANCE;if(s===v1)return r.LUMINANCE_ALPHA;if(s===Xl)return r.DEPTH_COMPONENT;if(s===_u)return r.DEPTH_STENCIL;if(s===vg)return l=e.get("EXT_sRGB"),l!==null?l.SRGB_ALPHA_EXT:null;if(s===AA)return r.RED;if(s===EA)return r.RED_INTEGER;if(s===y1)return r.RG;if(s===xA)return r.RG_INTEGER;if(s===_A)return r.RGBA_INTEGER;if(s===tg||s===ng||s===rg||s===ig)if(u===$n)if(l=e.get("WEBGL_compressed_texture_s3tc_srgb"),l!==null){if(s===tg)return l.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===ng)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===rg)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===ig)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(l=e.get("WEBGL_compressed_texture_s3tc"),l!==null){if(s===tg)return l.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===ng)return l.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===rg)return l.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===ig)return l.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===Ey||s===xy||s===_y||s===Cy)if(l=e.get("WEBGL_compressed_texture_pvrtc"),l!==null){if(s===Ey)return l.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===xy)return l.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===_y)return l.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===Cy)return l.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===A1)return l=e.get("WEBGL_compressed_texture_etc1"),l!==null?l.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===wy||s===Sy)if(l=e.get("WEBGL_compressed_texture_etc"),l!==null){if(s===wy)return u===$n?l.COMPRESSED_SRGB8_ETC2:l.COMPRESSED_RGB8_ETC2;if(s===Sy)return u===$n?l.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:l.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===By||s===by||s===My||s===Ty||s===Ry||s===Dy||s===Py||s===Ly||s===Iy||s===Ny||s===Fy||s===ky||s===Oy||s===Uy)if(l=e.get("WEBGL_compressed_texture_astc"),l!==null){if(s===By)return u===$n?l.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:l.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===by)return u===$n?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:l.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===My)return u===$n?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:l.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===Ty)return u===$n?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:l.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===Ry)return u===$n?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:l.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===Dy)return u===$n?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:l.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===Py)return u===$n?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:l.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===Ly)return u===$n?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:l.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===Iy)return u===$n?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:l.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===Ny)return u===$n?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:l.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===Fy)return u===$n?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:l.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===ky)return u===$n?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:l.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===Oy)return u===$n?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:l.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===Uy)return u===$n?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:l.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===sg||s===Hy||s===zy)if(l=e.get("EXT_texture_compression_bptc"),l!==null){if(s===sg)return u===$n?l.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:l.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(s===Hy)return l.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(s===zy)return l.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(s===E1||s===Gy||s===jy||s===Vy)if(l=e.get("EXT_texture_compression_rgtc"),l!==null){if(s===sg)return l.COMPRESSED_RED_RGTC1_EXT;if(s===Gy)return l.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===jy)return l.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===Vy)return l.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===Jl?n?r.UNSIGNED_INT_24_8:(l=e.get("WEBGL_depth_texture"),l!==null?l.UNSIGNED_INT_24_8_WEBGL:null):r[s]!==void 0?r[s]:null}return{convert:i}}class q1 extends Ar{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Wa extends bn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const uI={type:"move"};class yv{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Wa,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Wa,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new X,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new X),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Wa,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new X,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new X),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let i=null,s=null,o=null;const l=this._targetRay,u=this._grip,h=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(h&&e.hand){o=!0;for(const w of e.hand.values()){const C=t.getJointPose(w,n),x=this._getHandJoint(h,w);C!==null&&(x.matrix.fromArray(C.transform.matrix),x.matrix.decompose(x.position,x.rotation,x.scale),x.matrixWorldNeedsUpdate=!0,x.jointRadius=C.radius),x.visible=C!==null}const p=h.joints["index-finger-tip"],m=h.joints["thumb-tip"],v=p.position.distanceTo(m.position),y=.02,E=.005;h.inputState.pinching&&v>y+E?(h.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!h.inputState.pinching&&v<=y-E&&(h.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else u!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),s!==null&&(u.matrix.fromArray(s.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,s.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(s.linearVelocity)):u.hasLinearVelocity=!1,s.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(s.angularVelocity)):u.hasAngularVelocity=!1));l!==null&&(i=t.getPose(e.targetRaySpace,n),i===null&&s!==null&&(i=s),i!==null&&(l.matrix.fromArray(i.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,i.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(i.linearVelocity)):l.hasLinearVelocity=!1,i.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(i.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(uI)))}return l!==null&&(l.visible=i!==null),u!==null&&(u.visible=s!==null),h!==null&&(h.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new Wa;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class Y1 extends ar{constructor(e,t,n,i,s,o,l,u,h,p){if(p=p!==void 0?p:Xl,p!==Xl&&p!==_u)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&p===Xl&&(n=Va),n===void 0&&p===_u&&(n=Jl),super(null,i,s,o,l,u,p,n,h),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=l!==void 0?l:or,this.minFilter=u!==void 0?u:or,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class dI extends Za{constructor(e,t){super();const n=this;let i=null,s=1,o=null,l="local-floor",u=1,h=null,p=null,m=null,v=null,y=null,E=null;const w=t.getContextAttributes();let C=null,x=null;const M=[],S=[],R=new Ar;R.layers.enable(1),R.viewport=new Un;const N=new Ar;N.layers.enable(2),N.viewport=new Un;const I=[R,N],O=new q1;O.layers.enable(1),O.layers.enable(2);let j=null,F=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(z){let K=M[z];return K===void 0&&(K=new yv,M[z]=K),K.getTargetRaySpace()},this.getControllerGrip=function(z){let K=M[z];return K===void 0&&(K=new yv,M[z]=K),K.getGripSpace()},this.getHand=function(z){let K=M[z];return K===void 0&&(K=new yv,M[z]=K),K.getHandSpace()};function H(z){const K=S.indexOf(z.inputSource);if(K===-1)return;const xe=M[K];xe!==void 0&&(xe.update(z.inputSource,z.frame,h||o),xe.dispatchEvent({type:z.type,data:z.inputSource}))}function ee(){i.removeEventListener("select",H),i.removeEventListener("selectstart",H),i.removeEventListener("selectend",H),i.removeEventListener("squeeze",H),i.removeEventListener("squeezestart",H),i.removeEventListener("squeezeend",H),i.removeEventListener("end",ee),i.removeEventListener("inputsourceschange",de);for(let z=0;z<M.length;z++){const K=S[z];K!==null&&(S[z]=null,M[z].disconnect(K))}j=null,F=null,e.setRenderTarget(C),y=null,v=null,m=null,i=null,x=null,ne.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(z){s=z,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(z){l=z,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return h||o},this.setReferenceSpace=function(z){h=z},this.getBaseLayer=function(){return v!==null?v:y},this.getBinding=function(){return m},this.getFrame=function(){return E},this.getSession=function(){return i},this.setSession=async function(z){if(i=z,i!==null){if(C=e.getRenderTarget(),i.addEventListener("select",H),i.addEventListener("selectstart",H),i.addEventListener("selectend",H),i.addEventListener("squeeze",H),i.addEventListener("squeezestart",H),i.addEventListener("squeezeend",H),i.addEventListener("end",ee),i.addEventListener("inputsourceschange",de),w.xrCompatible!==!0&&await t.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const K={antialias:i.renderState.layers===void 0?w.antialias:!0,alpha:!0,depth:w.depth,stencil:w.stencil,framebufferScaleFactor:s};y=new XRWebGLLayer(i,t,K),i.updateRenderState({baseLayer:y}),x=new Wi(y.framebufferWidth,y.framebufferHeight,{format:ji,type:Xo,colorSpace:e.outputColorSpace,stencilBuffer:w.stencil})}else{let K=null,xe=null,De=null;w.depth&&(De=w.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,K=w.stencil?_u:Xl,xe=w.stencil?Jl:Va);const Ie={colorFormat:t.RGBA8,depthFormat:De,scaleFactor:s};m=new XRWebGLBinding(i,t),v=m.createProjectionLayer(Ie),i.updateRenderState({layers:[v]}),x=new Wi(v.textureWidth,v.textureHeight,{format:ji,type:Xo,depthTexture:new Y1(v.textureWidth,v.textureHeight,xe,void 0,void 0,void 0,void 0,void 0,void 0,K),stencilBuffer:w.stencil,colorSpace:e.outputColorSpace,samples:w.antialias?4:0});const Oe=e.properties.get(x);Oe.__ignoreDepthValues=v.ignoreDepthValues}x.isXRRenderTarget=!0,this.setFoveation(u),h=null,o=await i.requestReferenceSpace(l),ne.setContext(i),ne.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function de(z){for(let K=0;K<z.removed.length;K++){const xe=z.removed[K],De=S.indexOf(xe);De>=0&&(S[De]=null,M[De].disconnect(xe))}for(let K=0;K<z.added.length;K++){const xe=z.added[K];let De=S.indexOf(xe);if(De===-1){for(let Oe=0;Oe<M.length;Oe++)if(Oe>=S.length){S.push(xe),De=Oe;break}else if(S[Oe]===null){S[Oe]=xe,De=Oe;break}if(De===-1)break}const Ie=M[De];Ie&&Ie.connect(xe)}}const ve=new X,Y=new X;function me(z,K,xe){ve.setFromMatrixPosition(K.matrixWorld),Y.setFromMatrixPosition(xe.matrixWorld);const De=ve.distanceTo(Y),Ie=K.projectionMatrix.elements,Oe=xe.projectionMatrix.elements,tt=Ie[14]/(Ie[10]-1),rt=Ie[14]/(Ie[10]+1),gt=(Ie[9]+1)/Ie[5],kt=(Ie[9]-1)/Ie[5],xt=(Ie[8]-1)/Ie[0],se=(Oe[8]+1)/Oe[0],Je=tt*xt,Fe=tt*se,$e=De/(-xt+se),ze=$e*-xt;K.matrixWorld.decompose(z.position,z.quaternion,z.scale),z.translateX(ze),z.translateZ($e),z.matrixWorld.compose(z.position,z.quaternion,z.scale),z.matrixWorldInverse.copy(z.matrixWorld).invert();const bt=tt+$e,ft=rt+$e,yt=Je-ze,Lt=Fe+(De-ze),Kt=gt*rt/ft*bt,Mn=kt*rt/ft*bt;z.projectionMatrix.makePerspective(yt,Lt,Kt,Mn,bt,ft),z.projectionMatrixInverse.copy(z.projectionMatrix).invert()}function pe(z,K){K===null?z.matrixWorld.copy(z.matrix):z.matrixWorld.multiplyMatrices(K.matrixWorld,z.matrix),z.matrixWorldInverse.copy(z.matrixWorld).invert()}this.updateCamera=function(z){if(i===null)return;O.near=N.near=R.near=z.near,O.far=N.far=R.far=z.far,(j!==O.near||F!==O.far)&&(i.updateRenderState({depthNear:O.near,depthFar:O.far}),j=O.near,F=O.far);const K=z.parent,xe=O.cameras;pe(O,K);for(let De=0;De<xe.length;De++)pe(xe[De],K);xe.length===2?me(O,R,N):O.projectionMatrix.copy(R.projectionMatrix),Ae(z,O,K)};function Ae(z,K,xe){xe===null?z.matrix.copy(K.matrixWorld):(z.matrix.copy(xe.matrixWorld),z.matrix.invert(),z.matrix.multiply(K.matrixWorld)),z.matrix.decompose(z.position,z.quaternion,z.scale),z.updateMatrixWorld(!0),z.projectionMatrix.copy(K.projectionMatrix),z.projectionMatrixInverse.copy(K.projectionMatrixInverse),z.isPerspectiveCamera&&(z.fov=Bh*2*Math.atan(1/z.projectionMatrix.elements[5]),z.zoom=1)}this.getCamera=function(){return O},this.getFoveation=function(){if(!(v===null&&y===null))return u},this.setFoveation=function(z){u=z,v!==null&&(v.fixedFoveation=z),y!==null&&y.fixedFoveation!==void 0&&(y.fixedFoveation=z)};let te=null;function ce(z,K){if(p=K.getViewerPose(h||o),E=K,p!==null){const xe=p.views;y!==null&&(e.setRenderTargetFramebuffer(x,y.framebuffer),e.setRenderTarget(x));let De=!1;xe.length!==O.cameras.length&&(O.cameras.length=0,De=!0);for(let Ie=0;Ie<xe.length;Ie++){const Oe=xe[Ie];let tt=null;if(y!==null)tt=y.getViewport(Oe);else{const gt=m.getViewSubImage(v,Oe);tt=gt.viewport,Ie===0&&(e.setRenderTargetTextures(x,gt.colorTexture,v.ignoreDepthValues?void 0:gt.depthStencilTexture),e.setRenderTarget(x))}let rt=I[Ie];rt===void 0&&(rt=new Ar,rt.layers.enable(Ie),rt.viewport=new Un,I[Ie]=rt),rt.matrix.fromArray(Oe.transform.matrix),rt.matrix.decompose(rt.position,rt.quaternion,rt.scale),rt.projectionMatrix.fromArray(Oe.projectionMatrix),rt.projectionMatrixInverse.copy(rt.projectionMatrix).invert(),rt.viewport.set(tt.x,tt.y,tt.width,tt.height),Ie===0&&(O.matrix.copy(rt.matrix),O.matrix.decompose(O.position,O.quaternion,O.scale)),De===!0&&O.cameras.push(rt)}}for(let xe=0;xe<M.length;xe++){const De=S[xe],Ie=M[xe];De!==null&&Ie!==void 0&&Ie.update(De,K,h||o)}te&&te(z,K),K.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:K}),E=null}const ne=new j1;ne.setAnimationLoop(ce),this.setAnimationLoop=function(z){te=z},this.dispose=function(){}}}function hI(r,e){function t(C,x){C.matrixAutoUpdate===!0&&C.updateMatrix(),x.value.copy(C.matrix)}function n(C,x){x.color.getRGB(C.fogColor.value,z1(r)),x.isFog?(C.fogNear.value=x.near,C.fogFar.value=x.far):x.isFogExp2&&(C.fogDensity.value=x.density)}function i(C,x,M,S,R){x.isMeshBasicMaterial||x.isMeshLambertMaterial?s(C,x):x.isMeshToonMaterial?(s(C,x),m(C,x)):x.isMeshPhongMaterial?(s(C,x),p(C,x)):x.isMeshStandardMaterial?(s(C,x),v(C,x),x.isMeshPhysicalMaterial&&y(C,x,R)):x.isMeshMatcapMaterial?(s(C,x),E(C,x)):x.isMeshDepthMaterial?s(C,x):x.isMeshDistanceMaterial?(s(C,x),w(C,x)):x.isMeshNormalMaterial?s(C,x):x.isLineBasicMaterial?(o(C,x),x.isLineDashedMaterial&&l(C,x)):x.isPointsMaterial?u(C,x,M,S):x.isSpriteMaterial?h(C,x):x.isShadowMaterial?(C.color.value.copy(x.color),C.opacity.value=x.opacity):x.isShaderMaterial&&(x.uniformsNeedUpdate=!1)}function s(C,x){C.opacity.value=x.opacity,x.color&&C.diffuse.value.copy(x.color),x.emissive&&C.emissive.value.copy(x.emissive).multiplyScalar(x.emissiveIntensity),x.map&&(C.map.value=x.map,t(x.map,C.mapTransform)),x.alphaMap&&(C.alphaMap.value=x.alphaMap,t(x.alphaMap,C.alphaMapTransform)),x.bumpMap&&(C.bumpMap.value=x.bumpMap,t(x.bumpMap,C.bumpMapTransform),C.bumpScale.value=x.bumpScale,x.side===Vi&&(C.bumpScale.value*=-1)),x.normalMap&&(C.normalMap.value=x.normalMap,t(x.normalMap,C.normalMapTransform),C.normalScale.value.copy(x.normalScale),x.side===Vi&&C.normalScale.value.negate()),x.displacementMap&&(C.displacementMap.value=x.displacementMap,t(x.displacementMap,C.displacementMapTransform),C.displacementScale.value=x.displacementScale,C.displacementBias.value=x.displacementBias),x.emissiveMap&&(C.emissiveMap.value=x.emissiveMap,t(x.emissiveMap,C.emissiveMapTransform)),x.specularMap&&(C.specularMap.value=x.specularMap,t(x.specularMap,C.specularMapTransform)),x.alphaTest>0&&(C.alphaTest.value=x.alphaTest);const M=e.get(x).envMap;if(M&&(C.envMap.value=M,C.flipEnvMap.value=M.isCubeTexture&&M.isRenderTargetTexture===!1?-1:1,C.reflectivity.value=x.reflectivity,C.ior.value=x.ior,C.refractionRatio.value=x.refractionRatio),x.lightMap){C.lightMap.value=x.lightMap;const S=r._useLegacyLights===!0?Math.PI:1;C.lightMapIntensity.value=x.lightMapIntensity*S,t(x.lightMap,C.lightMapTransform)}x.aoMap&&(C.aoMap.value=x.aoMap,C.aoMapIntensity.value=x.aoMapIntensity,t(x.aoMap,C.aoMapTransform))}function o(C,x){C.diffuse.value.copy(x.color),C.opacity.value=x.opacity,x.map&&(C.map.value=x.map,t(x.map,C.mapTransform))}function l(C,x){C.dashSize.value=x.dashSize,C.totalSize.value=x.dashSize+x.gapSize,C.scale.value=x.scale}function u(C,x,M,S){C.diffuse.value.copy(x.color),C.opacity.value=x.opacity,C.size.value=x.size*M,C.scale.value=S*.5,x.map&&(C.map.value=x.map,t(x.map,C.uvTransform)),x.alphaMap&&(C.alphaMap.value=x.alphaMap,t(x.alphaMap,C.alphaMapTransform)),x.alphaTest>0&&(C.alphaTest.value=x.alphaTest)}function h(C,x){C.diffuse.value.copy(x.color),C.opacity.value=x.opacity,C.rotation.value=x.rotation,x.map&&(C.map.value=x.map,t(x.map,C.mapTransform)),x.alphaMap&&(C.alphaMap.value=x.alphaMap,t(x.alphaMap,C.alphaMapTransform)),x.alphaTest>0&&(C.alphaTest.value=x.alphaTest)}function p(C,x){C.specular.value.copy(x.specular),C.shininess.value=Math.max(x.shininess,1e-4)}function m(C,x){x.gradientMap&&(C.gradientMap.value=x.gradientMap)}function v(C,x){C.metalness.value=x.metalness,x.metalnessMap&&(C.metalnessMap.value=x.metalnessMap,t(x.metalnessMap,C.metalnessMapTransform)),C.roughness.value=x.roughness,x.roughnessMap&&(C.roughnessMap.value=x.roughnessMap,t(x.roughnessMap,C.roughnessMapTransform)),e.get(x).envMap&&(C.envMapIntensity.value=x.envMapIntensity)}function y(C,x,M){C.ior.value=x.ior,x.sheen>0&&(C.sheenColor.value.copy(x.sheenColor).multiplyScalar(x.sheen),C.sheenRoughness.value=x.sheenRoughness,x.sheenColorMap&&(C.sheenColorMap.value=x.sheenColorMap,t(x.sheenColorMap,C.sheenColorMapTransform)),x.sheenRoughnessMap&&(C.sheenRoughnessMap.value=x.sheenRoughnessMap,t(x.sheenRoughnessMap,C.sheenRoughnessMapTransform))),x.clearcoat>0&&(C.clearcoat.value=x.clearcoat,C.clearcoatRoughness.value=x.clearcoatRoughness,x.clearcoatMap&&(C.clearcoatMap.value=x.clearcoatMap,t(x.clearcoatMap,C.clearcoatMapTransform)),x.clearcoatRoughnessMap&&(C.clearcoatRoughnessMap.value=x.clearcoatRoughnessMap,t(x.clearcoatRoughnessMap,C.clearcoatRoughnessMapTransform)),x.clearcoatNormalMap&&(C.clearcoatNormalMap.value=x.clearcoatNormalMap,t(x.clearcoatNormalMap,C.clearcoatNormalMapTransform),C.clearcoatNormalScale.value.copy(x.clearcoatNormalScale),x.side===Vi&&C.clearcoatNormalScale.value.negate())),x.iridescence>0&&(C.iridescence.value=x.iridescence,C.iridescenceIOR.value=x.iridescenceIOR,C.iridescenceThicknessMinimum.value=x.iridescenceThicknessRange[0],C.iridescenceThicknessMaximum.value=x.iridescenceThicknessRange[1],x.iridescenceMap&&(C.iridescenceMap.value=x.iridescenceMap,t(x.iridescenceMap,C.iridescenceMapTransform)),x.iridescenceThicknessMap&&(C.iridescenceThicknessMap.value=x.iridescenceThicknessMap,t(x.iridescenceThicknessMap,C.iridescenceThicknessMapTransform))),x.transmission>0&&(C.transmission.value=x.transmission,C.transmissionSamplerMap.value=M.texture,C.transmissionSamplerSize.value.set(M.width,M.height),x.transmissionMap&&(C.transmissionMap.value=x.transmissionMap,t(x.transmissionMap,C.transmissionMapTransform)),C.thickness.value=x.thickness,x.thicknessMap&&(C.thicknessMap.value=x.thicknessMap,t(x.thicknessMap,C.thicknessMapTransform)),C.attenuationDistance.value=x.attenuationDistance,C.attenuationColor.value.copy(x.attenuationColor)),x.anisotropy>0&&(C.anisotropyVector.value.set(x.anisotropy*Math.cos(x.anisotropyRotation),x.anisotropy*Math.sin(x.anisotropyRotation)),x.anisotropyMap&&(C.anisotropyMap.value=x.anisotropyMap,t(x.anisotropyMap,C.anisotropyMapTransform))),C.specularIntensity.value=x.specularIntensity,C.specularColor.value.copy(x.specularColor),x.specularColorMap&&(C.specularColorMap.value=x.specularColorMap,t(x.specularColorMap,C.specularColorMapTransform)),x.specularIntensityMap&&(C.specularIntensityMap.value=x.specularIntensityMap,t(x.specularIntensityMap,C.specularIntensityMapTransform))}function E(C,x){x.matcap&&(C.matcap.value=x.matcap)}function w(C,x){const M=e.get(x).light;C.referencePosition.value.setFromMatrixPosition(M.matrixWorld),C.nearDistance.value=M.shadow.camera.near,C.farDistance.value=M.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:i}}function fI(r,e,t,n){let i={},s={},o=[];const l=t.isWebGL2?r.getParameter(r.MAX_UNIFORM_BUFFER_BINDINGS):0;function u(M,S){const R=S.program;n.uniformBlockBinding(M,R)}function h(M,S){let R=i[M.id];R===void 0&&(E(M),R=p(M),i[M.id]=R,M.addEventListener("dispose",C));const N=S.program;n.updateUBOMapping(M,N);const I=e.render.frame;s[M.id]!==I&&(v(M),s[M.id]=I)}function p(M){const S=m();M.__bindingPointIndex=S;const R=r.createBuffer(),N=M.__size,I=M.usage;return r.bindBuffer(r.UNIFORM_BUFFER,R),r.bufferData(r.UNIFORM_BUFFER,N,I),r.bindBuffer(r.UNIFORM_BUFFER,null),r.bindBufferBase(r.UNIFORM_BUFFER,S,R),R}function m(){for(let M=0;M<l;M++)if(o.indexOf(M)===-1)return o.push(M),M;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function v(M){const S=i[M.id],R=M.uniforms,N=M.__cache;r.bindBuffer(r.UNIFORM_BUFFER,S);for(let I=0,O=R.length;I<O;I++){const j=R[I];if(y(j,I,N)===!0){const F=j.__offset,H=Array.isArray(j.value)?j.value:[j.value];let ee=0;for(let de=0;de<H.length;de++){const ve=H[de],Y=w(ve);typeof ve=="number"?(j.__data[0]=ve,r.bufferSubData(r.UNIFORM_BUFFER,F+ee,j.__data)):ve.isMatrix3?(j.__data[0]=ve.elements[0],j.__data[1]=ve.elements[1],j.__data[2]=ve.elements[2],j.__data[3]=ve.elements[0],j.__data[4]=ve.elements[3],j.__data[5]=ve.elements[4],j.__data[6]=ve.elements[5],j.__data[7]=ve.elements[0],j.__data[8]=ve.elements[6],j.__data[9]=ve.elements[7],j.__data[10]=ve.elements[8],j.__data[11]=ve.elements[0]):(ve.toArray(j.__data,ee),ee+=Y.storage/Float32Array.BYTES_PER_ELEMENT)}r.bufferSubData(r.UNIFORM_BUFFER,F,j.__data)}}r.bindBuffer(r.UNIFORM_BUFFER,null)}function y(M,S,R){const N=M.value;if(R[S]===void 0){if(typeof N=="number")R[S]=N;else{const I=Array.isArray(N)?N:[N],O=[];for(let j=0;j<I.length;j++)O.push(I[j].clone());R[S]=O}return!0}else if(typeof N=="number"){if(R[S]!==N)return R[S]=N,!0}else{const I=Array.isArray(R[S])?R[S]:[R[S]],O=Array.isArray(N)?N:[N];for(let j=0;j<I.length;j++){const F=I[j];if(F.equals(O[j])===!1)return F.copy(O[j]),!0}}return!1}function E(M){const S=M.uniforms;let R=0;const N=16;let I=0;for(let O=0,j=S.length;O<j;O++){const F=S[O],H={boundary:0,storage:0},ee=Array.isArray(F.value)?F.value:[F.value];for(let de=0,ve=ee.length;de<ve;de++){const Y=ee[de],me=w(Y);H.boundary+=me.boundary,H.storage+=me.storage}if(F.__data=new Float32Array(H.storage/Float32Array.BYTES_PER_ELEMENT),F.__offset=R,O>0){I=R%N;const de=N-I;I!==0&&de-H.boundary<0&&(R+=N-I,F.__offset=R)}R+=H.storage}return I=R%N,I>0&&(R+=N-I),M.__size=R,M.__cache={},this}function w(M){const S={boundary:0,storage:0};return typeof M=="number"?(S.boundary=4,S.storage=4):M.isVector2?(S.boundary=8,S.storage=8):M.isVector3||M.isColor?(S.boundary=16,S.storage=12):M.isVector4?(S.boundary=16,S.storage=16):M.isMatrix3?(S.boundary=48,S.storage=48):M.isMatrix4?(S.boundary=64,S.storage=64):M.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",M),S}function C(M){const S=M.target;S.removeEventListener("dispose",C);const R=o.indexOf(S.__bindingPointIndex);o.splice(R,1),r.deleteBuffer(i[S.id]),delete i[S.id],delete s[S.id]}function x(){for(const M in i)r.deleteBuffer(i[M]);o=[],i={},s={}}return{bind:u,update:h,dispose:x}}class NA{constructor(e={}){const{canvas:t=O1(),context:n=null,depth:i=!0,stencil:s=!0,alpha:o=!1,antialias:l=!1,premultipliedAlpha:u=!0,preserveDrawingBuffer:h=!1,powerPreference:p="default",failIfMajorPerformanceCaveat:m=!1}=e;this.isWebGLRenderer=!0;let v;n!==null?v=n.getContextAttributes().alpha:v=o;const y=new Uint32Array(4),E=new Int32Array(4);let w=null,C=null;const x=[],M=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Xr,this._useLegacyLights=!1,this.toneMapping=Jo,this.toneMappingExposure=1;const S=this;let R=!1,N=0,I=0,O=null,j=-1,F=null;const H=new Un,ee=new Un;let de=null;const ve=new ht(0);let Y=0,me=t.width,pe=t.height,Ae=1,te=null,ce=null;const ne=new Un(0,0,me,pe),z=new Un(0,0,me,pe);let K=!1;const xe=new Fg;let De=!1,Ie=!1,Oe=null;const tt=new $t,rt=new Ue,gt=new X,kt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function xt(){return O===null?Ae:1}let se=n;function Je(k,q){for(let $=0;$<k.length;$++){const oe=k[$],ie=t.getContext(oe,q);if(ie!==null)return ie}return null}try{const k={alpha:!0,depth:i,stencil:s,antialias:l,premultipliedAlpha:u,preserveDrawingBuffer:h,powerPreference:p,failIfMajorPerformanceCaveat:m};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Ru}`),t.addEventListener("webglcontextlost",ke,!1),t.addEventListener("webglcontextrestored",ue,!1),t.addEventListener("webglcontextcreationerror",ot,!1),se===null){const q=["webgl2","webgl","experimental-webgl"];if(S.isWebGL1Renderer===!0&&q.shift(),se=Je(q,k),se===null)throw Je(q)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&se instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),se.getShaderPrecisionFormat===void 0&&(se.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(k){throw console.error("THREE.WebGLRenderer: "+k.message),k}let Fe,$e,ze,bt,ft,yt,Lt,Kt,Mn,Z,W,Se,Ze,Ve,Ye,Ct,nt,ct,Ut,rn,Ge,gn,ae,Me;function He(){Fe=new ML(se),$e=new _L(se,Fe,e),Fe.init($e),gn=new K1(se,Fe,$e),ze=new lI(se,Fe,$e),bt=new DL(se),ft=new Y9,yt=new cI(se,Fe,ze,ft,$e,gn,bt),Lt=new wL(S),Kt=new bL(S),Mn=new z8(se,$e),ae=new EL(se,Fe,Mn,$e),Z=new TL(se,Mn,bt,ae),W=new NL(se,Z,Mn,bt),Ut=new IL(se,$e,yt),Ct=new CL(ft),Se=new q9(S,Lt,Kt,Fe,$e,ae,Ct),Ze=new hI(S,ft),Ve=new Q9,Ye=new iI(Fe,$e),ct=new AL(S,Lt,Kt,ze,W,v,u),nt=new aI(S,W,$e),Me=new fI(se,bt,$e,ze),rn=new xL(se,Fe,bt,$e),Ge=new RL(se,Fe,bt,$e),bt.programs=Se.programs,S.capabilities=$e,S.extensions=Fe,S.properties=ft,S.renderLists=Ve,S.shadowMap=nt,S.state=ze,S.info=bt}He();const We=new dI(S,se);this.xr=We,this.getContext=function(){return se},this.getContextAttributes=function(){return se.getContextAttributes()},this.forceContextLoss=function(){const k=Fe.get("WEBGL_lose_context");k&&k.loseContext()},this.forceContextRestore=function(){const k=Fe.get("WEBGL_lose_context");k&&k.restoreContext()},this.getPixelRatio=function(){return Ae},this.setPixelRatio=function(k){k!==void 0&&(Ae=k,this.setSize(me,pe,!1))},this.getSize=function(k){return k.set(me,pe)},this.setSize=function(k,q,$=!0){if(We.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}me=k,pe=q,t.width=Math.floor(k*Ae),t.height=Math.floor(q*Ae),$===!0&&(t.style.width=k+"px",t.style.height=q+"px"),this.setViewport(0,0,k,q)},this.getDrawingBufferSize=function(k){return k.set(me*Ae,pe*Ae).floor()},this.setDrawingBufferSize=function(k,q,$){me=k,pe=q,Ae=$,t.width=Math.floor(k*$),t.height=Math.floor(q*$),this.setViewport(0,0,k,q)},this.getCurrentViewport=function(k){return k.copy(H)},this.getViewport=function(k){return k.copy(ne)},this.setViewport=function(k,q,$,oe){k.isVector4?ne.set(k.x,k.y,k.z,k.w):ne.set(k,q,$,oe),ze.viewport(H.copy(ne).multiplyScalar(Ae).floor())},this.getScissor=function(k){return k.copy(z)},this.setScissor=function(k,q,$,oe){k.isVector4?z.set(k.x,k.y,k.z,k.w):z.set(k,q,$,oe),ze.scissor(ee.copy(z).multiplyScalar(Ae).floor())},this.getScissorTest=function(){return K},this.setScissorTest=function(k){ze.setScissorTest(K=k)},this.setOpaqueSort=function(k){te=k},this.setTransparentSort=function(k){ce=k},this.getClearColor=function(k){return k.copy(ct.getClearColor())},this.setClearColor=function(){ct.setClearColor.apply(ct,arguments)},this.getClearAlpha=function(){return ct.getClearAlpha()},this.setClearAlpha=function(){ct.setClearAlpha.apply(ct,arguments)},this.clear=function(k=!0,q=!0,$=!0){let oe=0;if(k){let ie=!1;if(O!==null){const Be=O.texture.format;ie=Be===_A||Be===xA||Be===EA}if(ie){const Be=O.texture.type,Te=Be===Xo||Be===Va||Be===Pg||Be===Jl||Be===vA||Be===yA,Pe=ct.getClearColor(),Ce=ct.getClearAlpha(),At=Pe.r,je=Pe.g,Ke=Pe.b;Te?(y[0]=At,y[1]=je,y[2]=Ke,y[3]=Ce,se.clearBufferuiv(se.COLOR,0,y)):(E[0]=At,E[1]=je,E[2]=Ke,E[3]=Ce,se.clearBufferiv(se.COLOR,0,E))}else oe|=se.COLOR_BUFFER_BIT}q&&(oe|=se.DEPTH_BUFFER_BIT),$&&(oe|=se.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),se.clear(oe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ke,!1),t.removeEventListener("webglcontextrestored",ue,!1),t.removeEventListener("webglcontextcreationerror",ot,!1),Ve.dispose(),Ye.dispose(),ft.dispose(),Lt.dispose(),Kt.dispose(),W.dispose(),ae.dispose(),Me.dispose(),Se.dispose(),We.dispose(),We.removeEventListener("sessionstart",Xn),We.removeEventListener("sessionend",un),Oe&&(Oe.dispose(),Oe=null),lr.stop()};function ke(k){k.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),R=!0}function ue(){console.log("THREE.WebGLRenderer: Context Restored."),R=!1;const k=bt.autoReset,q=nt.enabled,$=nt.autoUpdate,oe=nt.needsUpdate,ie=nt.type;He(),bt.autoReset=k,nt.enabled=q,nt.autoUpdate=$,nt.needsUpdate=oe,nt.type=ie}function ot(k){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",k.statusMessage)}function it(k){const q=k.target;q.removeEventListener("dispose",it),Ne(q)}function Ne(k){Qe(k),ft.remove(k)}function Qe(k){const q=ft.get(k).programs;q!==void 0&&(q.forEach(function($){Se.releaseProgram($)}),k.isShaderMaterial&&Se.releaseShaderCache(k))}this.renderBufferDirect=function(k,q,$,oe,ie,Be){q===null&&(q=kt);const Te=ie.isMesh&&ie.matrixWorld.determinant()<0,Pe=U(k,q,$,oe,ie);ze.setMaterial(oe,Te);let Ce=$.index,At=1;if(oe.wireframe===!0){if(Ce=Z.getWireframeAttribute($),Ce===void 0)return;At=2}const je=$.drawRange,Ke=$.attributes.position;let Et=je.start*At,Nt=(je.start+je.count)*At;Be!==null&&(Et=Math.max(Et,Be.start*At),Nt=Math.min(Nt,(Be.start+Be.count)*At)),Ce!==null?(Et=Math.max(Et,0),Nt=Math.min(Nt,Ce.count)):Ke!=null&&(Et=Math.max(Et,0),Nt=Math.min(Nt,Ke.count));const Ft=Nt-Et;if(Ft<0||Ft===1/0)return;ae.setup(ie,oe,Pe,$,Ce);let Vt,dt=rn;if(Ce!==null&&(Vt=Mn.get(Ce),dt=Ge,dt.setIndex(Vt)),ie.isMesh)oe.wireframe===!0?(ze.setLineWidth(oe.wireframeLinewidth*xt()),dt.setMode(se.LINES)):dt.setMode(se.TRIANGLES);else if(ie.isLine){let ut=oe.linewidth;ut===void 0&&(ut=1),ze.setLineWidth(ut*xt()),ie.isLineSegments?dt.setMode(se.LINES):ie.isLineLoop?dt.setMode(se.LINE_LOOP):dt.setMode(se.LINE_STRIP)}else ie.isPoints?dt.setMode(se.POINTS):ie.isSprite&&dt.setMode(se.TRIANGLES);if(ie.isInstancedMesh)dt.renderInstances(Et,Ft,ie.count);else if($.isInstancedBufferGeometry){const ut=$._maxInstanceCount!==void 0?$._maxInstanceCount:1/0,jt=Math.min($.instanceCount,ut);dt.renderInstances(Et,Ft,jt)}else dt.render(Et,Ft)};function Bt(k,q,$){k.transparent===!0&&k.side===Vs&&k.forceSinglePass===!1?(k.side=Vi,k.needsUpdate=!0,Qt(k,q,$),k.side=Yo,k.needsUpdate=!0,Qt(k,q,$),k.side=Vs):Qt(k,q,$)}this.compile=function(k,q,$=null){$===null&&($=k),C=Ye.get($),C.init(),M.push(C),$.traverseVisible(function(ie){ie.isLight&&ie.layers.test(q.layers)&&(C.pushLight(ie),ie.castShadow&&C.pushShadow(ie))}),k!==$&&k.traverseVisible(function(ie){ie.isLight&&ie.layers.test(q.layers)&&(C.pushLight(ie),ie.castShadow&&C.pushShadow(ie))}),C.setupLights(S._useLegacyLights);const oe=new Set;return k.traverse(function(ie){const Be=ie.material;if(Be)if(Array.isArray(Be))for(let Te=0;Te<Be.length;Te++){const Pe=Be[Te];Bt(Pe,$,ie),oe.add(Pe)}else Bt(Be,$,ie),oe.add(Be)}),M.pop(),C=null,oe},this.compileAsync=function(k,q,$=null){const oe=this.compile(k,q,$);return new Promise(ie=>{function Be(){if(oe.forEach(function(Te){ft.get(Te).currentProgram.isReady()&&oe.delete(Te)}),oe.size===0){ie(k);return}setTimeout(Be,10)}Fe.get("KHR_parallel_shader_compile")!==null?Be():setTimeout(Be,10)})};let tn=null;function xn(k){tn&&tn(k)}function Xn(){lr.stop()}function un(){lr.start()}const lr=new j1;lr.setAnimationLoop(xn),typeof self<"u"&&lr.setContext(self),this.setAnimationLoop=function(k){tn=k,We.setAnimationLoop(k),k===null?lr.stop():lr.start()},We.addEventListener("sessionstart",Xn),We.addEventListener("sessionend",un),this.render=function(k,q){if(q!==void 0&&q.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(R===!0)return;k.matrixWorldAutoUpdate===!0&&k.updateMatrixWorld(),q.parent===null&&q.matrixWorldAutoUpdate===!0&&q.updateMatrixWorld(),We.enabled===!0&&We.isPresenting===!0&&(We.cameraAutoUpdate===!0&&We.updateCamera(q),q=We.getCamera()),k.isScene===!0&&k.onBeforeRender(S,k,q,O),C=Ye.get(k,M.length),C.init(),M.push(C),tt.multiplyMatrices(q.projectionMatrix,q.matrixWorldInverse),xe.setFromProjectionMatrix(tt),Ie=this.localClippingEnabled,De=Ct.init(this.clippingPlanes,Ie),w=Ve.get(k,x.length),w.init(),x.push(w),Br(k,q,0,S.sortObjects),w.finish(),S.sortObjects===!0&&w.sort(te,ce),this.info.render.frame++,De===!0&&Ct.beginShadows();const $=C.state.shadowsArray;if(nt.render($,k,q),De===!0&&Ct.endShadows(),this.info.autoReset===!0&&this.info.reset(),ct.render(w,k),C.setupLights(S._useLegacyLights),q.isArrayCamera){const oe=q.cameras;for(let ie=0,Be=oe.length;ie<Be;ie++){const Te=oe[ie];Rs(w,k,Te,Te.viewport)}}else Rs(w,k,q);O!==null&&(yt.updateMultisampleRenderTarget(O),yt.updateRenderTargetMipmap(O)),k.isScene===!0&&k.onAfterRender(S,k,q),ae.resetDefaultState(),j=-1,F=null,M.pop(),M.length>0?C=M[M.length-1]:C=null,x.pop(),x.length>0?w=x[x.length-1]:w=null};function Br(k,q,$,oe){if(k.visible===!1)return;if(k.layers.test(q.layers)){if(k.isGroup)$=k.renderOrder;else if(k.isLOD)k.autoUpdate===!0&&k.update(q);else if(k.isLight)C.pushLight(k),k.castShadow&&C.pushShadow(k);else if(k.isSprite){if(!k.frustumCulled||xe.intersectsSprite(k)){oe&&gt.setFromMatrixPosition(k.matrixWorld).applyMatrix4(tt);const Te=W.update(k),Pe=k.material;Pe.visible&&w.push(k,Te,Pe,$,gt.z,null)}}else if((k.isMesh||k.isLine||k.isPoints)&&(!k.frustumCulled||xe.intersectsObject(k))){const Te=W.update(k),Pe=k.material;if(oe&&(k.boundingSphere!==void 0?(k.boundingSphere===null&&k.computeBoundingSphere(),gt.copy(k.boundingSphere.center)):(Te.boundingSphere===null&&Te.computeBoundingSphere(),gt.copy(Te.boundingSphere.center)),gt.applyMatrix4(k.matrixWorld).applyMatrix4(tt)),Array.isArray(Pe)){const Ce=Te.groups;for(let At=0,je=Ce.length;At<je;At++){const Ke=Ce[At],Et=Pe[Ke.materialIndex];Et&&Et.visible&&w.push(k,Te,Et,$,gt.z,Ke)}}else Pe.visible&&w.push(k,Te,Pe,$,gt.z,null)}}const Be=k.children;for(let Te=0,Pe=Be.length;Te<Pe;Te++)Br(Be[Te],q,$,oe)}function Rs(k,q,$,oe){const ie=k.opaque,Be=k.transmissive,Te=k.transparent;C.setupLightsView($),De===!0&&Ct.setGlobalState(S.clippingPlanes,$),Be.length>0&&ls(ie,Be,q,$),oe&&ze.viewport(H.copy(oe)),ie.length>0&&ri(ie,q,$),Be.length>0&&ri(Be,q,$),Te.length>0&&ri(Te,q,$),ze.buffers.depth.setTest(!0),ze.buffers.depth.setMask(!0),ze.buffers.color.setMask(!0),ze.setPolygonOffset(!1)}function ls(k,q,$,oe){if(($.isScene===!0?$.overrideMaterial:null)!==null)return;const Be=$e.isWebGL2;Oe===null&&(Oe=new Wi(1,1,{generateMipmaps:!0,type:Fe.has("EXT_color_buffer_half_float")?Mi:Xo,minFilter:Qo,samples:Be?4:0})),S.getDrawingBufferSize(rt),Be?Oe.setSize(rt.x,rt.y):Oe.setSize(yg(rt.x),yg(rt.y));const Te=S.getRenderTarget();S.setRenderTarget(Oe),S.getClearColor(ve),Y=S.getClearAlpha(),Y<1&&S.setClearColor(16777215,.5),S.clear();const Pe=S.toneMapping;S.toneMapping=Jo,ri(k,$,oe),yt.updateMultisampleRenderTarget(Oe),yt.updateRenderTargetMipmap(Oe);let Ce=!1;for(let At=0,je=q.length;At<je;At++){const Ke=q[At],Et=Ke.object,Nt=Ke.geometry,Ft=Ke.material,Vt=Ke.group;if(Ft.side===Vs&&Et.layers.test(oe.layers)){const dt=Ft.side;Ft.side=Vi,Ft.needsUpdate=!0,kr(Et,$,oe,Nt,Ft,Vt),Ft.side=dt,Ft.needsUpdate=!0,Ce=!0}}Ce===!0&&(yt.updateMultisampleRenderTarget(Oe),yt.updateRenderTargetMipmap(Oe)),S.setRenderTarget(Te),S.setClearColor(ve,Y),S.toneMapping=Pe}function ri(k,q,$){const oe=q.isScene===!0?q.overrideMaterial:null;for(let ie=0,Be=k.length;ie<Be;ie++){const Te=k[ie],Pe=Te.object,Ce=Te.geometry,At=oe===null?Te.material:oe,je=Te.group;Pe.layers.test($.layers)&&kr(Pe,q,$,Ce,At,je)}}function kr(k,q,$,oe,ie,Be){k.onBeforeRender(S,q,$,oe,ie,Be),k.modelViewMatrix.multiplyMatrices($.matrixWorldInverse,k.matrixWorld),k.normalMatrix.getNormalMatrix(k.modelViewMatrix),ie.onBeforeRender(S,q,$,oe,k,Be),ie.transparent===!0&&ie.side===Vs&&ie.forceSinglePass===!1?(ie.side=Vi,ie.needsUpdate=!0,S.renderBufferDirect($,q,oe,ie,k,Be),ie.side=Yo,ie.needsUpdate=!0,S.renderBufferDirect($,q,oe,ie,k,Be),ie.side=Vs):S.renderBufferDirect($,q,oe,ie,k,Be),k.onAfterRender(S,q,$,oe,ie,Be)}function Qt(k,q,$){q.isScene!==!0&&(q=kt);const oe=ft.get(k),ie=C.state.lights,Be=C.state.shadowsArray,Te=ie.state.version,Pe=Se.getParameters(k,ie.state,Be,q,$),Ce=Se.getProgramCacheKey(Pe);let At=oe.programs;oe.environment=k.isMeshStandardMaterial?q.environment:null,oe.fog=q.fog,oe.envMap=(k.isMeshStandardMaterial?Kt:Lt).get(k.envMap||oe.environment),At===void 0&&(k.addEventListener("dispose",it),At=new Map,oe.programs=At);let je=At.get(Ce);if(je!==void 0){if(oe.currentProgram===je&&oe.lightsStateVersion===Te)return el(k,Pe),je}else Pe.uniforms=Se.getUniforms(k),k.onBuild($,Pe,S),k.onBeforeCompile(Pe,S),je=Se.acquireProgram(Pe,Ce),At.set(Ce,je),oe.uniforms=Pe.uniforms;const Ke=oe.uniforms;return(!k.isShaderMaterial&&!k.isRawShaderMaterial||k.clipping===!0)&&(Ke.clippingPlanes=Ct.uniform),el(k,Pe),oe.needsLights=le(k),oe.lightsStateVersion=Te,oe.needsLights&&(Ke.ambientLightColor.value=ie.state.ambient,Ke.lightProbe.value=ie.state.probe,Ke.directionalLights.value=ie.state.directional,Ke.directionalLightShadows.value=ie.state.directionalShadow,Ke.spotLights.value=ie.state.spot,Ke.spotLightShadows.value=ie.state.spotShadow,Ke.rectAreaLights.value=ie.state.rectArea,Ke.ltc_1.value=ie.state.rectAreaLTC1,Ke.ltc_2.value=ie.state.rectAreaLTC2,Ke.pointLights.value=ie.state.point,Ke.pointLightShadows.value=ie.state.pointShadow,Ke.hemisphereLights.value=ie.state.hemi,Ke.directionalShadowMap.value=ie.state.directionalShadowMap,Ke.directionalShadowMatrix.value=ie.state.directionalShadowMatrix,Ke.spotShadowMap.value=ie.state.spotShadowMap,Ke.spotLightMatrix.value=ie.state.spotLightMatrix,Ke.spotLightMap.value=ie.state.spotLightMap,Ke.pointShadowMap.value=ie.state.pointShadowMap,Ke.pointShadowMatrix.value=ie.state.pointShadowMatrix),oe.currentProgram=je,oe.uniformsList=null,je}function ta(k){if(k.uniformsList===null){const q=k.currentProgram.getUniforms();k.uniformsList=ag.seqWithValue(q.seq,k.uniforms)}return k.uniformsList}function el(k,q){const $=ft.get(k);$.outputColorSpace=q.outputColorSpace,$.instancing=q.instancing,$.instancingColor=q.instancingColor,$.skinning=q.skinning,$.morphTargets=q.morphTargets,$.morphNormals=q.morphNormals,$.morphColors=q.morphColors,$.morphTargetsCount=q.morphTargetsCount,$.numClippingPlanes=q.numClippingPlanes,$.numIntersection=q.numClipIntersection,$.vertexAlphas=q.vertexAlphas,$.vertexTangents=q.vertexTangents,$.toneMapping=q.toneMapping}function U(k,q,$,oe,ie){q.isScene!==!0&&(q=kt),yt.resetTextureUnits();const Be=q.fog,Te=oe.isMeshStandardMaterial?q.environment:null,Pe=O===null?S.outputColorSpace:O.isXRRenderTarget===!0?O.texture.colorSpace:Zo,Ce=(oe.isMeshStandardMaterial?Kt:Lt).get(oe.envMap||Te),At=oe.vertexColors===!0&&!!$.attributes.color&&$.attributes.color.itemSize===4,je=!!$.attributes.tangent&&(!!oe.normalMap||oe.anisotropy>0),Ke=!!$.morphAttributes.position,Et=!!$.morphAttributes.normal,Nt=!!$.morphAttributes.color;let Ft=Jo;oe.toneMapped&&(O===null||O.isXRRenderTarget===!0)&&(Ft=S.toneMapping);const Vt=$.morphAttributes.position||$.morphAttributes.normal||$.morphAttributes.color,dt=Vt!==void 0?Vt.length:0,ut=ft.get(oe),jt=C.state.lights;if(De===!0&&(Ie===!0||k!==F)){const nn=k===F&&oe.id===j;Ct.setState(oe,k,nn)}let Wt=!1;oe.version===ut.__version?(ut.needsLights&&ut.lightsStateVersion!==jt.state.version||ut.outputColorSpace!==Pe||ie.isInstancedMesh&&ut.instancing===!1||!ie.isInstancedMesh&&ut.instancing===!0||ie.isSkinnedMesh&&ut.skinning===!1||!ie.isSkinnedMesh&&ut.skinning===!0||ie.isInstancedMesh&&ut.instancingColor===!0&&ie.instanceColor===null||ie.isInstancedMesh&&ut.instancingColor===!1&&ie.instanceColor!==null||ut.envMap!==Ce||oe.fog===!0&&ut.fog!==Be||ut.numClippingPlanes!==void 0&&(ut.numClippingPlanes!==Ct.numPlanes||ut.numIntersection!==Ct.numIntersection)||ut.vertexAlphas!==At||ut.vertexTangents!==je||ut.morphTargets!==Ke||ut.morphNormals!==Et||ut.morphColors!==Nt||ut.toneMapping!==Ft||$e.isWebGL2===!0&&ut.morphTargetsCount!==dt)&&(Wt=!0):(Wt=!0,ut.__version=oe.version);let Jt=ut.currentProgram;Wt===!0&&(Jt=Qt(oe,q,ie));let Pn=!1,jn=!1,Nn=!1;const vn=Jt.getUniforms(),on=ut.uniforms;if(ze.useProgram(Jt.program)&&(Pn=!0,jn=!0,Nn=!0),oe.id!==j&&(j=oe.id,jn=!0),Pn||F!==k){vn.setValue(se,"projectionMatrix",k.projectionMatrix),vn.setValue(se,"viewMatrix",k.matrixWorldInverse);const nn=vn.map.cameraPosition;nn!==void 0&&nn.setValue(se,gt.setFromMatrixPosition(k.matrixWorld)),$e.logarithmicDepthBuffer&&vn.setValue(se,"logDepthBufFC",2/(Math.log(k.far+1)/Math.LN2)),(oe.isMeshPhongMaterial||oe.isMeshToonMaterial||oe.isMeshLambertMaterial||oe.isMeshBasicMaterial||oe.isMeshStandardMaterial||oe.isShaderMaterial)&&vn.setValue(se,"isOrthographic",k.isOrthographicCamera===!0),F!==k&&(F=k,jn=!0,Nn=!0)}if(ie.isSkinnedMesh){vn.setOptional(se,ie,"bindMatrix"),vn.setOptional(se,ie,"bindMatrixInverse");const nn=ie.skeleton;nn&&($e.floatVertexTextures?(nn.boneTexture===null&&nn.computeBoneTexture(),vn.setValue(se,"boneTexture",nn.boneTexture,yt),vn.setValue(se,"boneTextureSize",nn.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Qn=$.morphAttributes;if((Qn.position!==void 0||Qn.normal!==void 0||Qn.color!==void 0&&$e.isWebGL2===!0)&&Ut.update(ie,$,Jt),(jn||ut.receiveShadow!==ie.receiveShadow)&&(ut.receiveShadow=ie.receiveShadow,vn.setValue(se,"receiveShadow",ie.receiveShadow)),oe.isMeshGouraudMaterial&&oe.envMap!==null&&(on.envMap.value=Ce,on.flipEnvMap.value=Ce.isCubeTexture&&Ce.isRenderTargetTexture===!1?-1:1),jn&&(vn.setValue(se,"toneMappingExposure",S.toneMappingExposure),ut.needsLights&&J(on,Nn),Be&&oe.fog===!0&&Ze.refreshFogUniforms(on,Be),Ze.refreshMaterialUniforms(on,oe,Ae,pe,Oe),ag.upload(se,ta(ut),on,yt)),oe.isShaderMaterial&&oe.uniformsNeedUpdate===!0&&(ag.upload(se,ta(ut),on,yt),oe.uniformsNeedUpdate=!1),oe.isSpriteMaterial&&vn.setValue(se,"center",ie.center),vn.setValue(se,"modelViewMatrix",ie.modelViewMatrix),vn.setValue(se,"normalMatrix",ie.normalMatrix),vn.setValue(se,"modelMatrix",ie.matrixWorld),oe.isShaderMaterial||oe.isRawShaderMaterial){const nn=oe.uniformsGroups;for(let pn=0,Fn=nn.length;pn<Fn;pn++)if($e.isWebGL2){const vi=nn[pn];Me.update(vi,Jt),Me.bind(vi,Jt)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Jt}function J(k,q){k.ambientLightColor.needsUpdate=q,k.lightProbe.needsUpdate=q,k.directionalLights.needsUpdate=q,k.directionalLightShadows.needsUpdate=q,k.pointLights.needsUpdate=q,k.pointLightShadows.needsUpdate=q,k.spotLights.needsUpdate=q,k.spotLightShadows.needsUpdate=q,k.rectAreaLights.needsUpdate=q,k.hemisphereLights.needsUpdate=q}function le(k){return k.isMeshLambertMaterial||k.isMeshToonMaterial||k.isMeshPhongMaterial||k.isMeshStandardMaterial||k.isShadowMaterial||k.isShaderMaterial&&k.lights===!0}this.getActiveCubeFace=function(){return N},this.getActiveMipmapLevel=function(){return I},this.getRenderTarget=function(){return O},this.setRenderTargetTextures=function(k,q,$){ft.get(k.texture).__webglTexture=q,ft.get(k.depthTexture).__webglTexture=$;const oe=ft.get(k);oe.__hasExternalTextures=!0,oe.__hasExternalTextures&&(oe.__autoAllocateDepthBuffer=$===void 0,oe.__autoAllocateDepthBuffer||Fe.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),oe.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(k,q){const $=ft.get(k);$.__webglFramebuffer=q,$.__useDefaultFramebuffer=q===void 0},this.setRenderTarget=function(k,q=0,$=0){O=k,N=q,I=$;let oe=!0,ie=null,Be=!1,Te=!1;if(k){const Ce=ft.get(k);Ce.__useDefaultFramebuffer!==void 0?(ze.bindFramebuffer(se.FRAMEBUFFER,null),oe=!1):Ce.__webglFramebuffer===void 0?yt.setupRenderTarget(k):Ce.__hasExternalTextures&&yt.rebindTextures(k,ft.get(k.texture).__webglTexture,ft.get(k.depthTexture).__webglTexture);const At=k.texture;(At.isData3DTexture||At.isDataArrayTexture||At.isCompressedArrayTexture)&&(Te=!0);const je=ft.get(k).__webglFramebuffer;k.isWebGLCubeRenderTarget?(Array.isArray(je[q])?ie=je[q][$]:ie=je[q],Be=!0):$e.isWebGL2&&k.samples>0&&yt.useMultisampledRTT(k)===!1?ie=ft.get(k).__webglMultisampledFramebuffer:Array.isArray(je)?ie=je[$]:ie=je,H.copy(k.viewport),ee.copy(k.scissor),de=k.scissorTest}else H.copy(ne).multiplyScalar(Ae).floor(),ee.copy(z).multiplyScalar(Ae).floor(),de=K;if(ze.bindFramebuffer(se.FRAMEBUFFER,ie)&&$e.drawBuffers&&oe&&ze.drawBuffers(k,ie),ze.viewport(H),ze.scissor(ee),ze.setScissorTest(de),Be){const Ce=ft.get(k.texture);se.framebufferTexture2D(se.FRAMEBUFFER,se.COLOR_ATTACHMENT0,se.TEXTURE_CUBE_MAP_POSITIVE_X+q,Ce.__webglTexture,$)}else if(Te){const Ce=ft.get(k.texture),At=q||0;se.framebufferTextureLayer(se.FRAMEBUFFER,se.COLOR_ATTACHMENT0,Ce.__webglTexture,$||0,At)}j=-1},this.readRenderTargetPixels=function(k,q,$,oe,ie,Be,Te){if(!(k&&k.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Pe=ft.get(k).__webglFramebuffer;if(k.isWebGLCubeRenderTarget&&Te!==void 0&&(Pe=Pe[Te]),Pe){ze.bindFramebuffer(se.FRAMEBUFFER,Pe);try{const Ce=k.texture,At=Ce.format,je=Ce.type;if(At!==ji&&gn.convert(At)!==se.getParameter(se.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Ke=je===Mi&&(Fe.has("EXT_color_buffer_half_float")||$e.isWebGL2&&Fe.has("EXT_color_buffer_float"));if(je!==Xo&&gn.convert(je)!==se.getParameter(se.IMPLEMENTATION_COLOR_READ_TYPE)&&!(je===bi&&($e.isWebGL2||Fe.has("OES_texture_float")||Fe.has("WEBGL_color_buffer_float")))&&!Ke){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}q>=0&&q<=k.width-oe&&$>=0&&$<=k.height-ie&&se.readPixels(q,$,oe,ie,gn.convert(At),gn.convert(je),Be)}finally{const Ce=O!==null?ft.get(O).__webglFramebuffer:null;ze.bindFramebuffer(se.FRAMEBUFFER,Ce)}}},this.copyFramebufferToTexture=function(k,q,$=0){const oe=Math.pow(2,-$),ie=Math.floor(q.image.width*oe),Be=Math.floor(q.image.height*oe);yt.setTexture2D(q,0),se.copyTexSubImage2D(se.TEXTURE_2D,$,0,0,k.x,k.y,ie,Be),ze.unbindTexture()},this.copyTextureToTexture=function(k,q,$,oe=0){const ie=q.image.width,Be=q.image.height,Te=gn.convert($.format),Pe=gn.convert($.type);yt.setTexture2D($,0),se.pixelStorei(se.UNPACK_FLIP_Y_WEBGL,$.flipY),se.pixelStorei(se.UNPACK_PREMULTIPLY_ALPHA_WEBGL,$.premultiplyAlpha),se.pixelStorei(se.UNPACK_ALIGNMENT,$.unpackAlignment),q.isDataTexture?se.texSubImage2D(se.TEXTURE_2D,oe,k.x,k.y,ie,Be,Te,Pe,q.image.data):q.isCompressedTexture?se.compressedTexSubImage2D(se.TEXTURE_2D,oe,k.x,k.y,q.mipmaps[0].width,q.mipmaps[0].height,Te,q.mipmaps[0].data):se.texSubImage2D(se.TEXTURE_2D,oe,k.x,k.y,Te,Pe,q.image),oe===0&&$.generateMipmaps&&se.generateMipmap(se.TEXTURE_2D),ze.unbindTexture()},this.copyTextureToTexture3D=function(k,q,$,oe,ie=0){if(S.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Be=k.max.x-k.min.x+1,Te=k.max.y-k.min.y+1,Pe=k.max.z-k.min.z+1,Ce=gn.convert(oe.format),At=gn.convert(oe.type);let je;if(oe.isData3DTexture)yt.setTexture3D(oe,0),je=se.TEXTURE_3D;else if(oe.isDataArrayTexture)yt.setTexture2DArray(oe,0),je=se.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}se.pixelStorei(se.UNPACK_FLIP_Y_WEBGL,oe.flipY),se.pixelStorei(se.UNPACK_PREMULTIPLY_ALPHA_WEBGL,oe.premultiplyAlpha),se.pixelStorei(se.UNPACK_ALIGNMENT,oe.unpackAlignment);const Ke=se.getParameter(se.UNPACK_ROW_LENGTH),Et=se.getParameter(se.UNPACK_IMAGE_HEIGHT),Nt=se.getParameter(se.UNPACK_SKIP_PIXELS),Ft=se.getParameter(se.UNPACK_SKIP_ROWS),Vt=se.getParameter(se.UNPACK_SKIP_IMAGES),dt=$.isCompressedTexture?$.mipmaps[0]:$.image;se.pixelStorei(se.UNPACK_ROW_LENGTH,dt.width),se.pixelStorei(se.UNPACK_IMAGE_HEIGHT,dt.height),se.pixelStorei(se.UNPACK_SKIP_PIXELS,k.min.x),se.pixelStorei(se.UNPACK_SKIP_ROWS,k.min.y),se.pixelStorei(se.UNPACK_SKIP_IMAGES,k.min.z),$.isDataTexture||$.isData3DTexture?se.texSubImage3D(je,ie,q.x,q.y,q.z,Be,Te,Pe,Ce,At,dt.data):$.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),se.compressedTexSubImage3D(je,ie,q.x,q.y,q.z,Be,Te,Pe,Ce,dt.data)):se.texSubImage3D(je,ie,q.x,q.y,q.z,Be,Te,Pe,Ce,At,dt),se.pixelStorei(se.UNPACK_ROW_LENGTH,Ke),se.pixelStorei(se.UNPACK_IMAGE_HEIGHT,Et),se.pixelStorei(se.UNPACK_SKIP_PIXELS,Nt),se.pixelStorei(se.UNPACK_SKIP_ROWS,Ft),se.pixelStorei(se.UNPACK_SKIP_IMAGES,Vt),ie===0&&oe.generateMipmaps&&se.generateMipmap(je),ze.unbindTexture()},this.initTexture=function(k){k.isCubeTexture?yt.setTextureCube(k,0):k.isData3DTexture?yt.setTexture3D(k,0):k.isDataArrayTexture||k.isCompressedArrayTexture?yt.setTexture2DArray(k,0):yt.setTexture2D(k,0),ze.unbindTexture()},this.resetState=function(){N=0,I=0,O=null,ze.reset(),ae.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Vo}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===Ig?"display-p3":"srgb",t.unpackColorSpace=On.workingColorSpace===zp?"display-p3":"srgb"}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===Xr?Kl:SA}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Kl?Xr:Zo}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class $1 extends NA{}$1.prototype.isWebGL1Renderer=!0;class Ug{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new ht(e),this.density=t}clone(){return new Ug(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Hg{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new ht(e),this.near=t,this.far=n}clone(){return new Hg(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Mp extends bn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class Wp{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Sp,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Bs()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[n+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Bs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Bs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const zi=new X;class Ql{constructor(e,t,n,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)zi.fromBufferAttribute(this,t),zi.applyMatrix4(e),this.setXYZ(t,zi.x,zi.y,zi.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)zi.fromBufferAttribute(this,t),zi.applyNormalMatrix(e),this.setXYZ(t,zi.x,zi.y,zi.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)zi.fromBufferAttribute(this,t),zi.transformDirection(e),this.setXYZ(t,zi.x,zi.y,zi.z);return this}setX(e,t){return this.normalized&&(t=fn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=fn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=fn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=fn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=os(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=os(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=os(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=os(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=fn(t,this.array),n=fn(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=fn(t,this.array),n=fn(n,this.array),i=fn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}setXYZW(e,t,n,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=fn(t,this.array),n=fn(n,this.array),i=fn(i,this.array),s=fn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new Dn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Ql(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class FA extends Fr{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new ht(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Zd;const Gf=new X,eh=new X,th=new X,nh=new Ue,jf=new Ue,Q1=new $t,w2=new X,Vf=new X,S2=new X,E_=new Ue,Av=new Ue,x_=new Ue;class Z1 extends bn{constructor(e=new FA){if(super(),this.isSprite=!0,this.type="Sprite",Zd===void 0){Zd=new cn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new Wp(t,5);Zd.setIndex([0,1,2,0,2,3]),Zd.setAttribute("position",new Ql(n,3,0,!1)),Zd.setAttribute("uv",new Ql(n,2,3,!1))}this.geometry=Zd,this.material=e,this.center=new Ue(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),eh.setFromMatrixScale(this.matrixWorld),Q1.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),th.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&eh.multiplyScalar(-th.z);const n=this.material.rotation;let i,s;n!==0&&(s=Math.cos(n),i=Math.sin(n));const o=this.center;B2(w2.set(-.5,-.5,0),th,o,eh,i,s),B2(Vf.set(.5,-.5,0),th,o,eh,i,s),B2(S2.set(.5,.5,0),th,o,eh,i,s),E_.set(0,0),Av.set(1,0),x_.set(1,1);let l=e.ray.intersectTriangle(w2,Vf,S2,!1,Gf);if(l===null&&(B2(Vf.set(-.5,.5,0),th,o,eh,i,s),Av.set(0,1),l=e.ray.intersectTriangle(w2,S2,Vf,!1,Gf),l===null))return;const u=e.ray.origin.distanceTo(Gf);u<e.near||u>e.far||t.push({distance:u,point:Gf.clone(),uv:ss.getInterpolation(Gf,w2,Vf,S2,E_,Av,x_,new Ue),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function B2(r,e,t,n,i,s){nh.subVectors(r,t).addScalar(.5).multiply(n),i!==void 0?(jf.x=s*nh.x-i*nh.y,jf.y=i*nh.x+s*nh.y):jf.copy(nh),r.copy(e),r.x+=jf.x,r.y+=jf.y,r.applyMatrix4(Q1)}const b2=new X,__=new X;class eS extends bn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,i=t.length;n<i;n++){const s=t[n];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,i;for(n=1,i=t.length;n<i;n++){let s=t[n].distance;if(t[n].object.visible&&(s-=s*t[n].hysteresis),e<s)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){b2.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(b2);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){b2.setFromMatrixPosition(e.matrixWorld),__.setFromMatrixPosition(this.matrixWorld);const n=b2.distanceTo(__)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s;i++){let o=t[i].distance;if(t[i].object.visible&&(o-=o*t[i].hysteresis),n>=o)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let i=0,s=n.length;i<s;i++){const o=n[i];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const C_=new X,w_=new Un,S_=new Un,pI=new X,B_=new $t,M2=new X,Ev=new Ts,b_=new $t,xv=new Du;class kA extends Nr{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Ay,this.bindMatrix=new $t,this.bindMatrixInverse=new $t,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Ms),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,M2),this.boundingBox.expandByPoint(M2)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Ts),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,M2),this.boundingSphere.expandByPoint(M2)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,i=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Ev.copy(this.boundingSphere),Ev.applyMatrix4(i),e.ray.intersectsSphere(Ev)!==!1&&(b_.copy(i).invert(),xv.copy(e.ray).applyMatrix4(b_),!(this.boundingBox!==null&&xv.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,xv)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Un,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.fromBufferAttribute(t,n);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===Ay?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===h1?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,i=this.geometry;w_.fromBufferAttribute(i.attributes.skinIndex,e),S_.fromBufferAttribute(i.attributes.skinWeight,e),C_.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=S_.getComponent(s);if(o!==0){const l=w_.getComponent(s);B_.multiplyMatrices(n.bones[l].matrixWorld,n.boneInverses[l]),t.addScaledVector(pI.copy(C_).applyMatrix4(B_),o)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class zg extends bn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class xh extends ar{constructor(e=null,t=1,n=1,i,s,o,l,u,h=or,p=or,m,v){super(null,o,l,u,h,p,i,s,m,v),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const M_=new $t,mI=new $t;class Jp{constructor(e=[],t=[]){this.uuid=Bs(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new $t)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new $t;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const l=e[s]?e[s].matrixWorld:mI;M_.multiplyMatrices(l,t[s]),M_.toArray(n,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new Jp(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=F1(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new xh(t,e,e,ji,bi);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,i=e.bones.length;n<i;n++){const s=e.bones[n];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new zg),this.bones.push(o),this.boneInverses.push(new $t().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const o=t[i];e.bones.push(o.uuid);const l=n[i];e.boneInverses.push(l.toArray())}return e}}class wu extends Dn{constructor(e,t,n,i=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const rh=new $t,T_=new $t,T2=[],R_=new Ms,gI=new $t,Wf=new Nr,Jf=new Ts;class OA extends Nr{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new wu(new Float32Array(n*16),16),this.instanceColor=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<n;i++)this.setMatrixAt(i,gI)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Ms),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,rh),R_.copy(e.boundingBox).applyMatrix4(rh),this.boundingBox.union(R_)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Ts),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,rh),Jf.copy(e.boundingSphere).applyMatrix4(rh),this.boundingSphere.union(Jf)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const n=this.matrixWorld,i=this.count;if(Wf.geometry=this.geometry,Wf.material=this.material,Wf.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Jf.copy(this.boundingSphere),Jf.applyMatrix4(n),e.ray.intersectsSphere(Jf)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,rh),T_.multiplyMatrices(n,rh),Wf.matrixWorld=T_,Wf.raycast(e,T2);for(let o=0,l=T2.length;o<l;o++){const u=T2[o];u.instanceId=s,u.object=this,t.push(u)}T2.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new wu(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Ti extends Fr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ht(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const D_=new X,P_=new X,L_=new $t,_v=new Du,R2=new Ts;class $a extends bn{constructor(e=new cn,t=new Ti){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let i=1,s=t.count;i<s;i++)D_.fromBufferAttribute(t,i-1),P_.fromBufferAttribute(t,i),n[i]=n[i-1],n[i]+=D_.distanceTo(P_);e.setAttribute("lineDistance",new Dt(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),R2.copy(n.boundingSphere),R2.applyMatrix4(i),R2.radius+=s,e.ray.intersectsSphere(R2)===!1)return;L_.copy(i).invert(),_v.copy(e.ray).applyMatrix4(L_);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,h=new X,p=new X,m=new X,v=new X,y=this.isLineSegments?2:1,E=n.index,C=n.attributes.position;if(E!==null){const x=Math.max(0,o.start),M=Math.min(E.count,o.start+o.count);for(let S=x,R=M-1;S<R;S+=y){const N=E.getX(S),I=E.getX(S+1);if(h.fromBufferAttribute(C,N),p.fromBufferAttribute(C,I),_v.distanceSqToSegment(h,p,v,m)>u)continue;v.applyMatrix4(this.matrixWorld);const j=e.ray.origin.distanceTo(v);j<e.near||j>e.far||t.push({distance:j,point:m.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}else{const x=Math.max(0,o.start),M=Math.min(C.count,o.start+o.count);for(let S=x,R=M-1;S<R;S+=y){if(h.fromBufferAttribute(C,S),p.fromBufferAttribute(C,S+1),_v.distanceSqToSegment(h,p,v,m)>u)continue;v.applyMatrix4(this.matrixWorld);const I=e.ray.origin.distanceTo(v);I<e.near||I>e.far||t.push({distance:I,point:m.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const l=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}const I_=new X,N_=new X;class Mo extends $a{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let i=0,s=t.count;i<s;i+=2)I_.fromBufferAttribute(t,i),N_.fromBufferAttribute(t,i+1),n[i]=i===0?0:n[i-1],n[i+1]=n[i]+I_.distanceTo(N_);e.setAttribute("lineDistance",new Dt(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class UA extends $a{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Gg extends Fr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ht(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const F_=new $t,Yy=new Du,D2=new Ts,P2=new X;class HA extends bn{constructor(e=new cn,t=new Gg){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),D2.copy(n.boundingSphere),D2.applyMatrix4(i),D2.radius+=s,e.ray.intersectsSphere(D2)===!1)return;F_.copy(i).invert(),Yy.copy(e.ray).applyMatrix4(F_);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,h=n.index,m=n.attributes.position;if(h!==null){const v=Math.max(0,o.start),y=Math.min(h.count,o.start+o.count);for(let E=v,w=y;E<w;E++){const C=h.getX(E);P2.fromBufferAttribute(m,C),k_(P2,C,u,i,e,t,this)}}else{const v=Math.max(0,o.start),y=Math.min(m.count,o.start+o.count);for(let E=v,w=y;E<w;E++)P2.fromBufferAttribute(m,E),k_(P2,E,u,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const l=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function k_(r,e,t,n,i,s,o){const l=Yy.distanceSqToPoint(r);if(l<t){const u=new X;Yy.closestPointToPoint(r,u),u.applyMatrix4(n);const h=i.ray.origin.distanceTo(u);if(h<i.near||h>i.far)return;s.push({distance:h,distanceToRay:Math.sqrt(l),point:u,index:e,face:null,object:o})}}class vI extends ar{constructor(e,t,n,i,s,o,l,u,h){super(e,t,n,i,s,o,l,u,h),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Jn,this.magFilter=s!==void 0?s:Jn,this.generateMipmaps=!1;const p=this;function m(){p.needsUpdate=!0,e.requestVideoFrameCallback(m)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(m)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class yI extends ar{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=or,this.minFilter=or,this.generateMipmaps=!1,this.needsUpdate=!0}}class jg extends ar{constructor(e,t,n,i,s,o,l,u,h,p,m,v){super(null,o,l,u,h,p,i,s,m,v),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class AI extends jg{constructor(e,t,n,i,s,o){super(e,t,n,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=gi}}class EI extends jg{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,$o),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class xI extends ar{constructor(e,t,n,i,s,o,l,u,h){super(e,t,n,i,s,o,l,u,h),this.isCanvasTexture=!0,this.needsUpdate=!0}}class To{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),s+=n.distanceTo(i),t.push(s),i=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let i=0;const s=n.length;let o;t?o=t:o=e*n[s-1];let l=0,u=s-1,h;for(;l<=u;)if(i=Math.floor(l+(u-l)/2),h=n[i]-o,h<0)l=i+1;else if(h>0)u=i-1;else{u=i;break}if(i=u,n[i]===o)return i/(s-1);const p=n[i],v=n[i+1]-p,y=(o-p)/v;return(i+y)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),l=this.getPoint(s),u=t||(o.isVector2?new Ue:new X);return u.copy(l).sub(o).normalize(),u}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new X,i=[],s=[],o=[],l=new X,u=new $t;for(let y=0;y<=e;y++){const E=y/e;i[y]=this.getTangentAt(E,new X)}s[0]=new X,o[0]=new X;let h=Number.MAX_VALUE;const p=Math.abs(i[0].x),m=Math.abs(i[0].y),v=Math.abs(i[0].z);p<=h&&(h=p,n.set(1,0,0)),m<=h&&(h=m,n.set(0,1,0)),v<=h&&n.set(0,0,1),l.crossVectors(i[0],n).normalize(),s[0].crossVectors(i[0],l),o[0].crossVectors(i[0],s[0]);for(let y=1;y<=e;y++){if(s[y]=s[y-1].clone(),o[y]=o[y-1].clone(),l.crossVectors(i[y-1],i[y]),l.length()>Number.EPSILON){l.normalize();const E=Math.acos(yr(i[y-1].dot(i[y]),-1,1));s[y].applyMatrix4(u.makeRotationAxis(l,E))}o[y].crossVectors(i[y],s[y])}if(t===!0){let y=Math.acos(yr(s[0].dot(s[e]),-1,1));y/=e,i[0].dot(l.crossVectors(s[0],s[e]))>0&&(y=-y);for(let E=1;E<=e;E++)s[E].applyMatrix4(u.makeRotationAxis(i[E],y*E)),o[E].crossVectors(i[E],s[E])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Vg extends To{constructor(e=0,t=0,n=1,i=1,s=0,o=Math.PI*2,l=!1,u=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=l,this.aRotation=u}getPoint(e,t){const n=t||new Ue,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const l=this.aStartAngle+e*s;let u=this.aX+this.xRadius*Math.cos(l),h=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const p=Math.cos(this.aRotation),m=Math.sin(this.aRotation),v=u-this.aX,y=h-this.aY;u=v*p-y*m+this.aX,h=v*m+y*p+this.aY}return n.set(u,h)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class tS extends Vg{constructor(e,t,n,i,s,o){super(e,t,n,n,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function zA(){let r=0,e=0,t=0,n=0;function i(s,o,l,u){r=s,e=l,t=-3*s+3*o-2*l-u,n=2*s-2*o+l+u}return{initCatmullRom:function(s,o,l,u,h){i(o,l,h*(l-s),h*(u-o))},initNonuniformCatmullRom:function(s,o,l,u,h,p,m){let v=(o-s)/h-(l-s)/(h+p)+(l-o)/p,y=(l-o)/p-(u-o)/(p+m)+(u-l)/m;v*=p,y*=p,i(o,l,v,y)},calc:function(s){const o=s*s,l=o*s;return r+e*s+t*o+n*l}}}const L2=new X,Cv=new zA,wv=new zA,Sv=new zA;class nS extends To{constructor(e=[],t=!1,n="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=i}getPoint(e,t=new X){const n=t,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let l=Math.floor(o),u=o-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/s)+1)*s:u===0&&l===s-1&&(l=s-2,u=1);let h,p;this.closed||l>0?h=i[(l-1)%s]:(L2.subVectors(i[0],i[1]).add(i[0]),h=L2);const m=i[l%s],v=i[(l+1)%s];if(this.closed||l+2<s?p=i[(l+2)%s]:(L2.subVectors(i[s-1],i[s-2]).add(i[s-1]),p=L2),this.curveType==="centripetal"||this.curveType==="chordal"){const y=this.curveType==="chordal"?.5:.25;let E=Math.pow(h.distanceToSquared(m),y),w=Math.pow(m.distanceToSquared(v),y),C=Math.pow(v.distanceToSquared(p),y);w<1e-4&&(w=1),E<1e-4&&(E=w),C<1e-4&&(C=w),Cv.initNonuniformCatmullRom(h.x,m.x,v.x,p.x,E,w,C),wv.initNonuniformCatmullRom(h.y,m.y,v.y,p.y,E,w,C),Sv.initNonuniformCatmullRom(h.z,m.z,v.z,p.z,E,w,C)}else this.curveType==="catmullrom"&&(Cv.initCatmullRom(h.x,m.x,v.x,p.x,this.tension),wv.initCatmullRom(h.y,m.y,v.y,p.y,this.tension),Sv.initCatmullRom(h.z,m.z,v.z,p.z,this.tension));return n.set(Cv.calc(u),wv.calc(u),Sv.calc(u)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new X().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function O_(r,e,t,n,i){const s=(n-e)*.5,o=(i-t)*.5,l=r*r,u=r*l;return(2*t-2*n+s+o)*u+(-3*t+3*n-2*s-o)*l+s*r+t}function _I(r,e){const t=1-r;return t*t*e}function CI(r,e){return 2*(1-r)*r*e}function wI(r,e){return r*r*e}function op(r,e,t,n){return _I(r,e)+CI(r,t)+wI(r,n)}function SI(r,e){const t=1-r;return t*t*t*e}function BI(r,e){const t=1-r;return 3*t*t*r*e}function bI(r,e){return 3*(1-r)*r*r*e}function MI(r,e){return r*r*r*e}function ap(r,e,t,n,i){return SI(r,e)+BI(r,t)+bI(r,n)+MI(r,i)}class GA extends To{constructor(e=new Ue,t=new Ue,n=new Ue,i=new Ue){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new Ue){const n=t,i=this.v0,s=this.v1,o=this.v2,l=this.v3;return n.set(ap(e,i.x,s.x,o.x,l.x),ap(e,i.y,s.y,o.y,l.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class rS extends To{constructor(e=new X,t=new X,n=new X,i=new X){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new X){const n=t,i=this.v0,s=this.v1,o=this.v2,l=this.v3;return n.set(ap(e,i.x,s.x,o.x,l.x),ap(e,i.y,s.y,o.y,l.y),ap(e,i.z,s.z,o.z,l.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class jA extends To{constructor(e=new Ue,t=new Ue){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ue){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Ue){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class iS extends To{constructor(e=new X,t=new X){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new X){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new X){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class VA extends To{constructor(e=new Ue,t=new Ue,n=new Ue){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Ue){const n=t,i=this.v0,s=this.v1,o=this.v2;return n.set(op(e,i.x,s.x,o.x),op(e,i.y,s.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class WA extends To{constructor(e=new X,t=new X,n=new X){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new X){const n=t,i=this.v0,s=this.v1,o=this.v2;return n.set(op(e,i.x,s.x,o.x),op(e,i.y,s.y,o.y),op(e,i.z,s.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class JA extends To{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ue){const n=t,i=this.points,s=(i.length-1)*e,o=Math.floor(s),l=s-o,u=i[o===0?o:o-1],h=i[o],p=i[o>i.length-2?i.length-1:o+1],m=i[o>i.length-3?i.length-1:o+2];return n.set(O_(l,u.x,h.x,p.x,m.x),O_(l,u.y,h.y,p.y,m.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new Ue().fromArray(i))}return this}}var Ag=Object.freeze({__proto__:null,ArcCurve:tS,CatmullRomCurve3:nS,CubicBezierCurve:GA,CubicBezierCurve3:rS,EllipseCurve:Vg,LineCurve:jA,LineCurve3:iS,QuadraticBezierCurve:VA,QuadraticBezierCurve3:WA,SplineCurve:JA});class sS extends To{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Ag[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=n){const o=i[s]-n,l=this.curves[s],u=l.getLength(),h=u===0?0:1-o/u;return l.getPointAt(h,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],l=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,u=o.getPoints(l);for(let h=0;h<u.length;h++){const p=u[h];n&&n.equals(p)||(t.push(p),n=p)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(new Ag[i.type]().fromJSON(i))}return this}}class Tp extends sS{constructor(e){super(),this.type="Path",this.currentPoint=new Ue,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new jA(this.currentPoint.clone(),new Ue(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,i){const s=new VA(this.currentPoint.clone(),new Ue(e,t),new Ue(n,i));return this.curves.push(s),this.currentPoint.set(n,i),this}bezierCurveTo(e,t,n,i,s,o){const l=new GA(this.currentPoint.clone(),new Ue(e,t),new Ue(n,i),new Ue(s,o));return this.curves.push(l),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new JA(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,i,s,o){const l=this.currentPoint.x,u=this.currentPoint.y;return this.absarc(e+l,t+u,n,i,s,o),this}absarc(e,t,n,i,s,o){return this.absellipse(e,t,n,n,i,s,o),this}ellipse(e,t,n,i,s,o,l,u){const h=this.currentPoint.x,p=this.currentPoint.y;return this.absellipse(e+h,t+p,n,i,s,o,l,u),this}absellipse(e,t,n,i,s,o,l,u){const h=new Vg(e,t,n,i,s,o,l,u);if(this.curves.length>0){const m=h.getPoint(0);m.equals(this.currentPoint)||this.lineTo(m.x,m.y)}this.curves.push(h);const p=h.getPoint(1);return this.currentPoint.copy(p),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Xp extends cn{constructor(e=[new Ue(0,-.5),new Ue(.5,0),new Ue(0,.5)],t=12,n=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t),i=yr(i,0,Math.PI*2);const s=[],o=[],l=[],u=[],h=[],p=1/t,m=new X,v=new Ue,y=new X,E=new X,w=new X;let C=0,x=0;for(let M=0;M<=e.length-1;M++)switch(M){case 0:C=e[M+1].x-e[M].x,x=e[M+1].y-e[M].y,y.x=x*1,y.y=-C,y.z=x*0,w.copy(y),y.normalize(),u.push(y.x,y.y,y.z);break;case e.length-1:u.push(w.x,w.y,w.z);break;default:C=e[M+1].x-e[M].x,x=e[M+1].y-e[M].y,y.x=x*1,y.y=-C,y.z=x*0,E.copy(y),y.x+=w.x,y.y+=w.y,y.z+=w.z,y.normalize(),u.push(y.x,y.y,y.z),w.copy(E)}for(let M=0;M<=t;M++){const S=n+M*p*i,R=Math.sin(S),N=Math.cos(S);for(let I=0;I<=e.length-1;I++){m.x=e[I].x*R,m.y=e[I].y,m.z=e[I].x*N,o.push(m.x,m.y,m.z),v.x=M/t,v.y=I/(e.length-1),l.push(v.x,v.y);const O=u[3*I+0]*R,j=u[3*I+1],F=u[3*I+0]*N;h.push(O,j,F)}}for(let M=0;M<t;M++)for(let S=0;S<e.length-1;S++){const R=S+M*e.length,N=R,I=R+e.length,O=R+e.length+1,j=R+1;s.push(N,I,j),s.push(O,j,I)}this.setIndex(s),this.setAttribute("position",new Dt(o,3)),this.setAttribute("uv",new Dt(l,2)),this.setAttribute("normal",new Dt(h,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Xp(e.points,e.segments,e.phiStart,e.phiLength)}}class Wg extends Xp{constructor(e=1,t=1,n=4,i=8){const s=new Tp;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(n),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:n,radialSegments:i}}static fromJSON(e){return new Wg(e.radius,e.length,e.capSegments,e.radialSegments)}}class Jg extends cn{constructor(e=1,t=32,n=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},t=Math.max(3,t);const s=[],o=[],l=[],u=[],h=new X,p=new Ue;o.push(0,0,0),l.push(0,0,1),u.push(.5,.5);for(let m=0,v=3;m<=t;m++,v+=3){const y=n+m/t*i;h.x=e*Math.cos(y),h.y=e*Math.sin(y),o.push(h.x,h.y,h.z),l.push(0,0,1),p.x=(o[v]/e+1)/2,p.y=(o[v+1]/e+1)/2,u.push(p.x,p.y)}for(let m=1;m<=t;m++)s.push(m,m+1,0);this.setIndex(s),this.setAttribute("position",new Dt(o,3)),this.setAttribute("normal",new Dt(l,3)),this.setAttribute("uv",new Dt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Jg(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Fh extends cn{constructor(e=1,t=1,n=1,i=32,s=1,o=!1,l=0,u=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:l,thetaLength:u};const h=this;i=Math.floor(i),s=Math.floor(s);const p=[],m=[],v=[],y=[];let E=0;const w=[],C=n/2;let x=0;M(),o===!1&&(e>0&&S(!0),t>0&&S(!1)),this.setIndex(p),this.setAttribute("position",new Dt(m,3)),this.setAttribute("normal",new Dt(v,3)),this.setAttribute("uv",new Dt(y,2));function M(){const R=new X,N=new X;let I=0;const O=(t-e)/n;for(let j=0;j<=s;j++){const F=[],H=j/s,ee=H*(t-e)+e;for(let de=0;de<=i;de++){const ve=de/i,Y=ve*u+l,me=Math.sin(Y),pe=Math.cos(Y);N.x=ee*me,N.y=-H*n+C,N.z=ee*pe,m.push(N.x,N.y,N.z),R.set(me,O,pe).normalize(),v.push(R.x,R.y,R.z),y.push(ve,1-H),F.push(E++)}w.push(F)}for(let j=0;j<i;j++)for(let F=0;F<s;F++){const H=w[F][j],ee=w[F+1][j],de=w[F+1][j+1],ve=w[F][j+1];p.push(H,ee,ve),p.push(ee,de,ve),I+=6}h.addGroup(x,I,0),x+=I}function S(R){const N=E,I=new Ue,O=new X;let j=0;const F=R===!0?e:t,H=R===!0?1:-1;for(let de=1;de<=i;de++)m.push(0,C*H,0),v.push(0,H,0),y.push(.5,.5),E++;const ee=E;for(let de=0;de<=i;de++){const Y=de/i*u+l,me=Math.cos(Y),pe=Math.sin(Y);O.x=F*pe,O.y=C*H,O.z=F*me,m.push(O.x,O.y,O.z),v.push(0,H,0),I.x=me*.5+.5,I.y=pe*.5*H+.5,y.push(I.x,I.y),E++}for(let de=0;de<i;de++){const ve=N+de,Y=ee+de;R===!0?p.push(Y,Y+1,ve):p.push(Y+1,Y,ve),j+=3}h.addGroup(x,j,R===!0?1:2),x+=j}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fh(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Xg extends Fh{constructor(e=1,t=1,n=32,i=1,s=!1,o=0,l=Math.PI*2){super(0,e,t,n,i,s,o,l),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:l}}static fromJSON(e){return new Xg(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class rc extends cn{constructor(e=[],t=[],n=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i};const s=[],o=[];l(i),h(n),p(),this.setAttribute("position",new Dt(s,3)),this.setAttribute("normal",new Dt(s.slice(),3)),this.setAttribute("uv",new Dt(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function l(M){const S=new X,R=new X,N=new X;for(let I=0;I<t.length;I+=3)y(t[I+0],S),y(t[I+1],R),y(t[I+2],N),u(S,R,N,M)}function u(M,S,R,N){const I=N+1,O=[];for(let j=0;j<=I;j++){O[j]=[];const F=M.clone().lerp(R,j/I),H=S.clone().lerp(R,j/I),ee=I-j;for(let de=0;de<=ee;de++)de===0&&j===I?O[j][de]=F:O[j][de]=F.clone().lerp(H,de/ee)}for(let j=0;j<I;j++)for(let F=0;F<2*(I-j)-1;F++){const H=Math.floor(F/2);F%2===0?(v(O[j][H+1]),v(O[j+1][H]),v(O[j][H])):(v(O[j][H+1]),v(O[j+1][H+1]),v(O[j+1][H]))}}function h(M){const S=new X;for(let R=0;R<s.length;R+=3)S.x=s[R+0],S.y=s[R+1],S.z=s[R+2],S.normalize().multiplyScalar(M),s[R+0]=S.x,s[R+1]=S.y,s[R+2]=S.z}function p(){const M=new X;for(let S=0;S<s.length;S+=3){M.x=s[S+0],M.y=s[S+1],M.z=s[S+2];const R=C(M)/2/Math.PI+.5,N=x(M)/Math.PI+.5;o.push(R,1-N)}E(),m()}function m(){for(let M=0;M<o.length;M+=6){const S=o[M+0],R=o[M+2],N=o[M+4],I=Math.max(S,R,N),O=Math.min(S,R,N);I>.9&&O<.1&&(S<.2&&(o[M+0]+=1),R<.2&&(o[M+2]+=1),N<.2&&(o[M+4]+=1))}}function v(M){s.push(M.x,M.y,M.z)}function y(M,S){const R=M*3;S.x=e[R+0],S.y=e[R+1],S.z=e[R+2]}function E(){const M=new X,S=new X,R=new X,N=new X,I=new Ue,O=new Ue,j=new Ue;for(let F=0,H=0;F<s.length;F+=9,H+=6){M.set(s[F+0],s[F+1],s[F+2]),S.set(s[F+3],s[F+4],s[F+5]),R.set(s[F+6],s[F+7],s[F+8]),I.set(o[H+0],o[H+1]),O.set(o[H+2],o[H+3]),j.set(o[H+4],o[H+5]),N.copy(M).add(S).add(R).divideScalar(3);const ee=C(N);w(I,H+0,M,ee),w(O,H+2,S,ee),w(j,H+4,R,ee)}}function w(M,S,R,N){N<0&&M.x===1&&(o[S]=M.x-1),R.x===0&&R.z===0&&(o[S]=N/2/Math.PI+.5)}function C(M){return Math.atan2(M.z,-M.x)}function x(M){return Math.atan2(-M.y,Math.sqrt(M.x*M.x+M.z*M.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new rc(e.vertices,e.indices,e.radius,e.details)}}class Kg extends rc{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,i=1/n,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Kg(e.radius,e.detail)}}const I2=new X,N2=new X,Bv=new X,F2=new ss;class oS extends cn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(Au*t),o=e.getIndex(),l=e.getAttribute("position"),u=o?o.count:l.count,h=[0,0,0],p=["a","b","c"],m=new Array(3),v={},y=[];for(let E=0;E<u;E+=3){o?(h[0]=o.getX(E),h[1]=o.getX(E+1),h[2]=o.getX(E+2)):(h[0]=E,h[1]=E+1,h[2]=E+2);const{a:w,b:C,c:x}=F2;if(w.fromBufferAttribute(l,h[0]),C.fromBufferAttribute(l,h[1]),x.fromBufferAttribute(l,h[2]),F2.getNormal(Bv),m[0]=`${Math.round(w.x*i)},${Math.round(w.y*i)},${Math.round(w.z*i)}`,m[1]=`${Math.round(C.x*i)},${Math.round(C.y*i)},${Math.round(C.z*i)}`,m[2]=`${Math.round(x.x*i)},${Math.round(x.y*i)},${Math.round(x.z*i)}`,!(m[0]===m[1]||m[1]===m[2]||m[2]===m[0]))for(let M=0;M<3;M++){const S=(M+1)%3,R=m[M],N=m[S],I=F2[p[M]],O=F2[p[S]],j=`${R}_${N}`,F=`${N}_${R}`;F in v&&v[F]?(Bv.dot(v[F].normal)<=s&&(y.push(I.x,I.y,I.z),y.push(O.x,O.y,O.z)),v[F]=null):j in v||(v[j]={index0:h[M],index1:h[S],normal:Bv.clone()})}}for(const E in v)if(v[E]){const{index0:w,index1:C}=v[E];I2.fromBufferAttribute(l,w),N2.fromBufferAttribute(l,C),y.push(I2.x,I2.y,I2.z),y.push(N2.x,N2.y,N2.z)}this.setAttribute("position",new Dt(y,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class xu extends Tp{constructor(e){super(e),this.uuid=Bs(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(new Tp().fromJSON(i))}return this}}const TI={triangulate:function(r,e,t=2){const n=e&&e.length,i=n?e[0]*t:r.length;let s=aS(r,0,i,t,!0);const o=[];if(!s||s.next===s.prev)return o;let l,u,h,p,m,v,y;if(n&&(s=II(r,e,s,t)),r.length>80*t){l=h=r[0],u=p=r[1];for(let E=t;E<i;E+=t)m=r[E],v=r[E+1],m<l&&(l=m),v<u&&(u=v),m>h&&(h=m),v>p&&(p=v);y=Math.max(h-l,p-u),y=y!==0?32767/y:0}return Rp(s,o,t,l,u,y,0),o}};function aS(r,e,t,n,i){let s,o;if(i===WI(r,e,t,n)>0)for(s=e;s<t;s+=n)o=U_(s,r[s],r[s+1],o);else for(s=t-n;s>=e;s-=n)o=U_(s,r[s],r[s+1],o);return o&&qg(o,o.next)&&(Pp(o),o=o.next),o}function Su(r,e){if(!r)return r;e||(e=r);let t=r,n;do if(n=!1,!t.steiner&&(qg(t,t.next)||dr(t.prev,t,t.next)===0)){if(Pp(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function Rp(r,e,t,n,i,s,o){if(!r)return;!o&&s&&UI(r,n,i,s);let l=r,u,h;for(;r.prev!==r.next;){if(u=r.prev,h=r.next,s?DI(r,n,i,s):RI(r)){e.push(u.i/t|0),e.push(r.i/t|0),e.push(h.i/t|0),Pp(r),r=h.next,l=h.next;continue}if(r=h,r===l){o?o===1?(r=PI(Su(r),e,t),Rp(r,e,t,n,i,s,2)):o===2&&LI(r,e,t,n,i,s):Rp(Su(r),e,t,n,i,s,1);break}}}function RI(r){const e=r.prev,t=r,n=r.next;if(dr(e,t,n)>=0)return!1;const i=e.x,s=t.x,o=n.x,l=e.y,u=t.y,h=n.y,p=i<s?i<o?i:o:s<o?s:o,m=l<u?l<h?l:h:u<h?u:h,v=i>s?i>o?i:o:s>o?s:o,y=l>u?l>h?l:h:u>h?u:h;let E=n.next;for(;E!==e;){if(E.x>=p&&E.x<=v&&E.y>=m&&E.y<=y&&gh(i,l,s,u,o,h,E.x,E.y)&&dr(E.prev,E,E.next)>=0)return!1;E=E.next}return!0}function DI(r,e,t,n){const i=r.prev,s=r,o=r.next;if(dr(i,s,o)>=0)return!1;const l=i.x,u=s.x,h=o.x,p=i.y,m=s.y,v=o.y,y=l<u?l<h?l:h:u<h?u:h,E=p<m?p<v?p:v:m<v?m:v,w=l>u?l>h?l:h:u>h?u:h,C=p>m?p>v?p:v:m>v?m:v,x=$y(y,E,e,t,n),M=$y(w,C,e,t,n);let S=r.prevZ,R=r.nextZ;for(;S&&S.z>=x&&R&&R.z<=M;){if(S.x>=y&&S.x<=w&&S.y>=E&&S.y<=C&&S!==i&&S!==o&&gh(l,p,u,m,h,v,S.x,S.y)&&dr(S.prev,S,S.next)>=0||(S=S.prevZ,R.x>=y&&R.x<=w&&R.y>=E&&R.y<=C&&R!==i&&R!==o&&gh(l,p,u,m,h,v,R.x,R.y)&&dr(R.prev,R,R.next)>=0))return!1;R=R.nextZ}for(;S&&S.z>=x;){if(S.x>=y&&S.x<=w&&S.y>=E&&S.y<=C&&S!==i&&S!==o&&gh(l,p,u,m,h,v,S.x,S.y)&&dr(S.prev,S,S.next)>=0)return!1;S=S.prevZ}for(;R&&R.z<=M;){if(R.x>=y&&R.x<=w&&R.y>=E&&R.y<=C&&R!==i&&R!==o&&gh(l,p,u,m,h,v,R.x,R.y)&&dr(R.prev,R,R.next)>=0)return!1;R=R.nextZ}return!0}function PI(r,e,t){let n=r;do{const i=n.prev,s=n.next.next;!qg(i,s)&&lS(i,n,n.next,s)&&Dp(i,s)&&Dp(s,i)&&(e.push(i.i/t|0),e.push(n.i/t|0),e.push(s.i/t|0),Pp(n),Pp(n.next),n=r=s),n=n.next}while(n!==r);return Su(n)}function LI(r,e,t,n,i,s){let o=r;do{let l=o.next.next;for(;l!==o.prev;){if(o.i!==l.i&&GI(o,l)){let u=cS(o,l);o=Su(o,o.next),u=Su(u,u.next),Rp(o,e,t,n,i,s,0),Rp(u,e,t,n,i,s,0);return}l=l.next}o=o.next}while(o!==r)}function II(r,e,t,n){const i=[];let s,o,l,u,h;for(s=0,o=e.length;s<o;s++)l=e[s]*n,u=s<o-1?e[s+1]*n:r.length,h=aS(r,l,u,n,!1),h===h.next&&(h.steiner=!0),i.push(zI(h));for(i.sort(NI),s=0;s<i.length;s++)t=FI(i[s],t);return t}function NI(r,e){return r.x-e.x}function FI(r,e){const t=kI(r,e);if(!t)return e;const n=cS(t,r);return Su(n,n.next),Su(t,t.next)}function kI(r,e){let t=e,n=-1/0,i;const s=r.x,o=r.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const v=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(v<=s&&v>n&&(n=v,i=t.x<t.next.x?t:t.next,v===s))return i}t=t.next}while(t!==e);if(!i)return null;const l=i,u=i.x,h=i.y;let p=1/0,m;t=i;do s>=t.x&&t.x>=u&&s!==t.x&&gh(o<h?s:n,o,u,h,o<h?n:s,o,t.x,t.y)&&(m=Math.abs(o-t.y)/(s-t.x),Dp(t,r)&&(m<p||m===p&&(t.x>i.x||t.x===i.x&&OI(i,t)))&&(i=t,p=m)),t=t.next;while(t!==l);return i}function OI(r,e){return dr(r.prev,r,e.prev)<0&&dr(e.next,r,r.next)<0}function UI(r,e,t,n){let i=r;do i.z===0&&(i.z=$y(i.x,i.y,e,t,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==r);i.prevZ.nextZ=null,i.prevZ=null,HI(i)}function HI(r){let e,t,n,i,s,o,l,u,h=1;do{for(t=r,r=null,s=null,o=0;t;){for(o++,n=t,l=0,e=0;e<h&&(l++,n=n.nextZ,!!n);e++);for(u=h;l>0||u>0&&n;)l!==0&&(u===0||!n||t.z<=n.z)?(i=t,t=t.nextZ,l--):(i=n,n=n.nextZ,u--),s?s.nextZ=i:r=i,i.prevZ=s,s=i;t=n}s.nextZ=null,h*=2}while(o>1);return r}function $y(r,e,t,n,i){return r=(r-t)*i|0,e=(e-n)*i|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function zI(r){let e=r,t=r;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==r);return t}function gh(r,e,t,n,i,s,o,l){return(i-o)*(e-l)>=(r-o)*(s-l)&&(r-o)*(n-l)>=(t-o)*(e-l)&&(t-o)*(s-l)>=(i-o)*(n-l)}function GI(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!jI(r,e)&&(Dp(r,e)&&Dp(e,r)&&VI(r,e)&&(dr(r.prev,r,e.prev)||dr(r,e.prev,e))||qg(r,e)&&dr(r.prev,r,r.next)>0&&dr(e.prev,e,e.next)>0)}function dr(r,e,t){return(e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y)}function qg(r,e){return r.x===e.x&&r.y===e.y}function lS(r,e,t,n){const i=O2(dr(r,e,t)),s=O2(dr(r,e,n)),o=O2(dr(t,n,r)),l=O2(dr(t,n,e));return!!(i!==s&&o!==l||i===0&&k2(r,t,e)||s===0&&k2(r,n,e)||o===0&&k2(t,r,n)||l===0&&k2(t,e,n))}function k2(r,e,t){return e.x<=Math.max(r.x,t.x)&&e.x>=Math.min(r.x,t.x)&&e.y<=Math.max(r.y,t.y)&&e.y>=Math.min(r.y,t.y)}function O2(r){return r>0?1:r<0?-1:0}function jI(r,e){let t=r;do{if(t.i!==r.i&&t.next.i!==r.i&&t.i!==e.i&&t.next.i!==e.i&&lS(t,t.next,r,e))return!0;t=t.next}while(t!==r);return!1}function Dp(r,e){return dr(r.prev,r,r.next)<0?dr(r,e,r.next)>=0&&dr(r,r.prev,e)>=0:dr(r,e,r.prev)<0||dr(r,r.next,e)<0}function VI(r,e){let t=r,n=!1;const i=(r.x+e.x)/2,s=(r.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==r);return n}function cS(r,e){const t=new Qy(r.i,r.x,r.y),n=new Qy(e.i,e.x,e.y),i=r.next,s=e.prev;return r.next=e,e.prev=r,t.next=i,i.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function U_(r,e,t,n){const i=new Qy(r,e,t);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Pp(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function Qy(r,e,t){this.i=r,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function WI(r,e,t,n){let i=0;for(let s=e,o=t-n;s<t;s+=n)i+=(r[o]-r[s])*(r[s+1]+r[o+1]),o=s;return i}class Ko{static area(e){const t=e.length;let n=0;for(let i=t-1,s=0;s<t;i=s++)n+=e[i].x*e[s].y-e[s].x*e[i].y;return n*.5}static isClockWise(e){return Ko.area(e)<0}static triangulateShape(e,t){const n=[],i=[],s=[];H_(e),z_(n,e);let o=e.length;t.forEach(H_);for(let u=0;u<t.length;u++)i.push(o),o+=t[u].length,z_(n,t[u]);const l=TI.triangulate(n,i);for(let u=0;u<l.length;u+=3)s.push(l.slice(u,u+3));return s}}function H_(r){const e=r.length;e>2&&r[e-1].equals(r[0])&&r.pop()}function z_(r,e){for(let t=0;t<e.length;t++)r.push(e[t].x),r.push(e[t].y)}class Yg extends cn{constructor(e=new xu([new Ue(.5,.5),new Ue(-.5,.5),new Ue(-.5,-.5),new Ue(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,i=[],s=[];for(let l=0,u=e.length;l<u;l++){const h=e[l];o(h)}this.setAttribute("position",new Dt(i,3)),this.setAttribute("uv",new Dt(s,2)),this.computeVertexNormals();function o(l){const u=[],h=t.curveSegments!==void 0?t.curveSegments:12,p=t.steps!==void 0?t.steps:1,m=t.depth!==void 0?t.depth:1;let v=t.bevelEnabled!==void 0?t.bevelEnabled:!0,y=t.bevelThickness!==void 0?t.bevelThickness:.2,E=t.bevelSize!==void 0?t.bevelSize:y-.1,w=t.bevelOffset!==void 0?t.bevelOffset:0,C=t.bevelSegments!==void 0?t.bevelSegments:3;const x=t.extrudePath,M=t.UVGenerator!==void 0?t.UVGenerator:JI;let S,R=!1,N,I,O,j;x&&(S=x.getSpacedPoints(p),R=!0,v=!1,N=x.computeFrenetFrames(p,!1),I=new X,O=new X,j=new X),v||(C=0,y=0,E=0,w=0);const F=l.extractPoints(h);let H=F.shape;const ee=F.holes;if(!Ko.isClockWise(H)){H=H.reverse();for(let se=0,Je=ee.length;se<Je;se++){const Fe=ee[se];Ko.isClockWise(Fe)&&(ee[se]=Fe.reverse())}}const ve=Ko.triangulateShape(H,ee),Y=H;for(let se=0,Je=ee.length;se<Je;se++){const Fe=ee[se];H=H.concat(Fe)}function me(se,Je,Fe){return Je||console.error("THREE.ExtrudeGeometry: vec does not exist"),se.clone().addScaledVector(Je,Fe)}const pe=H.length,Ae=ve.length;function te(se,Je,Fe){let $e,ze,bt;const ft=se.x-Je.x,yt=se.y-Je.y,Lt=Fe.x-se.x,Kt=Fe.y-se.y,Mn=ft*ft+yt*yt,Z=ft*Kt-yt*Lt;if(Math.abs(Z)>Number.EPSILON){const W=Math.sqrt(Mn),Se=Math.sqrt(Lt*Lt+Kt*Kt),Ze=Je.x-yt/W,Ve=Je.y+ft/W,Ye=Fe.x-Kt/Se,Ct=Fe.y+Lt/Se,nt=((Ye-Ze)*Kt-(Ct-Ve)*Lt)/(ft*Kt-yt*Lt);$e=Ze+ft*nt-se.x,ze=Ve+yt*nt-se.y;const ct=$e*$e+ze*ze;if(ct<=2)return new Ue($e,ze);bt=Math.sqrt(ct/2)}else{let W=!1;ft>Number.EPSILON?Lt>Number.EPSILON&&(W=!0):ft<-Number.EPSILON?Lt<-Number.EPSILON&&(W=!0):Math.sign(yt)===Math.sign(Kt)&&(W=!0),W?($e=-yt,ze=ft,bt=Math.sqrt(Mn)):($e=ft,ze=yt,bt=Math.sqrt(Mn/2))}return new Ue($e/bt,ze/bt)}const ce=[];for(let se=0,Je=Y.length,Fe=Je-1,$e=se+1;se<Je;se++,Fe++,$e++)Fe===Je&&(Fe=0),$e===Je&&($e=0),ce[se]=te(Y[se],Y[Fe],Y[$e]);const ne=[];let z,K=ce.concat();for(let se=0,Je=ee.length;se<Je;se++){const Fe=ee[se];z=[];for(let $e=0,ze=Fe.length,bt=ze-1,ft=$e+1;$e<ze;$e++,bt++,ft++)bt===ze&&(bt=0),ft===ze&&(ft=0),z[$e]=te(Fe[$e],Fe[bt],Fe[ft]);ne.push(z),K=K.concat(z)}for(let se=0;se<C;se++){const Je=se/C,Fe=y*Math.cos(Je*Math.PI/2),$e=E*Math.sin(Je*Math.PI/2)+w;for(let ze=0,bt=Y.length;ze<bt;ze++){const ft=me(Y[ze],ce[ze],$e);tt(ft.x,ft.y,-Fe)}for(let ze=0,bt=ee.length;ze<bt;ze++){const ft=ee[ze];z=ne[ze];for(let yt=0,Lt=ft.length;yt<Lt;yt++){const Kt=me(ft[yt],z[yt],$e);tt(Kt.x,Kt.y,-Fe)}}}const xe=E+w;for(let se=0;se<pe;se++){const Je=v?me(H[se],K[se],xe):H[se];R?(O.copy(N.normals[0]).multiplyScalar(Je.x),I.copy(N.binormals[0]).multiplyScalar(Je.y),j.copy(S[0]).add(O).add(I),tt(j.x,j.y,j.z)):tt(Je.x,Je.y,0)}for(let se=1;se<=p;se++)for(let Je=0;Je<pe;Je++){const Fe=v?me(H[Je],K[Je],xe):H[Je];R?(O.copy(N.normals[se]).multiplyScalar(Fe.x),I.copy(N.binormals[se]).multiplyScalar(Fe.y),j.copy(S[se]).add(O).add(I),tt(j.x,j.y,j.z)):tt(Fe.x,Fe.y,m/p*se)}for(let se=C-1;se>=0;se--){const Je=se/C,Fe=y*Math.cos(Je*Math.PI/2),$e=E*Math.sin(Je*Math.PI/2)+w;for(let ze=0,bt=Y.length;ze<bt;ze++){const ft=me(Y[ze],ce[ze],$e);tt(ft.x,ft.y,m+Fe)}for(let ze=0,bt=ee.length;ze<bt;ze++){const ft=ee[ze];z=ne[ze];for(let yt=0,Lt=ft.length;yt<Lt;yt++){const Kt=me(ft[yt],z[yt],$e);R?tt(Kt.x,Kt.y+S[p-1].y,S[p-1].x+Fe):tt(Kt.x,Kt.y,m+Fe)}}}De(),Ie();function De(){const se=i.length/3;if(v){let Je=0,Fe=pe*Je;for(let $e=0;$e<Ae;$e++){const ze=ve[$e];rt(ze[2]+Fe,ze[1]+Fe,ze[0]+Fe)}Je=p+C*2,Fe=pe*Je;for(let $e=0;$e<Ae;$e++){const ze=ve[$e];rt(ze[0]+Fe,ze[1]+Fe,ze[2]+Fe)}}else{for(let Je=0;Je<Ae;Je++){const Fe=ve[Je];rt(Fe[2],Fe[1],Fe[0])}for(let Je=0;Je<Ae;Je++){const Fe=ve[Je];rt(Fe[0]+pe*p,Fe[1]+pe*p,Fe[2]+pe*p)}}n.addGroup(se,i.length/3-se,0)}function Ie(){const se=i.length/3;let Je=0;Oe(Y,Je),Je+=Y.length;for(let Fe=0,$e=ee.length;Fe<$e;Fe++){const ze=ee[Fe];Oe(ze,Je),Je+=ze.length}n.addGroup(se,i.length/3-se,1)}function Oe(se,Je){let Fe=se.length;for(;--Fe>=0;){const $e=Fe;let ze=Fe-1;ze<0&&(ze=se.length-1);for(let bt=0,ft=p+C*2;bt<ft;bt++){const yt=pe*bt,Lt=pe*(bt+1),Kt=Je+$e+yt,Mn=Je+ze+yt,Z=Je+ze+Lt,W=Je+$e+Lt;gt(Kt,Mn,Z,W)}}}function tt(se,Je,Fe){u.push(se),u.push(Je),u.push(Fe)}function rt(se,Je,Fe){kt(se),kt(Je),kt(Fe);const $e=i.length/3,ze=M.generateTopUV(n,i,$e-3,$e-2,$e-1);xt(ze[0]),xt(ze[1]),xt(ze[2])}function gt(se,Je,Fe,$e){kt(se),kt(Je),kt($e),kt(Je),kt(Fe),kt($e);const ze=i.length/3,bt=M.generateSideWallUV(n,i,ze-6,ze-3,ze-2,ze-1);xt(bt[0]),xt(bt[1]),xt(bt[3]),xt(bt[1]),xt(bt[2]),xt(bt[3])}function kt(se){i.push(u[se*3+0]),i.push(u[se*3+1]),i.push(u[se*3+2])}function xt(se){s.push(se.x),s.push(se.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return XI(t,n,e)}static fromJSON(e,t){const n=[];for(let s=0,o=e.shapes.length;s<o;s++){const l=t[e.shapes[s]];n.push(l)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new Ag[i.type]().fromJSON(i)),new Yg(n,e.options)}}const JI={generateTopUV:function(r,e,t,n,i){const s=e[t*3],o=e[t*3+1],l=e[n*3],u=e[n*3+1],h=e[i*3],p=e[i*3+1];return[new Ue(s,o),new Ue(l,u),new Ue(h,p)]},generateSideWallUV:function(r,e,t,n,i,s){const o=e[t*3],l=e[t*3+1],u=e[t*3+2],h=e[n*3],p=e[n*3+1],m=e[n*3+2],v=e[i*3],y=e[i*3+1],E=e[i*3+2],w=e[s*3],C=e[s*3+1],x=e[s*3+2];return Math.abs(l-p)<Math.abs(o-h)?[new Ue(o,1-u),new Ue(h,1-m),new Ue(v,1-E),new Ue(w,1-x)]:[new Ue(l,1-u),new Ue(p,1-m),new Ue(y,1-E),new Ue(C,1-x)]}};function XI(r,e,t){if(t.shapes=[],Array.isArray(r))for(let n=0,i=r.length;n<i;n++){const s=r[n];t.shapes.push(s.uuid)}else t.shapes.push(r.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Kp extends rc{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Kp(e.radius,e.detail)}}class qp extends rc{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new qp(e.radius,e.detail)}}class $g extends cn{constructor(e=.5,t=1,n=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:s,thetaLength:o},n=Math.max(3,n),i=Math.max(1,i);const l=[],u=[],h=[],p=[];let m=e;const v=(t-e)/i,y=new X,E=new Ue;for(let w=0;w<=i;w++){for(let C=0;C<=n;C++){const x=s+C/n*o;y.x=m*Math.cos(x),y.y=m*Math.sin(x),u.push(y.x,y.y,y.z),h.push(0,0,1),E.x=(y.x/t+1)/2,E.y=(y.y/t+1)/2,p.push(E.x,E.y)}m+=v}for(let w=0;w<i;w++){const C=w*(n+1);for(let x=0;x<n;x++){const M=x+C,S=M,R=M+n+1,N=M+n+2,I=M+1;l.push(S,R,I),l.push(R,N,I)}}this.setIndex(l),this.setAttribute("position",new Dt(u,3)),this.setAttribute("normal",new Dt(h,3)),this.setAttribute("uv",new Dt(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $g(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Qg extends cn{constructor(e=new xu([new Ue(0,.5),new Ue(-.5,-.5),new Ue(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],i=[],s=[],o=[];let l=0,u=0;if(Array.isArray(e)===!1)h(e);else for(let p=0;p<e.length;p++)h(e[p]),this.addGroup(l,u,p),l+=u,u=0;this.setIndex(n),this.setAttribute("position",new Dt(i,3)),this.setAttribute("normal",new Dt(s,3)),this.setAttribute("uv",new Dt(o,2));function h(p){const m=i.length/3,v=p.extractPoints(t);let y=v.shape;const E=v.holes;Ko.isClockWise(y)===!1&&(y=y.reverse());for(let C=0,x=E.length;C<x;C++){const M=E[C];Ko.isClockWise(M)===!0&&(E[C]=M.reverse())}const w=Ko.triangulateShape(y,E);for(let C=0,x=E.length;C<x;C++){const M=E[C];y=y.concat(M)}for(let C=0,x=y.length;C<x;C++){const M=y[C];i.push(M.x,M.y,0),s.push(0,0,1),o.push(M.x,M.y)}for(let C=0,x=w.length;C<x;C++){const M=w[C],S=M[0]+m,R=M[1]+m,N=M[2]+m;n.push(S,R,N),u+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return KI(t,e)}static fromJSON(e,t){const n=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=t[e.shapes[i]];n.push(o)}return new Qg(n,e.curveSegments)}}function KI(r,e){if(e.shapes=[],Array.isArray(r))for(let t=0,n=r.length;t<n;t++){const i=r[t];e.shapes.push(i.uuid)}else e.shapes.push(r.uuid);return e}class Yp extends cn{constructor(e=1,t=32,n=16,i=0,s=Math.PI*2,o=0,l=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:s,thetaStart:o,thetaLength:l},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const u=Math.min(o+l,Math.PI);let h=0;const p=[],m=new X,v=new X,y=[],E=[],w=[],C=[];for(let x=0;x<=n;x++){const M=[],S=x/n;let R=0;x===0&&o===0?R=.5/t:x===n&&u===Math.PI&&(R=-.5/t);for(let N=0;N<=t;N++){const I=N/t;m.x=-e*Math.cos(i+I*s)*Math.sin(o+S*l),m.y=e*Math.cos(o+S*l),m.z=e*Math.sin(i+I*s)*Math.sin(o+S*l),E.push(m.x,m.y,m.z),v.copy(m).normalize(),w.push(v.x,v.y,v.z),C.push(I+R,1-S),M.push(h++)}p.push(M)}for(let x=0;x<n;x++)for(let M=0;M<t;M++){const S=p[x][M+1],R=p[x][M],N=p[x+1][M],I=p[x+1][M+1];(x!==0||o>0)&&y.push(S,R,I),(x!==n-1||u<Math.PI)&&y.push(R,N,I)}this.setIndex(y),this.setAttribute("position",new Dt(E,3)),this.setAttribute("normal",new Dt(w,3)),this.setAttribute("uv",new Dt(C,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Yp(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Zg extends rc{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Zg(e.radius,e.detail)}}class e0 extends cn{constructor(e=1,t=.4,n=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:s},n=Math.floor(n),i=Math.floor(i);const o=[],l=[],u=[],h=[],p=new X,m=new X,v=new X;for(let y=0;y<=n;y++)for(let E=0;E<=i;E++){const w=E/i*s,C=y/n*Math.PI*2;m.x=(e+t*Math.cos(C))*Math.cos(w),m.y=(e+t*Math.cos(C))*Math.sin(w),m.z=t*Math.sin(C),l.push(m.x,m.y,m.z),p.x=e*Math.cos(w),p.y=e*Math.sin(w),v.subVectors(m,p).normalize(),u.push(v.x,v.y,v.z),h.push(E/i),h.push(y/n)}for(let y=1;y<=n;y++)for(let E=1;E<=i;E++){const w=(i+1)*y+E-1,C=(i+1)*(y-1)+E-1,x=(i+1)*(y-1)+E,M=(i+1)*y+E;o.push(w,C,M),o.push(C,x,M)}this.setIndex(o),this.setAttribute("position",new Dt(l,3)),this.setAttribute("normal",new Dt(u,3)),this.setAttribute("uv",new Dt(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new e0(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class t0 extends cn{constructor(e=1,t=.4,n=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:s,q:o},n=Math.floor(n),i=Math.floor(i);const l=[],u=[],h=[],p=[],m=new X,v=new X,y=new X,E=new X,w=new X,C=new X,x=new X;for(let S=0;S<=n;++S){const R=S/n*s*Math.PI*2;M(R,s,o,e,y),M(R+.01,s,o,e,E),C.subVectors(E,y),x.addVectors(E,y),w.crossVectors(C,x),x.crossVectors(w,C),w.normalize(),x.normalize();for(let N=0;N<=i;++N){const I=N/i*Math.PI*2,O=-t*Math.cos(I),j=t*Math.sin(I);m.x=y.x+(O*x.x+j*w.x),m.y=y.y+(O*x.y+j*w.y),m.z=y.z+(O*x.z+j*w.z),u.push(m.x,m.y,m.z),v.subVectors(m,y).normalize(),h.push(v.x,v.y,v.z),p.push(S/n),p.push(N/i)}}for(let S=1;S<=n;S++)for(let R=1;R<=i;R++){const N=(i+1)*(S-1)+(R-1),I=(i+1)*S+(R-1),O=(i+1)*S+R,j=(i+1)*(S-1)+R;l.push(N,I,j),l.push(I,O,j)}this.setIndex(l),this.setAttribute("position",new Dt(u,3)),this.setAttribute("normal",new Dt(h,3)),this.setAttribute("uv",new Dt(p,2));function M(S,R,N,I,O){const j=Math.cos(S),F=Math.sin(S),H=N/R*S,ee=Math.cos(H);O.x=I*(2+ee)*.5*j,O.y=I*(2+ee)*F*.5,O.z=I*Math.sin(H)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new t0(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class n0 extends cn{constructor(e=new WA(new X(-1,-1,0),new X(-1,1,0),new X(1,1,0)),t=64,n=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const l=new X,u=new X,h=new Ue;let p=new X;const m=[],v=[],y=[],E=[];w(),this.setIndex(E),this.setAttribute("position",new Dt(m,3)),this.setAttribute("normal",new Dt(v,3)),this.setAttribute("uv",new Dt(y,2));function w(){for(let S=0;S<t;S++)C(S);C(s===!1?t:0),M(),x()}function C(S){p=e.getPointAt(S/t,p);const R=o.normals[S],N=o.binormals[S];for(let I=0;I<=i;I++){const O=I/i*Math.PI*2,j=Math.sin(O),F=-Math.cos(O);u.x=F*R.x+j*N.x,u.y=F*R.y+j*N.y,u.z=F*R.z+j*N.z,u.normalize(),v.push(u.x,u.y,u.z),l.x=p.x+n*u.x,l.y=p.y+n*u.y,l.z=p.z+n*u.z,m.push(l.x,l.y,l.z)}}function x(){for(let S=1;S<=t;S++)for(let R=1;R<=i;R++){const N=(i+1)*(S-1)+(R-1),I=(i+1)*S+(R-1),O=(i+1)*S+R,j=(i+1)*(S-1)+R;E.push(N,I,j),E.push(I,O,j)}}function M(){for(let S=0;S<=t;S++)for(let R=0;R<=i;R++)h.x=S/t,h.y=R/i,y.push(h.x,h.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new n0(new Ag[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class uS extends cn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,i=new X,s=new X;if(e.index!==null){const o=e.attributes.position,l=e.index;let u=e.groups;u.length===0&&(u=[{start:0,count:l.count,materialIndex:0}]);for(let h=0,p=u.length;h<p;++h){const m=u[h],v=m.start,y=m.count;for(let E=v,w=v+y;E<w;E+=3)for(let C=0;C<3;C++){const x=l.getX(E+C),M=l.getX(E+(C+1)%3);i.fromBufferAttribute(o,x),s.fromBufferAttribute(o,M),G_(i,s,n)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let l=0,u=o.count/3;l<u;l++)for(let h=0;h<3;h++){const p=3*l+h,m=3*l+(h+1)%3;i.fromBufferAttribute(o,p),s.fromBufferAttribute(o,m),G_(i,s,n)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Dt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function G_(r,e,t){const n=`${r.x},${r.y},${r.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${r.x},${r.y},${r.z}`;return t.has(n)===!0||t.has(i)===!0?!1:(t.add(n),t.add(i),!0)}var j_=Object.freeze({__proto__:null,BoxGeometry:Pu,CapsuleGeometry:Wg,CircleGeometry:Jg,ConeGeometry:Xg,CylinderGeometry:Fh,DodecahedronGeometry:Kg,EdgesGeometry:oS,ExtrudeGeometry:Yg,IcosahedronGeometry:Kp,LatheGeometry:Xp,OctahedronGeometry:qp,PlaneGeometry:Ih,PolyhedronGeometry:rc,RingGeometry:$g,ShapeGeometry:Qg,SphereGeometry:Yp,TetrahedronGeometry:Zg,TorusGeometry:e0,TorusKnotGeometry:t0,TubeGeometry:n0,WireframeGeometry:uS});class dS extends Fr{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new ht(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class hS extends as{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class $p extends Fr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ht(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=nc,this.normalScale=new Ue(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Xs extends $p{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ue(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return yr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ht(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ht(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ht(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class fS extends Fr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new ht(16777215),this.specular=new ht(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=nc,this.normalScale=new Ue(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Hp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class pS extends Fr{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ht(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=nc,this.normalScale=new Ue(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class mS extends Fr{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=nc,this.normalScale=new Ue(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class XA extends Fr{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new ht(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=nc,this.normalScale=new Ue(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Hp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class gS extends Fr{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ht(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=nc,this.normalScale=new Ue(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class vS extends Ti{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function mu(r,e,t){return!r||!t&&r.constructor===e?r:typeof e.BYTES_PER_ELEMENT=="number"?new e(r):Array.prototype.slice.call(r)}function yS(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function AS(r){function e(i,s){return r[i]-r[s]}const t=r.length,n=new Array(t);for(let i=0;i!==t;++i)n[i]=i;return n.sort(e),n}function Zy(r,e,t){const n=r.length,i=new r.constructor(n);for(let s=0,o=0;o!==n;++s){const l=t[s]*e;for(let u=0;u!==e;++u)i[o++]=r[l+u]}return i}function KA(r,e,t,n){let i=1,s=r[0];for(;s!==void 0&&s[n]===void 0;)s=r[i++];if(s===void 0)return;let o=s[n];if(o!==void 0)if(Array.isArray(o))do o=s[n],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=r[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[n],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=r[i++];while(s!==void 0);else do o=s[n],o!==void 0&&(e.push(s.time),t.push(o)),s=r[i++];while(s!==void 0)}function qI(r,e,t,n,i=30){const s=r.clone();s.name=e;const o=[];for(let u=0;u<s.tracks.length;++u){const h=s.tracks[u],p=h.getValueSize(),m=[],v=[];for(let y=0;y<h.times.length;++y){const E=h.times[y]*i;if(!(E<t||E>=n)){m.push(h.times[y]);for(let w=0;w<p;++w)v.push(h.values[y*p+w])}}m.length!==0&&(h.times=mu(m,h.times.constructor),h.values=mu(v,h.values.constructor),o.push(h))}s.tracks=o;let l=1/0;for(let u=0;u<s.tracks.length;++u)l>s.tracks[u].times[0]&&(l=s.tracks[u].times[0]);for(let u=0;u<s.tracks.length;++u)s.tracks[u].shift(-1*l);return s.resetDuration(),s}function YI(r,e=0,t=r,n=30){n<=0&&(n=30);const i=t.tracks.length,s=e/n;for(let o=0;o<i;++o){const l=t.tracks[o],u=l.ValueTypeName;if(u==="bool"||u==="string")continue;const h=r.tracks.find(function(x){return x.name===l.name&&x.ValueTypeName===u});if(h===void 0)continue;let p=0;const m=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);let v=0;const y=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(v=y/3);const E=l.times.length-1;let w;if(s<=l.times[0]){const x=p,M=m-p;w=l.values.slice(x,M)}else if(s>=l.times[E]){const x=E*m+p,M=x+m-p;w=l.values.slice(x,M)}else{const x=l.createInterpolant(),M=p,S=m-p;x.evaluate(s),w=x.resultBuffer.slice(M,S)}u==="quaternion"&&new ni().fromArray(w).normalize().conjugate().toArray(w);const C=h.times.length;for(let x=0;x<C;++x){const M=x*y+v;if(u==="quaternion")ni.multiplyQuaternionsFlat(h.values,M,w,0,h.values,M);else{const S=y-v*2;for(let R=0;R<S;++R)h.values[M+R]-=w[R]}}}return r.blendMode=CA,r}const $I={convertArray:mu,isTypedArray:yS,getKeyframeOrder:AS,sortedArray:Zy,flattenJSON:KA,subclip:qI,makeClipAdditive:YI};class kh{constructor(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],s=t[n-1];e:{t:{let o;n:{r:if(!(e<i)){for(let l=n+2;;){if(i===void 0){if(e<s)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===l)break;if(s=i,i=t[++n],e<i)break t}o=t.length;break n}if(!(e>=s)){const l=t[1];e<l&&(n=2,s=l);for(let u=n-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===u)break;if(i=s,s=t[--n-1],e>=s)break t}o=n,n=0;break n}break e}for(;n<o;){const l=n+o>>>1;e<t[l]?o=l:n=l+1}if(i=t[n],s=t[n-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,i)}return this.interpolate_(n,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=n[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class ES extends kh{constructor(e,t,n,i){super(e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:du,endingEnd:du}}intervalChanged_(e,t,n){const i=this.parameterPositions;let s=e-2,o=e+1,l=i[s],u=i[o];if(l===void 0)switch(this.getSettings_().endingStart){case hu:s=e,l=2*t-n;break;case xp:s=i.length-2,l=t+i[s]-i[s+1];break;default:s=e,l=n}if(u===void 0)switch(this.getSettings_().endingEnd){case hu:o=e,u=2*n-t;break;case xp:o=1,u=n+i[1]-i[0];break;default:o=e-1,u=t}const h=(n-t)*.5,p=this.valueSize;this._weightPrev=h/(t-l),this._weightNext=h/(u-n),this._offsetPrev=s*p,this._offsetNext=o*p}interpolate_(e,t,n,i){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=e*l,h=u-l,p=this._offsetPrev,m=this._offsetNext,v=this._weightPrev,y=this._weightNext,E=(n-t)/(i-t),w=E*E,C=w*E,x=-v*C+2*v*w-v*E,M=(1+v)*C+(-1.5-2*v)*w+(-.5+v)*E+1,S=(-1-y)*C+(1.5+y)*w+.5*E,R=y*C-y*w;for(let N=0;N!==l;++N)s[N]=x*o[p+N]+M*o[h+N]+S*o[u+N]+R*o[m+N];return s}}class qA extends kh{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=e*l,h=u-l,p=(n-t)/(i-t),m=1-p;for(let v=0;v!==l;++v)s[v]=o[h+v]*m+o[u+v]*p;return s}}class xS extends kh{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ro{constructor(e,t,n,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=mu(t,this.TimeBufferType),this.values=mu(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:mu(e.times,Array),values:mu(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(n.interpolation=i)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new xS(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new qA(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new ES(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Sh:t=this.InterpolantFactoryMethodDiscrete;break;case Cu:t=this.InterpolantFactoryMethodLinear;break;case og:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Sh;case this.InterpolantFactoryMethodLinear:return Cu;case this.InterpolantFactoryMethodSmooth:return og}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){const n=this.times,i=n.length;let s=0,o=i-1;for(;s!==i&&n[s]<e;)++s;for(;o!==-1&&n[o]>t;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const l=this.getValueSize();this.times=n.slice(s,o),this.values=this.values.slice(s*l,o*l)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,s=n.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let l=0;l!==s;l++){const u=n[l];if(typeof u=="number"&&isNaN(u)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,u),e=!1;break}if(o!==null&&o>u){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,u,o),e=!1;break}o=u}if(i!==void 0&&yS(i))for(let l=0,u=i.length;l!==u;++l){const h=i[l];if(isNaN(h)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,h),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),i=this.getInterpolation()===og,s=e.length-1;let o=1;for(let l=1;l<s;++l){let u=!1;const h=e[l],p=e[l+1];if(h!==p&&(l!==1||h!==e[0]))if(i)u=!0;else{const m=l*n,v=m-n,y=m+n;for(let E=0;E!==n;++E){const w=t[m+E];if(w!==t[v+E]||w!==t[y+E]){u=!0;break}}}if(u){if(l!==o){e[o]=e[l];const m=l*n,v=o*n;for(let y=0;y!==n;++y)t[v+y]=t[m+y]}++o}}if(s>0){e[o]=e[s];for(let l=s*n,u=o*n,h=0;h!==n;++h)t[u+h]=t[l+h];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,i=new n(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Ro.prototype.TimeBufferType=Float32Array;Ro.prototype.ValueBufferType=Float32Array;Ro.prototype.DefaultInterpolation=Cu;class Lu extends Ro{}Lu.prototype.ValueTypeName="bool";Lu.prototype.ValueBufferType=Array;Lu.prototype.DefaultInterpolation=Sh;Lu.prototype.InterpolantFactoryMethodLinear=void 0;Lu.prototype.InterpolantFactoryMethodSmooth=void 0;class YA extends Ro{}YA.prototype.ValueTypeName="color";class Bu extends Ro{}Bu.prototype.ValueTypeName="number";class _S extends kh{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=(n-t)/(i-t);let h=e*l;for(let p=h+l;h!==p;h+=4)ni.slerpFlat(s,0,o,h-l,o,h,u);return s}}class Zl extends Ro{InterpolantFactoryMethodLinear(e){return new _S(this.times,this.values,this.getValueSize(),e)}}Zl.prototype.ValueTypeName="quaternion";Zl.prototype.DefaultInterpolation=Cu;Zl.prototype.InterpolantFactoryMethodSmooth=void 0;class Iu extends Ro{}Iu.prototype.ValueTypeName="string";Iu.prototype.ValueBufferType=Array;Iu.prototype.DefaultInterpolation=Sh;Iu.prototype.InterpolantFactoryMethodLinear=void 0;Iu.prototype.InterpolantFactoryMethodSmooth=void 0;class bu extends Ro{}bu.prototype.ValueTypeName="vector";class Mh{constructor(e,t=-1,n,i=Lg){this.name=e,this.tracks=n,this.duration=t,this.blendMode=i,this.uuid=Bs(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let o=0,l=n.length;o!==l;++o)t.push(ZI(n[o]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=n.length;s!==o;++s)t.push(Ro.toJSON(n[s]));return i}static CreateFromMorphTargetSequence(e,t,n,i){const s=t.length,o=[];for(let l=0;l<s;l++){let u=[],h=[];u.push((l+s-1)%s,l,(l+1)%s),h.push(0,1,0);const p=AS(u);u=Zy(u,1,p),h=Zy(h,1,p),!i&&u[0]===0&&(u.push(s),h.push(h[0])),o.push(new Bu(".morphTargetInfluences["+t[l].name+"]",u,h).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const i=e;n=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const i={},s=/^([\w-]*?)([\d]+)$/;for(let l=0,u=e.length;l<u;l++){const h=e[l],p=h.name.match(s);if(p&&p.length>1){const m=p[1];let v=i[m];v||(i[m]=v=[]),v.push(h)}}const o=[];for(const l in i)o.push(this.CreateFromMorphTargetSequence(l,i[l],t,n));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(m,v,y,E,w){if(y.length!==0){const C=[],x=[];KA(y,C,x,E),C.length!==0&&w.push(new m(v,C,x))}},i=[],s=e.name||"default",o=e.fps||30,l=e.blendMode;let u=e.length||-1;const h=e.hierarchy||[];for(let m=0;m<h.length;m++){const v=h[m].keys;if(!(!v||v.length===0))if(v[0].morphTargets){const y={};let E;for(E=0;E<v.length;E++)if(v[E].morphTargets)for(let w=0;w<v[E].morphTargets.length;w++)y[v[E].morphTargets[w]]=-1;for(const w in y){const C=[],x=[];for(let M=0;M!==v[E].morphTargets.length;++M){const S=v[E];C.push(S.time),x.push(S.morphTarget===w?1:0)}i.push(new Bu(".morphTargetInfluence["+w+"]",C,x))}u=y.length*o}else{const y=".bones["+t[m].name+"]";n(bu,y+".position",v,"pos",i),n(Zl,y+".quaternion",v,"rot",i),n(bu,y+".scale",v,"scl",i)}}return i.length===0?null:new this(s,u,i,l)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,i=e.length;n!==i;++n){const s=this.tracks[n];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function QI(r){switch(r.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Bu;case"vector":case"vector2":case"vector3":case"vector4":return bu;case"color":return YA;case"quaternion":return Zl;case"bool":case"boolean":return Lu;case"string":return Iu}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+r)}function ZI(r){if(r.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=QI(r.type);if(r.times===void 0){const t=[],n=[];KA(r.keys,t,n,"value"),r.times=t,r.values=n}return e.parse!==void 0?e.parse(r):new e(r.name,r.times,r.values,r.interpolation)}const Mu={enabled:!1,files:{},add:function(r,e){this.enabled!==!1&&(this.files[r]=e)},get:function(r){if(this.enabled!==!1)return this.files[r]},remove:function(r){delete this.files[r]},clear:function(){this.files={}}};class $A{constructor(e,t,n){const i=this;let s=!1,o=0,l=0,u;const h=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(p){l++,s===!1&&i.onStart!==void 0&&i.onStart(p,o,l),s=!0},this.itemEnd=function(p){o++,i.onProgress!==void 0&&i.onProgress(p,o,l),o===l&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(p){i.onError!==void 0&&i.onError(p)},this.resolveURL=function(p){return u?u(p):p},this.setURLModifier=function(p){return u=p,this},this.addHandler=function(p,m){return h.push(p,m),this},this.removeHandler=function(p){const m=h.indexOf(p);return m!==-1&&h.splice(m,2),this},this.getHandler=function(p){for(let m=0,v=h.length;m<v;m+=2){const y=h[m],E=h[m+1];if(y.global&&(y.lastIndex=0),y.test(p))return E}return null}}}const CS=new $A;class Ri{constructor(e){this.manager=e!==void 0?e:CS,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(i,s){n.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Ri.DEFAULT_MATERIAL_NAME="__DEFAULT";const Ua={};class eN extends Error{constructor(e,t){super(e),this.response=t}}class bs extends Ri{constructor(e){super(e)}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Mu.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Ua[e]!==void 0){Ua[e].push({onLoad:t,onProgress:n,onError:i});return}Ua[e]=[],Ua[e].push({onLoad:t,onProgress:n,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),l=this.mimeType,u=this.responseType;fetch(o).then(h=>{if(h.status===200||h.status===0){if(h.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||h.body===void 0||h.body.getReader===void 0)return h;const p=Ua[e],m=h.body.getReader(),v=h.headers.get("Content-Length")||h.headers.get("X-File-Size"),y=v?parseInt(v):0,E=y!==0;let w=0;const C=new ReadableStream({start(x){M();function M(){m.read().then(({done:S,value:R})=>{if(S)x.close();else{w+=R.byteLength;const N=new ProgressEvent("progress",{lengthComputable:E,loaded:w,total:y});for(let I=0,O=p.length;I<O;I++){const j=p[I];j.onProgress&&j.onProgress(N)}x.enqueue(R),M()}})}}});return new Response(C)}else throw new eN(`fetch for "${h.url}" responded with ${h.status}: ${h.statusText}`,h)}).then(h=>{switch(u){case"arraybuffer":return h.arrayBuffer();case"blob":return h.blob();case"document":return h.text().then(p=>new DOMParser().parseFromString(p,l));case"json":return h.json();default:if(l===void 0)return h.text();{const m=/charset="?([^;"\s]*)"?/i.exec(l),v=m&&m[1]?m[1].toLowerCase():void 0,y=new TextDecoder(v);return h.arrayBuffer().then(E=>y.decode(E))}}}).then(h=>{Mu.add(e,h);const p=Ua[e];delete Ua[e];for(let m=0,v=p.length;m<v;m++){const y=p[m];y.onLoad&&y.onLoad(h)}}).catch(h=>{const p=Ua[e];if(p===void 0)throw this.manager.itemError(e),h;delete Ua[e];for(let m=0,v=p.length;m<v;m++){const y=p[m];y.onError&&y.onError(h)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class tN extends Ri{constructor(e){super(e)}load(e,t,n,i){const s=this,o=new bs(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(u){i?i(u):console.error(u),s.manager.itemError(e)}},n,i)}parse(e){const t=[];for(let n=0;n<e.length;n++){const i=Mh.parse(e[n]);t.push(i)}return t}}class nN extends Ri{constructor(e){super(e)}load(e,t,n,i){const s=this,o=[],l=new jg,u=new bs(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(s.withCredentials);let h=0;function p(m){u.load(e[m],function(v){const y=s.parse(v,!0);o[m]={width:y.width,height:y.height,format:y.format,mipmaps:y.mipmaps},h+=1,h===6&&(y.mipmapCount===1&&(l.minFilter=Jn),l.image=o,l.format=y.format,l.needsUpdate=!0,t&&t(l))},n,i)}if(Array.isArray(e))for(let m=0,v=e.length;m<v;++m)p(m);else u.load(e,function(m){const v=s.parse(m,!0);if(v.isCubemap){const y=v.mipmaps.length/v.mipmapCount;for(let E=0;E<y;E++){o[E]={mipmaps:[]};for(let w=0;w<v.mipmapCount;w++)o[E].mipmaps.push(v.mipmaps[E*v.mipmapCount+w]),o[E].format=v.format,o[E].width=v.width,o[E].height=v.height}l.image=o}else l.image.width=v.width,l.image.height=v.height,l.mipmaps=v.mipmaps;v.mipmapCount===1&&(l.minFilter=Jn),l.format=v.format,l.needsUpdate=!0,t&&t(l)},n,i);return l}}class Lp extends Ri{constructor(e){super(e)}load(e,t,n,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Mu.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const l=bp("img");function u(){p(),Mu.add(e,this),t&&t(this),s.manager.itemEnd(e)}function h(m){p(),i&&i(m),s.manager.itemError(e),s.manager.itemEnd(e)}function p(){l.removeEventListener("load",u,!1),l.removeEventListener("error",h,!1)}return l.addEventListener("load",u,!1),l.addEventListener("error",h,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),s.manager.itemStart(e),l.src=e,l}}class wS extends Ri{constructor(e){super(e)}load(e,t,n,i){const s=new Vp;s.colorSpace=Xr;const o=new Lp(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let l=0;function u(h){o.load(e[h],function(p){s.images[h]=p,l++,l===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let h=0;h<e.length;++h)u(h);return s}}class QA extends Ri{constructor(e){super(e)}load(e,t,n,i){const s=this,o=new xh,l=new bs(this.manager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(s.withCredentials),l.load(e,function(u){let h;try{h=s.parse(u)}catch(p){if(i!==void 0)i(p);else{console.error(p);return}}h.image!==void 0?o.image=h.image:h.data!==void 0&&(o.image.width=h.width,o.image.height=h.height,o.image.data=h.data),o.wrapS=h.wrapS!==void 0?h.wrapS:gi,o.wrapT=h.wrapT!==void 0?h.wrapT:gi,o.magFilter=h.magFilter!==void 0?h.magFilter:Jn,o.minFilter=h.minFilter!==void 0?h.minFilter:Jn,o.anisotropy=h.anisotropy!==void 0?h.anisotropy:1,h.colorSpace!==void 0?o.colorSpace=h.colorSpace:h.encoding!==void 0&&(o.encoding=h.encoding),h.flipY!==void 0&&(o.flipY=h.flipY),h.format!==void 0&&(o.format=h.format),h.type!==void 0&&(o.type=h.type),h.mipmaps!==void 0&&(o.mipmaps=h.mipmaps,o.minFilter=Qo),h.mipmapCount===1&&(o.minFilter=Jn),h.generateMipmaps!==void 0&&(o.generateMipmaps=h.generateMipmaps),o.needsUpdate=!0,t&&t(o,h)},n,i),o}}class SS extends Ri{constructor(e){super(e)}load(e,t,n,i){const s=new ar,o=new Lp(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(l){s.image=l,s.needsUpdate=!0,t!==void 0&&t(s)},n,i),s}}class ic extends bn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new ht(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class BS extends ic{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(bn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new ht(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const bv=new $t,V_=new X,W_=new X;class ZA{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ue(512,512),this.map=null,this.mapPass=null,this.matrix=new $t,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Fg,this._frameExtents=new Ue(1,1),this._viewportCount=1,this._viewports=[new Un(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;V_.setFromMatrixPosition(e.matrixWorld),t.position.copy(V_),W_.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(W_),t.updateMatrixWorld(),bv.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(bv),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(bv)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class rN extends ZA{constructor(){super(new Ar(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=Bh*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(n!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=n,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class eE extends ic{constructor(e,t,n=0,i=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(bn.DEFAULT_UP),this.updateMatrix(),this.target=new bn,this.distance=n,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new rN}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const J_=new $t,Xf=new X,Mv=new X;class iN extends ZA{constructor(){super(new Ar(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ue(4,2),this._viewportCount=6,this._viewports=[new Un(2,1,1,1),new Un(0,1,1,1),new Un(3,1,1,1),new Un(1,1,1,1),new Un(3,0,1,1),new Un(1,0,1,1)],this._cubeDirections=[new X(1,0,0),new X(-1,0,0),new X(0,0,1),new X(0,0,-1),new X(0,1,0),new X(0,-1,0)],this._cubeUps=[new X(0,1,0),new X(0,1,0),new X(0,1,0),new X(0,1,0),new X(0,0,1),new X(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,i=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),Xf.setFromMatrixPosition(e.matrixWorld),n.position.copy(Xf),Mv.copy(n.position),Mv.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Mv),n.updateMatrixWorld(),i.makeTranslation(-Xf.x,-Xf.y,-Xf.z),J_.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(J_)}}class tE extends ic{constructor(e,t,n=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new iN}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class sN extends ZA{constructor(){super(new Ka(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class nE extends ic{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(bn.DEFAULT_UP),this.updateMatrix(),this.target=new bn,this.shadow=new sN}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class bS extends ic{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class MS extends ic{constructor(e,t,n=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class TS{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new X)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],1.092548*(n*i)),t.addScaledVector(o[5],1.092548*(i*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(n*s)),t.addScaledVector(o[8],.546274*(n*n-i*i)),t}getIrradianceAt(e,t){const n=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*i),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*n),t.addScaledVector(o[4],2*.429043*n*i),t.addScaledVector(o[5],2*.429043*i*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*n*s),t.addScaledVector(o[8],.429043*(n*n-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const n=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*n*s,t[8]=.546274*(n*n-i*i)}}class RS extends ic{constructor(e=new TS,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class r0 extends Ri{constructor(e){super(e),this.textures={}}load(e,t,n,i){const s=this,o=new bs(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(u){i?i(u):console.error(u),s.manager.itemError(e)}},n,i)}parse(e){const t=this.textures;function n(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=r0.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new ht().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=n(o.value);break;case"c":i.uniforms[s].value=new ht().setHex(o.value);break;case"v2":i.uniforms[s].value=new Ue().fromArray(o.value);break;case"v3":i.uniforms[s].value=new X().fromArray(o.value);break;case"v4":i.uniforms[s].value=new Un().fromArray(o.value);break;case"m3":i.uniforms[s].value=new mn().fromArray(o.value);break;case"m4":i.uniforms[s].value=new $t().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=n(e.map)),e.matcap!==void 0&&(i.matcap=n(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new Ue().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=n(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new Ue().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=n(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:dS,SpriteMaterial:FA,RawShaderMaterial:hS,ShaderMaterial:as,PointsMaterial:Gg,MeshPhysicalMaterial:Xs,MeshStandardMaterial:$p,MeshPhongMaterial:fS,MeshToonMaterial:pS,MeshNormalMaterial:mS,MeshLambertMaterial:XA,MeshDepthMaterial:Og,MeshDistanceMaterial:IA,MeshBasicMaterial:ws,MeshMatcapMaterial:gS,LineDashedMaterial:vS,LineBasicMaterial:Ti,Material:Fr};return new t[e]}}class ql{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class DS extends cn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class PS extends Ri{constructor(e){super(e)}load(e,t,n,i){const s=this,o=new bs(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(u){i?i(u):console.error(u),s.manager.itemError(e)}},n,i)}parse(e){const t={},n={};function i(y,E){if(t[E]!==void 0)return t[E];const C=y.interleavedBuffers[E],x=s(y,C.buffer),M=ph(C.type,x),S=new Wp(M,C.stride);return S.uuid=C.uuid,t[E]=S,S}function s(y,E){if(n[E]!==void 0)return n[E];const C=y.arrayBuffers[E],x=new Uint32Array(C).buffer;return n[E]=x,x}const o=e.isInstancedBufferGeometry?new DS:new cn,l=e.data.index;if(l!==void 0){const y=ph(l.type,l.array);o.setIndex(new Dn(y,1))}const u=e.data.attributes;for(const y in u){const E=u[y];let w;if(E.isInterleavedBufferAttribute){const C=i(e.data,E.data);w=new Ql(C,E.itemSize,E.offset,E.normalized)}else{const C=ph(E.type,E.array),x=E.isInstancedBufferAttribute?wu:Dn;w=new x(C,E.itemSize,E.normalized)}E.name!==void 0&&(w.name=E.name),E.usage!==void 0&&w.setUsage(E.usage),E.updateRange!==void 0&&(w.updateRange.offset=E.updateRange.offset,w.updateRange.count=E.updateRange.count),o.setAttribute(y,w)}const h=e.data.morphAttributes;if(h)for(const y in h){const E=h[y],w=[];for(let C=0,x=E.length;C<x;C++){const M=E[C];let S;if(M.isInterleavedBufferAttribute){const R=i(e.data,M.data);S=new Ql(R,M.itemSize,M.offset,M.normalized)}else{const R=ph(M.type,M.array);S=new Dn(R,M.itemSize,M.normalized)}M.name!==void 0&&(S.name=M.name),w.push(S)}o.morphAttributes[y]=w}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const m=e.data.groups||e.data.drawcalls||e.data.offsets;if(m!==void 0)for(let y=0,E=m.length;y!==E;++y){const w=m[y];o.addGroup(w.start,w.count,w.materialIndex)}const v=e.data.boundingSphere;if(v!==void 0){const y=new X;v.center!==void 0&&y.fromArray(v.center),o.boundingSphere=new Ts(y,v.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class oN extends Ri{constructor(e){super(e)}load(e,t,n,i){const s=this,o=this.path===""?ql.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const l=new bs(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){let h=null;try{h=JSON.parse(u)}catch(m){i!==void 0&&i(m),console.error("THREE:ObjectLoader: Can't parse "+e+".",m.message);return}const p=h.metadata;if(p===void 0||p.type===void 0||p.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(h,t)},n,i)}async loadAsync(e,t){const n=this,i=this.path===""?ql.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new bs(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),l=JSON.parse(o),u=l.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(l)}parse(e,t){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){t!==void 0&&t(h)}),l=this.parseTextures(e.textures,o),u=this.parseMaterials(e.materials,l),h=this.parseObject(e.object,s,u,l,n),p=this.parseSkeletons(e.skeletons,h);if(this.bindSkeletons(h,p),t!==void 0){let m=!1;for(const v in o)if(o[v].data instanceof HTMLImageElement){m=!0;break}m===!1&&t(h)}return h}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,n),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),l=this.parseMaterials(e.materials,o),u=this.parseObject(e.object,i,l,o,t),h=this.parseSkeletons(e.skeletons,u);return this.bindSkeletons(u,h),u}parseShapes(e){const t={};if(e!==void 0)for(let n=0,i=e.length;n<i;n++){const s=new xu().fromJSON(e[n]);t[s.uuid]=s}return t}parseSkeletons(e,t){const n={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const l=new Jp().fromJSON(e[s],i);n[l.uuid]=l}return n}parseGeometries(e,t){const n={};if(e!==void 0){const i=new PS;for(let s=0,o=e.length;s<o;s++){let l;const u=e[s];switch(u.type){case"BufferGeometry":case"InstancedBufferGeometry":l=i.parse(u);break;default:u.type in j_?l=j_[u.type].fromJSON(u,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${u.type}"`)}l.uuid=u.uuid,u.name!==void 0&&(l.name=u.name),u.userData!==void 0&&(l.userData=u.userData),n[u.uuid]=l}}return n}parseMaterials(e,t){const n={},i={};if(e!==void 0){const s=new r0;s.setTextures(t);for(let o=0,l=e.length;o<l;o++){const u=e[o];n[u.uuid]===void 0&&(n[u.uuid]=s.parse(u)),i[u.uuid]=n[u.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const i=e[n],s=Mh.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const n=this,i={};let s;function o(u){return n.manager.itemStart(u),s.load(u,function(){n.manager.itemEnd(u)},void 0,function(){n.manager.itemError(u),n.manager.itemEnd(u)})}function l(u){if(typeof u=="string"){const h=u,p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:n.resourcePath+h;return o(p)}else return u.data?{data:ph(u.type,u.data),width:u.width,height:u.height}:null}if(e!==void 0&&e.length>0){const u=new $A(t);s=new Lp(u),s.setCrossOrigin(this.crossOrigin);for(let h=0,p=e.length;h<p;h++){const m=e[h],v=m.url;if(Array.isArray(v)){const y=[];for(let E=0,w=v.length;E<w;E++){const C=v[E],x=l(C);x!==null&&(x instanceof HTMLImageElement?y.push(x):y.push(new xh(x.data,x.width,x.height)))}i[m.uuid]=new fu(y)}else{const y=l(m.url);i[m.uuid]=new fu(y)}}}return i}async parseImagesAsync(e){const t=this,n={};let i;async function s(o){if(typeof o=="string"){const l=o,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:t.resourcePath+l;return await i.loadAsync(u)}else return o.data?{data:ph(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new Lp(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,l=e.length;o<l;o++){const u=e[o],h=u.url;if(Array.isArray(h)){const p=[];for(let m=0,v=h.length;m<v;m++){const y=h[m],E=await s(y);E!==null&&(E instanceof HTMLImageElement?p.push(E):p.push(new xh(E.data,E.width,E.height)))}n[u.uuid]=new fu(p)}else{const p=await s(u.url);n[u.uuid]=new fu(p)}}}return n}parseTextures(e,t){function n(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const l=e[s];l.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',l.uuid),t[l.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",l.image);const u=t[l.image],h=u.data;let p;Array.isArray(h)?(p=new Vp,h.length===6&&(p.needsUpdate=!0)):(h&&h.data?p=new xh:p=new ar,h&&(p.needsUpdate=!0)),p.source=u,p.uuid=l.uuid,l.name!==void 0&&(p.name=l.name),l.mapping!==void 0&&(p.mapping=n(l.mapping,aN)),l.channel!==void 0&&(p.channel=l.channel),l.offset!==void 0&&p.offset.fromArray(l.offset),l.repeat!==void 0&&p.repeat.fromArray(l.repeat),l.center!==void 0&&p.center.fromArray(l.center),l.rotation!==void 0&&(p.rotation=l.rotation),l.wrap!==void 0&&(p.wrapS=n(l.wrap[0],X_),p.wrapT=n(l.wrap[1],X_)),l.format!==void 0&&(p.format=l.format),l.internalFormat!==void 0&&(p.internalFormat=l.internalFormat),l.type!==void 0&&(p.type=l.type),l.colorSpace!==void 0&&(p.colorSpace=l.colorSpace),l.encoding!==void 0&&(p.encoding=l.encoding),l.minFilter!==void 0&&(p.minFilter=n(l.minFilter,K_)),l.magFilter!==void 0&&(p.magFilter=n(l.magFilter,K_)),l.anisotropy!==void 0&&(p.anisotropy=l.anisotropy),l.flipY!==void 0&&(p.flipY=l.flipY),l.generateMipmaps!==void 0&&(p.generateMipmaps=l.generateMipmaps),l.premultiplyAlpha!==void 0&&(p.premultiplyAlpha=l.premultiplyAlpha),l.unpackAlignment!==void 0&&(p.unpackAlignment=l.unpackAlignment),l.compareFunction!==void 0&&(p.compareFunction=l.compareFunction),l.userData!==void 0&&(p.userData=l.userData),i[l.uuid]=p}return i}parseObject(e,t,n,i,s){let o;function l(v){return t[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",v),t[v]}function u(v){if(v!==void 0){if(Array.isArray(v)){const y=[];for(let E=0,w=v.length;E<w;E++){const C=v[E];n[C]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",C),y.push(n[C])}return y}return n[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",v),n[v]}}function h(v){return i[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",v),i[v]}let p,m;switch(e.type){case"Scene":o=new Mp,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new ht(e.background):o.background=h(e.background)),e.environment!==void 0&&(o.environment=h(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new Hg(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new Ug(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new Ar(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Ka(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new bS(e.color,e.intensity);break;case"DirectionalLight":o=new nE(e.color,e.intensity);break;case"PointLight":o=new tE(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new MS(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new eE(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new BS(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new RS().fromJSON(e);break;case"SkinnedMesh":p=l(e.geometry),m=u(e.material),o=new kA(p,m),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":p=l(e.geometry),m=u(e.material),o=new Nr(p,m);break;case"InstancedMesh":p=l(e.geometry),m=u(e.material);const v=e.count,y=e.instanceMatrix,E=e.instanceColor;o=new OA(p,m,v),o.instanceMatrix=new wu(new Float32Array(y.array),16),E!==void 0&&(o.instanceColor=new wu(new Float32Array(E.array),E.itemSize));break;case"LOD":o=new eS;break;case"Line":o=new $a(l(e.geometry),u(e.material));break;case"LineLoop":o=new UA(l(e.geometry),u(e.material));break;case"LineSegments":o=new Mo(l(e.geometry),u(e.material));break;case"PointCloud":case"Points":o=new HA(l(e.geometry),u(e.material));break;case"Sprite":o=new Z1(u(e.material));break;case"Group":o=new Wa;break;case"Bone":o=new zg;break;default:o=new bn}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const v=e.children;for(let y=0;y<v.length;y++)o.add(this.parseObject(v[y],t,n,i,s))}if(e.animations!==void 0){const v=e.animations;for(let y=0;y<v.length;y++){const E=v[y];o.animations.push(s[E])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const v=e.levels;for(let y=0;y<v.length;y++){const E=v[y],w=o.getObjectByProperty("uuid",E.object);w!==void 0&&o.addLevel(w,E.distance,E.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const i=t[n.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(i,n.bindMatrix)}})}}const aN={UVMapping:Rg,CubeReflectionMapping:$o,CubeRefractionMapping:Yl,EquirectangularReflectionMapping:Ch,EquirectangularRefractionMapping:Ap,CubeUVReflectionMapping:Lh},X_={RepeatWrapping:$l,ClampToEdgeWrapping:gi,MirroredRepeatWrapping:wh},K_={NearestFilter:or,NearestMipmapNearestFilter:Ep,NearestMipmapLinearFilter:Ah,LinearFilter:Jn,LinearMipmapNearestFilter:Dg,LinearMipmapLinearFilter:Qo};class LS extends Ri{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Mu.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const l={};l.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",l.headers=this.requestHeader,fetch(e,l).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(u){Mu.add(e,u),t&&t(u),s.manager.itemEnd(e)}).catch(function(u){i&&i(u),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let U2;class rE{static getContext(){return U2===void 0&&(U2=new(window.AudioContext||window.webkitAudioContext)),U2}static setContext(e){U2=e}}class lN extends Ri{constructor(e){super(e)}load(e,t,n,i){const s=this,o=new bs(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(u){try{const h=u.slice(0);rE.getContext().decodeAudioData(h,function(m){t(m)},l)}catch(h){l(h)}},n,i);function l(u){i?i(u):console.error(u),s.manager.itemError(e)}}}const q_=new $t,Y_=new $t,Yc=new $t;class cN{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ar,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ar,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Yc.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,o=t.near*Math.tan(Au*t.fov*.5)/t.zoom;let l,u;Y_.elements[12]=-i,q_.elements[12]=i,l=-o*t.aspect+s,u=o*t.aspect+s,Yc.elements[0]=2*t.near/(u-l),Yc.elements[8]=(u+l)/(u-l),this.cameraL.projectionMatrix.copy(Yc),l=-o*t.aspect-s,u=o*t.aspect-s,Yc.elements[0]=2*t.near/(u-l),Yc.elements[8]=(u+l)/(u-l),this.cameraR.projectionMatrix.copy(Yc)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Y_),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(q_)}}class iE{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=$_(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=$_();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function $_(){return(typeof performance>"u"?Date:performance).now()}const $c=new X,Q_=new ni,uN=new X,Qc=new X;class dN extends bn{constructor(){super(),this.type="AudioListener",this.context=rE.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new iE}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose($c,Q_,uN),Qc.set(0,0,-1).applyQuaternion(Q_),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime($c.x,i),t.positionY.linearRampToValueAtTime($c.y,i),t.positionZ.linearRampToValueAtTime($c.z,i),t.forwardX.linearRampToValueAtTime(Qc.x,i),t.forwardY.linearRampToValueAtTime(Qc.y,i),t.forwardZ.linearRampToValueAtTime(Qc.z,i),t.upX.linearRampToValueAtTime(n.x,i),t.upY.linearRampToValueAtTime(n.y,i),t.upZ.linearRampToValueAtTime(n.z,i)}else t.setPosition($c.x,$c.y,$c.z),t.setOrientation(Qc.x,Qc.y,Qc.z,n.x,n.y,n.z)}}class IS extends bn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Zc=new X,Z_=new ni,hN=new X,eu=new X;class fN extends IS{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Zc,Z_,hN),eu.set(0,0,1).applyQuaternion(Z_);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Zc.x,n),t.positionY.linearRampToValueAtTime(Zc.y,n),t.positionZ.linearRampToValueAtTime(Zc.z,n),t.orientationX.linearRampToValueAtTime(eu.x,n),t.orientationY.linearRampToValueAtTime(eu.y,n),t.orientationZ.linearRampToValueAtTime(eu.z,n)}else t.setPosition(Zc.x,Zc.y,Zc.z),t.setOrientation(eu.x,eu.y,eu.z)}}class pN{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class NS{constructor(e,t,n){this.binding=e,this.valueSize=n;let i,s,o;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let l=0;l!==i;++l)n[s+l]=n[l];o=t}else{o+=t;const l=t/o;this._mixBufferRegion(n,s,0,l,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,i=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,i=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const u=t*this._origIndex;this._mixBufferRegion(n,i,u,1-s,t)}o>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let u=t,h=t+t;u!==h;++u)if(n[u]!==n[u+t]){l.setValue(n,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(let s=n,o=i;s!==o;++s)t[s]=t[i+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[t+o]=e[n+o]}_slerp(e,t,n,i){ni.slerpFlat(e,t,e,t,e,n,i)}_slerpAdditive(e,t,n,i,s){const o=this._workIndex*s;ni.multiplyQuaternionsFlat(e,o,e,t,e,n),ni.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,n,i,s){const o=1-i;for(let l=0;l!==s;++l){const u=t+l;e[u]=e[u]*o+e[n+l]*i}}_lerpAdditive(e,t,n,i,s){for(let o=0;o!==s;++o){const l=t+o;e[l]=e[l]+e[n+o]*i}}}const sE="\\[\\]\\.:\\/",mN=new RegExp("["+sE+"]","g"),oE="[^"+sE+"]",gN="[^"+sE.replace("\\.","")+"]",vN=/((?:WC+[\/:])*)/.source.replace("WC",oE),yN=/(WCOD+)?/.source.replace("WCOD",gN),AN=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",oE),EN=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",oE),xN=new RegExp("^"+vN+yN+AN+EN+"$"),_N=["material","materials","bones","map"];class CN{constructor(e,t,n){const i=n||Bn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];i!==void 0&&i.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=n.length;i!==s;++i)n[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class Bn{constructor(e,t,n){this.path=t,this.parsedPath=n||Bn.parseTrackName(t),this.node=Bn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Bn.Composite(e,t,n):new Bn(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(mN,"")}static parseTrackName(e){const t=xN.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=n.nodeName.substring(i+1);_N.indexOf(s)!==-1&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=s)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(s){for(let o=0;o<s.length;o++){const l=s[o];if(l.name===t||l.uuid===t)return l;const u=n(l.children);if(u)return u}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)e[t++]=n[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,s=n.length;i!==s;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=Bn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let h=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let p=0;p<e.length;p++)if(e[p].name===h){h=p;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(h!==void 0){if(e[h]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[h]}}const o=e[i];if(o===void 0){const h=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+i+" but it wasn't found.",e);return}let l=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?l=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let u=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}u=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(u=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(u=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Bn.Composite=CN;Bn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Bn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Bn.prototype.GetterByBindingType=[Bn.prototype._getValue_direct,Bn.prototype._getValue_array,Bn.prototype._getValue_arrayElement,Bn.prototype._getValue_toArray];Bn.prototype.SetterByBindingTypeAndVersioning=[[Bn.prototype._setValue_direct,Bn.prototype._setValue_direct_setNeedsUpdate,Bn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Bn.prototype._setValue_array,Bn.prototype._setValue_array_setNeedsUpdate,Bn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Bn.prototype._setValue_arrayElement,Bn.prototype._setValue_arrayElement_setNeedsUpdate,Bn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Bn.prototype._setValue_fromArray,Bn.prototype._setValue_fromArray_setNeedsUpdate,Bn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class wN{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Bs(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,i=arguments.length;n!==i;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let l,u=e.length,h=this.nCachedObjects_;for(let p=0,m=arguments.length;p!==m;++p){const v=arguments[p],y=v.uuid;let E=t[y];if(E===void 0){E=u++,t[y]=E,e.push(v);for(let w=0,C=o;w!==C;++w)s[w].push(new Bn(v,n[w],i[w]))}else if(E<h){l=e[E];const w=--h,C=e[w];t[C.uuid]=E,e[E]=C,t[y]=w,e[w]=v;for(let x=0,M=o;x!==M;++x){const S=s[x],R=S[w];let N=S[E];S[E]=R,N===void 0&&(N=new Bn(v,n[x],i[x])),S[w]=N}}else e[E]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=h}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let s=this.nCachedObjects_;for(let o=0,l=arguments.length;o!==l;++o){const u=arguments[o],h=u.uuid,p=t[h];if(p!==void 0&&p>=s){const m=s++,v=e[m];t[v.uuid]=p,e[p]=v,t[h]=m,e[m]=u;for(let y=0,E=i;y!==E;++y){const w=n[y],C=w[m],x=w[p];w[p]=C,w[m]=x}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let s=this.nCachedObjects_,o=e.length;for(let l=0,u=arguments.length;l!==u;++l){const h=arguments[l],p=h.uuid,m=t[p];if(m!==void 0)if(delete t[p],m<s){const v=--s,y=e[v],E=--o,w=e[E];t[y.uuid]=m,e[m]=y,t[w.uuid]=v,e[v]=w,e.pop();for(let C=0,x=i;C!==x;++C){const M=n[C],S=M[v],R=M[E];M[m]=S,M[v]=R,M.pop()}}else{const v=--o,y=e[v];v>0&&(t[y.uuid]=m),e[m]=y,e.pop();for(let E=0,w=i;E!==w;++E){const C=n[E];C[m]=C[v],C.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const n=this._bindingsIndicesByPath;let i=n[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,l=this._parsedPaths,u=this._objects,h=u.length,p=this.nCachedObjects_,m=new Array(h);i=s.length,n[e]=i,o.push(e),l.push(t),s.push(m);for(let v=p,y=u.length;v!==y;++v){const E=u[v];m[v]=new Bn(E,e,t)}return m}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,l=o.length-1,u=o[l],h=e[l];t[h]=n,o[n]=u,o.pop(),s[n]=s[l],s.pop(),i[n]=i[l],i.pop()}}}class FS{constructor(e,t,n=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=i;const s=t.tracks,o=s.length,l=new Array(o),u={endingStart:du,endingEnd:du};for(let h=0;h!==o;++h){const p=s[h].createInterpolant(null);l[h]=p,p.settings=u}this._interpolantSettings=u,this._interpolants=l,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=_1,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const i=this._clip.duration,s=e._clip.duration,o=s/i,l=i/s;e.warp(1,o,t),this.warp(l,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const i=this._mixer,s=i.time,o=this.timeScale;let l=this._timeScaleInterpolant;l===null&&(l=i._lendControlInterpolant(),this._timeScaleInterpolant=l);const u=l.parameterPositions,h=l.sampleValues;return u[0]=s,u[1]=s+n,h[0]=e/o,h[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const u=(e-s)*n;u<0||n===0?t=0:(this._startTime=null,t=n*u)}t*=this._updateTimeScale(e);const o=this._updateTime(t),l=this._updateWeight(e);if(l>0){const u=this._interpolants,h=this._propertyBindings;switch(this.blendMode){case CA:for(let p=0,m=u.length;p!==m;++p)u[p].evaluate(o),h[p].accumulateAdditive(l);break;case Lg:default:for(let p=0,m=u.length;p!==m;++p)u[p].evaluate(o),h[p].accumulate(i,l)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let i=this.time+e,s=this._loopCount;const o=n===C1;if(e===0)return s===-1?i:o&&(s&1)===1?t-i:i;if(n===x1){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const l=Math.floor(i/t);i-=t*l,s+=Math.abs(l);const u=this.repetitions-s;if(u<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(u===1){const h=e<0;this._setEndings(h,!h,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:l})}}else this.time=i;if(o&&(s&1)===1)return t-i}return i}_setEndings(e,t,n){const i=this._interpolantSettings;n?(i.endingStart=hu,i.endingEnd=hu):(e?i.endingStart=this.zeroSlopeAtStart?hu:du:i.endingStart=xp,t?i.endingEnd=this.zeroSlopeAtEnd?hu:du:i.endingEnd=xp)}_scheduleFading(e,t,n){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const l=o.parameterPositions,u=o.sampleValues;return l[0]=s,u[0]=t,l[1]=s+e,u[1]=n,this}}const SN=new Float32Array(1);class BN extends Za{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,l=e._interpolants,u=n.uuid,h=this._bindingsByRootAndName;let p=h[u];p===void 0&&(p={},h[u]=p);for(let m=0;m!==s;++m){const v=i[m],y=v.name;let E=p[y];if(E!==void 0)++E.referenceCount,o[m]=E;else{if(E=o[m],E!==void 0){E._cacheIndex===null&&(++E.referenceCount,this._addInactiveBinding(E,u,y));continue}const w=t&&t._propertyBindings[m].binding.parsedPath;E=new NS(Bn.create(n,y,w),v.ValueTypeName,v.getValueSize()),++E.referenceCount,this._addInactiveBinding(E,u,y),o[m]=E}l[m].resultBuffer=E.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,n)}const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const i=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const l=o.knownActions;e._byClipCacheIndex=l.length,l.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,l=o[s],u=l.knownActions,h=u[u.length-1],p=e._byClipCacheIndex;h._byClipCacheIndex=p,u[p]=h,u.pop(),e._byClipCacheIndex=null;const m=l.actionByRoot,v=(e._localRoot||this._root).uuid;delete m[v],u.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const s=t[n];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_addInactiveBinding(e,t,n){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[n]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,i=n.rootNode.uuid,s=n.path,o=this._bindingsByRootAndName,l=o[i],u=t[t.length-1],h=e._cacheIndex;u._cacheIndex=h,t[h]=u,t.pop(),delete l[s],Object.keys(l).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=n,t[n]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new qA(new Float32Array(2),new Float32Array(2),1,SN),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=n,t[n]=s}clipAction(e,t,n){const i=t||this._root,s=i.uuid;let o=typeof e=="string"?Mh.findByName(i,e):e;const l=o!==null?o.uuid:e,u=this._actionsByClip[l];let h=null;if(n===void 0&&(o!==null?n=o.blendMode:n=Lg),u!==void 0){const m=u.actionByRoot[s];if(m!==void 0&&m.blendMode===n)return m;h=u.knownActions[0],o===null&&(o=h._clip)}if(o===null)return null;const p=new FS(this,o,t,n);return this._bindAction(p,h),this._addInactiveAction(p,l,s),p}existingAction(e,t){const n=t||this._root,i=n.uuid,s=typeof e=="string"?Mh.findByName(n,e):e,o=s?s.uuid:e,l=this._actionsByClip[o];return l!==void 0&&l.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let h=0;h!==n;++h)t[h]._update(i,e,s,o);const l=this._bindings,u=this._nActiveBindings;for(let h=0;h!==u;++h)l[h].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,i=this._actionsByClip,s=i[n];if(s!==void 0){const o=s.knownActions;for(let l=0,u=o.length;l!==u;++l){const h=o[l];this._deactivateAction(h);const p=h._cacheIndex,m=t[t.length-1];h._cacheIndex=null,h._byClipCacheIndex=null,m._cacheIndex=p,t[p]=m,t.pop(),this._removeInactiveBindingsForAction(h)}delete i[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const o in n){const l=n[o].actionByRoot,u=l[t];u!==void 0&&(this._deactivateAction(u),this._removeInactiveAction(u))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const o in s){const l=s[o];l.restoreOriginalState(),this._removeInactiveBinding(l)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class aE{constructor(e){this.value=e}clone(){return new aE(this.value.clone===void 0?this.value:this.value.clone())}}let bN=0;class MN extends Za{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:bN++}),this.name="",this.usage=Sp,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,i=t.length;n<i;n++)this.uniforms.push(t[n].clone());return this}clone(){return new this.constructor().copy(this)}}class TN extends Wp{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class RN{constructor(e,t,n,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class lE{constructor(e,t,n=0,i=1/0){this.ray=new Du(e,t),this.near=n,this.far=i,this.camera=null,this.layers=new Eu,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,n=[]){return eA(e,this,n,t),n.sort(eC),n}intersectObjects(e,t=!0,n=[]){for(let i=0,s=e.length;i<s;i++)eA(e[i],this,n,t);return n.sort(eC),n}}function eC(r,e){return r.distance-e.distance}function eA(r,e,t,n){if(r.layers.test(e.layers)&&r.raycast(e,t),n===!0){const i=r.children;for(let s=0,o=i.length;s<o;s++)eA(i[s],e,t,!0)}}class tA{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(yr(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class DN{constructor(e=1,t=0,n=0){return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}const tC=new Ue;class PN{constructor(e=new Ue(1/0,1/0),t=new Ue(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=tC.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,tC).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const nC=new X,H2=new X;class LN{constructor(e=new X,t=new X){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){nC.subVectors(e,this.start),H2.subVectors(this.end,this.start);const n=H2.dot(H2);let s=H2.dot(nC)/n;return t&&(s=yr(s,0,1)),s}closestPointToPoint(e,t,n){const i=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const rC=new X;class IN extends bn{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new cn,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,l=1,u=32;o<u;o++,l++){const h=o/u*Math.PI*2,p=l/u*Math.PI*2;i.push(Math.cos(h),Math.sin(h),1,Math.cos(p),Math.sin(p),1)}n.setAttribute("position",new Dt(i,3));const s=new Ti({fog:!1,toneMapped:!1});this.cone=new Mo(n,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),rC.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(rC),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Ol=new X,z2=new $t,Tv=new $t;class NN extends Mo{constructor(e){const t=kS(e),n=new cn,i=[],s=[],o=new ht(0,0,1),l=new ht(0,1,0);for(let h=0;h<t.length;h++){const p=t[h];p.parent&&p.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(l.r,l.g,l.b))}n.setAttribute("position",new Dt(i,3)),n.setAttribute("color",new Dt(s,3));const u=new Ti({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,u),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,i=n.getAttribute("position");Tv.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const l=t[s];l.parent&&l.parent.isBone&&(z2.multiplyMatrices(Tv,l.matrixWorld),Ol.setFromMatrixPosition(z2),i.setXYZ(o,Ol.x,Ol.y,Ol.z),z2.multiplyMatrices(Tv,l.parent.matrixWorld),Ol.setFromMatrixPosition(z2),i.setXYZ(o+1,Ol.x,Ol.y,Ol.z),o+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function kS(r){const e=[];r.isBone===!0&&e.push(r);for(let t=0;t<r.children.length;t++)e.push.apply(e,kS(r.children[t]));return e}class FN extends Nr{constructor(e,t,n){const i=new Yp(t,4,2),s=new ws({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const kN=new X,iC=new ht,sC=new ht;class ON extends bn{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const i=new qp(t);i.rotateY(Math.PI*.5),this.material=new ws({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new Dn(o,3)),this.add(new Nr(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");iC.copy(this.light.color),sC.copy(this.light.groundColor);for(let n=0,i=t.count;n<i;n++){const s=n<i/2?iC:sC;t.setXYZ(n,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(kN.setFromMatrixPosition(this.light.matrixWorld).negate())}}class UN extends Mo{constructor(e=10,t=10,n=4473924,i=8947848){n=new ht(n),i=new ht(i);const s=t/2,o=e/t,l=e/2,u=[],h=[];for(let v=0,y=0,E=-l;v<=t;v++,E+=o){u.push(-l,0,E,l,0,E),u.push(E,0,-l,E,0,l);const w=v===s?n:i;w.toArray(h,y),y+=3,w.toArray(h,y),y+=3,w.toArray(h,y),y+=3,w.toArray(h,y),y+=3}const p=new cn;p.setAttribute("position",new Dt(u,3)),p.setAttribute("color",new Dt(h,3));const m=new Ti({vertexColors:!0,toneMapped:!1});super(p,m),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class HN extends Mo{constructor(e=10,t=16,n=8,i=64,s=4473924,o=8947848){s=new ht(s),o=new ht(o);const l=[],u=[];if(t>1)for(let m=0;m<t;m++){const v=m/t*(Math.PI*2),y=Math.sin(v)*e,E=Math.cos(v)*e;l.push(0,0,0),l.push(y,0,E);const w=m&1?s:o;u.push(w.r,w.g,w.b),u.push(w.r,w.g,w.b)}for(let m=0;m<n;m++){const v=m&1?s:o,y=e-e/n*m;for(let E=0;E<i;E++){let w=E/i*(Math.PI*2),C=Math.sin(w)*y,x=Math.cos(w)*y;l.push(C,0,x),u.push(v.r,v.g,v.b),w=(E+1)/i*(Math.PI*2),C=Math.sin(w)*y,x=Math.cos(w)*y,l.push(C,0,x),u.push(v.r,v.g,v.b)}}const h=new cn;h.setAttribute("position",new Dt(l,3)),h.setAttribute("color",new Dt(u,3));const p=new Ti({vertexColors:!0,toneMapped:!1});super(h,p),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const oC=new X,G2=new X,aC=new X;class zN extends bn{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new cn;i.setAttribute("position",new Dt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Ti({fog:!1,toneMapped:!1});this.lightPlane=new $a(i,s),this.add(this.lightPlane),i=new cn,i.setAttribute("position",new Dt([0,0,0,0,0,1],3)),this.targetLine=new $a(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),oC.setFromMatrixPosition(this.light.matrixWorld),G2.setFromMatrixPosition(this.light.target.matrixWorld),aC.subVectors(G2,oC),this.lightPlane.lookAt(G2),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(G2),this.targetLine.scale.z=aC.length()}}const j2=new X,gr=new jp;class GN extends Mo{constructor(e){const t=new cn,n=new Ti({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};l("n1","n2"),l("n2","n4"),l("n4","n3"),l("n3","n1"),l("f1","f2"),l("f2","f4"),l("f4","f3"),l("f3","f1"),l("n1","f1"),l("n2","f2"),l("n3","f3"),l("n4","f4"),l("p","n1"),l("p","n2"),l("p","n3"),l("p","n4"),l("u1","u2"),l("u2","u3"),l("u3","u1"),l("c","t"),l("p","c"),l("cn1","cn2"),l("cn3","cn4"),l("cf1","cf2"),l("cf3","cf4");function l(E,w){u(E),u(w)}function u(E){i.push(0,0,0),s.push(0,0,0),o[E]===void 0&&(o[E]=[]),o[E].push(i.length/3-1)}t.setAttribute("position",new Dt(i,3)),t.setAttribute("color",new Dt(s,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const h=new ht(16755200),p=new ht(16711680),m=new ht(43775),v=new ht(16777215),y=new ht(3355443);this.setColors(h,p,m,v,y)}setColors(e,t,n,i,s){const l=this.geometry.getAttribute("color");l.setXYZ(0,e.r,e.g,e.b),l.setXYZ(1,e.r,e.g,e.b),l.setXYZ(2,e.r,e.g,e.b),l.setXYZ(3,e.r,e.g,e.b),l.setXYZ(4,e.r,e.g,e.b),l.setXYZ(5,e.r,e.g,e.b),l.setXYZ(6,e.r,e.g,e.b),l.setXYZ(7,e.r,e.g,e.b),l.setXYZ(8,e.r,e.g,e.b),l.setXYZ(9,e.r,e.g,e.b),l.setXYZ(10,e.r,e.g,e.b),l.setXYZ(11,e.r,e.g,e.b),l.setXYZ(12,e.r,e.g,e.b),l.setXYZ(13,e.r,e.g,e.b),l.setXYZ(14,e.r,e.g,e.b),l.setXYZ(15,e.r,e.g,e.b),l.setXYZ(16,e.r,e.g,e.b),l.setXYZ(17,e.r,e.g,e.b),l.setXYZ(18,e.r,e.g,e.b),l.setXYZ(19,e.r,e.g,e.b),l.setXYZ(20,e.r,e.g,e.b),l.setXYZ(21,e.r,e.g,e.b),l.setXYZ(22,e.r,e.g,e.b),l.setXYZ(23,e.r,e.g,e.b),l.setXYZ(24,t.r,t.g,t.b),l.setXYZ(25,t.r,t.g,t.b),l.setXYZ(26,t.r,t.g,t.b),l.setXYZ(27,t.r,t.g,t.b),l.setXYZ(28,t.r,t.g,t.b),l.setXYZ(29,t.r,t.g,t.b),l.setXYZ(30,t.r,t.g,t.b),l.setXYZ(31,t.r,t.g,t.b),l.setXYZ(32,n.r,n.g,n.b),l.setXYZ(33,n.r,n.g,n.b),l.setXYZ(34,n.r,n.g,n.b),l.setXYZ(35,n.r,n.g,n.b),l.setXYZ(36,n.r,n.g,n.b),l.setXYZ(37,n.r,n.g,n.b),l.setXYZ(38,i.r,i.g,i.b),l.setXYZ(39,i.r,i.g,i.b),l.setXYZ(40,s.r,s.g,s.b),l.setXYZ(41,s.r,s.g,s.b),l.setXYZ(42,s.r,s.g,s.b),l.setXYZ(43,s.r,s.g,s.b),l.setXYZ(44,s.r,s.g,s.b),l.setXYZ(45,s.r,s.g,s.b),l.setXYZ(46,s.r,s.g,s.b),l.setXYZ(47,s.r,s.g,s.b),l.setXYZ(48,s.r,s.g,s.b),l.setXYZ(49,s.r,s.g,s.b),l.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,n=1,i=1;gr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),wr("c",t,e,gr,0,0,-1),wr("t",t,e,gr,0,0,1),wr("n1",t,e,gr,-n,-i,-1),wr("n2",t,e,gr,n,-i,-1),wr("n3",t,e,gr,-n,i,-1),wr("n4",t,e,gr,n,i,-1),wr("f1",t,e,gr,-n,-i,1),wr("f2",t,e,gr,n,-i,1),wr("f3",t,e,gr,-n,i,1),wr("f4",t,e,gr,n,i,1),wr("u1",t,e,gr,n*.7,i*1.1,-1),wr("u2",t,e,gr,-n*.7,i*1.1,-1),wr("u3",t,e,gr,0,i*2,-1),wr("cf1",t,e,gr,-n,0,1),wr("cf2",t,e,gr,n,0,1),wr("cf3",t,e,gr,0,-i,1),wr("cf4",t,e,gr,0,i,1),wr("cn1",t,e,gr,-n,0,-1),wr("cn2",t,e,gr,n,0,-1),wr("cn3",t,e,gr,0,-i,-1),wr("cn4",t,e,gr,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function wr(r,e,t,n,i,s,o){j2.set(i,s,o).unproject(n);const l=e[r];if(l!==void 0){const u=t.getAttribute("position");for(let h=0,p=l.length;h<p;h++)u.setXYZ(l[h],j2.x,j2.y,j2.z)}}const V2=new Ms;class jN extends Mo{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),s=new cn;s.setIndex(new Dn(n,1)),s.setAttribute("position",new Dn(i,3)),super(s,new Ti({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&V2.setFromObject(this.object),V2.isEmpty())return;const t=V2.min,n=V2.max,i=this.geometry.attributes.position,s=i.array;s[0]=n.x,s[1]=n.y,s[2]=n.z,s[3]=t.x,s[4]=n.y,s[5]=n.z,s[6]=t.x,s[7]=t.y,s[8]=n.z,s[9]=n.x,s[10]=t.y,s[11]=n.z,s[12]=n.x,s[13]=n.y,s[14]=t.z,s[15]=t.x,s[16]=n.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=n.x,s[22]=t.y,s[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class VN extends Mo{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new cn;s.setIndex(new Dn(n,1)),s.setAttribute("position",new Dt(i,3)),super(s,new Ti({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class WN extends $a{constructor(e,t=1,n=16776960){const i=n,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new cn;o.setAttribute("position",new Dt(s,3)),o.computeBoundingSphere(),super(o,new Ti({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const l=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],u=new cn;u.setAttribute("position",new Dt(l,3)),u.computeBoundingSphere(),this.add(new Nr(u,new ws({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const lC=new X;let W2,Rv;class JN extends bn{constructor(e=new X(0,0,1),t=new X(0,0,0),n=1,i=16776960,s=n*.2,o=s*.2){super(),this.type="ArrowHelper",W2===void 0&&(W2=new cn,W2.setAttribute("position",new Dt([0,0,0,0,1,0],3)),Rv=new Fh(0,.5,1,5,1),Rv.translate(0,-.5,0)),this.position.copy(t),this.line=new $a(W2,new Ti({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Nr(Rv,new ws({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{lC.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(lC,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class XN extends Mo{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new cn;i.setAttribute("position",new Dt(t,3)),i.setAttribute("color",new Dt(n,3));const s=new Ti({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,n){const i=new ht,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(n),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class KN{constructor(){this.type="ShapePath",this.color=new ht,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Tp,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this}bezierCurveTo(e,t,n,i,s,o){return this.currentPath.bezierCurveTo(e,t,n,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(x){const M=[];for(let S=0,R=x.length;S<R;S++){const N=x[S],I=new xu;I.curves=N.curves,M.push(I)}return M}function n(x,M){const S=M.length;let R=!1;for(let N=S-1,I=0;I<S;N=I++){let O=M[N],j=M[I],F=j.x-O.x,H=j.y-O.y;if(Math.abs(H)>Number.EPSILON){if(H<0&&(O=M[I],F=-F,j=M[N],H=-H),x.y<O.y||x.y>j.y)continue;if(x.y===O.y){if(x.x===O.x)return!0}else{const ee=H*(x.x-O.x)-F*(x.y-O.y);if(ee===0)return!0;if(ee<0)continue;R=!R}}else{if(x.y!==O.y)continue;if(j.x<=x.x&&x.x<=O.x||O.x<=x.x&&x.x<=j.x)return!0}}return R}const i=Ko.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,l,u;const h=[];if(s.length===1)return l=s[0],u=new xu,u.curves=l.curves,h.push(u),h;let p=!i(s[0].getPoints());p=e?!p:p;const m=[],v=[];let y=[],E=0,w;v[E]=void 0,y[E]=[];for(let x=0,M=s.length;x<M;x++)l=s[x],w=l.getPoints(),o=i(w),o=e?!o:o,o?(!p&&v[E]&&E++,v[E]={s:new xu,p:w},v[E].s.curves=l.curves,p&&E++,y[E]=[]):y[E].push({h:l,p:w[0]});if(!v[0])return t(s);if(v.length>1){let x=!1,M=0;for(let S=0,R=v.length;S<R;S++)m[S]=[];for(let S=0,R=v.length;S<R;S++){const N=y[S];for(let I=0;I<N.length;I++){const O=N[I];let j=!0;for(let F=0;F<v.length;F++)n(O.p,v[F].p)&&(S!==F&&M++,j?(j=!1,m[F].push(O)):x=!0);j&&m[S].push(O)}}M>0&&x===!1&&(y=m)}let C;for(let x=0,M=v.length;x<M;x++){u=v[x].s,h.push(u),C=y[x];for(let S=0,R=C.length;S<R;S++)u.holes.push(C[S].h)}return h}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Ru}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Ru);const qN=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:mA,AddEquation:Vl,AddOperation:a1,AdditiveAnimationBlendMode:CA,AdditiveBlending:py,AlphaFormat:m1,AlwaysCompare:N1,AlwaysDepth:e1,AlwaysStencilFunc:Wy,AmbientLight:bS,AnimationAction:FS,AnimationClip:Mh,AnimationLoader:tN,AnimationMixer:BN,AnimationObjectGroup:wN,AnimationUtils:$I,ArcCurve:tS,ArrayCamera:q1,ArrowHelper:JN,AttachedBindMode:Ay,Audio:IS,AudioAnalyser:pN,AudioContext:rE,AudioListener:dN,AudioLoader:lN,AxesHelper:XN,BackSide:Vi,BasicDepthPacking:S1,BasicShadowMap:Fw,Bone:zg,BooleanKeyframeTrack:Lu,Box2:PN,Box3:Ms,Box3Helper:VN,BoxGeometry:Pu,BoxHelper:jN,BufferAttribute:Dn,BufferGeometry:cn,BufferGeometryLoader:PS,ByteType:f1,Cache:Mu,Camera:jp,CameraHelper:GN,CanvasTexture:xI,CapsuleGeometry:Wg,CatmullRomCurve3:nS,CineonToneMapping:u1,CircleGeometry:Jg,ClampToEdgeWrapping:gi,Clock:iE,Color:ht,ColorKeyframeTrack:YA,ColorManagement:On,CompressedArrayTexture:AI,CompressedCubeTexture:EI,CompressedTexture:jg,CompressedTextureLoader:nN,ConeGeometry:Xg,ConstantAlphaFactor:$w,ConstantColorFactor:qw,CubeCamera:G1,CubeReflectionMapping:$o,CubeRefractionMapping:Yl,CubeTexture:Vp,CubeTextureLoader:wS,CubeUVReflectionMapping:Lh,CubicBezierCurve:GA,CubicBezierCurve3:rS,CubicInterpolant:ES,CullFaceBack:fy,CullFaceFront:Nw,CullFaceFrontBack:_D,CullFaceNone:Iw,Curve:To,CurvePath:sS,CustomBlending:kw,CustomToneMapping:d1,CylinderGeometry:Fh,Cylindrical:DN,Data3DTexture:MA,DataArrayTexture:Ng,DataTexture:xh,DataTextureLoader:QA,DataUtils:pu,DecrementStencilOp:DD,DecrementWrapStencilOp:LD,DefaultLoadingManager:CS,DepthFormat:Xl,DepthStencilFormat:_u,DepthTexture:Y1,DetachedBindMode:h1,DirectionalLight:nE,DirectionalLightHelper:zN,DiscreteInterpolant:xS,DisplayP3ColorSpace:Ig,DodecahedronGeometry:Kg,DoubleSide:Vs,DstAlphaFactor:Vw,DstColorFactor:Jw,DynamicCopyUsage:KD,DynamicDrawUsage:GD,DynamicReadUsage:WD,EdgesGeometry:oS,EllipseCurve:Vg,EqualCompare:R1,EqualDepth:n1,EqualStencilFunc:kD,EquirectangularReflectionMapping:Ch,EquirectangularRefractionMapping:Ap,Euler:Gp,EventDispatcher:Za,ExtrudeGeometry:Yg,FileLoader:bs,Float16BufferAttribute:P8,Float32BufferAttribute:Dt,Float64BufferAttribute:L8,FloatType:bi,Fog:Hg,FogExp2:Ug,FramebufferTexture:yI,FrontSide:Yo,Frustum:Fg,GLBufferAttribute:RN,GLSL1:YD,GLSL3:Jy,GreaterCompare:P1,GreaterDepth:i1,GreaterEqualCompare:I1,GreaterEqualDepth:r1,GreaterEqualStencilFunc:zD,GreaterStencilFunc:UD,GridHelper:UN,Group:Wa,HalfFloatType:Mi,HemisphereLight:BS,HemisphereLightHelper:ON,IcosahedronGeometry:Kp,ImageBitmapLoader:LS,ImageLoader:Lp,ImageUtils:bA,IncrementStencilOp:RD,IncrementWrapStencilOp:PD,InstancedBufferAttribute:wu,InstancedBufferGeometry:DS,InstancedInterleavedBuffer:TN,InstancedMesh:OA,Int16BufferAttribute:R8,Int32BufferAttribute:D8,Int8BufferAttribute:b8,IntType:gA,InterleavedBuffer:Wp,InterleavedBufferAttribute:Ql,Interpolant:kh,InterpolateDiscrete:Sh,InterpolateLinear:Cu,InterpolateSmooth:og,InvertStencilOp:ID,KeepStencilOp:su,KeyframeTrack:Ro,LOD:eS,LatheGeometry:Xp,Layers:Eu,LessCompare:T1,LessDepth:t1,LessEqualCompare:D1,LessEqualDepth:yp,LessEqualStencilFunc:OD,LessStencilFunc:FD,Light:ic,LightProbe:RS,Line:$a,Line3:LN,LineBasicMaterial:Ti,LineCurve:jA,LineCurve3:iS,LineDashedMaterial:vS,LineLoop:UA,LineSegments:Mo,LinearDisplayP3ColorSpace:zp,LinearEncoding:SA,LinearFilter:Jn,LinearInterpolant:qA,LinearMipMapLinearFilter:bD,LinearMipMapNearestFilter:BD,LinearMipmapLinearFilter:Qo,LinearMipmapNearestFilter:Dg,LinearSRGBColorSpace:Zo,LinearToneMapping:l1,LinearTransfer:_p,Loader:Ri,LoaderUtils:ql,LoadingManager:$A,LoopOnce:x1,LoopPingPong:C1,LoopRepeat:_1,LuminanceAlphaFormat:v1,LuminanceFormat:g1,MOUSE:ru,Material:Fr,MaterialLoader:r0,MathUtils:Wo,Matrix3:mn,Matrix4:$t,MaxEquation:yy,Mesh:Nr,MeshBasicMaterial:ws,MeshDepthMaterial:Og,MeshDistanceMaterial:IA,MeshLambertMaterial:XA,MeshMatcapMaterial:gS,MeshNormalMaterial:mS,MeshPhongMaterial:fS,MeshPhysicalMaterial:Xs,MeshStandardMaterial:$p,MeshToonMaterial:pS,MinEquation:vy,MirroredRepeatWrapping:wh,MixOperation:o1,MultiplyBlending:gy,MultiplyOperation:Hp,NearestFilter:or,NearestMipMapLinearFilter:SD,NearestMipMapNearestFilter:wD,NearestMipmapLinearFilter:Ah,NearestMipmapNearestFilter:Ep,NeverCompare:M1,NeverDepth:Zw,NeverStencilFunc:ND,NoBlending:Xa,NoColorSpace:Cs,NoToneMapping:Jo,NormalAnimationBlendMode:Lg,NormalBlending:yu,NotEqualCompare:L1,NotEqualDepth:s1,NotEqualStencilFunc:HD,NumberKeyframeTrack:Bu,Object3D:bn,ObjectLoader:oN,ObjectSpaceNormalMap:b1,OctahedronGeometry:qp,OneFactor:zw,OneMinusConstantAlphaFactor:Qw,OneMinusConstantColorFactor:Yw,OneMinusDstAlphaFactor:Ww,OneMinusDstColorFactor:Xw,OneMinusSrcAlphaFactor:mg,OneMinusSrcColorFactor:jw,OrthographicCamera:Ka,P3Primaries:wp,PCFShadowMap:Tg,PCFSoftShadowMap:rp,PMREMGenerator:Ky,Path:Tp,PerspectiveCamera:Ar,Plane:Ga,PlaneGeometry:Ih,PlaneHelper:WN,PointLight:tE,PointLightHelper:FN,Points:HA,PointsMaterial:Gg,PolarGridHelper:HN,PolyhedronGeometry:rc,PositionalAudio:fN,PropertyBinding:Bn,PropertyMixer:NS,QuadraticBezierCurve:VA,QuadraticBezierCurve3:WA,Quaternion:ni,QuaternionKeyframeTrack:Zl,QuaternionLinearInterpolant:_S,RED_GREEN_RGTC2_Format:jy,RED_RGTC1_Format:E1,REVISION:Ru,RGBADepthPacking:B1,RGBAFormat:ji,RGBAIntegerFormat:_A,RGBA_ASTC_10x10_Format:ky,RGBA_ASTC_10x5_Format:Iy,RGBA_ASTC_10x6_Format:Ny,RGBA_ASTC_10x8_Format:Fy,RGBA_ASTC_12x10_Format:Oy,RGBA_ASTC_12x12_Format:Uy,RGBA_ASTC_4x4_Format:By,RGBA_ASTC_5x4_Format:by,RGBA_ASTC_5x5_Format:My,RGBA_ASTC_6x5_Format:Ty,RGBA_ASTC_6x6_Format:Ry,RGBA_ASTC_8x5_Format:Dy,RGBA_ASTC_8x6_Format:Py,RGBA_ASTC_8x8_Format:Ly,RGBA_BPTC_Format:sg,RGBA_ETC2_EAC_Format:Sy,RGBA_PVRTC_2BPPV1_Format:Cy,RGBA_PVRTC_4BPPV1_Format:_y,RGBA_S3TC_DXT1_Format:ng,RGBA_S3TC_DXT3_Format:rg,RGBA_S3TC_DXT5_Format:ig,RGB_BPTC_SIGNED_Format:Hy,RGB_BPTC_UNSIGNED_Format:zy,RGB_ETC1_Format:A1,RGB_ETC2_Format:wy,RGB_PVRTC_2BPPV1_Format:xy,RGB_PVRTC_4BPPV1_Format:Ey,RGB_S3TC_DXT1_Format:tg,RGFormat:y1,RGIntegerFormat:xA,RawShaderMaterial:hS,Ray:Du,Raycaster:lE,Rec709Primaries:Cp,RectAreaLight:MS,RedFormat:AA,RedIntegerFormat:EA,ReinhardToneMapping:c1,RenderTarget:U1,RepeatWrapping:$l,ReplaceStencilOp:TD,ReverseSubtractEquation:Uw,RingGeometry:$g,SIGNED_RED_GREEN_RGTC2_Format:Vy,SIGNED_RED_RGTC1_Format:Gy,SRGBColorSpace:Xr,SRGBTransfer:$n,Scene:Mp,ShaderChunk:hn,ShaderLib:bo,ShaderMaterial:as,ShadowMaterial:dS,Shape:xu,ShapeGeometry:Qg,ShapePath:KN,ShapeUtils:Ko,ShortType:p1,Skeleton:Jp,SkeletonHelper:NN,SkinnedMesh:kA,Source:fu,Sphere:Ts,SphereGeometry:Yp,Spherical:tA,SphericalHarmonics3:TS,SplineCurve:JA,SpotLight:eE,SpotLightHelper:IN,Sprite:Z1,SpriteMaterial:FA,SrcAlphaFactor:pg,SrcAlphaSaturateFactor:Kw,SrcColorFactor:Gw,StaticCopyUsage:XD,StaticDrawUsage:Sp,StaticReadUsage:VD,StereoCamera:cN,StreamCopyUsage:qD,StreamDrawUsage:jD,StreamReadUsage:JD,StringKeyframeTrack:Iu,SubtractEquation:Ow,SubtractiveBlending:my,TOUCH:iu,TangentSpaceNormalMap:nc,TetrahedronGeometry:Zg,Texture:ar,TextureLoader:SS,TorusGeometry:e0,TorusKnotGeometry:t0,Triangle:ss,TriangleFanDrawMode:gg,TriangleStripDrawMode:wA,TrianglesDrawMode:w1,TubeGeometry:n0,TwoPassDoubleSide:CD,UVMapping:Rg,Uint16BufferAttribute:TA,Uint32BufferAttribute:RA,Uint8BufferAttribute:M8,Uint8ClampedBufferAttribute:T8,Uniform:aE,UniformsGroup:MN,UniformsLib:pt,UniformsUtils:DA,UnsignedByteType:Xo,UnsignedInt248Type:Jl,UnsignedIntType:Va,UnsignedShort4444Type:vA,UnsignedShort5551Type:yA,UnsignedShortType:Pg,VSMShadowMap:So,Vector2:Ue,Vector3:X,Vector4:Un,VectorKeyframeTrack:bu,VideoTexture:vI,WebGL1Renderer:$1,WebGL3DRenderTarget:m8,WebGLArrayRenderTarget:p8,WebGLCoordinateSystem:Vo,WebGLCubeRenderTarget:PA,WebGLMultipleRenderTargets:g8,WebGLRenderTarget:Wi,WebGLRenderer:NA,WebGLUtils:K1,WebGPUCoordinateSystem:Bp,WireframeGeometry:uS,WrapAroundEnding:xp,ZeroCurvatureEnding:du,ZeroFactor:Hw,ZeroSlopeEnding:hu,ZeroStencilOp:MD,_SRGBAFormat:vg,createCanvasElement:O1,sRGBEncoding:Kl},Symbol.toStringTag,{value:"Module"}));var Dv={exports:{}},Ul={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cC;function YN(){return cC||(cC=1,Ul.ConcurrentRoot=1,Ul.ContinuousEventPriority=4,Ul.DefaultEventPriority=16,Ul.DiscreteEventPriority=1,Ul.IdleEventPriority=536870912,Ul.LegacyRoot=0),Ul}var uC;function $N(){return uC||(uC=1,Dv.exports=YN()),Dv.exports}var vh=$N();function QN(r){let e;const t=new Set,n=(h,p)=>{const m=typeof h=="function"?h(e):h;if(m!==e){const v=e;e=p?m:Object.assign({},e,m),t.forEach(y=>y(e,v))}},i=()=>e,s=(h,p=i,m=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let v=p(e);function y(){const E=p(e);if(!m(v,E)){const w=v;h(v=E,w)}}return t.add(y),()=>t.delete(y)},u={setState:n,getState:i,subscribe:(h,p,m)=>p||m?s(h,p,m):(t.add(h),()=>t.delete(h)),destroy:()=>t.clear()};return e=r(n,i,u),u}const ZN=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),dC=ZN?V.useEffect:V.useLayoutEffect;function OS(r){const e=typeof r=="function"?QN(r):r,t=(n=e.getState,i=Object.is)=>{const[,s]=V.useReducer(C=>C+1,0),o=e.getState(),l=V.useRef(o),u=V.useRef(n),h=V.useRef(i),p=V.useRef(!1),m=V.useRef();m.current===void 0&&(m.current=n(o));let v,y=!1;(l.current!==o||u.current!==n||h.current!==i||p.current)&&(v=n(o),y=!i(m.current,v)),dC(()=>{y&&(m.current=v),l.current=o,u.current=n,h.current=i,p.current=!1});const E=V.useRef(o);dC(()=>{const C=()=>{try{const M=e.getState(),S=u.current(M);h.current(m.current,S)||(l.current=M,m.current=S,s())}catch{p.current=!0,s()}},x=e.subscribe(C);return e.getState()!==E.current&&C(),x},[]);const w=y?v:m.current;return V.useDebugValue(w),w};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const n=[t,e];return{next(){const i=n.length<=0;return{value:n.shift(),done:i}}}},t}var Pv={exports:{}},Lv={exports:{}},Iv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hC;function e4(){return hC||(hC=1,(function(r){function e(te,ce){var ne=te.length;te.push(ce);e:for(;0<ne;){var z=ne-1>>>1,K=te[z];if(0<i(K,ce))te[z]=ce,te[ne]=K,ne=z;else break e}}function t(te){return te.length===0?null:te[0]}function n(te){if(te.length===0)return null;var ce=te[0],ne=te.pop();if(ne!==ce){te[0]=ne;e:for(var z=0,K=te.length,xe=K>>>1;z<xe;){var De=2*(z+1)-1,Ie=te[De],Oe=De+1,tt=te[Oe];if(0>i(Ie,ne))Oe<K&&0>i(tt,Ie)?(te[z]=tt,te[Oe]=ne,z=Oe):(te[z]=Ie,te[De]=ne,z=De);else if(Oe<K&&0>i(tt,ne))te[z]=tt,te[Oe]=ne,z=Oe;else break e}}return ce}function i(te,ce){var ne=te.sortIndex-ce.sortIndex;return ne!==0?ne:te.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();r.unstable_now=function(){return o.now()-l}}var u=[],h=[],p=1,m=null,v=3,y=!1,E=!1,w=!1,C=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(te){for(var ce=t(h);ce!==null;){if(ce.callback===null)n(h);else if(ce.startTime<=te)n(h),ce.sortIndex=ce.expirationTime,e(u,ce);else break;ce=t(h)}}function R(te){if(w=!1,S(te),!E)if(t(u)!==null)E=!0,pe(N);else{var ce=t(h);ce!==null&&Ae(R,ce.startTime-te)}}function N(te,ce){E=!1,w&&(w=!1,x(j),j=-1),y=!0;var ne=v;try{for(S(ce),m=t(u);m!==null&&(!(m.expirationTime>ce)||te&&!ee());){var z=m.callback;if(typeof z=="function"){m.callback=null,v=m.priorityLevel;var K=z(m.expirationTime<=ce);ce=r.unstable_now(),typeof K=="function"?m.callback=K:m===t(u)&&n(u),S(ce)}else n(u);m=t(u)}if(m!==null)var xe=!0;else{var De=t(h);De!==null&&Ae(R,De.startTime-ce),xe=!1}return xe}finally{m=null,v=ne,y=!1}}var I=!1,O=null,j=-1,F=5,H=-1;function ee(){return!(r.unstable_now()-H<F)}function de(){if(O!==null){var te=r.unstable_now();H=te;var ce=!0;try{ce=O(!0,te)}finally{ce?ve():(I=!1,O=null)}}else I=!1}var ve;if(typeof M=="function")ve=function(){M(de)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,me=Y.port2;Y.port1.onmessage=de,ve=function(){me.postMessage(null)}}else ve=function(){C(de,0)};function pe(te){O=te,I||(I=!0,ve())}function Ae(te,ce){j=C(function(){te(r.unstable_now())},ce)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(te){te.callback=null},r.unstable_continueExecution=function(){E||y||(E=!0,pe(N))},r.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<te?Math.floor(1e3/te):5},r.unstable_getCurrentPriorityLevel=function(){return v},r.unstable_getFirstCallbackNode=function(){return t(u)},r.unstable_next=function(te){switch(v){case 1:case 2:case 3:var ce=3;break;default:ce=v}var ne=v;v=ce;try{return te()}finally{v=ne}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(te,ce){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var ne=v;v=te;try{return ce()}finally{v=ne}},r.unstable_scheduleCallback=function(te,ce,ne){var z=r.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?z+ne:z):ne=z,te){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=ne+K,te={id:p++,callback:ce,priorityLevel:te,startTime:ne,expirationTime:K,sortIndex:-1},ne>z?(te.sortIndex=ne,e(h,te),t(u)===null&&te===t(h)&&(w?(x(j),j=-1):w=!0,Ae(R,ne-z))):(te.sortIndex=K,e(u,te),E||y||(E=!0,pe(N))),te},r.unstable_shouldYield=ee,r.unstable_wrapCallback=function(te){var ce=v;return function(){var ne=v;v=ce;try{return te.apply(this,arguments)}finally{v=ne}}}})(Iv)),Iv}var fC;function US(){return fC||(fC=1,Lv.exports=e4()),Lv.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nv,pC;function t4(){return pC||(pC=1,Nv=function(e){var t={},n=xg(),i=US(),s=Object.assign;function o(d){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+d,A=1;A<arguments.length;A++)f+="&args[]="+encodeURIComponent(arguments[A]);return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,u=Symbol.for("react.element"),h=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),E=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),R=Symbol.for("react.offscreen"),N=Symbol.iterator;function I(d){return d===null||typeof d!="object"?null:(d=N&&d[N]||d["@@iterator"],typeof d=="function"?d:null)}function O(d){if(d==null)return null;if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case p:return"Fragment";case h:return"Portal";case v:return"Profiler";case m:return"StrictMode";case C:return"Suspense";case x:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case E:return(d.displayName||"Context")+".Consumer";case y:return(d._context.displayName||"Context")+".Provider";case w:var f=d.render;return d=d.displayName,d||(d=f.displayName||f.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case M:return f=d.displayName||null,f!==null?f:O(d.type)||"Memo";case S:f=d._payload,d=d._init;try{return O(d(f))}catch{}}return null}function j(d){var f=d.type;switch(d.tag){case 24:return"Cache";case 9:return(f.displayName||"Context")+".Consumer";case 10:return(f._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return d=f.render,d=d.displayName||d.name||"",f.displayName||(d!==""?"ForwardRef("+d+")":"ForwardRef");case 7:return"Fragment";case 5:return f;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return O(f);case 8:return f===m?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f}return null}function F(d){var f=d,A=d;if(d.alternate)for(;f.return;)f=f.return;else{d=f;do f=d,(f.flags&4098)!==0&&(A=f.return),d=f.return;while(d)}return f.tag===3?A:null}function H(d){if(F(d)!==d)throw Error(o(188))}function ee(d){var f=d.alternate;if(!f){if(f=F(d),f===null)throw Error(o(188));return f!==d?null:d}for(var A=d,B=f;;){var T=A.return;if(T===null)break;var L=T.alternate;if(L===null){if(B=T.return,B!==null){A=B;continue}break}if(T.child===L.child){for(L=T.child;L;){if(L===A)return H(T),d;if(L===B)return H(T),f;L=L.sibling}throw Error(o(188))}if(A.return!==B.return)A=T,B=L;else{for(var Q=!1,ge=T.child;ge;){if(ge===A){Q=!0,A=T,B=L;break}if(ge===B){Q=!0,B=T,A=L;break}ge=ge.sibling}if(!Q){for(ge=L.child;ge;){if(ge===A){Q=!0,A=L,B=T;break}if(ge===B){Q=!0,B=L,A=T;break}ge=ge.sibling}if(!Q)throw Error(o(189))}}if(A.alternate!==B)throw Error(o(190))}if(A.tag!==3)throw Error(o(188));return A.stateNode.current===A?d:f}function de(d){return d=ee(d),d!==null?ve(d):null}function ve(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){var f=ve(d);if(f!==null)return f;d=d.sibling}return null}function Y(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){if(d.tag!==4){var f=Y(d);if(f!==null)return f}d=d.sibling}return null}var me=Array.isArray,pe=e.getPublicInstance,Ae=e.getRootHostContext,te=e.getChildHostContext,ce=e.prepareForCommit,ne=e.resetAfterCommit,z=e.createInstance,K=e.appendInitialChild,xe=e.finalizeInitialChildren,De=e.prepareUpdate,Ie=e.shouldSetTextContent,Oe=e.createTextInstance,tt=e.scheduleTimeout,rt=e.cancelTimeout,gt=e.noTimeout,kt=e.isPrimaryRenderer,xt=e.supportsMutation,se=e.supportsPersistence,Je=e.supportsHydration,Fe=e.getInstanceFromNode,$e=e.preparePortalMount,ze=e.getCurrentEventPriority,bt=e.detachDeletedInstance,ft=e.supportsMicrotasks,yt=e.scheduleMicrotask,Lt=e.supportsTestSelectors,Kt=e.findFiberRoot,Mn=e.getBoundingRect,Z=e.getTextContent,W=e.isHiddenSubtree,Se=e.matchAccessibilityRole,Ze=e.setFocusIfFocusable,Ve=e.setupIntersectionObserver,Ye=e.appendChild,Ct=e.appendChildToContainer,nt=e.commitTextUpdate,ct=e.commitMount,Ut=e.commitUpdate,rn=e.insertBefore,Ge=e.insertInContainerBefore,gn=e.removeChild,ae=e.removeChildFromContainer,Me=e.resetTextContent,He=e.hideInstance,We=e.hideTextInstance,ke=e.unhideInstance,ue=e.unhideTextInstance,ot=e.clearContainer,it=e.cloneInstance,Ne=e.createContainerChildSet,Qe=e.appendChildToContainerChildSet,Bt=e.finalizeContainerChildren,tn=e.replaceContainerChildren,xn=e.cloneHiddenInstance,Xn=e.cloneHiddenTextInstance,un=e.canHydrateInstance,lr=e.canHydrateTextInstance,Br=e.canHydrateSuspenseInstance,Rs=e.isSuspenseInstancePending,ls=e.isSuspenseInstanceFallback,ri=e.registerSuspenseInstanceRetry,kr=e.getNextHydratableSibling,Qt=e.getFirstHydratableChild,ta=e.getFirstHydratableChildWithinContainer,el=e.getFirstHydratableChildWithinSuspenseInstance,U=e.hydrateInstance,J=e.hydrateTextInstance,le=e.hydrateSuspenseInstance,k=e.getNextHydratableInstanceAfterSuspenseInstance,q=e.commitHydratedContainer,$=e.commitHydratedSuspenseInstance,oe=e.clearSuspenseBoundary,ie=e.clearSuspenseBoundaryFromContainer,Be=e.shouldDeleteUnhydratedTailInstances,Te=e.didNotMatchHydratedContainerTextInstance,Pe=e.didNotMatchHydratedTextInstance,Ce;function At(d){if(Ce===void 0)try{throw Error()}catch(A){var f=A.stack.trim().match(/\n( *(at )?)/);Ce=f&&f[1]||""}return`
`+Ce+d}var je=!1;function Ke(d,f){if(!d||je)return"";je=!0;var A=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(f)if(f=function(){throw Error()},Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(st){var B=st}Reflect.construct(d,[],f)}else{try{f.call()}catch(st){B=st}d.call(f.prototype)}else{try{throw Error()}catch(st){B=st}d()}}catch(st){if(st&&B&&typeof st.stack=="string"){for(var T=st.stack.split(`
`),L=B.stack.split(`
`),Q=T.length-1,ge=L.length-1;1<=Q&&0<=ge&&T[Q]!==L[ge];)ge--;for(;1<=Q&&0<=ge;Q--,ge--)if(T[Q]!==L[ge]){if(Q!==1||ge!==1)do if(Q--,ge--,0>ge||T[Q]!==L[ge]){var Le=`
`+T[Q].replace(" at new "," at ");return d.displayName&&Le.includes("<anonymous>")&&(Le=Le.replace("<anonymous>",d.displayName)),Le}while(1<=Q&&0<=ge);break}}}finally{je=!1,Error.prepareStackTrace=A}return(d=d?d.displayName||d.name:"")?At(d):""}var Et=Object.prototype.hasOwnProperty,Nt=[],Ft=-1;function Vt(d){return{current:d}}function dt(d){0>Ft||(d.current=Nt[Ft],Nt[Ft]=null,Ft--)}function ut(d,f){Ft++,Nt[Ft]=d.current,d.current=f}var jt={},Wt=Vt(jt),Jt=Vt(!1),Pn=jt;function jn(d,f){var A=d.type.contextTypes;if(!A)return jt;var B=d.stateNode;if(B&&B.__reactInternalMemoizedUnmaskedChildContext===f)return B.__reactInternalMemoizedMaskedChildContext;var T={},L;for(L in A)T[L]=f[L];return B&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=f,d.__reactInternalMemoizedMaskedChildContext=T),T}function Nn(d){return d=d.childContextTypes,d!=null}function vn(){dt(Jt),dt(Wt)}function on(d,f,A){if(Wt.current!==jt)throw Error(o(168));ut(Wt,f),ut(Jt,A)}function Qn(d,f,A){var B=d.stateNode;if(f=f.childContextTypes,typeof B.getChildContext!="function")return A;B=B.getChildContext();for(var T in B)if(!(T in f))throw Error(o(108,j(d)||"Unknown",T));return s({},A,B)}function nn(d){return d=(d=d.stateNode)&&d.__reactInternalMemoizedMergedChildContext||jt,Pn=Wt.current,ut(Wt,d),ut(Jt,Jt.current),!0}function pn(d,f,A){var B=d.stateNode;if(!B)throw Error(o(169));A?(d=Qn(d,f,Pn),B.__reactInternalMemoizedMergedChildContext=d,dt(Jt),dt(Wt),ut(Wt,d)):dt(Jt),ut(Jt,A)}var Fn=Math.clz32?Math.clz32:Ds,vi=Math.log,Er=Math.LN2;function Ds(d){return d>>>=0,d===0?32:31-(vi(d)/Er|0)|0}var tl=64,wn=4194304;function nl(d){switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return d&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return d}}function sc(d,f){var A=d.pendingLanes;if(A===0)return 0;var B=0,T=d.suspendedLanes,L=d.pingedLanes,Q=A&268435455;if(Q!==0){var ge=Q&~T;ge!==0?B=nl(ge):(L&=Q,L!==0&&(B=nl(L)))}else Q=A&~T,Q!==0?B=nl(Q):L!==0&&(B=nl(L));if(B===0)return 0;if(f!==0&&f!==B&&(f&T)===0&&(T=B&-B,L=f&-f,T>=L||T===16&&(L&4194240)!==0))return f;if((B&4)!==0&&(B|=A&16),f=d.entangledLanes,f!==0)for(d=d.entanglements,f&=B;0<f;)A=31-Fn(f),T=1<<A,B|=d[A],f&=~T;return B}function Uh(d,f){switch(d){case 1:case 2:case 4:return f+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tm(d,f){for(var A=d.suspendedLanes,B=d.pingedLanes,T=d.expirationTimes,L=d.pendingLanes;0<L;){var Q=31-Fn(L),ge=1<<Q,Le=T[Q];Le===-1?((ge&A)===0||(ge&B)!==0)&&(T[Q]=Uh(ge,f)):Le<=f&&(d.expiredLanes|=ge),L&=~ge}}function Nu(d){return d=d.pendingLanes&-1073741825,d!==0?d:d&1073741824?1073741824:0}function Fu(d){for(var f=[],A=0;31>A;A++)f.push(d);return f}function na(d,f,A){d.pendingLanes|=f,f!==536870912&&(d.suspendedLanes=0,d.pingedLanes=0),d=d.eventTimes,f=31-Fn(f),d[f]=A}function ku(d,f){var A=d.pendingLanes&~f;d.pendingLanes=f,d.suspendedLanes=0,d.pingedLanes=0,d.expiredLanes&=f,d.mutableReadLanes&=f,d.entangledLanes&=f,f=d.entanglements;var B=d.eventTimes;for(d=d.expirationTimes;0<A;){var T=31-Fn(A),L=1<<T;f[T]=0,B[T]=-1,d[T]=-1,A&=~L}}function Ps(d,f){var A=d.entangledLanes|=f;for(d=d.entanglements;A;){var B=31-Fn(A),T=1<<B;T&f|d[B]&f&&(d[B]|=f),A&=~T}}var dn=0;function Ks(d){return d&=-d,1<d?4<d?(d&268435455)!==0?16:536870912:4:1}var ra=i.unstable_scheduleCallback,rl=i.unstable_cancelCallback,Do=i.unstable_shouldYield,s0=i.unstable_requestPaint,xr=i.unstable_now,ia=i.unstable_ImmediatePriority,o0=i.unstable_UserBlockingPriority,Ou=i.unstable_NormalPriority,Uu=i.unstable_IdlePriority,oc=null,Ls=null;function ac(d){if(Ls&&typeof Ls.onCommitFiberRoot=="function")try{Ls.onCommitFiberRoot(oc,d,void 0,(d.current.flags&128)===128)}catch{}}function lc(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var ii=typeof Object.is=="function"?Object.is:lc,Ji=null,Hu=!1,Hh=!1;function zu(d){Ji===null?Ji=[d]:Ji.push(d)}function Gu(d){Hu=!0,zu(d)}function Xi(){if(!Hh&&Ji!==null){Hh=!0;var d=0,f=dn;try{var A=Ji;for(dn=1;d<A.length;d++){var B=A[d];do B=B(!0);while(B!==null)}Ji=null,Hu=!1}catch(T){throw Ji!==null&&(Ji=Ji.slice(d+1)),ra(ia,Xi),T}finally{dn=f,Hh=!1}}return null}var nm=l.ReactCurrentBatchConfig;function cs(d,f){if(ii(d,f))return!0;if(typeof d!="object"||d===null||typeof f!="object"||f===null)return!1;var A=Object.keys(d),B=Object.keys(f);if(A.length!==B.length)return!1;for(B=0;B<A.length;B++){var T=A[B];if(!Et.call(f,T)||!ii(d[T],f[T]))return!1}return!0}function zh(d){switch(d.tag){case 5:return At(d.type);case 16:return At("Lazy");case 13:return At("Suspense");case 19:return At("SuspenseList");case 0:case 2:case 15:return d=Ke(d.type,!1),d;case 11:return d=Ke(d.type.render,!1),d;case 1:return d=Ke(d.type,!0),d;default:return""}}function yi(d,f){if(d&&d.defaultProps){f=s({},f),d=d.defaultProps;for(var A in d)f[A]===void 0&&(f[A]=d[A]);return f}return f}var cc=Vt(null),sa=null,qs=null,ju=null;function si(){ju=qs=sa=null}function oa(d,f,A){kt?(ut(cc,f._currentValue),f._currentValue=A):(ut(cc,f._currentValue2),f._currentValue2=A)}function uc(d){var f=cc.current;dt(cc),kt?d._currentValue=f:d._currentValue2=f}function aa(d,f,A){for(;d!==null;){var B=d.alternate;if((d.childLanes&f)!==f?(d.childLanes|=f,B!==null&&(B.childLanes|=f)):B!==null&&(B.childLanes&f)!==f&&(B.childLanes|=f),d===A)break;d=d.return}}function il(d,f){sa=d,ju=qs=null,d=d.dependencies,d!==null&&d.firstContext!==null&&((d.lanes&f)!==0&&(Rr=!0),d.firstContext=null)}function Ai(d){var f=kt?d._currentValue:d._currentValue2;if(ju!==d)if(d={context:d,memoizedValue:f,next:null},qs===null){if(sa===null)throw Error(o(308));qs=d,sa.dependencies={lanes:0,firstContext:d}}else qs=qs.next=d;return f}var Ki=null,qi=!1;function sl(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gh(d,f){d=d.updateQueue,f.updateQueue===d&&(f.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,effects:d.effects})}function Ys(d,f){return{eventTime:d,lane:f,tag:0,payload:null,callback:null,next:null}}function Po(d,f){var A=d.updateQueue;A!==null&&(A=A.shared,ur!==null&&(d.mode&1)!==0&&(an&2)===0?(d=A.interleaved,d===null?(f.next=f,Ki===null?Ki=[A]:Ki.push(A)):(f.next=d.next,d.next=f),A.interleaved=f):(d=A.pending,d===null?f.next=f:(f.next=d.next,d.next=f),A.pending=f))}function Vu(d,f,A){if(f=f.updateQueue,f!==null&&(f=f.shared,(A&4194240)!==0)){var B=f.lanes;B&=d.pendingLanes,A|=B,f.lanes=A,Ps(d,A)}}function Wu(d,f){var A=d.updateQueue,B=d.alternate;if(B!==null&&(B=B.updateQueue,A===B)){var T=null,L=null;if(A=A.firstBaseUpdate,A!==null){do{var Q={eventTime:A.eventTime,lane:A.lane,tag:A.tag,payload:A.payload,callback:A.callback,next:null};L===null?T=L=Q:L=L.next=Q,A=A.next}while(A!==null);L===null?T=L=f:L=L.next=f}else T=L=f;A={baseState:B.baseState,firstBaseUpdate:T,lastBaseUpdate:L,shared:B.shared,effects:B.effects},d.updateQueue=A;return}d=A.lastBaseUpdate,d===null?A.firstBaseUpdate=f:d.next=f,A.lastBaseUpdate=f}function Ju(d,f,A,B){var T=d.updateQueue;qi=!1;var L=T.firstBaseUpdate,Q=T.lastBaseUpdate,ge=T.shared.pending;if(ge!==null){T.shared.pending=null;var Le=ge,st=Le.next;Le.next=null,Q===null?L=st:Q.next=st,Q=Le;var wt=d.alternate;wt!==null&&(wt=wt.updateQueue,ge=wt.lastBaseUpdate,ge!==Q&&(ge===null?wt.firstBaseUpdate=st:ge.next=st,wt.lastBaseUpdate=Le))}if(L!==null){var Zt=T.baseState;Q=0,wt=st=Le=null,ge=L;do{var Ot=ge.lane,ln=ge.eventTime;if((B&Ot)===Ot){wt!==null&&(wt=wt.next={eventTime:ln,lane:0,tag:ge.tag,payload:ge.payload,callback:ge.callback,next:null});e:{var vt=d,jr=ge;switch(Ot=f,ln=A,jr.tag){case 1:if(vt=jr.payload,typeof vt=="function"){Zt=vt.call(ln,Zt,Ot);break e}Zt=vt;break e;case 3:vt.flags=vt.flags&-65537|128;case 0:if(vt=jr.payload,Ot=typeof vt=="function"?vt.call(ln,Zt,Ot):vt,Ot==null)break e;Zt=s({},Zt,Ot);break e;case 2:qi=!0}}ge.callback!==null&&ge.lane!==0&&(d.flags|=64,Ot=T.effects,Ot===null?T.effects=[ge]:Ot.push(ge))}else ln={eventTime:ln,lane:Ot,tag:ge.tag,payload:ge.payload,callback:ge.callback,next:null},wt===null?(st=wt=ln,Le=Zt):wt=wt.next=ln,Q|=Ot;if(ge=ge.next,ge===null){if(ge=T.shared.pending,ge===null)break;Ot=ge,ge=Ot.next,Ot.next=null,T.lastBaseUpdate=Ot,T.shared.pending=null}}while(!0);if(wt===null&&(Le=Zt),T.baseState=Le,T.firstBaseUpdate=st,T.lastBaseUpdate=wt,f=T.shared.interleaved,f!==null){T=f;do Q|=T.lane,T=T.next;while(T!==f)}else L===null&&(T.shared.lanes=0);ks|=Q,d.lanes=Q,d.memoizedState=Zt}}function rm(d,f,A){if(d=f.effects,f.effects=null,d!==null)for(f=0;f<d.length;f++){var B=d[f],T=B.callback;if(T!==null){if(B.callback=null,B=A,typeof T!="function")throw Error(o(191,T));T.call(B)}}}var im=new n.Component().refs;function jh(d,f,A,B){f=d.memoizedState,A=A(B,f),A=A==null?f:s({},f,A),d.memoizedState=A,d.lanes===0&&(d.updateQueue.baseState=A)}var Xu={isMounted:function(d){return(d=d._reactInternals)?F(d)===d:!1},enqueueSetState:function(d,f,A){d=d._reactInternals;var B=Sn(),T=gs(d),L=Ys(B,T);L.payload=f,A!=null&&(L.callback=A),Po(d,L),f=Qr(d,T,B),f!==null&&Vu(f,d,T)},enqueueReplaceState:function(d,f,A){d=d._reactInternals;var B=Sn(),T=gs(d),L=Ys(B,T);L.tag=1,L.payload=f,A!=null&&(L.callback=A),Po(d,L),f=Qr(d,T,B),f!==null&&Vu(f,d,T)},enqueueForceUpdate:function(d,f){d=d._reactInternals;var A=Sn(),B=gs(d),T=Ys(A,B);T.tag=2,f!=null&&(T.callback=f),Po(d,T),f=Qr(d,B,A),f!==null&&Vu(f,d,B)}};function Vh(d,f,A,B,T,L,Q){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(B,L,Q):f.prototype&&f.prototype.isPureReactComponent?!cs(A,B)||!cs(T,L):!0}function sm(d,f,A){var B=!1,T=jt,L=f.contextType;return typeof L=="object"&&L!==null?L=Ai(L):(T=Nn(f)?Pn:Wt.current,B=f.contextTypes,L=(B=B!=null)?jn(d,T):jt),f=new f(A,L),d.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Xu,d.stateNode=f,f._reactInternals=d,B&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=T,d.__reactInternalMemoizedMaskedChildContext=L),f}function om(d,f,A,B){d=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(A,B),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(A,B),f.state!==d&&Xu.enqueueReplaceState(f,f.state,null)}function Wh(d,f,A,B){var T=d.stateNode;T.props=A,T.state=d.memoizedState,T.refs=im,sl(d);var L=f.contextType;typeof L=="object"&&L!==null?T.context=Ai(L):(L=Nn(f)?Pn:Wt.current,T.context=jn(d,L)),T.state=d.memoizedState,L=f.getDerivedStateFromProps,typeof L=="function"&&(jh(d,f,L,A),T.state=d.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(f=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),f!==T.state&&Xu.enqueueReplaceState(T,T.state,null),Ju(d,A,T,B),T.state=d.memoizedState),typeof T.componentDidMount=="function"&&(d.flags|=4194308)}var ol=[],Lo=0,Ku=null,qu=0,Yi=[],Di=0,la=null,$s=1,Qs="";function ca(d,f){ol[Lo++]=qu,ol[Lo++]=Ku,Ku=d,qu=f}function am(d,f,A){Yi[Di++]=$s,Yi[Di++]=Qs,Yi[Di++]=la,la=d;var B=$s;d=Qs;var T=32-Fn(B)-1;B&=~(1<<T),A+=1;var L=32-Fn(f)+T;if(30<L){var Q=T-T%5;L=(B&(1<<Q)-1).toString(32),B>>=Q,T-=Q,$s=1<<32-Fn(f)+T|A<<T|B,Qs=L+d}else $s=1<<L|A<<T|B,Qs=d}function Jh(d){d.return!==null&&(ca(d,1),am(d,1,0))}function Xh(d){for(;d===Ku;)Ku=ol[--Lo],ol[Lo]=null,qu=ol[--Lo],ol[Lo]=null;for(;d===la;)la=Yi[--Di],Yi[Di]=null,Qs=Yi[--Di],Yi[Di]=null,$s=Yi[--Di],Yi[Di]=null}var oi=null,Or=null,Kn=!1,al=!1,$i=null;function Kh(d,f){var A=Oi(5,null,null,0);A.elementType="DELETED",A.stateNode=f,A.return=d,f=d.deletions,f===null?(d.deletions=[A],d.flags|=16):f.push(A)}function qh(d,f){switch(d.tag){case 5:return f=un(f,d.type,d.pendingProps),f!==null?(d.stateNode=f,oi=d,Or=Qt(f),!0):!1;case 6:return f=lr(f,d.pendingProps),f!==null?(d.stateNode=f,oi=d,Or=null,!0):!1;case 13:if(f=Br(f),f!==null){var A=la!==null?{id:$s,overflow:Qs}:null;return d.memoizedState={dehydrated:f,treeContext:A,retryLane:1073741824},A=Oi(18,null,null,0),A.stateNode=f,A.return=d,d.child=A,oi=d,Or=null,!0}return!1;default:return!1}}function Yu(d){return(d.mode&1)!==0&&(d.flags&128)===0}function Io(d){if(Kn){var f=Or;if(f){var A=f;if(!qh(d,f)){if(Yu(d))throw Error(o(418));f=kr(A);var B=oi;f&&qh(d,f)?Kh(B,A):(d.flags=d.flags&-4097|2,Kn=!1,oi=d)}}else{if(Yu(d))throw Error(o(418));d.flags=d.flags&-4097|2,Kn=!1,oi=d}}}function lm(d){for(d=d.return;d!==null&&d.tag!==5&&d.tag!==3&&d.tag!==13;)d=d.return;oi=d}function dc(d){if(!Je||d!==oi)return!1;if(!Kn)return lm(d),Kn=!0,!1;if(d.tag!==3&&(d.tag!==5||Be(d.type)&&!Ie(d.type,d.memoizedProps))){var f=Or;if(f){if(Yu(d)){for(d=Or;d;)d=kr(d);throw Error(o(418))}for(;f;)Kh(d,f),f=kr(f)}}if(lm(d),d.tag===13){if(!Je)throw Error(o(316));if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(o(317));Or=k(d)}else Or=oi?kr(d.stateNode):null;return!0}function ll(){Je&&(Or=oi=null,al=Kn=!1)}function $u(d){$i===null?$i=[d]:$i.push(d)}function cl(d,f,A){if(d=A.ref,d!==null&&typeof d!="function"&&typeof d!="object"){if(A._owner){if(A=A._owner,A){if(A.tag!==1)throw Error(o(309));var B=A.stateNode}if(!B)throw Error(o(147,d));var T=B,L=""+d;return f!==null&&f.ref!==null&&typeof f.ref=="function"&&f.ref._stringRef===L?f.ref:(f=function(Q){var ge=T.refs;ge===im&&(ge=T.refs={}),Q===null?delete ge[L]:ge[L]=Q},f._stringRef=L,f)}if(typeof d!="string")throw Error(o(284));if(!A._owner)throw Error(o(290,d))}return d}function No(d,f){throw d=Object.prototype.toString.call(f),Error(o(31,d==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":d))}function ul(d){var f=d._init;return f(d._payload)}function cm(d){function f(we,ye){if(d){var Re=we.deletions;Re===null?(we.deletions=[ye],we.flags|=16):Re.push(ye)}}function A(we,ye){if(!d)return null;for(;ye!==null;)f(we,ye),ye=ye.sibling;return null}function B(we,ye){for(we=new Map;ye!==null;)ye.key!==null?we.set(ye.key,ye):we.set(ye.index,ye),ye=ye.sibling;return we}function T(we,ye){return we=fo(we,ye),we.index=0,we.sibling=null,we}function L(we,ye,Re){return we.index=Re,d?(Re=we.alternate,Re!==null?(Re=Re.index,Re<ye?(we.flags|=2,ye):Re):(we.flags|=2,ye)):(we.flags|=1048576,ye)}function Q(we){return d&&we.alternate===null&&(we.flags|=2),we}function ge(we,ye,Re,mt){return ye===null||ye.tag!==6?(ye=wd(Re,we.mode,mt),ye.return=we,ye):(ye=T(ye,Re),ye.return=we,ye)}function Le(we,ye,Re,mt){var Rt=Re.type;return Rt===p?wt(we,ye,Re.props.children,mt,Re.key):ye!==null&&(ye.elementType===Rt||typeof Rt=="object"&&Rt!==null&&Rt.$$typeof===S&&ul(Rt)===ye.type)?(mt=T(ye,Re.props),mt.ref=cl(we,ye,Re),mt.return=we,mt):(mt=Cd(Re.type,Re.key,Re.props,null,we.mode,mt),mt.ref=cl(we,ye,Re),mt.return=we,mt)}function st(we,ye,Re,mt){return ye===null||ye.tag!==4||ye.stateNode.containerInfo!==Re.containerInfo||ye.stateNode.implementation!==Re.implementation?(ye=Sd(Re,we.mode,mt),ye.return=we,ye):(ye=T(ye,Re.children||[]),ye.return=we,ye)}function wt(we,ye,Re,mt,Rt){return ye===null||ye.tag!==7?(ye=Da(Re,we.mode,mt,Rt),ye.return=we,ye):(ye=T(ye,Re),ye.return=we,ye)}function Zt(we,ye,Re){if(typeof ye=="string"&&ye!==""||typeof ye=="number")return ye=wd(""+ye,we.mode,Re),ye.return=we,ye;if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case u:return Re=Cd(ye.type,ye.key,ye.props,null,we.mode,Re),Re.ref=cl(we,null,ye),Re.return=we,Re;case h:return ye=Sd(ye,we.mode,Re),ye.return=we,ye;case S:var mt=ye._init;return Zt(we,mt(ye._payload),Re)}if(me(ye)||I(ye))return ye=Da(ye,we.mode,Re,null),ye.return=we,ye;No(we,ye)}return null}function Ot(we,ye,Re,mt){var Rt=ye!==null?ye.key:null;if(typeof Re=="string"&&Re!==""||typeof Re=="number")return Rt!==null?null:ge(we,ye,""+Re,mt);if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case u:return Re.key===Rt?Le(we,ye,Re,mt):null;case h:return Re.key===Rt?st(we,ye,Re,mt):null;case S:return Rt=Re._init,Ot(we,ye,Rt(Re._payload),mt)}if(me(Re)||I(Re))return Rt!==null?null:wt(we,ye,Re,mt,null);No(we,Re)}return null}function ln(we,ye,Re,mt,Rt){if(typeof mt=="string"&&mt!==""||typeof mt=="number")return we=we.get(Re)||null,ge(ye,we,""+mt,Rt);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case u:return we=we.get(mt.key===null?Re:mt.key)||null,Le(ye,we,mt,Rt);case h:return we=we.get(mt.key===null?Re:mt.key)||null,st(ye,we,mt,Rt);case S:var sn=mt._init;return ln(we,ye,Re,sn(mt._payload),Rt)}if(me(mt)||I(mt))return we=we.get(Re)||null,wt(ye,we,mt,Rt,null);No(ye,mt)}return null}function vt(we,ye,Re,mt){for(var Rt=null,sn=null,en=ye,_n=ye=0,pr=null;en!==null&&_n<Re.length;_n++){en.index>_n?(pr=en,en=null):pr=en.sibling;var En=Ot(we,en,Re[_n],mt);if(En===null){en===null&&(en=pr);break}d&&en&&En.alternate===null&&f(we,en),ye=L(En,ye,_n),sn===null?Rt=En:sn.sibling=En,sn=En,en=pr}if(_n===Re.length)return A(we,en),Kn&&ca(we,_n),Rt;if(en===null){for(;_n<Re.length;_n++)en=Zt(we,Re[_n],mt),en!==null&&(ye=L(en,ye,_n),sn===null?Rt=en:sn.sibling=en,sn=en);return Kn&&ca(we,_n),Rt}for(en=B(we,en);_n<Re.length;_n++)pr=ln(en,we,_n,Re[_n],mt),pr!==null&&(d&&pr.alternate!==null&&en.delete(pr.key===null?_n:pr.key),ye=L(pr,ye,_n),sn===null?Rt=pr:sn.sibling=pr,sn=pr);return d&&en.forEach(function(po){return f(we,po)}),Kn&&ca(we,_n),Rt}function jr(we,ye,Re,mt){var Rt=I(Re);if(typeof Rt!="function")throw Error(o(150));if(Re=Rt.call(Re),Re==null)throw Error(o(151));for(var sn=Rt=null,en=ye,_n=ye=0,pr=null,En=Re.next();en!==null&&!En.done;_n++,En=Re.next()){en.index>_n?(pr=en,en=null):pr=en.sibling;var po=Ot(we,en,En.value,mt);if(po===null){en===null&&(en=pr);break}d&&en&&po.alternate===null&&f(we,en),ye=L(po,ye,_n),sn===null?Rt=po:sn.sibling=po,sn=po,en=pr}if(En.done)return A(we,en),Kn&&ca(we,_n),Rt;if(en===null){for(;!En.done;_n++,En=Re.next())En=Zt(we,En.value,mt),En!==null&&(ye=L(En,ye,_n),sn===null?Rt=En:sn.sibling=En,sn=En);return Kn&&ca(we,_n),Rt}for(en=B(we,en);!En.done;_n++,En=Re.next())En=ln(en,we,_n,En.value,mt),En!==null&&(d&&En.alternate!==null&&en.delete(En.key===null?_n:En.key),ye=L(En,ye,_n),sn===null?Rt=En:sn.sibling=En,sn=En);return d&&en.forEach(function(bf){return f(we,bf)}),Kn&&ca(we,_n),Rt}function Ui(we,ye,Re,mt){if(typeof Re=="object"&&Re!==null&&Re.type===p&&Re.key===null&&(Re=Re.props.children),typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case u:e:{for(var Rt=Re.key,sn=ye;sn!==null;){if(sn.key===Rt){if(Rt=Re.type,Rt===p){if(sn.tag===7){A(we,sn.sibling),ye=T(sn,Re.props.children),ye.return=we,we=ye;break e}}else if(sn.elementType===Rt||typeof Rt=="object"&&Rt!==null&&Rt.$$typeof===S&&ul(Rt)===sn.type){A(we,sn.sibling),ye=T(sn,Re.props),ye.ref=cl(we,sn,Re),ye.return=we,we=ye;break e}A(we,sn);break}else f(we,sn);sn=sn.sibling}Re.type===p?(ye=Da(Re.props.children,we.mode,mt,Re.key),ye.return=we,we=ye):(mt=Cd(Re.type,Re.key,Re.props,null,we.mode,mt),mt.ref=cl(we,ye,Re),mt.return=we,we=mt)}return Q(we);case h:e:{for(sn=Re.key;ye!==null;){if(ye.key===sn)if(ye.tag===4&&ye.stateNode.containerInfo===Re.containerInfo&&ye.stateNode.implementation===Re.implementation){A(we,ye.sibling),ye=T(ye,Re.children||[]),ye.return=we,we=ye;break e}else{A(we,ye);break}else f(we,ye);ye=ye.sibling}ye=Sd(Re,we.mode,mt),ye.return=we,we=ye}return Q(we);case S:return sn=Re._init,Ui(we,ye,sn(Re._payload),mt)}if(me(Re))return vt(we,ye,Re,mt);if(I(Re))return jr(we,ye,Re,mt);No(we,Re)}return typeof Re=="string"&&Re!==""||typeof Re=="number"?(Re=""+Re,ye!==null&&ye.tag===6?(A(we,ye.sibling),ye=T(ye,Re),ye.return=we,we=ye):(A(we,ye),ye=wd(Re,we.mode,mt),ye.return=we,we=ye),Q(we)):A(we,ye)}return Ui}var Zs=cm(!0),um=cm(!1),dl={},Ei=Vt(dl),ua=Vt(dl),da=Vt(dl);function us(d){if(d===dl)throw Error(o(174));return d}function Qu(d,f){ut(da,f),ut(ua,d),ut(Ei,dl),d=Ae(f),dt(Ei),ut(Ei,d)}function hl(){dt(Ei),dt(ua),dt(da)}function dm(d){var f=us(da.current),A=us(Ei.current);f=te(A,d.type,f),A!==f&&(ut(ua,d),ut(Ei,f))}function Yh(d){ua.current===d&&(dt(Ei),dt(ua))}var Zn=Vt(0);function Zu(d){for(var f=d;f!==null;){if(f.tag===13){var A=f.memoizedState;if(A!==null&&(A=A.dehydrated,A===null||Rs(A)||ls(A)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===d)break;for(;f.sibling===null;){if(f.return===null||f.return===d)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var Pi=[];function ha(){for(var d=0;d<Pi.length;d++){var f=Pi[d];kt?f._workInProgressVersionPrimary=null:f._workInProgressVersionSecondary=null}Pi.length=0}var hc=l.ReactCurrentDispatcher,Li=l.ReactCurrentBatchConfig,fa=0,er=null,br=null,Mr=null,ed=!1,Is=!1,pa=0,fc=0;function Tr(){throw Error(o(321))}function td(d,f){if(f===null)return!1;for(var A=0;A<f.length&&A<d.length;A++)if(!ii(d[A],f[A]))return!1;return!0}function fl(d,f,A,B,T,L){if(fa=L,er=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,hc.current=d===null||d.memoizedState===null?nf:rf,d=A(B,T),Is){L=0;do{if(Is=!1,pa=0,25<=L)throw Error(o(301));L+=1,Mr=br=null,f.updateQueue=null,hc.current=sf,d=A(B,T)}while(Is)}if(hc.current=vl,f=br!==null&&br.next!==null,fa=0,Mr=br=er=null,ed=!1,f)throw Error(o(300));return d}function Fo(){var d=pa!==0;return pa=0,d}function ds(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mr===null?er.memoizedState=Mr=d:Mr=Mr.next=d,Mr}function hs(){if(br===null){var d=er.alternate;d=d!==null?d.memoizedState:null}else d=br.next;var f=Mr===null?er.memoizedState:Mr.next;if(f!==null)Mr=f,br=d;else{if(d===null)throw Error(o(310));br=d,d={memoizedState:br.memoizedState,baseState:br.baseState,baseQueue:br.baseQueue,queue:br.queue,next:null},Mr===null?er.memoizedState=Mr=d:Mr=Mr.next=d}return Mr}function Ns(d,f){return typeof f=="function"?f(d):f}function pc(d){var f=hs(),A=f.queue;if(A===null)throw Error(o(311));A.lastRenderedReducer=d;var B=br,T=B.baseQueue,L=A.pending;if(L!==null){if(T!==null){var Q=T.next;T.next=L.next,L.next=Q}B.baseQueue=T=L,A.pending=null}if(T!==null){L=T.next,B=B.baseState;var ge=Q=null,Le=null,st=L;do{var wt=st.lane;if((fa&wt)===wt)Le!==null&&(Le=Le.next={lane:0,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null}),B=st.hasEagerState?st.eagerState:d(B,st.action);else{var Zt={lane:wt,action:st.action,hasEagerState:st.hasEagerState,eagerState:st.eagerState,next:null};Le===null?(ge=Le=Zt,Q=B):Le=Le.next=Zt,er.lanes|=wt,ks|=wt}st=st.next}while(st!==null&&st!==L);Le===null?Q=B:Le.next=ge,ii(B,f.memoizedState)||(Rr=!0),f.memoizedState=B,f.baseState=Q,f.baseQueue=Le,A.lastRenderedState=B}if(d=A.interleaved,d!==null){T=d;do L=T.lane,er.lanes|=L,ks|=L,T=T.next;while(T!==d)}else T===null&&(A.lanes=0);return[f.memoizedState,A.dispatch]}function mc(d){var f=hs(),A=f.queue;if(A===null)throw Error(o(311));A.lastRenderedReducer=d;var B=A.dispatch,T=A.pending,L=f.memoizedState;if(T!==null){A.pending=null;var Q=T=T.next;do L=d(L,Q.action),Q=Q.next;while(Q!==T);ii(L,f.memoizedState)||(Rr=!0),f.memoizedState=L,f.baseQueue===null&&(f.baseState=L),A.lastRenderedState=L}return[L,B]}function $h(){}function Qh(d,f){var A=er,B=hs(),T=f(),L=!ii(B.memoizedState,T);if(L&&(B.memoizedState=T,Rr=!0),B=B.queue,pl(eo.bind(null,A,B,d),[d]),B.getSnapshot!==f||L||Mr!==null&&Mr.memoizedState.tag&1){if(A.flags|=2048,vc(9,ef.bind(null,A,B,T,f),void 0,null),ur===null)throw Error(o(349));(fa&30)!==0||Zh(A,f,T)}return T}function Zh(d,f,A){d.flags|=16384,d={getSnapshot:f,value:A},f=er.updateQueue,f===null?(f={lastEffect:null,stores:null},er.updateQueue=f,f.stores=[d]):(A=f.stores,A===null?f.stores=[d]:A.push(d))}function ef(d,f,A,B){f.value=A,f.getSnapshot=B,nd(f)&&Qr(d,1,-1)}function eo(d,f,A){return A(function(){nd(f)&&Qr(d,1,-1)})}function nd(d){var f=d.getSnapshot;d=d.value;try{var A=f();return!ii(d,A)}catch{return!0}}function gc(d){var f=ds();return typeof d=="function"&&(d=d()),f.memoizedState=f.baseState=d,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ns,lastRenderedState:d},f.queue=d,d=d.dispatch=a0.bind(null,er,d),[f.memoizedState,d]}function vc(d,f,A,B){return d={tag:d,create:f,destroy:A,deps:B,next:null},f=er.updateQueue,f===null?(f={lastEffect:null,stores:null},er.updateQueue=f,f.lastEffect=d.next=d):(A=f.lastEffect,A===null?f.lastEffect=d.next=d:(B=A.next,A.next=d,d.next=B,f.lastEffect=d)),d}function hm(){return hs().memoizedState}function ko(d,f,A,B){var T=ds();er.flags|=d,T.memoizedState=vc(1|f,A,void 0,B===void 0?null:B)}function rd(d,f,A,B){var T=hs();B=B===void 0?null:B;var L=void 0;if(br!==null){var Q=br.memoizedState;if(L=Q.destroy,B!==null&&td(B,Q.deps)){T.memoizedState=vc(f,A,L,B);return}}er.flags|=d,T.memoizedState=vc(1|f,A,L,B)}function id(d,f){return ko(8390656,8,d,f)}function pl(d,f){return rd(2048,8,d,f)}function Hn(d,f){return rd(4,2,d,f)}function sd(d,f){return rd(4,4,d,f)}function yc(d,f){if(typeof f=="function")return d=d(),f(d),function(){f(null)};if(f!=null)return d=d(),f.current=d,function(){f.current=null}}function ml(d,f,A){return A=A!=null?A.concat([d]):null,rd(4,4,yc.bind(null,f,d),A)}function od(){}function ad(d,f){var A=hs();f=f===void 0?null:f;var B=A.memoizedState;return B!==null&&f!==null&&td(f,B[1])?B[0]:(A.memoizedState=[d,f],d)}function gl(d,f){var A=hs();f=f===void 0?null:f;var B=A.memoizedState;return B!==null&&f!==null&&td(f,B[1])?B[0]:(d=d(),A.memoizedState=[d,f],d)}function ld(d,f){var A=dn;dn=A!==0&&4>A?A:4,d(!0);var B=Li.transition;Li.transition={};try{d(!1),f()}finally{dn=A,Li.transition=B}}function ma(){return hs().memoizedState}function fm(d,f,A){var B=gs(d);A={lane:B,action:A,hasEagerState:!1,eagerState:null,next:null},pm(d)?tf(f,A):(Ac(d,f,A),A=Sn(),d=Qr(d,B,A),d!==null&&Ec(d,f,B))}function a0(d,f,A){var B=gs(d),T={lane:B,action:A,hasEagerState:!1,eagerState:null,next:null};if(pm(d))tf(f,T);else{Ac(d,f,T);var L=d.alternate;if(d.lanes===0&&(L===null||L.lanes===0)&&(L=f.lastRenderedReducer,L!==null))try{var Q=f.lastRenderedState,ge=L(Q,A);if(T.hasEagerState=!0,T.eagerState=ge,ii(ge,Q))return}catch{}finally{}A=Sn(),d=Qr(d,B,A),d!==null&&Ec(d,f,B)}}function pm(d){var f=d.alternate;return d===er||f!==null&&f===er}function tf(d,f){Is=ed=!0;var A=d.pending;A===null?f.next=f:(f.next=A.next,A.next=f),d.pending=f}function Ac(d,f,A){ur!==null&&(d.mode&1)!==0&&(an&2)===0?(d=f.interleaved,d===null?(A.next=A,Ki===null?Ki=[f]:Ki.push(f)):(A.next=d.next,d.next=A),f.interleaved=A):(d=f.pending,d===null?A.next=A:(A.next=d.next,d.next=A),f.pending=A)}function Ec(d,f,A){if((A&4194240)!==0){var B=f.lanes;B&=d.pendingLanes,A|=B,f.lanes=A,Ps(d,A)}}var vl={readContext:Ai,useCallback:Tr,useContext:Tr,useEffect:Tr,useImperativeHandle:Tr,useInsertionEffect:Tr,useLayoutEffect:Tr,useMemo:Tr,useReducer:Tr,useRef:Tr,useState:Tr,useDebugValue:Tr,useDeferredValue:Tr,useTransition:Tr,useMutableSource:Tr,useSyncExternalStore:Tr,useId:Tr,unstable_isNewReconciler:!1},nf={readContext:Ai,useCallback:function(d,f){return ds().memoizedState=[d,f===void 0?null:f],d},useContext:Ai,useEffect:id,useImperativeHandle:function(d,f,A){return A=A!=null?A.concat([d]):null,ko(4194308,4,yc.bind(null,f,d),A)},useLayoutEffect:function(d,f){return ko(4194308,4,d,f)},useInsertionEffect:function(d,f){return ko(4,2,d,f)},useMemo:function(d,f){var A=ds();return f=f===void 0?null:f,d=d(),A.memoizedState=[d,f],d},useReducer:function(d,f,A){var B=ds();return f=A!==void 0?A(f):f,B.memoizedState=B.baseState=f,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:f},B.queue=d,d=d.dispatch=fm.bind(null,er,d),[B.memoizedState,d]},useRef:function(d){var f=ds();return d={current:d},f.memoizedState=d},useState:gc,useDebugValue:od,useDeferredValue:function(d){var f=gc(d),A=f[0],B=f[1];return id(function(){var T=Li.transition;Li.transition={};try{B(d)}finally{Li.transition=T}},[d]),A},useTransition:function(){var d=gc(!1),f=d[0];return d=ld.bind(null,d[1]),ds().memoizedState=d,[f,d]},useMutableSource:function(){},useSyncExternalStore:function(d,f,A){var B=er,T=ds();if(Kn){if(A===void 0)throw Error(o(407));A=A()}else{if(A=f(),ur===null)throw Error(o(349));(fa&30)!==0||Zh(B,f,A)}T.memoizedState=A;var L={value:A,getSnapshot:f};return T.queue=L,id(eo.bind(null,B,L,d),[d]),B.flags|=2048,vc(9,ef.bind(null,B,L,A,f),void 0,null),A},useId:function(){var d=ds(),f=ur.identifierPrefix;if(Kn){var A=Qs,B=$s;A=(B&~(1<<32-Fn(B)-1)).toString(32)+A,f=":"+f+"R"+A,A=pa++,0<A&&(f+="H"+A.toString(32)),f+=":"}else A=fc++,f=":"+f+"r"+A.toString(32)+":";return d.memoizedState=f},unstable_isNewReconciler:!1},rf={readContext:Ai,useCallback:ad,useContext:Ai,useEffect:pl,useImperativeHandle:ml,useInsertionEffect:Hn,useLayoutEffect:sd,useMemo:gl,useReducer:pc,useRef:hm,useState:function(){return pc(Ns)},useDebugValue:od,useDeferredValue:function(d){var f=pc(Ns),A=f[0],B=f[1];return pl(function(){var T=Li.transition;Li.transition={};try{B(d)}finally{Li.transition=T}},[d]),A},useTransition:function(){var d=pc(Ns)[0],f=hs().memoizedState;return[d,f]},useMutableSource:$h,useSyncExternalStore:Qh,useId:ma,unstable_isNewReconciler:!1},sf={readContext:Ai,useCallback:ad,useContext:Ai,useEffect:pl,useImperativeHandle:ml,useInsertionEffect:Hn,useLayoutEffect:sd,useMemo:gl,useReducer:mc,useRef:hm,useState:function(){return mc(Ns)},useDebugValue:od,useDeferredValue:function(d){var f=mc(Ns),A=f[0],B=f[1];return pl(function(){var T=Li.transition;Li.transition={};try{B(d)}finally{Li.transition=T}},[d]),A},useTransition:function(){var d=mc(Ns)[0],f=hs().memoizedState;return[d,f]},useMutableSource:$h,useSyncExternalStore:Qh,useId:ma,unstable_isNewReconciler:!1};function of(d,f){try{var A="",B=f;do A+=zh(B),B=B.return;while(B);var T=A}catch(L){T=`
Error generating stack: `+L.message+`
`+L.stack}return{value:d,source:f,stack:T}}function cd(d,f){try{console.error(f.value)}catch(A){setTimeout(function(){throw A})}}var l0=typeof WeakMap=="function"?WeakMap:Map;function mm(d,f,A){A=Ys(-1,A),A.tag=3,A.payload={element:null};var B=f.value;return A.callback=function(){Cl||(Cl=!0,Wn=B),cd(d,f)},A}function ud(d,f,A){A=Ys(-1,A),A.tag=3;var B=d.type.getDerivedStateFromError;if(typeof B=="function"){var T=f.value;A.payload=function(){return B(T)},A.callback=function(){cd(d,f)}}var L=d.stateNode;return L!==null&&typeof L.componentDidCatch=="function"&&(A.callback=function(){cd(d,f),typeof B!="function"&&(ms===null?ms=new Set([this]):ms.add(this));var Q=f.stack;this.componentDidCatch(f.value,{componentStack:Q!==null?Q:""})}),A}function to(d,f,A){var B=d.pingCache;if(B===null){B=d.pingCache=new l0;var T=new Set;B.set(f,T)}else T=B.get(f),T===void 0&&(T=new Set,B.set(f,T));T.has(A)||(T.add(A),d=wf.bind(null,d,f,A),f.then(d,d))}function af(d){do{var f;if((f=d.tag===13)&&(f=d.memoizedState,f=f!==null?f.dehydrated!==null:!0),f)return d;d=d.return}while(d!==null);return null}function ga(d,f,A,B,T){return(d.mode&1)===0?(d===f?d.flags|=65536:(d.flags|=128,A.flags|=131072,A.flags&=-52805,A.tag===1&&(A.alternate===null?A.tag=17:(f=Ys(-1,1),f.tag=2,Po(A,f))),A.lanes|=1),d):(d.flags|=65536,d.lanes=T,d)}function _r(d){d.flags|=4}function yl(d,f){if(d!==null&&d.child===f.child)return!0;if((f.flags&16)!==0)return!1;for(d=f.child;d!==null;){if((d.flags&12854)!==0||(d.subtreeFlags&12854)!==0)return!1;d=d.sibling}return!0}var Ii,va,dd,hd;if(xt)Ii=function(d,f){for(var A=f.child;A!==null;){if(A.tag===5||A.tag===6)K(d,A.stateNode);else if(A.tag!==4&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===f)break;for(;A.sibling===null;){if(A.return===null||A.return===f)return;A=A.return}A.sibling.return=A.return,A=A.sibling}},va=function(){},dd=function(d,f,A,B,T){if(d=d.memoizedProps,d!==B){var L=f.stateNode,Q=us(Ei.current);A=De(L,A,d,B,T,Q),(f.updateQueue=A)&&_r(f)}},hd=function(d,f,A,B){A!==B&&_r(f)};else if(se){Ii=function(d,f,A,B){for(var T=f.child;T!==null;){if(T.tag===5){var L=T.stateNode;A&&B&&(L=xn(L,T.type,T.memoizedProps,T)),K(d,L)}else if(T.tag===6)L=T.stateNode,A&&B&&(L=Xn(L,T.memoizedProps,T)),K(d,L);else if(T.tag!==4){if(T.tag===22&&T.memoizedState!==null)L=T.child,L!==null&&(L.return=T),Ii(d,T,!0,!0);else if(T.child!==null){T.child.return=T,T=T.child;continue}}if(T===f)break;for(;T.sibling===null;){if(T.return===null||T.return===f)return;T=T.return}T.sibling.return=T.return,T=T.sibling}};var Oo=function(d,f,A,B){for(var T=f.child;T!==null;){if(T.tag===5){var L=T.stateNode;A&&B&&(L=xn(L,T.type,T.memoizedProps,T)),Qe(d,L)}else if(T.tag===6)L=T.stateNode,A&&B&&(L=Xn(L,T.memoizedProps,T)),Qe(d,L);else if(T.tag!==4){if(T.tag===22&&T.memoizedState!==null)L=T.child,L!==null&&(L.return=T),Oo(d,T,!0,!0);else if(T.child!==null){T.child.return=T,T=T.child;continue}}if(T===f)break;for(;T.sibling===null;){if(T.return===null||T.return===f)return;T=T.return}T.sibling.return=T.return,T=T.sibling}};va=function(d,f){var A=f.stateNode;if(!yl(d,f)){d=A.containerInfo;var B=Ne(d);Oo(B,f,!1,!1),A.pendingChildren=B,_r(f),Bt(d,B)}},dd=function(d,f,A,B,T){var L=d.stateNode,Q=d.memoizedProps;if((d=yl(d,f))&&Q===B)f.stateNode=L;else{var ge=f.stateNode,Le=us(Ei.current),st=null;Q!==B&&(st=De(ge,A,Q,B,T,Le)),d&&st===null?f.stateNode=L:(L=it(L,st,A,Q,B,f,d,ge),xe(L,A,B,T,Le)&&_r(f),f.stateNode=L,d?_r(f):Ii(L,f,!1,!1))}},hd=function(d,f,A,B){A!==B?(d=us(da.current),A=us(Ei.current),f.stateNode=Oe(B,d,A,f),_r(f)):f.stateNode=d.stateNode}}else va=function(){},dd=function(){},hd=function(){};function no(d,f){if(!Kn)switch(d.tailMode){case"hidden":f=d.tail;for(var A=null;f!==null;)f.alternate!==null&&(A=f),f=f.sibling;A===null?d.tail=null:A.sibling=null;break;case"collapsed":A=d.tail;for(var B=null;A!==null;)A.alternate!==null&&(B=A),A=A.sibling;B===null?f||d.tail===null?d.tail=null:d.tail.sibling=null:B.sibling=null}}function cr(d){var f=d.alternate!==null&&d.alternate.child===d.child,A=0,B=0;if(f)for(var T=d.child;T!==null;)A|=T.lanes|T.childLanes,B|=T.subtreeFlags&14680064,B|=T.flags&14680064,T.return=d,T=T.sibling;else for(T=d.child;T!==null;)A|=T.lanes|T.childLanes,B|=T.subtreeFlags,B|=T.flags,T.return=d,T=T.sibling;return d.subtreeFlags|=B,d.childLanes=A,f}function fd(d,f,A){var B=f.pendingProps;switch(Xh(f),f.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cr(f),null;case 1:return Nn(f.type)&&vn(),cr(f),null;case 3:return B=f.stateNode,hl(),dt(Jt),dt(Wt),ha(),B.pendingContext&&(B.context=B.pendingContext,B.pendingContext=null),(d===null||d.child===null)&&(dc(f)?_r(f):d===null||d.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,$i!==null&&(Lc($i),$i=null))),va(d,f),cr(f),null;case 5:Yh(f),A=us(da.current);var T=f.type;if(d!==null&&f.stateNode!=null)dd(d,f,T,B,A),d.ref!==f.ref&&(f.flags|=512,f.flags|=2097152);else{if(!B){if(f.stateNode===null)throw Error(o(166));return cr(f),null}if(d=us(Ei.current),dc(f)){if(!Je)throw Error(o(175));d=U(f.stateNode,f.type,f.memoizedProps,A,d,f,!al),f.updateQueue=d,d!==null&&_r(f)}else{var L=z(T,B,A,d,f);Ii(L,f,!1,!1),f.stateNode=L,xe(L,T,B,A,d)&&_r(f)}f.ref!==null&&(f.flags|=512,f.flags|=2097152)}return cr(f),null;case 6:if(d&&f.stateNode!=null)hd(d,f,d.memoizedProps,B);else{if(typeof B!="string"&&f.stateNode===null)throw Error(o(166));if(d=us(da.current),A=us(Ei.current),dc(f)){if(!Je)throw Error(o(176));if(d=f.stateNode,B=f.memoizedProps,(A=J(d,B,f,!al))&&(T=oi,T!==null))switch(L=(T.mode&1)!==0,T.tag){case 3:Te(T.stateNode.containerInfo,d,B,L);break;case 5:Pe(T.type,T.memoizedProps,T.stateNode,d,B,L)}A&&_r(f)}else f.stateNode=Oe(B,d,A,f)}return cr(f),null;case 13:if(dt(Zn),B=f.memoizedState,Kn&&Or!==null&&(f.mode&1)!==0&&(f.flags&128)===0){for(d=Or;d;)d=kr(d);return ll(),f.flags|=98560,f}if(B!==null&&B.dehydrated!==null){if(B=dc(f),d===null){if(!B)throw Error(o(318));if(!Je)throw Error(o(344));if(d=f.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(o(317));le(d,f)}else ll(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;return cr(f),null}return $i!==null&&(Lc($i),$i=null),(f.flags&128)!==0?(f.lanes=A,f):(B=B!==null,A=!1,d===null?dc(f):A=d.memoizedState!==null,B&&!A&&(f.child.flags|=8192,(f.mode&1)!==0&&(d===null||(Zn.current&1)!==0?ir===0&&(ir=3):Ed())),f.updateQueue!==null&&(f.flags|=4),cr(f),null);case 4:return hl(),va(d,f),d===null&&$e(f.stateNode.containerInfo),cr(f),null;case 10:return uc(f.type._context),cr(f),null;case 17:return Nn(f.type)&&vn(),cr(f),null;case 19:if(dt(Zn),T=f.memoizedState,T===null)return cr(f),null;if(B=(f.flags&128)!==0,L=T.rendering,L===null)if(B)no(T,!1);else{if(ir!==0||d!==null&&(d.flags&128)!==0)for(d=f.child;d!==null;){if(L=Zu(d),L!==null){for(f.flags|=128,no(T,!1),d=L.updateQueue,d!==null&&(f.updateQueue=d,f.flags|=4),f.subtreeFlags=0,d=A,B=f.child;B!==null;)A=B,T=d,A.flags&=14680066,L=A.alternate,L===null?(A.childLanes=0,A.lanes=T,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=L.childLanes,A.lanes=L.lanes,A.child=L.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=L.memoizedProps,A.memoizedState=L.memoizedState,A.updateQueue=L.updateQueue,A.type=L.type,T=L.dependencies,A.dependencies=T===null?null:{lanes:T.lanes,firstContext:T.firstContext}),B=B.sibling;return ut(Zn,Zn.current&1|2),f.child}d=d.sibling}T.tail!==null&&xr()>zo&&(f.flags|=128,B=!0,no(T,!1),f.lanes=4194304)}else{if(!B)if(d=Zu(L),d!==null){if(f.flags|=128,B=!0,d=d.updateQueue,d!==null&&(f.updateQueue=d,f.flags|=4),no(T,!0),T.tail===null&&T.tailMode==="hidden"&&!L.alternate&&!Kn)return cr(f),null}else 2*xr()-T.renderingStartTime>zo&&A!==1073741824&&(f.flags|=128,B=!0,no(T,!1),f.lanes=4194304);T.isBackwards?(L.sibling=f.child,f.child=L):(d=T.last,d!==null?d.sibling=L:f.child=L,T.last=L)}return T.tail!==null?(f=T.tail,T.rendering=f,T.tail=f.sibling,T.renderingStartTime=xr(),f.sibling=null,d=Zn.current,ut(Zn,B?d&1|2:d&1),f):(cr(f),null);case 22:case 23:return Ic(),B=f.memoizedState!==null,d!==null&&d.memoizedState!==null!==B&&(f.flags|=8192),B&&(f.mode&1)!==0?($r&1073741824)!==0&&(cr(f),xt&&f.subtreeFlags&6&&(f.flags|=8192)):cr(f),null;case 24:return null;case 25:return null}throw Error(o(156,f.tag))}var lf=l.ReactCurrentOwner,Rr=!1;function rr(d,f,A,B){f.child=d===null?um(f,null,A,B):Zs(f,d.child,A,B)}function zn(d,f,A,B,T){A=A.render;var L=f.ref;return il(f,T),B=fl(d,f,A,B,L,T),A=Fo(),d!==null&&!Rr?(f.updateQueue=d.updateQueue,f.flags&=-2053,d.lanes&=~T,xi(d,f,T)):(Kn&&A&&Jh(f),f.flags|=1,rr(d,f,B,T),f.child)}function kn(d,f,A,B,T){if(d===null){var L=A.type;return typeof L=="function"&&!_d(L)&&L.defaultProps===void 0&&A.compare===null&&A.defaultProps===void 0?(f.tag=15,f.type=L,ro(d,f,L,B,T)):(d=Cd(A.type,null,B,f,f.mode,T),d.ref=f.ref,d.return=f,f.child=d)}if(L=d.child,(d.lanes&T)===0){var Q=L.memoizedProps;if(A=A.compare,A=A!==null?A:cs,A(Q,B)&&d.ref===f.ref)return xi(d,f,T)}return f.flags|=1,d=fo(L,B),d.ref=f.ref,d.return=f,f.child=d}function ro(d,f,A,B,T){if(d!==null&&cs(d.memoizedProps,B)&&d.ref===f.ref)if(Rr=!1,(d.lanes&T)!==0)(d.flags&131072)!==0&&(Rr=!0);else return f.lanes=d.lanes,xi(d,f,T);return io(d,f,A,B,T)}function Ur(d,f,A){var B=f.pendingProps,T=B.children,L=d!==null?d.memoizedState:null;if(B.mode==="hidden")if((f.mode&1)===0)f.memoizedState={baseLanes:0,cachePool:null},ut(Ba,$r),$r|=A;else if((A&1073741824)!==0)f.memoizedState={baseLanes:0,cachePool:null},B=L!==null?L.baseLanes:A,ut(Ba,$r),$r|=B;else return d=L!==null?L.baseLanes|A:A,f.lanes=f.childLanes=1073741824,f.memoizedState={baseLanes:d,cachePool:null},f.updateQueue=null,ut(Ba,$r),$r|=d,null;else L!==null?(B=L.baseLanes|A,f.memoizedState=null):B=A,ut(Ba,$r),$r|=B;return rr(d,f,T,A),f.child}function ai(d,f){var A=f.ref;(d===null&&A!==null||d!==null&&d.ref!==A)&&(f.flags|=512,f.flags|=2097152)}function io(d,f,A,B,T){var L=Nn(A)?Pn:Wt.current;return L=jn(f,L),il(f,T),A=fl(d,f,A,B,L,T),B=Fo(),d!==null&&!Rr?(f.updateQueue=d.updateQueue,f.flags&=-2053,d.lanes&=~T,xi(d,f,T)):(Kn&&B&&Jh(f),f.flags|=1,rr(d,f,A,T),f.child)}function ya(d,f,A,B,T){if(Nn(A)){var L=!0;nn(f)}else L=!1;if(il(f,T),f.stateNode===null)d!==null&&(d.alternate=null,f.alternate=null,f.flags|=2),sm(f,A,B),Wh(f,A,B,T),B=!0;else if(d===null){var Q=f.stateNode,ge=f.memoizedProps;Q.props=ge;var Le=Q.context,st=A.contextType;typeof st=="object"&&st!==null?st=Ai(st):(st=Nn(A)?Pn:Wt.current,st=jn(f,st));var wt=A.getDerivedStateFromProps,Zt=typeof wt=="function"||typeof Q.getSnapshotBeforeUpdate=="function";Zt||typeof Q.UNSAFE_componentWillReceiveProps!="function"&&typeof Q.componentWillReceiveProps!="function"||(ge!==B||Le!==st)&&om(f,Q,B,st),qi=!1;var Ot=f.memoizedState;Q.state=Ot,Ju(f,B,Q,T),Le=f.memoizedState,ge!==B||Ot!==Le||Jt.current||qi?(typeof wt=="function"&&(jh(f,A,wt,B),Le=f.memoizedState),(ge=qi||Vh(f,A,ge,B,Ot,Le,st))?(Zt||typeof Q.UNSAFE_componentWillMount!="function"&&typeof Q.componentWillMount!="function"||(typeof Q.componentWillMount=="function"&&Q.componentWillMount(),typeof Q.UNSAFE_componentWillMount=="function"&&Q.UNSAFE_componentWillMount()),typeof Q.componentDidMount=="function"&&(f.flags|=4194308)):(typeof Q.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=B,f.memoizedState=Le),Q.props=B,Q.state=Le,Q.context=st,B=ge):(typeof Q.componentDidMount=="function"&&(f.flags|=4194308),B=!1)}else{Q=f.stateNode,Gh(d,f),ge=f.memoizedProps,st=f.type===f.elementType?ge:yi(f.type,ge),Q.props=st,Zt=f.pendingProps,Ot=Q.context,Le=A.contextType,typeof Le=="object"&&Le!==null?Le=Ai(Le):(Le=Nn(A)?Pn:Wt.current,Le=jn(f,Le));var ln=A.getDerivedStateFromProps;(wt=typeof ln=="function"||typeof Q.getSnapshotBeforeUpdate=="function")||typeof Q.UNSAFE_componentWillReceiveProps!="function"&&typeof Q.componentWillReceiveProps!="function"||(ge!==Zt||Ot!==Le)&&om(f,Q,B,Le),qi=!1,Ot=f.memoizedState,Q.state=Ot,Ju(f,B,Q,T);var vt=f.memoizedState;ge!==Zt||Ot!==vt||Jt.current||qi?(typeof ln=="function"&&(jh(f,A,ln,B),vt=f.memoizedState),(st=qi||Vh(f,A,st,B,Ot,vt,Le)||!1)?(wt||typeof Q.UNSAFE_componentWillUpdate!="function"&&typeof Q.componentWillUpdate!="function"||(typeof Q.componentWillUpdate=="function"&&Q.componentWillUpdate(B,vt,Le),typeof Q.UNSAFE_componentWillUpdate=="function"&&Q.UNSAFE_componentWillUpdate(B,vt,Le)),typeof Q.componentDidUpdate=="function"&&(f.flags|=4),typeof Q.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof Q.componentDidUpdate!="function"||ge===d.memoizedProps&&Ot===d.memoizedState||(f.flags|=4),typeof Q.getSnapshotBeforeUpdate!="function"||ge===d.memoizedProps&&Ot===d.memoizedState||(f.flags|=1024),f.memoizedProps=B,f.memoizedState=vt),Q.props=B,Q.state=vt,Q.context=Le,B=st):(typeof Q.componentDidUpdate!="function"||ge===d.memoizedProps&&Ot===d.memoizedState||(f.flags|=4),typeof Q.getSnapshotBeforeUpdate!="function"||ge===d.memoizedProps&&Ot===d.memoizedState||(f.flags|=1024),B=!1)}return Yr(d,f,A,B,L,T)}function Yr(d,f,A,B,T,L){ai(d,f);var Q=(f.flags&128)!==0;if(!B&&!Q)return T&&pn(f,A,!1),xi(d,f,L);B=f.stateNode,lf.current=f;var ge=Q&&typeof A.getDerivedStateFromError!="function"?null:B.render();return f.flags|=1,d!==null&&Q?(f.child=Zs(f,d.child,null,L),f.child=Zs(f,null,ge,L)):rr(d,f,ge,L),f.memoizedState=B.state,T&&pn(f,A,!0),f.child}function xc(d){var f=d.stateNode;f.pendingContext?on(d,f.pendingContext,f.pendingContext!==f.context):f.context&&on(d,f.context,!1),Qu(d,f.containerInfo)}function cf(d,f,A,B,T){return ll(),$u(T),f.flags|=256,rr(d,f,A,B),f.child}var _c={dehydrated:null,treeContext:null,retryLane:0};function Aa(d){return{baseLanes:d,cachePool:null}}function uf(d,f,A){var B=f.pendingProps,T=Zn.current,L=!1,Q=(f.flags&128)!==0,ge;if((ge=Q)||(ge=d!==null&&d.memoizedState===null?!1:(T&2)!==0),ge?(L=!0,f.flags&=-129):(d===null||d.memoizedState!==null)&&(T|=1),ut(Zn,T&1),d===null)return Io(f),d=f.memoizedState,d!==null&&(d=d.dehydrated,d!==null)?((f.mode&1)===0?f.lanes=1:ls(d)?f.lanes=8:f.lanes=1073741824,null):(T=B.children,d=B.fallback,L?(B=f.mode,L=f.child,T={mode:"hidden",children:T},(B&1)===0&&L!==null?(L.childLanes=0,L.pendingProps=T):L=kc(T,B,0,null),d=Da(d,B,A,null),L.return=f,d.return=f,L.sibling=d,f.child=L,f.child.memoizedState=Aa(A),f.memoizedState=_c,d):fs(f,T));if(T=d.memoizedState,T!==null){if(ge=T.dehydrated,ge!==null){if(Q)return f.flags&256?(f.flags&=-257,wc(d,f,A,Error(o(422)))):f.memoizedState!==null?(f.child=d.child,f.flags|=128,null):(L=B.fallback,T=f.mode,B=kc({mode:"visible",children:B.children},T,0,null),L=Da(L,T,A,null),L.flags|=2,B.return=f,L.return=f,B.sibling=L,f.child=B,(f.mode&1)!==0&&Zs(f,d.child,null,A),f.child.memoizedState=Aa(A),f.memoizedState=_c,L);if((f.mode&1)===0)f=wc(d,f,A,null);else if(ls(ge))f=wc(d,f,A,Error(o(419)));else if(B=(A&d.childLanes)!==0,Rr||B){if(B=ur,B!==null){switch(A&-A){case 4:L=2;break;case 16:L=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:L=32;break;case 536870912:L=268435456;break;default:L=0}B=(L&(B.suspendedLanes|A))!==0?0:L,B!==0&&B!==T.retryLane&&(T.retryLane=B,Qr(d,B,-1))}Ed(),f=wc(d,f,A,Error(o(421)))}else Rs(ge)?(f.flags|=128,f.child=d.child,f=Em.bind(null,d),ri(ge,f),f=null):(A=T.treeContext,Je&&(Or=el(ge),oi=f,Kn=!0,$i=null,al=!1,A!==null&&(Yi[Di++]=$s,Yi[Di++]=Qs,Yi[Di++]=la,$s=A.id,Qs=A.overflow,la=f)),f=fs(f,f.pendingProps.children),f.flags|=4096);return f}return L?(B=pd(d,f,B.children,B.fallback,A),L=f.child,T=d.child.memoizedState,L.memoizedState=T===null?Aa(A):{baseLanes:T.baseLanes|A,cachePool:null},L.childLanes=d.childLanes&~A,f.memoizedState=_c,B):(A=Cc(d,f,B.children,A),f.memoizedState=null,A)}return L?(B=pd(d,f,B.children,B.fallback,A),L=f.child,T=d.child.memoizedState,L.memoizedState=T===null?Aa(A):{baseLanes:T.baseLanes|A,cachePool:null},L.childLanes=d.childLanes&~A,f.memoizedState=_c,B):(A=Cc(d,f,B.children,A),f.memoizedState=null,A)}function fs(d,f){return f=kc({mode:"visible",children:f},d.mode,0,null),f.return=d,d.child=f}function Cc(d,f,A,B){var T=d.child;return d=T.sibling,A=fo(T,{mode:"visible",children:A}),(f.mode&1)===0&&(A.lanes=B),A.return=f,A.sibling=null,d!==null&&(B=f.deletions,B===null?(f.deletions=[d],f.flags|=16):B.push(d)),f.child=A}function pd(d,f,A,B,T){var L=f.mode;d=d.child;var Q=d.sibling,ge={mode:"hidden",children:A};return(L&1)===0&&f.child!==d?(A=f.child,A.childLanes=0,A.pendingProps=ge,f.deletions=null):(A=fo(d,ge),A.subtreeFlags=d.subtreeFlags&14680064),Q!==null?B=fo(Q,B):(B=Da(B,L,T,null),B.flags|=2),B.return=f,A.return=f,A.sibling=B,f.child=A,B}function wc(d,f,A,B){return B!==null&&$u(B),Zs(f,d.child,null,A),d=fs(f,f.pendingProps.children),d.flags|=2,f.memoizedState=null,d}function gm(d,f,A){d.lanes|=f;var B=d.alternate;B!==null&&(B.lanes|=f),aa(d.return,f,A)}function Fs(d,f,A,B,T){var L=d.memoizedState;L===null?d.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:B,tail:A,tailMode:T}:(L.isBackwards=f,L.rendering=null,L.renderingStartTime=0,L.last=B,L.tail=A,L.tailMode=T)}function Ea(d,f,A){var B=f.pendingProps,T=B.revealOrder,L=B.tail;if(rr(d,f,B.children,A),B=Zn.current,(B&2)!==0)B=B&1|2,f.flags|=128;else{if(d!==null&&(d.flags&128)!==0)e:for(d=f.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&gm(d,A,f);else if(d.tag===19)gm(d,A,f);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===f)break e;for(;d.sibling===null;){if(d.return===null||d.return===f)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}B&=1}if(ut(Zn,B),(f.mode&1)===0)f.memoizedState=null;else switch(T){case"forwards":for(A=f.child,T=null;A!==null;)d=A.alternate,d!==null&&Zu(d)===null&&(T=A),A=A.sibling;A=T,A===null?(T=f.child,f.child=null):(T=A.sibling,A.sibling=null),Fs(f,!1,T,A,L);break;case"backwards":for(A=null,T=f.child,f.child=null;T!==null;){if(d=T.alternate,d!==null&&Zu(d)===null){f.child=T;break}d=T.sibling,T.sibling=A,A=T,T=d}Fs(f,!0,A,null,L);break;case"together":Fs(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function xi(d,f,A){if(d!==null&&(f.dependencies=d.dependencies),ks|=f.lanes,(A&f.childLanes)===0)return null;if(d!==null&&f.child!==d.child)throw Error(o(153));if(f.child!==null){for(d=f.child,A=fo(d,d.pendingProps),f.child=A,A.return=f;d.sibling!==null;)d=d.sibling,A=A.sibling=fo(d,d.pendingProps),A.return=f;A.sibling=null}return f.child}function md(d,f,A){switch(f.tag){case 3:xc(f),ll();break;case 5:dm(f);break;case 1:Nn(f.type)&&nn(f);break;case 4:Qu(f,f.stateNode.containerInfo);break;case 10:oa(f,f.type._context,f.memoizedProps.value);break;case 13:var B=f.memoizedState;if(B!==null)return B.dehydrated!==null?(ut(Zn,Zn.current&1),f.flags|=128,null):(A&f.child.childLanes)!==0?uf(d,f,A):(ut(Zn,Zn.current&1),d=xi(d,f,A),d!==null?d.sibling:null);ut(Zn,Zn.current&1);break;case 19:if(B=(A&f.childLanes)!==0,(d.flags&128)!==0){if(B)return Ea(d,f,A);f.flags|=128}var T=f.memoizedState;if(T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),ut(Zn,Zn.current),B)break;return null;case 22:case 23:return f.lanes=0,Ur(d,f,A)}return xi(d,f,A)}function gd(d,f){switch(Xh(f),f.tag){case 1:return Nn(f.type)&&vn(),d=f.flags,d&65536?(f.flags=d&-65537|128,f):null;case 3:return hl(),dt(Jt),dt(Wt),ha(),d=f.flags,(d&65536)!==0&&(d&128)===0?(f.flags=d&-65537|128,f):null;case 5:return Yh(f),null;case 13:if(dt(Zn),d=f.memoizedState,d!==null&&d.dehydrated!==null){if(f.alternate===null)throw Error(o(340));ll()}return d=f.flags,d&65536?(f.flags=d&-65537|128,f):null;case 19:return dt(Zn),null;case 4:return hl(),null;case 10:return uc(f.type._context),null;case 22:case 23:return Ic(),null;case 24:return null;default:return null}}var li=!1,Dr=!1,xa=typeof WeakSet=="function"?WeakSet:Set,lt=null;function Qi(d,f){var A=d.ref;if(A!==null)if(typeof A=="function")try{A(null)}catch(B){ui(d,f,B)}else A.current=null}function so(d,f,A){try{A()}catch(B){ui(d,f,B)}}var df=!1;function hf(d,f){for(ce(d.containerInfo),lt=f;lt!==null;)if(d=lt,f=d.child,(d.subtreeFlags&1028)!==0&&f!==null)f.return=d,lt=f;else for(;lt!==null;){d=lt;try{var A=d.alternate;if((d.flags&1024)!==0)switch(d.tag){case 0:case 11:case 15:break;case 1:if(A!==null){var B=A.memoizedProps,T=A.memoizedState,L=d.stateNode,Q=L.getSnapshotBeforeUpdate(d.elementType===d.type?B:yi(d.type,B),T);L.__reactInternalSnapshotBeforeUpdate=Q}break;case 3:xt&&ot(d.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(ge){ui(d,d.return,ge)}if(f=d.sibling,f!==null){f.return=d.return,lt=f;break}lt=d.return}return A=df,df=!1,A}function oo(d,f,A){var B=f.updateQueue;if(B=B!==null?B.lastEffect:null,B!==null){var T=B=B.next;do{if((T.tag&d)===d){var L=T.destroy;T.destroy=void 0,L!==void 0&&so(f,A,L)}T=T.next}while(T!==B)}}function Hr(d,f){if(f=f.updateQueue,f=f!==null?f.lastEffect:null,f!==null){var A=f=f.next;do{if((A.tag&d)===d){var B=A.create;A.destroy=B()}A=A.next}while(A!==f)}}function ci(d){var f=d.ref;if(f!==null){var A=d.stateNode;switch(d.tag){case 5:d=pe(A);break;default:d=A}typeof f=="function"?f(d):f.current=d}}function Vn(d,f,A){if(Ls&&typeof Ls.onCommitFiberUnmount=="function")try{Ls.onCommitFiberUnmount(oc,f)}catch{}switch(f.tag){case 0:case 11:case 14:case 15:if(d=f.updateQueue,d!==null&&(d=d.lastEffect,d!==null)){var B=d=d.next;do{var T=B,L=T.destroy;T=T.tag,L!==void 0&&((T&2)!==0||(T&4)!==0)&&so(f,A,L),B=B.next}while(B!==d)}break;case 1:if(Qi(f,A),d=f.stateNode,typeof d.componentWillUnmount=="function")try{d.props=f.memoizedProps,d.state=f.memoizedState,d.componentWillUnmount()}catch(Q){ui(f,A,Q)}break;case 5:Qi(f,A);break;case 4:xt?mf(d,f,A):se&&se&&(f=f.stateNode.containerInfo,A=Ne(f),tn(f,A))}}function Zi(d,f,A){for(var B=f;;)if(Vn(d,B,A),B.child===null||xt&&B.tag===4){if(B===f)break;for(;B.sibling===null;){if(B.return===null||B.return===f)return;B=B.return}B.sibling.return=B.return,B=B.sibling}else B.child.return=B,B=B.child}function ff(d){var f=d.alternate;f!==null&&(d.alternate=null,ff(f)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(f=d.stateNode,f!==null&&bt(f)),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}function pf(d){return d.tag===5||d.tag===3||d.tag===4}function vd(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||pf(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function yd(d){if(xt){e:{for(var f=d.return;f!==null;){if(pf(f))break e;f=f.return}throw Error(o(160))}var A=f;switch(A.tag){case 5:f=A.stateNode,A.flags&32&&(Me(f),A.flags&=-33),A=vd(d),Al(d,A,f);break;case 3:case 4:f=A.stateNode.containerInfo,A=vd(d),Ad(d,A,f);break;default:throw Error(o(161))}}}function Ad(d,f,A){var B=d.tag;if(B===5||B===6)d=d.stateNode,f?Ge(A,d,f):Ct(A,d);else if(B!==4&&(d=d.child,d!==null))for(Ad(d,f,A),d=d.sibling;d!==null;)Ad(d,f,A),d=d.sibling}function Al(d,f,A){var B=d.tag;if(B===5||B===6)d=d.stateNode,f?rn(A,d,f):Ye(A,d);else if(B!==4&&(d=d.child,d!==null))for(Al(d,f,A),d=d.sibling;d!==null;)Al(d,f,A),d=d.sibling}function mf(d,f,A){for(var B=f,T=!1,L,Q;;){if(!T){T=B.return;e:for(;;){if(T===null)throw Error(o(160));switch(L=T.stateNode,T.tag){case 5:Q=!1;break e;case 3:L=L.containerInfo,Q=!0;break e;case 4:L=L.containerInfo,Q=!0;break e}T=T.return}T=!0}if(B.tag===5||B.tag===6)Zi(d,B,A),Q?ae(L,B.stateNode):gn(L,B.stateNode);else if(B.tag===18)Q?ie(L,B.stateNode):oe(L,B.stateNode);else if(B.tag===4){if(B.child!==null){L=B.stateNode.containerInfo,Q=!0,B.child.return=B,B=B.child;continue}}else if(Vn(d,B,A),B.child!==null){B.child.return=B,B=B.child;continue}if(B===f)break;for(;B.sibling===null;){if(B.return===null||B.return===f)return;B=B.return,B.tag===4&&(T=!1)}B.sibling.return=B.return,B=B.sibling}}function Uo(d,f){if(xt){switch(f.tag){case 0:case 11:case 14:case 15:oo(3,f,f.return),Hr(3,f),oo(5,f,f.return);return;case 1:return;case 5:var A=f.stateNode;if(A!=null){var B=f.memoizedProps;d=d!==null?d.memoizedProps:B;var T=f.type,L=f.updateQueue;f.updateQueue=null,L!==null&&Ut(A,L,T,d,B,f)}return;case 6:if(f.stateNode===null)throw Error(o(162));A=f.memoizedProps,nt(f.stateNode,d!==null?d.memoizedProps:A,A);return;case 3:Je&&d!==null&&d.memoizedState.isDehydrated&&q(f.stateNode.containerInfo);return;case 12:return;case 13:El(f);return;case 19:El(f);return;case 17:return}throw Error(o(163))}switch(f.tag){case 0:case 11:case 14:case 15:oo(3,f,f.return),Hr(3,f),oo(5,f,f.return);return;case 12:return;case 13:El(f);return;case 19:El(f);return;case 3:Je&&d!==null&&d.memoizedState.isDehydrated&&q(f.stateNode.containerInfo);break;case 22:case 23:return}e:if(se){switch(f.tag){case 1:case 5:case 6:break e;case 3:case 4:f=f.stateNode,tn(f.containerInfo,f.pendingChildren);break e}throw Error(o(163))}}function El(d){var f=d.updateQueue;if(f!==null){d.updateQueue=null;var A=d.stateNode;A===null&&(A=d.stateNode=new xa),f.forEach(function(B){var T=xm.bind(null,d,B);A.has(B)||(A.add(B),B.then(T,T))})}}function c0(d,f){for(lt=f;lt!==null;){f=lt;var A=f.deletions;if(A!==null)for(var B=0;B<A.length;B++){var T=A[B];try{var L=d;xt?mf(L,T,f):Zi(L,T,f);var Q=T.alternate;Q!==null&&(Q.return=null),T.return=null}catch(Rt){ui(T,f,Rt)}}if(A=f.child,(f.subtreeFlags&12854)!==0&&A!==null)A.return=f,lt=A;else for(;lt!==null;){f=lt;try{var ge=f.flags;if(ge&32&&xt&&Me(f.stateNode),ge&512){var Le=f.alternate;if(Le!==null){var st=Le.ref;st!==null&&(typeof st=="function"?st(null):st.current=null)}}if(ge&8192)switch(f.tag){case 13:if(f.memoizedState!==null){var wt=f.alternate;(wt===null||wt.memoizedState===null)&&(Dc=xr())}break;case 22:var Zt=f.memoizedState!==null,Ot=f.alternate,ln=Ot!==null&&Ot.memoizedState!==null;if(A=f,xt){e:if(B=A,T=Zt,L=null,xt)for(var vt=B;;){if(vt.tag===5){if(L===null){L=vt;var jr=vt.stateNode;T?He(jr):ke(vt.stateNode,vt.memoizedProps)}}else if(vt.tag===6){if(L===null){var Ui=vt.stateNode;T?We(Ui):ue(Ui,vt.memoizedProps)}}else if((vt.tag!==22&&vt.tag!==23||vt.memoizedState===null||vt===B)&&vt.child!==null){vt.child.return=vt,vt=vt.child;continue}if(vt===B)break;for(;vt.sibling===null;){if(vt.return===null||vt.return===B)break e;L===vt&&(L=null),vt=vt.return}L===vt&&(L=null),vt.sibling.return=vt.return,vt=vt.sibling}}if(Zt&&!ln&&(A.mode&1)!==0){lt=A;for(var we=A.child;we!==null;){for(A=lt=we;lt!==null;){B=lt;var ye=B.child;switch(B.tag){case 0:case 11:case 14:case 15:oo(4,B,B.return);break;case 1:Qi(B,B.return);var Re=B.stateNode;if(typeof Re.componentWillUnmount=="function"){var mt=B.return;try{Re.props=B.memoizedProps,Re.state=B.memoizedState,Re.componentWillUnmount()}catch(Rt){ui(B,mt,Rt)}}break;case 5:Qi(B,B.return);break;case 22:if(B.memoizedState!==null){vf(A);continue}}ye!==null?(ye.return=B,lt=ye):vf(A)}we=we.sibling}}}switch(ge&4102){case 2:yd(f),f.flags&=-3;break;case 6:yd(f),f.flags&=-3,Uo(f.alternate,f);break;case 4096:f.flags&=-4097;break;case 4100:f.flags&=-4097,Uo(f.alternate,f);break;case 4:Uo(f.alternate,f)}}catch(Rt){ui(f,f.return,Rt)}if(A=f.sibling,A!==null){A.return=f.return,lt=A;break}lt=f.return}}}function Sc(d,f,A){lt=d,Bc(d)}function Bc(d,f,A){for(var B=(d.mode&1)!==0;lt!==null;){var T=lt,L=T.child;if(T.tag===22&&B){var Q=T.memoizedState!==null||li;if(!Q){var ge=T.alternate,Le=ge!==null&&ge.memoizedState!==null||Dr;ge=li;var st=Dr;if(li=Q,(Dr=Le)&&!st)for(lt=T;lt!==null;)Q=lt,Le=Q.child,Q.tag===22&&Q.memoizedState!==null?_a(T):Le!==null?(Le.return=Q,lt=Le):_a(T);for(;L!==null;)lt=L,Bc(L),L=L.sibling;lt=T,li=ge,Dr=st}gf(d)}else(T.subtreeFlags&8772)!==0&&L!==null?(L.return=T,lt=L):gf(d)}}function gf(d){for(;lt!==null;){var f=lt;if((f.flags&8772)!==0){var A=f.alternate;try{if((f.flags&8772)!==0)switch(f.tag){case 0:case 11:case 15:Dr||Hr(5,f);break;case 1:var B=f.stateNode;if(f.flags&4&&!Dr)if(A===null)B.componentDidMount();else{var T=f.elementType===f.type?A.memoizedProps:yi(f.type,A.memoizedProps);B.componentDidUpdate(T,A.memoizedState,B.__reactInternalSnapshotBeforeUpdate)}var L=f.updateQueue;L!==null&&rm(f,L,B);break;case 3:var Q=f.updateQueue;if(Q!==null){if(A=null,f.child!==null)switch(f.child.tag){case 5:A=pe(f.child.stateNode);break;case 1:A=f.child.stateNode}rm(f,Q,A)}break;case 5:var ge=f.stateNode;A===null&&f.flags&4&&ct(ge,f.type,f.memoizedProps,f);break;case 6:break;case 4:break;case 12:break;case 13:if(Je&&f.memoizedState===null){var Le=f.alternate;if(Le!==null){var st=Le.memoizedState;if(st!==null){var wt=st.dehydrated;wt!==null&&$(wt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Dr||f.flags&512&&ci(f)}catch(Zt){ui(f,f.return,Zt)}}if(f===d){lt=null;break}if(A=f.sibling,A!==null){A.return=f.return,lt=A;break}lt=f.return}}function vf(d){for(;lt!==null;){var f=lt;if(f===d){lt=null;break}var A=f.sibling;if(A!==null){A.return=f.return,lt=A;break}lt=f.return}}function _a(d){for(;lt!==null;){var f=lt;try{switch(f.tag){case 0:case 11:case 15:var A=f.return;try{Hr(4,f)}catch(Le){ui(f,A,Le)}break;case 1:var B=f.stateNode;if(typeof B.componentDidMount=="function"){var T=f.return;try{B.componentDidMount()}catch(Le){ui(f,T,Le)}}var L=f.return;try{ci(f)}catch(Le){ui(f,L,Le)}break;case 5:var Q=f.return;try{ci(f)}catch(Le){ui(f,Q,Le)}}}catch(Le){ui(f,f.return,Le)}if(f===d){lt=null;break}var ge=f.sibling;if(ge!==null){ge.return=f.return,lt=ge;break}lt=f.return}}var bc=0,Ca=1,wa=2,ao=3,xl=4;if(typeof Symbol=="function"&&Symbol.for){var Sa=Symbol.for;bc=Sa("selector.component"),Ca=Sa("selector.has_pseudo_class"),wa=Sa("selector.role"),ao=Sa("selector.test_id"),xl=Sa("selector.text")}function Mc(d){var f=Fe(d);if(f!=null){if(typeof f.memoizedProps["data-testname"]!="string")throw Error(o(364));return f}if(d=Kt(d),d===null)throw Error(o(362));return d.stateNode.current}function Tc(d,f){switch(f.$$typeof){case bc:if(d.type===f.value)return!0;break;case Ca:e:{f=f.value,d=[d,0];for(var A=0;A<d.length;){var B=d[A++],T=d[A++],L=f[T];if(B.tag!==5||!W(B)){for(;L!=null&&Tc(B,L);)T++,L=f[T];if(T===f.length){f=!0;break e}else for(B=B.child;B!==null;)d.push(B,T),B=B.sibling}}f=!1}return f;case wa:if(d.tag===5&&Se(d.stateNode,f.value))return!0;break;case xl:if((d.tag===5||d.tag===6)&&(d=Z(d),d!==null&&0<=d.indexOf(f.value)))return!0;break;case ao:if(d.tag===5&&(d=d.memoizedProps["data-testname"],typeof d=="string"&&d.toLowerCase()===f.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Ho(d){switch(d.$$typeof){case bc:return"<"+(O(d.value)||"Unknown")+">";case Ca:return":has("+(Ho(d)||"")+")";case wa:return'[role="'+d.value+'"]';case xl:return'"'+d.value+'"';case ao:return'[data-testname="'+d.value+'"]';default:throw Error(o(365))}}function Ni(d,f){var A=[];d=[d,0];for(var B=0;B<d.length;){var T=d[B++],L=d[B++],Q=f[L];if(T.tag!==5||!W(T)){for(;Q!=null&&Tc(T,Q);)L++,Q=f[L];if(L===f.length)A.push(T);else for(T=T.child;T!==null;)d.push(T,L),T=T.sibling}}return A}function lo(d,f){if(!Lt)throw Error(o(363));d=Mc(d),d=Ni(d,f),f=[],d=Array.from(d);for(var A=0;A<d.length;){var B=d[A++];if(B.tag===5)W(B)||f.push(B.stateNode);else for(B=B.child;B!==null;)d.push(B),B=B.sibling}return f}var yf=Math.ceil,Rc=l.ReactCurrentDispatcher,ps=l.ReactCurrentOwner,Ln=l.ReactCurrentBatchConfig,an=0,ur=null,In=null,qn=0,$r=0,Ba=Vt(0),ir=0,_l=null,ks=0,Fi=0,ba=0,co=null,fr=null,Dc=0,zo=1/0;function Ma(){zo=xr()+500}var Cl=!1,Wn=null,ms=null,wl=!1,Os=null,Ta=0,Ra=0,uo=null,Gn=-1,sr=0;function Sn(){return(an&6)!==0?xr():Gn!==-1?Gn:Gn=xr()}function gs(d){return(d.mode&1)===0?1:(an&2)!==0&&qn!==0?qn&-qn:nm.transition!==null?(sr===0&&(d=tl,tl<<=1,(tl&4194240)===0&&(tl=64),sr=d),sr):(d=dn,d!==0?d:ze())}function Qr(d,f,A){if(50<Ra)throw Ra=0,uo=null,Error(o(185));var B=Go(d,f);return B===null?null:(na(B,f,A),((an&2)===0||B!==ur)&&(B===ur&&((an&2)===0&&(Fi|=f),ir===4&&Gr(B,qn)),_i(B,A),f===1&&an===0&&(d.mode&1)===0&&(Ma(),Hu&&Xi())),B)}function Go(d,f){d.lanes|=f;var A=d.alternate;for(A!==null&&(A.lanes|=f),A=d,d=d.return;d!==null;)d.childLanes|=f,A=d.alternate,A!==null&&(A.childLanes|=f),A=d,d=d.return;return A.tag===3?A.stateNode:null}function _i(d,f){var A=d.callbackNode;tm(d,f);var B=sc(d,d===ur?qn:0);if(B===0)A!==null&&rl(A),d.callbackNode=null,d.callbackPriority=0;else if(f=B&-B,d.callbackPriority!==f){if(A!=null&&rl(A),f===1)d.tag===0?Gu(ki.bind(null,d)):zu(ki.bind(null,d)),ft?yt(function(){an===0&&Xi()}):ra(ia,Xi),A=null;else{switch(Ks(B)){case 1:A=ia;break;case 4:A=o0;break;case 16:A=Ou;break;case 536870912:A=Uu;break;default:A=Ou}A=xd(A,zr.bind(null,d))}d.callbackPriority=f,d.callbackNode=A}}function zr(d,f){if(Gn=-1,sr=0,(an&6)!==0)throw Error(o(327));var A=d.callbackNode;if(Us()&&d.callbackNode!==A)return null;var B=sc(d,d===ur?qn:0);if(B===0)return null;if((B&30)!==0||(B&d.expiredLanes)!==0||f)f=Nc(d,B);else{f=B;var T=an;an|=2;var L=xf();(ur!==d||qn!==f)&&(Ma(),ho(d,f));do try{ym();break}catch(ge){Ef(d,ge)}while(!0);si(),Rc.current=L,an=T,In!==null?f=0:(ur=null,qn=0,f=ir)}if(f!==0){if(f===2&&(T=Nu(d),T!==0&&(B=T,f=Pc(d,T))),f===1)throw A=_l,ho(d,0),Gr(d,B),_i(d,xr()),A;if(f===6)Gr(d,B);else{if(T=d.current.alternate,(B&30)===0&&!Af(T)&&(f=Nc(d,B),f===2&&(L=Nu(d),L!==0&&(B=L,f=Pc(d,L))),f===1))throw A=_l,ho(d,0),Gr(d,B),_i(d,xr()),A;switch(d.finishedWork=T,d.finishedLanes=B,f){case 0:case 1:throw Error(o(345));case 2:vs(d,fr);break;case 3:if(Gr(d,B),(B&130023424)===B&&(f=Dc+500-xr(),10<f)){if(sc(d,0)!==0)break;if(T=d.suspendedLanes,(T&B)!==B){Sn(),d.pingedLanes|=d.suspendedLanes&T;break}d.timeoutHandle=tt(vs.bind(null,d,fr),f);break}vs(d,fr);break;case 4:if(Gr(d,B),(B&4194240)===B)break;for(f=d.eventTimes,T=-1;0<B;){var Q=31-Fn(B);L=1<<Q,Q=f[Q],Q>T&&(T=Q),B&=~L}if(B=T,B=xr()-B,B=(120>B?120:480>B?480:1080>B?1080:1920>B?1920:3e3>B?3e3:4320>B?4320:1960*yf(B/1960))-B,10<B){d.timeoutHandle=tt(vs.bind(null,d,fr),B);break}vs(d,fr);break;case 5:vs(d,fr);break;default:throw Error(o(329))}}}return _i(d,xr()),d.callbackNode===A?zr.bind(null,d):null}function Pc(d,f){var A=co;return d.current.memoizedState.isDehydrated&&(ho(d,f).flags|=256),d=Nc(d,f),d!==2&&(f=fr,fr=A,f!==null&&Lc(f)),d}function Lc(d){fr===null?fr=d:fr.push.apply(fr,d)}function Af(d){for(var f=d;;){if(f.flags&16384){var A=f.updateQueue;if(A!==null&&(A=A.stores,A!==null))for(var B=0;B<A.length;B++){var T=A[B],L=T.getSnapshot;T=T.value;try{if(!ii(L(),T))return!1}catch{return!1}}}if(A=f.child,f.subtreeFlags&16384&&A!==null)A.return=f,f=A;else{if(f===d)break;for(;f.sibling===null;){if(f.return===null||f.return===d)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Gr(d,f){for(f&=~ba,f&=~Fi,d.suspendedLanes|=f,d.pingedLanes&=~f,d=d.expirationTimes;0<f;){var A=31-Fn(f),B=1<<A;d[A]=-1,f&=~B}}function ki(d){if((an&6)!==0)throw Error(o(327));Us();var f=sc(d,0);if((f&1)===0)return _i(d,xr()),null;var A=Nc(d,f);if(d.tag!==0&&A===2){var B=Nu(d);B!==0&&(f=B,A=Pc(d,B))}if(A===1)throw A=_l,ho(d,0),Gr(d,f),_i(d,xr()),A;if(A===6)throw Error(o(345));return d.finishedWork=d.current.alternate,d.finishedLanes=f,vs(d,fr),_i(d,xr()),null}function Sl(d){Os!==null&&Os.tag===0&&(an&6)===0&&Us();var f=an;an|=1;var A=Ln.transition,B=dn;try{if(Ln.transition=null,dn=1,d)return d()}finally{dn=B,Ln.transition=A,an=f,(an&6)===0&&Xi()}}function Ic(){$r=Ba.current,dt(Ba)}function ho(d,f){d.finishedWork=null,d.finishedLanes=0;var A=d.timeoutHandle;if(A!==gt&&(d.timeoutHandle=gt,rt(A)),In!==null)for(A=In.return;A!==null;){var B=A;switch(Xh(B),B.tag){case 1:B=B.type.childContextTypes,B!=null&&vn();break;case 3:hl(),dt(Jt),dt(Wt),ha();break;case 5:Yh(B);break;case 4:hl();break;case 13:dt(Zn);break;case 19:dt(Zn);break;case 10:uc(B.type._context);break;case 22:case 23:Ic()}A=A.return}if(ur=d,In=d=fo(d.current,null),qn=$r=f,ir=0,_l=null,ba=Fi=ks=0,fr=co=null,Ki!==null){for(f=0;f<Ki.length;f++)if(A=Ki[f],B=A.interleaved,B!==null){A.interleaved=null;var T=B.next,L=A.pending;if(L!==null){var Q=L.next;L.next=T,B.next=Q}A.pending=B}Ki=null}return d}function Ef(d,f){do{var A=In;try{if(si(),hc.current=vl,ed){for(var B=er.memoizedState;B!==null;){var T=B.queue;T!==null&&(T.pending=null),B=B.next}ed=!1}if(fa=0,Mr=br=er=null,Is=!1,pa=0,ps.current=null,A===null||A.return===null){ir=1,_l=f,In=null;break}e:{var L=d,Q=A.return,ge=A,Le=f;if(f=qn,ge.flags|=32768,Le!==null&&typeof Le=="object"&&typeof Le.then=="function"){var st=Le,wt=ge,Zt=wt.tag;if((wt.mode&1)===0&&(Zt===0||Zt===11||Zt===15)){var Ot=wt.alternate;Ot?(wt.updateQueue=Ot.updateQueue,wt.memoizedState=Ot.memoizedState,wt.lanes=Ot.lanes):(wt.updateQueue=null,wt.memoizedState=null)}var ln=af(Q);if(ln!==null){ln.flags&=-257,ga(ln,Q,ge,L,f),ln.mode&1&&to(L,st,f),f=ln,Le=st;var vt=f.updateQueue;if(vt===null){var jr=new Set;jr.add(Le),f.updateQueue=jr}else vt.add(Le);break e}else{if((f&1)===0){to(L,st,f),Ed();break e}Le=Error(o(426))}}else if(Kn&&ge.mode&1){var Ui=af(Q);if(Ui!==null){(Ui.flags&65536)===0&&(Ui.flags|=256),ga(Ui,Q,ge,L,f),$u(Le);break e}}L=Le,ir!==4&&(ir=2),co===null?co=[L]:co.push(L),Le=of(Le,ge),ge=Q;do{switch(ge.tag){case 3:ge.flags|=65536,f&=-f,ge.lanes|=f;var we=mm(ge,Le,f);Wu(ge,we);break e;case 1:L=Le;var ye=ge.type,Re=ge.stateNode;if((ge.flags&128)===0&&(typeof ye.getDerivedStateFromError=="function"||Re!==null&&typeof Re.componentDidCatch=="function"&&(ms===null||!ms.has(Re)))){ge.flags|=65536,f&=-f,ge.lanes|=f;var mt=ud(ge,L,f);Wu(ge,mt);break e}}ge=ge.return}while(ge!==null)}Cf(A)}catch(Rt){f=Rt,In===A&&A!==null&&(In=A=A.return);continue}break}while(!0)}function xf(){var d=Rc.current;return Rc.current=vl,d===null?vl:d}function Ed(){(ir===0||ir===3||ir===2)&&(ir=4),ur===null||(ks&268435455)===0&&(Fi&268435455)===0||Gr(ur,qn)}function Nc(d,f){var A=an;an|=2;var B=xf();ur===d&&qn===f||ho(d,f);do try{vm();break}catch(T){Ef(d,T)}while(!0);if(si(),an=A,Rc.current=B,In!==null)throw Error(o(261));return ur=null,qn=0,ir}function vm(){for(;In!==null;)_f(In)}function ym(){for(;In!==null&&!Do();)_f(In)}function _f(d){var f=Bf(d.alternate,d,$r);d.memoizedProps=d.pendingProps,f===null?Cf(d):In=f,ps.current=null}function Cf(d){var f=d;do{var A=f.alternate;if(d=f.return,(f.flags&32768)===0){if(A=fd(A,f,$r),A!==null){In=A;return}}else{if(A=gd(A,f),A!==null){A.flags&=32767,In=A;return}if(d!==null)d.flags|=32768,d.subtreeFlags=0,d.deletions=null;else{ir=6,In=null;return}}if(f=f.sibling,f!==null){In=f;return}In=f=d}while(f!==null);ir===0&&(ir=5)}function vs(d,f){var A=dn,B=Ln.transition;try{Ln.transition=null,dn=1,Am(d,f,A)}finally{Ln.transition=B,dn=A}return null}function Am(d,f,A){do Us();while(Os!==null);if((an&6)!==0)throw Error(o(327));var B=d.finishedWork,T=d.finishedLanes;if(B===null)return null;if(d.finishedWork=null,d.finishedLanes=0,B===d.current)throw Error(o(177));d.callbackNode=null,d.callbackPriority=0;var L=B.lanes|B.childLanes;if(ku(d,L),d===ur&&(In=ur=null,qn=0),(B.subtreeFlags&2064)===0&&(B.flags&2064)===0||wl||(wl=!0,xd(Ou,function(){return Us(),null})),L=(B.flags&15990)!==0,(B.subtreeFlags&15990)!==0||L){L=Ln.transition,Ln.transition=null;var Q=dn;dn=1;var ge=an;an|=4,ps.current=null,hf(d,B),c0(d,B),ne(d.containerInfo),d.current=B,Sc(B),s0(),an=ge,dn=Q,Ln.transition=L}else d.current=B;if(wl&&(wl=!1,Os=d,Ta=T),L=d.pendingLanes,L===0&&(ms=null),ac(B.stateNode),_i(d,xr()),f!==null)for(A=d.onRecoverableError,B=0;B<f.length;B++)A(f[B]);if(Cl)throw Cl=!1,d=Wn,Wn=null,d;return(Ta&1)!==0&&d.tag!==0&&Us(),L=d.pendingLanes,(L&1)!==0?d===uo?Ra++:(Ra=0,uo=d):Ra=0,Xi(),null}function Us(){if(Os!==null){var d=Ks(Ta),f=Ln.transition,A=dn;try{if(Ln.transition=null,dn=16>d?16:d,Os===null)var B=!1;else{if(d=Os,Os=null,Ta=0,(an&6)!==0)throw Error(o(331));var T=an;for(an|=4,lt=d.current;lt!==null;){var L=lt,Q=L.child;if((lt.flags&16)!==0){var ge=L.deletions;if(ge!==null){for(var Le=0;Le<ge.length;Le++){var st=ge[Le];for(lt=st;lt!==null;){var wt=lt;switch(wt.tag){case 0:case 11:case 15:oo(8,wt,L)}var Zt=wt.child;if(Zt!==null)Zt.return=wt,lt=Zt;else for(;lt!==null;){wt=lt;var Ot=wt.sibling,ln=wt.return;if(ff(wt),wt===st){lt=null;break}if(Ot!==null){Ot.return=ln,lt=Ot;break}lt=ln}}}var vt=L.alternate;if(vt!==null){var jr=vt.child;if(jr!==null){vt.child=null;do{var Ui=jr.sibling;jr.sibling=null,jr=Ui}while(jr!==null)}}lt=L}}if((L.subtreeFlags&2064)!==0&&Q!==null)Q.return=L,lt=Q;else e:for(;lt!==null;){if(L=lt,(L.flags&2048)!==0)switch(L.tag){case 0:case 11:case 15:oo(9,L,L.return)}var we=L.sibling;if(we!==null){we.return=L.return,lt=we;break e}lt=L.return}}var ye=d.current;for(lt=ye;lt!==null;){Q=lt;var Re=Q.child;if((Q.subtreeFlags&2064)!==0&&Re!==null)Re.return=Q,lt=Re;else e:for(Q=ye;lt!==null;){if(ge=lt,(ge.flags&2048)!==0)try{switch(ge.tag){case 0:case 11:case 15:Hr(9,ge)}}catch(Rt){ui(ge,ge.return,Rt)}if(ge===Q){lt=null;break e}var mt=ge.sibling;if(mt!==null){mt.return=ge.return,lt=mt;break e}lt=ge.return}}if(an=T,Xi(),Ls&&typeof Ls.onPostCommitFiberRoot=="function")try{Ls.onPostCommitFiberRoot(oc,d)}catch{}B=!0}return B}finally{dn=A,Ln.transition=f}}return!1}function Fc(d,f,A){f=of(A,f),f=mm(d,f,1),Po(d,f),f=Sn(),d=Go(d,1),d!==null&&(na(d,1,f),_i(d,f))}function ui(d,f,A){if(d.tag===3)Fc(d,d,A);else for(;f!==null;){if(f.tag===3){Fc(f,d,A);break}else if(f.tag===1){var B=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof B.componentDidCatch=="function"&&(ms===null||!ms.has(B))){d=of(A,d),d=ud(f,d,1),Po(f,d),d=Sn(),f=Go(f,1),f!==null&&(na(f,1,d),_i(f,d));break}}f=f.return}}function wf(d,f,A){var B=d.pingCache;B!==null&&B.delete(f),f=Sn(),d.pingedLanes|=d.suspendedLanes&A,ur===d&&(qn&A)===A&&(ir===4||ir===3&&(qn&130023424)===qn&&500>xr()-Dc?ho(d,0):ba|=A),_i(d,f)}function Sf(d,f){f===0&&((d.mode&1)===0?f=1:(f=wn,wn<<=1,(wn&130023424)===0&&(wn=4194304)));var A=Sn();d=Go(d,f),d!==null&&(na(d,f,A),_i(d,A))}function Em(d){var f=d.memoizedState,A=0;f!==null&&(A=f.retryLane),Sf(d,A)}function xm(d,f){var A=0;switch(d.tag){case 13:var B=d.stateNode,T=d.memoizedState;T!==null&&(A=T.retryLane);break;case 19:B=d.stateNode;break;default:throw Error(o(314))}B!==null&&B.delete(f),Sf(d,A)}var Bf;Bf=function(d,f,A){if(d!==null)if(d.memoizedProps!==f.pendingProps||Jt.current)Rr=!0;else{if((d.lanes&A)===0&&(f.flags&128)===0)return Rr=!1,md(d,f,A);Rr=(d.flags&131072)!==0}else Rr=!1,Kn&&(f.flags&1048576)!==0&&am(f,qu,f.index);switch(f.lanes=0,f.tag){case 2:var B=f.type;d!==null&&(d.alternate=null,f.alternate=null,f.flags|=2),d=f.pendingProps;var T=jn(f,Wt.current);il(f,A),T=fl(null,f,B,d,T,A);var L=Fo();return f.flags|=1,typeof T=="object"&&T!==null&&typeof T.render=="function"&&T.$$typeof===void 0?(f.tag=1,f.memoizedState=null,f.updateQueue=null,Nn(B)?(L=!0,nn(f)):L=!1,f.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,sl(f),T.updater=Xu,f.stateNode=T,T._reactInternals=f,Wh(f,B,d,A),f=Yr(null,f,B,!0,L,A)):(f.tag=0,Kn&&L&&Jh(f),rr(null,f,T,A),f=f.child),f;case 16:B=f.elementType;e:{switch(d!==null&&(d.alternate=null,f.alternate=null,f.flags|=2),d=f.pendingProps,T=B._init,B=T(B._payload),f.type=B,T=f.tag=u0(B),d=yi(B,d),T){case 0:f=io(null,f,B,d,A);break e;case 1:f=ya(null,f,B,d,A);break e;case 11:f=zn(null,f,B,d,A);break e;case 14:f=kn(null,f,B,yi(B.type,d),A);break e}throw Error(o(306,B,""))}return f;case 0:return B=f.type,T=f.pendingProps,T=f.elementType===B?T:yi(B,T),io(d,f,B,T,A);case 1:return B=f.type,T=f.pendingProps,T=f.elementType===B?T:yi(B,T),ya(d,f,B,T,A);case 3:e:{if(xc(f),d===null)throw Error(o(387));B=f.pendingProps,L=f.memoizedState,T=L.element,Gh(d,f),Ju(f,B,null,A);var Q=f.memoizedState;if(B=Q.element,Je&&L.isDehydrated)if(L={element:B,isDehydrated:!1,cache:Q.cache,transitions:Q.transitions},f.updateQueue.baseState=L,f.memoizedState=L,f.flags&256){T=Error(o(423)),f=cf(d,f,B,A,T);break e}else if(B!==T){T=Error(o(424)),f=cf(d,f,B,A,T);break e}else for(Je&&(Or=ta(f.stateNode.containerInfo),oi=f,Kn=!0,$i=null,al=!1),A=um(f,null,B,A),f.child=A;A;)A.flags=A.flags&-3|4096,A=A.sibling;else{if(ll(),B===T){f=xi(d,f,A);break e}rr(d,f,B,A)}f=f.child}return f;case 5:return dm(f),d===null&&Io(f),B=f.type,T=f.pendingProps,L=d!==null?d.memoizedProps:null,Q=T.children,Ie(B,T)?Q=null:L!==null&&Ie(B,L)&&(f.flags|=32),ai(d,f),rr(d,f,Q,A),f.child;case 6:return d===null&&Io(f),null;case 13:return uf(d,f,A);case 4:return Qu(f,f.stateNode.containerInfo),B=f.pendingProps,d===null?f.child=Zs(f,null,B,A):rr(d,f,B,A),f.child;case 11:return B=f.type,T=f.pendingProps,T=f.elementType===B?T:yi(B,T),zn(d,f,B,T,A);case 7:return rr(d,f,f.pendingProps,A),f.child;case 8:return rr(d,f,f.pendingProps.children,A),f.child;case 12:return rr(d,f,f.pendingProps.children,A),f.child;case 10:e:{if(B=f.type._context,T=f.pendingProps,L=f.memoizedProps,Q=T.value,oa(f,B,Q),L!==null)if(ii(L.value,Q)){if(L.children===T.children&&!Jt.current){f=xi(d,f,A);break e}}else for(L=f.child,L!==null&&(L.return=f);L!==null;){var ge=L.dependencies;if(ge!==null){Q=L.child;for(var Le=ge.firstContext;Le!==null;){if(Le.context===B){if(L.tag===1){Le=Ys(-1,A&-A),Le.tag=2;var st=L.updateQueue;if(st!==null){st=st.shared;var wt=st.pending;wt===null?Le.next=Le:(Le.next=wt.next,wt.next=Le),st.pending=Le}}L.lanes|=A,Le=L.alternate,Le!==null&&(Le.lanes|=A),aa(L.return,A,f),ge.lanes|=A;break}Le=Le.next}}else if(L.tag===10)Q=L.type===f.type?null:L.child;else if(L.tag===18){if(Q=L.return,Q===null)throw Error(o(341));Q.lanes|=A,ge=Q.alternate,ge!==null&&(ge.lanes|=A),aa(Q,A,f),Q=L.sibling}else Q=L.child;if(Q!==null)Q.return=L;else for(Q=L;Q!==null;){if(Q===f){Q=null;break}if(L=Q.sibling,L!==null){L.return=Q.return,Q=L;break}Q=Q.return}L=Q}rr(d,f,T.children,A),f=f.child}return f;case 9:return T=f.type,B=f.pendingProps.children,il(f,A),T=Ai(T),B=B(T),f.flags|=1,rr(d,f,B,A),f.child;case 14:return B=f.type,T=yi(B,f.pendingProps),T=yi(B.type,T),kn(d,f,B,T,A);case 15:return ro(d,f,f.type,f.pendingProps,A);case 17:return B=f.type,T=f.pendingProps,T=f.elementType===B?T:yi(B,T),d!==null&&(d.alternate=null,f.alternate=null,f.flags|=2),f.tag=1,Nn(B)?(d=!0,nn(f)):d=!1,il(f,A),sm(f,B,T),Wh(f,B,T,A),Yr(null,f,B,!0,d,A);case 19:return Ea(d,f,A);case 22:return Ur(d,f,A)}throw Error(o(156,f.tag))};function xd(d,f){return ra(d,f)}function _m(d,f,A,B){this.tag=d,this.key=A,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=B,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oi(d,f,A,B){return new _m(d,f,A,B)}function _d(d){return d=d.prototype,!(!d||!d.isReactComponent)}function u0(d){if(typeof d=="function")return _d(d)?1:0;if(d!=null){if(d=d.$$typeof,d===w)return 11;if(d===M)return 14}return 2}function fo(d,f){var A=d.alternate;return A===null?(A=Oi(d.tag,f,d.key,d.mode),A.elementType=d.elementType,A.type=d.type,A.stateNode=d.stateNode,A.alternate=d,d.alternate=A):(A.pendingProps=f,A.type=d.type,A.flags=0,A.subtreeFlags=0,A.deletions=null),A.flags=d.flags&14680064,A.childLanes=d.childLanes,A.lanes=d.lanes,A.child=d.child,A.memoizedProps=d.memoizedProps,A.memoizedState=d.memoizedState,A.updateQueue=d.updateQueue,f=d.dependencies,A.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},A.sibling=d.sibling,A.index=d.index,A.ref=d.ref,A}function Cd(d,f,A,B,T,L){var Q=2;if(B=d,typeof d=="function")_d(d)&&(Q=1);else if(typeof d=="string")Q=5;else e:switch(d){case p:return Da(A.children,T,L,f);case m:Q=8,T|=8;break;case v:return d=Oi(12,A,f,T|2),d.elementType=v,d.lanes=L,d;case C:return d=Oi(13,A,f,T),d.elementType=C,d.lanes=L,d;case x:return d=Oi(19,A,f,T),d.elementType=x,d.lanes=L,d;case R:return kc(A,T,L,f);default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case y:Q=10;break e;case E:Q=9;break e;case w:Q=11;break e;case M:Q=14;break e;case S:Q=16,B=null;break e}throw Error(o(130,d==null?d:typeof d,""))}return f=Oi(Q,A,f,T),f.elementType=d,f.type=B,f.lanes=L,f}function Da(d,f,A,B){return d=Oi(7,d,B,f),d.lanes=A,d}function kc(d,f,A,B){return d=Oi(22,d,B,f),d.elementType=R,d.lanes=A,d.stateNode={},d}function wd(d,f,A){return d=Oi(6,d,null,f),d.lanes=A,d}function Sd(d,f,A){return f=Oi(4,d.children!==null?d.children:[],d.key,f),f.lanes=A,f.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},f}function Bd(d,f,A,B,T){this.tag=f,this.containerInfo=d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=gt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fu(0),this.expirationTimes=Fu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fu(0),this.identifierPrefix=B,this.onRecoverableError=T,Je&&(this.mutableSourceEagerHydrationData=null)}function Cm(d,f,A,B,T,L,Q,ge,Le){return d=new Bd(d,f,A,ge,Le),f===1?(f=1,L===!0&&(f|=8)):f=0,L=Oi(3,null,null,f),d.current=L,L.stateNode=d,L.memoizedState={element:B,isDehydrated:A,cache:null,transitions:null},sl(L),d}function wm(d){if(!d)return jt;d=d._reactInternals;e:{if(F(d)!==d||d.tag!==1)throw Error(o(170));var f=d;do{switch(f.tag){case 3:f=f.stateNode.context;break e;case 1:if(Nn(f.type)){f=f.stateNode.__reactInternalMemoizedMergedChildContext;break e}}f=f.return}while(f!==null);throw Error(o(171))}if(d.tag===1){var A=d.type;if(Nn(A))return Qn(d,A,f)}return f}function Sm(d){var f=d._reactInternals;if(f===void 0)throw typeof d.render=="function"?Error(o(188)):(d=Object.keys(d).join(","),Error(o(268,d)));return d=de(f),d===null?null:d.stateNode}function es(d,f){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var A=d.retryLane;d.retryLane=A!==0&&A<f?A:f}}function Oc(d,f){es(d,f),(d=d.alternate)&&es(d,f)}function bd(d){return d=de(d),d===null?null:d.stateNode}function Bm(){return null}return t.attemptContinuousHydration=function(d){if(d.tag===13){var f=Sn();Qr(d,134217728,f),Oc(d,134217728)}},t.attemptHydrationAtCurrentPriority=function(d){if(d.tag===13){var f=Sn(),A=gs(d);Qr(d,A,f),Oc(d,A)}},t.attemptSynchronousHydration=function(d){switch(d.tag){case 3:var f=d.stateNode;if(f.current.memoizedState.isDehydrated){var A=nl(f.pendingLanes);A!==0&&(Ps(f,A|1),_i(f,xr()),(an&6)===0&&(Ma(),Xi()))}break;case 13:var B=Sn();Sl(function(){return Qr(d,1,B)}),Oc(d,1)}},t.batchedUpdates=function(d,f){var A=an;an|=1;try{return d(f)}finally{an=A,an===0&&(Ma(),Hu&&Xi())}},t.createComponentSelector=function(d){return{$$typeof:bc,value:d}},t.createContainer=function(d,f,A,B,T,L,Q){return Cm(d,f,!1,null,A,B,T,L,Q)},t.createHasPseudoClassSelector=function(d){return{$$typeof:Ca,value:d}},t.createHydrationContainer=function(d,f,A,B,T,L,Q,ge,Le){return d=Cm(A,B,!0,d,T,L,Q,ge,Le),d.context=wm(null),A=d.current,B=Sn(),T=gs(A),L=Ys(B,T),L.callback=f??null,Po(A,L),d.current.lanes=T,na(d,T,B),_i(d,B),d},t.createPortal=function(d,f,A){var B=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:B==null?null:""+B,children:d,containerInfo:f,implementation:A}},t.createRoleSelector=function(d){return{$$typeof:wa,value:d}},t.createTestNameSelector=function(d){return{$$typeof:ao,value:d}},t.createTextSelector=function(d){return{$$typeof:xl,value:d}},t.deferredUpdates=function(d){var f=dn,A=Ln.transition;try{return Ln.transition=null,dn=16,d()}finally{dn=f,Ln.transition=A}},t.discreteUpdates=function(d,f,A,B,T){var L=dn,Q=Ln.transition;try{return Ln.transition=null,dn=1,d(f,A,B,T)}finally{dn=L,Ln.transition=Q,an===0&&Ma()}},t.findAllNodes=lo,t.findBoundingRects=function(d,f){if(!Lt)throw Error(o(363));f=lo(d,f),d=[];for(var A=0;A<f.length;A++)d.push(Mn(f[A]));for(f=d.length-1;0<f;f--){A=d[f];for(var B=A.x,T=B+A.width,L=A.y,Q=L+A.height,ge=f-1;0<=ge;ge--)if(f!==ge){var Le=d[ge],st=Le.x,wt=st+Le.width,Zt=Le.y,Ot=Zt+Le.height;if(B>=st&&L>=Zt&&T<=wt&&Q<=Ot){d.splice(f,1);break}else if(B!==st||A.width!==Le.width||Ot<L||Zt>Q){if(!(L!==Zt||A.height!==Le.height||wt<B||st>T)){st>B&&(Le.width+=st-B,Le.x=B),wt<T&&(Le.width=T-st),d.splice(f,1);break}}else{Zt>L&&(Le.height+=Zt-L,Le.y=L),Ot<Q&&(Le.height=Q-Zt),d.splice(f,1);break}}}return d},t.findHostInstance=Sm,t.findHostInstanceWithNoPortals=function(d){return d=ee(d),d=d!==null?Y(d):null,d===null?null:d.stateNode},t.findHostInstanceWithWarning=function(d){return Sm(d)},t.flushControlled=function(d){var f=an;an|=1;var A=Ln.transition,B=dn;try{Ln.transition=null,dn=1,d()}finally{dn=B,Ln.transition=A,an=f,an===0&&(Ma(),Xi())}},t.flushPassiveEffects=Us,t.flushSync=Sl,t.focusWithin=function(d,f){if(!Lt)throw Error(o(363));for(d=Mc(d),f=Ni(d,f),f=Array.from(f),d=0;d<f.length;){var A=f[d++];if(!W(A)){if(A.tag===5&&Ze(A.stateNode))return!0;for(A=A.child;A!==null;)f.push(A),A=A.sibling}}return!1},t.getCurrentUpdatePriority=function(){return dn},t.getFindAllNodesFailureDescription=function(d,f){if(!Lt)throw Error(o(363));var A=0,B=[];d=[Mc(d),0];for(var T=0;T<d.length;){var L=d[T++],Q=d[T++],ge=f[Q];if((L.tag!==5||!W(L))&&(Tc(L,ge)&&(B.push(Ho(ge)),Q++,Q>A&&(A=Q)),Q<f.length))for(L=L.child;L!==null;)d.push(L,Q),L=L.sibling}if(A<f.length){for(d=[];A<f.length;A++)d.push(Ho(f[A]));return`findAllNodes was able to match part of the selector:
  `+(B.join(" > ")+`

No matching component was found for:
  `)+d.join(" > ")}return null},t.getPublicRootInstance=function(d){if(d=d.current,!d.child)return null;switch(d.child.tag){case 5:return pe(d.child.stateNode);default:return d.child.stateNode}},t.injectIntoDevTools=function(d){if(d={bundleType:d.bundleType,version:d.version,rendererPackageName:d.rendererPackageName,rendererConfig:d.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:l.ReactCurrentDispatcher,findHostInstanceByFiber:bd,findFiberByHostInstance:d.findFiberByHostInstance||Bm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")d=!1;else{var f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(f.isDisabled||!f.supportsFiber)d=!0;else{try{oc=f.inject(d),Ls=f}catch{}d=!!f.checkDCE}}return d},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(d,f,A,B){if(!Lt)throw Error(o(363));d=lo(d,f);var T=Ve(d,A,B).disconnect;return{disconnect:function(){T()}}},t.registerMutableSourceForHydration=function(d,f){var A=f._getVersion;A=A(f._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[f,A]:d.mutableSourceEagerHydrationData.push(f,A)},t.runWithPriority=function(d,f){var A=dn;try{return dn=d,f()}finally{dn=A}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(d,f,A,B){var T=f.current,L=Sn(),Q=gs(T);return A=wm(A),f.context===null?f.context=A:f.pendingContext=A,f=Ys(L,Q),f.payload={element:d},B=B===void 0?null:B,B!==null&&(f.callback=B),Po(T,f),d=Qr(T,Q,L),d!==null&&Vu(d,T,Q),Q},t}),Nv}var mC;function n4(){return mC||(mC=1,Pv.exports=t4()),Pv.exports}var r4=n4();const i4=jC(r4);var gC=US();const s4=r=>typeof r=="object"&&typeof r.then=="function",gu=[];function HS(r,e,t=(n,i)=>n===i){if(r===e)return!0;if(!r||!e)return!1;const n=r.length;if(e.length!==n)return!1;for(let i=0;i<n;i++)if(!t(r[i],e[i]))return!1;return!0}function zS(r,e=null,t=!1,n={}){e===null&&(e=[r]);for(const s of gu)if(HS(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return n.lifespan&&n.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,n.lifespan)),s.response;if(!t)throw s.promise}const i={keys:e,equal:n.equal,remove:()=>{const s=gu.indexOf(i);s!==-1&&gu.splice(s,1)},promise:(s4(r)?r:r(...e)).then(s=>{i.response=s,n.lifespan&&n.lifespan>0&&(i.timeout=setTimeout(i.remove,n.lifespan))}).catch(s=>i.error=s)};if(gu.push(i),!t)throw i.promise}const o4=(r,e,t)=>zS(r,e,!1,t),a4=(r,e,t)=>void zS(r,e,!0,t),l4=r=>{if(r===void 0||r.length===0)gu.splice(0,gu.length);else{const e=gu.find(t=>HS(r,t.keys,t.equal));e&&e.remove()}},cE={},uE=r=>void Object.assign(cE,r);function c4(r,e){function t(p,{args:m=[],attach:v,...y},E){let w=`${p[0].toUpperCase()}${p.slice(1)}`,C;if(p==="primitive"){if(y.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const x=y.object;C=dh(x,{type:p,root:E,attach:v,primitive:!0})}else{const x=cE[w];if(!x)throw new Error(`R3F: ${w} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(m))throw new Error("R3F: The args prop must be an array!");C=dh(new x(...m),{type:p,root:E,attach:v,memoizedProps:{args:m}})}return C.__r3f.attach===void 0&&(C instanceof cn?C.__r3f.attach="geometry":C instanceof Fr&&(C.__r3f.attach="material")),w!=="inject"&&Ov(C,y),C}function n(p,m){let v=!1;if(m){var y,E;(y=m.__r3f)!=null&&y.attach?kv(p,m,m.__r3f.attach):m.isObject3D&&p.isObject3D&&(p.add(m),v=!0),v||(E=p.__r3f)==null||E.objects.push(m),m.__r3f||dh(m,{}),m.__r3f.parent=p,rA(m),hh(m)}}function i(p,m,v){let y=!1;if(m){var E,w;if((E=m.__r3f)!=null&&E.attach)kv(p,m,m.__r3f.attach);else if(m.isObject3D&&p.isObject3D){m.parent=p,m.dispatchEvent({type:"added"});const C=p.children.filter(M=>M!==m),x=C.indexOf(v);p.children=[...C.slice(0,x),m,...C.slice(x)],y=!0}y||(w=p.__r3f)==null||w.objects.push(m),m.__r3f||dh(m,{}),m.__r3f.parent=p,rA(m),hh(m)}}function s(p,m,v=!1){p&&[...p].forEach(y=>o(m,y,v))}function o(p,m,v){if(m){var y,E,w;if(m.__r3f&&(m.__r3f.parent=null),(y=p.__r3f)!=null&&y.objects&&(p.__r3f.objects=p.__r3f.objects.filter(R=>R!==m)),(E=m.__r3f)!=null&&E.attach)xC(p,m,m.__r3f.attach);else if(m.isObject3D&&p.isObject3D){var C;p.remove(m),(C=m.__r3f)!=null&&C.root&&g4(lg(m),m)}const M=(w=m.__r3f)==null?void 0:w.primitive,S=!M&&(v===void 0?m.dispose!==null:v);if(!M){var x;s((x=m.__r3f)==null?void 0:x.objects,m,S),s(m.children,m,S)}if(delete m.__r3f,S&&m.dispose&&m.type!=="Scene"){const R=()=>{try{m.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?gC.unstable_scheduleCallback(gC.unstable_IdlePriority,R):R()}hh(p)}}function l(p,m,v,y){var E;const w=(E=p.__r3f)==null?void 0:E.parent;if(!w)return;const C=t(m,v,p.__r3f.root);if(p.children){for(const x of p.children)x.__r3f&&n(C,x);p.children=p.children.filter(x=>!x.__r3f)}p.__r3f.objects.forEach(x=>n(C,x)),p.__r3f.objects=[],p.__r3f.autoRemovedBeforeAppend||o(w,p),C.parent&&(C.__r3f.autoRemovedBeforeAppend=!0),n(w,C),C.raycast&&C.__r3f.eventCount&&lg(C).getState().internal.interaction.push(C),[y,y.alternate].forEach(x=>{x!==null&&(x.stateNode=C,x.ref&&(typeof x.ref=="function"?x.ref(C):x.ref.current=C))})}const u=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:i4({createInstance:t,removeChild:o,appendChild:n,appendInitialChild:n,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(p,m)=>{if(!m)return;const v=p.getState().scene;v.__r3f&&(v.__r3f.root=p,n(v,m))},removeChildFromContainer:(p,m)=>{m&&o(p.getState().scene,m)},insertInContainerBefore:(p,m,v)=>{if(!m||!v)return;const y=p.getState().scene;y.__r3f&&i(y,m,v)},getRootHostContext:()=>null,getChildHostContext:p=>p,finalizeInitialChildren(p){var m;return!!((m=p==null?void 0:p.__r3f)!=null?m:{}).handlers},prepareUpdate(p,m,v,y){var E;if(((E=p==null?void 0:p.__r3f)!=null?E:{}).primitive&&y.object&&y.object!==p)return[!0];{const{args:C=[],children:x,...M}=y,{args:S=[],children:R,...N}=v;if(!Array.isArray(C))throw new Error("R3F: the args prop must be an array!");if(C.some((O,j)=>O!==S[j]))return[!0];const I=KS(p,M,N,!0);return I.changes.length?[!1,I]:null}},commitUpdate(p,[m,v],y,E,w,C){m?l(p,y,w,C):Ov(p,v)},commitMount(p,m,v,y){var E;const w=(E=p.__r3f)!=null?E:{};p.raycast&&w.handlers&&w.eventCount&&lg(p).getState().internal.interaction.push(p)},getPublicInstance:p=>p,prepareForCommit:()=>null,preparePortalMount:p=>dh(p.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(p){var m;const{attach:v,parent:y}=(m=p.__r3f)!=null?m:{};v&&y&&xC(y,p,v),p.isObject3D&&(p.visible=!1),hh(p)},unhideInstance(p,m){var v;const{attach:y,parent:E}=(v=p.__r3f)!=null?v:{};y&&E&&kv(E,p,y),(p.isObject3D&&m.visible==null||m.visible)&&(p.visible=!0),hh(p)},createTextInstance:u,hideTextInstance:u,unhideTextInstance:u,getCurrentEventPriority:()=>e?e():vh.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&tr.fun(performance.now)?performance.now:tr.fun(Date.now)?Date.now:()=>0,scheduleTimeout:tr.fun(setTimeout)?setTimeout:void 0,cancelTimeout:tr.fun(clearTimeout)?clearTimeout:void 0}),applyProps:Ov}}var vC,yC;const Fv=r=>"colorSpace"in r||"outputColorSpace"in r,GS=()=>{var r;return(r=cE.ColorManagement)!=null?r:null},jS=r=>r&&r.isOrthographicCamera,u4=r=>r&&r.hasOwnProperty("current"),Qp=typeof window<"u"&&((vC=window.document)!=null&&vC.createElement||((yC=window.navigator)==null?void 0:yC.product)==="ReactNative")?V.useLayoutEffect:V.useEffect;function VS(r){const e=V.useRef(r);return Qp(()=>void(e.current=r),[r]),e}function d4({set:r}){return Qp(()=>(r(new Promise(()=>null)),()=>r(!1)),[r]),null}class WS extends V.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}WS.getDerivedStateFromError=()=>({error:!0});const JS="__default",AC=new Map,h4=r=>r&&!!r.memoized&&!!r.changes;function XS(r){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(r)?Math.min(Math.max(r[0],t),r[1]):r}const Kf=r=>{var e;return(e=r.__r3f)==null?void 0:e.root.getState()};function lg(r){let e=r.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const tr={obj:r=>r===Object(r)&&!tr.arr(r)&&typeof r!="function",fun:r=>typeof r=="function",str:r=>typeof r=="string",num:r=>typeof r=="number",boo:r=>typeof r=="boolean",und:r=>r===void 0,arr:r=>Array.isArray(r),equ(r,e,{arrays:t="shallow",objects:n="reference",strict:i=!0}={}){if(typeof r!=typeof e||!!r!=!!e)return!1;if(tr.str(r)||tr.num(r))return r===e;const s=tr.obj(r);if(s&&n==="reference")return r===e;const o=tr.arr(r);if(o&&t==="reference")return r===e;if((o||s)&&r===e)return!0;let l;for(l in r)if(!(l in e))return!1;if(s&&t==="shallow"&&n==="shallow"){for(l in i?e:r)if(!tr.equ(r[l],e[l],{strict:i,objects:"reference"}))return!1}else for(l in i?e:r)if(r[l]!==e[l])return!1;if(tr.und(l)){if(o&&r.length===0&&e.length===0||s&&Object.keys(r).length===0&&Object.keys(e).length===0)return!0;if(r!==e)return!1}return!0}};function f4(r){const e={nodes:{},materials:{}};return r&&r.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function p4(r){r.dispose&&r.type!=="Scene"&&r.dispose();for(const e in r)e.dispose==null||e.dispose(),delete r[e]}function dh(r,e){const t=r;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},r}function nA(r,e){let t=r;if(e.includes("-")){const n=e.split("-"),i=n.pop();return t=n.reduce((s,o)=>s[o],r),{target:t,key:i}}else return{target:t,key:e}}const EC=/-\d+$/;function kv(r,e,t){if(tr.str(t)){if(EC.test(t)){const s=t.replace(EC,""),{target:o,key:l}=nA(r,s);Array.isArray(o[l])||(o[l]=[])}const{target:n,key:i}=nA(r,t);e.__r3f.previousAttach=n[i],n[i]=e}else e.__r3f.previousAttach=t(r,e)}function xC(r,e,t){var n,i;if(tr.str(t)){const{target:s,key:o}=nA(r,t),l=e.__r3f.previousAttach;l===void 0?delete s[o]:s[o]=l}else(n=e.__r3f)==null||n.previousAttach==null||n.previousAttach(r,e);(i=e.__r3f)==null||delete i.previousAttach}function KS(r,{children:e,key:t,ref:n,...i},{children:s,key:o,ref:l,...u}={},h=!1){var p;const m=(p=r==null?void 0:r.__r3f)!=null?p:{},v=Object.entries(i),y=[];if(h){const w=Object.keys(u);for(let C=0;C<w.length;C++)i.hasOwnProperty(w[C])||v.unshift([w[C],JS+"remove"])}v.forEach(([w,C])=>{var x;if((x=r.__r3f)!=null&&x.primitive&&w==="object"||tr.equ(C,u[w]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(w))return y.push([w,C,!0,[]]);let M=[];w.includes("-")&&(M=w.split("-")),y.push([w,C,!1,M]);for(const S in i){const R=i[S];S.startsWith(`${w}-`)&&y.push([S,R,!1,S.split("-")])}});const E={...i};return m.memoizedProps&&m.memoizedProps.args&&(E.args=m.memoizedProps.args),m.memoizedProps&&m.memoizedProps.attach&&(E.attach=m.memoizedProps.attach),{memoized:E,changes:y}}function Ov(r,e){var t,n,i;const s=(t=r.__r3f)!=null?t:{},o=s.root,l=(n=o==null||o.getState==null?void 0:o.getState())!=null?n:{},{memoized:u,changes:h}=h4(e)?e:KS(r,e),p=s.eventCount;r.__r3f&&(r.__r3f.memoizedProps=u);for(let v=0;v<h.length;v++){let[y,E,w,C]=h[v];if(Fv(r)){const R="srgb",N="srgb-linear";y==="encoding"?(y="colorSpace",E=E===3001?R:N):y==="outputEncoding"&&(y="outputColorSpace",E=E===3001?R:N)}let x=r,M=x[y];if(C.length&&(M=C.reduce((S,R)=>S[R],r),!(M&&M.set))){const[S,...R]=C.reverse();x=R.reverse().reduce((N,I)=>N[I],r),y=S}if(E===JS+"remove")if(x.constructor){let S=AC.get(x.constructor);S||(S=new x.constructor,AC.set(x.constructor,S)),E=S[y]}else E=0;if(w)E?s.handlers[y]=E:delete s.handlers[y],s.eventCount=Object.keys(s.handlers).length;else if(M&&M.set&&(M.copy||M instanceof Eu)){if(Array.isArray(E))M.fromArray?M.fromArray(E):M.set(...E);else if(M.copy&&E&&E.constructor&&M.constructor===E.constructor)M.copy(E);else if(E!==void 0){const S=M instanceof ht;!S&&M.setScalar?M.setScalar(E):M instanceof Eu&&E instanceof Eu?M.mask=E.mask:M.set(E),!GS()&&!l.linear&&S&&M.convertSRGBToLinear()}}else if(x[y]=E,x[y]instanceof ar&&x[y].format===ji&&x[y].type===Xo){const S=x[y];Fv(S)&&Fv(l.gl)?S.colorSpace=l.gl.outputColorSpace:S.encoding=l.gl.outputEncoding}hh(r)}if(s.parent&&r.raycast&&p!==s.eventCount){const v=lg(r).getState().internal,y=v.interaction.indexOf(r);y>-1&&v.interaction.splice(y,1),s.eventCount&&v.interaction.push(r)}return!(h.length===1&&h[0][0]==="onUpdate")&&h.length&&(i=r.__r3f)!=null&&i.parent&&rA(r),r}function hh(r){var e,t;const n=(e=r.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();n&&n.internal.frames===0&&n.invalidate()}function rA(r){r.onUpdate==null||r.onUpdate(r)}function qS(r,e){r.manual||(jS(r)?(r.left=e.width/-2,r.right=e.width/2,r.top=e.height/2,r.bottom=e.height/-2):r.aspect=e.width/e.height,r.updateProjectionMatrix(),r.updateMatrixWorld())}function J2(r){return(r.eventObject||r.object).uuid+"/"+r.index+r.instanceId}function m4(){var r;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return vh.DefaultEventPriority;switch((r=e.event)==null?void 0:r.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return vh.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return vh.ContinuousEventPriority;default:return vh.DefaultEventPriority}}function YS(r,e,t,n){const i=t.get(e);i&&(t.delete(e),t.size===0&&(r.delete(n),i.target.releasePointerCapture(n)))}function g4(r,e){const{internal:t}=r.getState();t.interaction=t.interaction.filter(n=>n!==e),t.initialHits=t.initialHits.filter(n=>n!==e),t.hovered.forEach((n,i)=>{(n.eventObject===e||n.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((n,i)=>{YS(t.capturedMap,e,n,i)})}function v4(r){function e(u){const{internal:h}=r.getState(),p=u.offsetX-h.initialClick[0],m=u.offsetY-h.initialClick[1];return Math.round(Math.sqrt(p*p+m*m))}function t(u){return u.filter(h=>["Move","Over","Enter","Out","Leave"].some(p=>{var m;return(m=h.__r3f)==null?void 0:m.handlers["onPointer"+p]}))}function n(u,h){const p=r.getState(),m=new Set,v=[],y=h?h(p.internal.interaction):p.internal.interaction;for(let x=0;x<y.length;x++){const M=Kf(y[x]);M&&(M.raycaster.camera=void 0)}p.previousRoot||p.events.compute==null||p.events.compute(u,p);function E(x){const M=Kf(x);if(!M||!M.events.enabled||M.raycaster.camera===null)return[];if(M.raycaster.camera===void 0){var S;M.events.compute==null||M.events.compute(u,M,(S=M.previousRoot)==null?void 0:S.getState()),M.raycaster.camera===void 0&&(M.raycaster.camera=null)}return M.raycaster.camera?M.raycaster.intersectObject(x,!0):[]}let w=y.flatMap(E).sort((x,M)=>{const S=Kf(x.object),R=Kf(M.object);return!S||!R?x.distance-M.distance:R.events.priority-S.events.priority||x.distance-M.distance}).filter(x=>{const M=J2(x);return m.has(M)?!1:(m.add(M),!0)});p.events.filter&&(w=p.events.filter(w,p));for(const x of w){let M=x.object;for(;M;){var C;(C=M.__r3f)!=null&&C.eventCount&&v.push({...x,eventObject:M}),M=M.parent}}if("pointerId"in u&&p.internal.capturedMap.has(u.pointerId))for(let x of p.internal.capturedMap.get(u.pointerId).values())m.has(J2(x.intersection))||v.push(x.intersection);return v}function i(u,h,p,m){const v=r.getState();if(u.length){const y={stopped:!1};for(const E of u){const w=Kf(E.object)||v,{raycaster:C,pointer:x,camera:M,internal:S}=w,R=new X(x.x,x.y,0).unproject(M),N=H=>{var ee,de;return(ee=(de=S.capturedMap.get(H))==null?void 0:de.has(E.eventObject))!=null?ee:!1},I=H=>{const ee={intersection:E,target:h.target};S.capturedMap.has(H)?S.capturedMap.get(H).set(E.eventObject,ee):S.capturedMap.set(H,new Map([[E.eventObject,ee]])),h.target.setPointerCapture(H)},O=H=>{const ee=S.capturedMap.get(H);ee&&YS(S.capturedMap,E.eventObject,ee,H)};let j={};for(let H in h){let ee=h[H];typeof ee!="function"&&(j[H]=ee)}let F={...E,...j,pointer:x,intersections:u,stopped:y.stopped,delta:p,unprojectedPoint:R,ray:C.ray,camera:M,stopPropagation(){const H="pointerId"in h&&S.capturedMap.get(h.pointerId);if((!H||H.has(E.eventObject))&&(F.stopped=y.stopped=!0,S.hovered.size&&Array.from(S.hovered.values()).find(ee=>ee.eventObject===E.eventObject))){const ee=u.slice(0,u.indexOf(E));s([...ee,E])}},target:{hasPointerCapture:N,setPointerCapture:I,releasePointerCapture:O},currentTarget:{hasPointerCapture:N,setPointerCapture:I,releasePointerCapture:O},nativeEvent:h};if(m(F),y.stopped===!0)break}}return u}function s(u){const{internal:h}=r.getState();for(const p of h.hovered.values())if(!u.length||!u.find(m=>m.object===p.object&&m.index===p.index&&m.instanceId===p.instanceId)){const v=p.eventObject.__r3f,y=v==null?void 0:v.handlers;if(h.hovered.delete(J2(p)),v!=null&&v.eventCount){const E={...p,intersections:u};y.onPointerOut==null||y.onPointerOut(E),y.onPointerLeave==null||y.onPointerLeave(E)}}}function o(u,h){for(let p=0;p<h.length;p++){const m=h[p].__r3f;m==null||m.handlers.onPointerMissed==null||m.handlers.onPointerMissed(u)}}function l(u){switch(u){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return h=>{const{internal:p}=r.getState();"pointerId"in h&&p.capturedMap.has(h.pointerId)&&requestAnimationFrame(()=>{p.capturedMap.has(h.pointerId)&&(p.capturedMap.delete(h.pointerId),s([]))})}}return function(p){const{onPointerMissed:m,internal:v}=r.getState();v.lastEvent.current=p;const y=u==="onPointerMove",E=u==="onClick"||u==="onContextMenu"||u==="onDoubleClick",C=n(p,y?t:void 0),x=E?e(p):0;u==="onPointerDown"&&(v.initialClick=[p.offsetX,p.offsetY],v.initialHits=C.map(S=>S.eventObject)),E&&!C.length&&x<=2&&(o(p,v.interaction),m&&m(p)),y&&s(C);function M(S){const R=S.eventObject,N=R.__r3f,I=N==null?void 0:N.handlers;if(N!=null&&N.eventCount)if(y){if(I.onPointerOver||I.onPointerEnter||I.onPointerOut||I.onPointerLeave){const O=J2(S),j=v.hovered.get(O);j?j.stopped&&S.stopPropagation():(v.hovered.set(O,S),I.onPointerOver==null||I.onPointerOver(S),I.onPointerEnter==null||I.onPointerEnter(S))}I.onPointerMove==null||I.onPointerMove(S)}else{const O=I[u];O?(!E||v.initialHits.includes(R))&&(o(p,v.interaction.filter(j=>!v.initialHits.includes(j))),O(S)):E&&v.initialHits.includes(R)&&o(p,v.interaction.filter(j=>!v.initialHits.includes(j)))}}i(C,p,x,M)}}return{handlePointer:l}}const y4=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],$S=r=>!!(r!=null&&r.render),dE=V.createContext(null),A4=(r,e)=>{const t=OS((l,u)=>{const h=new X,p=new X,m=new X;function v(x=u().camera,M=p,S=u().size){const{width:R,height:N,top:I,left:O}=S,j=R/N;M instanceof X?m.copy(M):m.set(...M);const F=x.getWorldPosition(h).distanceTo(m);if(jS(x))return{width:R/x.zoom,height:N/x.zoom,top:I,left:O,factor:1,distance:F,aspect:j};{const H=x.fov*Math.PI/180,ee=2*Math.tan(H/2)*F,de=ee*(R/N);return{width:de,height:ee,top:I,left:O,factor:R/de,distance:F,aspect:j}}}let y;const E=x=>l(M=>({performance:{...M.performance,current:x}})),w=new Ue;return{set:l,get:u,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(x=1)=>r(u(),x),advance:(x,M)=>e(x,M,u()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new iE,pointer:w,mouse:w,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const x=u();y&&clearTimeout(y),x.performance.current!==x.performance.min&&E(x.performance.min),y=setTimeout(()=>E(u().performance.max),x.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:v},setEvents:x=>l(M=>({...M,events:{...M.events,...x}})),setSize:(x,M,S,R,N)=>{const I=u().camera,O={width:x,height:M,top:R||0,left:N||0,updateStyle:S};l(j=>({size:O,viewport:{...j.viewport,...v(I,p,O)}}))},setDpr:x=>l(M=>{const S=XS(x);return{viewport:{...M.viewport,dpr:S,initialDpr:M.viewport.initialDpr||S}}}),setFrameloop:(x="always")=>{const M=u().clock;M.stop(),M.elapsedTime=0,x!=="never"&&(M.start(),M.elapsedTime=0),l(()=>({frameloop:x}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:V.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(x,M,S)=>{const R=u().internal;return R.priority=R.priority+(M>0?1:0),R.subscribers.push({ref:x,priority:M,store:S}),R.subscribers=R.subscribers.sort((N,I)=>N.priority-I.priority),()=>{const N=u().internal;N!=null&&N.subscribers&&(N.priority=N.priority-(M>0?1:0),N.subscribers=N.subscribers.filter(I=>I.ref!==x))}}}}}),n=t.getState();let i=n.size,s=n.viewport.dpr,o=n.camera;return t.subscribe(()=>{const{camera:l,size:u,viewport:h,gl:p,set:m}=t.getState();if(u.width!==i.width||u.height!==i.height||h.dpr!==s){var v;i=u,s=h.dpr,qS(l,u),p.setPixelRatio(h.dpr);const y=(v=u.updateStyle)!=null?v:typeof HTMLCanvasElement<"u"&&p.domElement instanceof HTMLCanvasElement;p.setSize(u.width,u.height,y)}l!==o&&(o=l,m(y=>({viewport:{...y.viewport,...y.viewport.getCurrentViewport(l)}})))}),t.subscribe(l=>r(l)),t};let X2,E4=new Set,x4=new Set,_4=new Set;function Uv(r,e){if(r.size)for(const{callback:t}of r.values())t(e)}function qf(r,e){switch(r){case"before":return Uv(E4,e);case"after":return Uv(x4,e);case"tail":return Uv(_4,e)}}let Hv,zv;function Gv(r,e,t){let n=e.clock.getDelta();for(e.frameloop==="never"&&typeof r=="number"&&(n=r-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=r),Hv=e.internal.subscribers,X2=0;X2<Hv.length;X2++)zv=Hv[X2],zv.ref.current(zv.store.getState(),n,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function C4(r){let e=!1,t,n,i;function s(u){n=requestAnimationFrame(s),e=!0,t=0,qf("before",u);for(const p of r.values()){var h;i=p.store.getState(),i.internal.active&&(i.frameloop==="always"||i.internal.frames>0)&&!((h=i.gl.xr)!=null&&h.isPresenting)&&(t+=Gv(u,i))}if(qf("after",u),t===0)return qf("tail",u),e=!1,cancelAnimationFrame(n)}function o(u,h=1){var p;if(!u)return r.forEach(m=>o(m.store.getState()),h);(p=u.gl.xr)!=null&&p.isPresenting||!u.internal.active||u.frameloop==="never"||(u.internal.frames=Math.min(60,u.internal.frames+h),e||(e=!0,requestAnimationFrame(s)))}function l(u,h=!0,p,m){if(h&&qf("before",u),p)Gv(u,p,m);else for(const v of r.values())Gv(u,v.store.getState());h&&qf("after",u)}return{loop:s,invalidate:o,advance:l}}function hE(){const r=V.useContext(dE);if(!r)throw new Error("R3F: Hooks can only be used within the Canvas component!");return r}function Jr(r=t=>t,e){return hE()(r,e)}function Zp(r,e=0){const t=hE(),n=t.getState().internal.subscribe,i=VS(r);return Qp(()=>n(i,e,t),[e,n,t]),null}const _C=new WeakMap;function QS(r,e){return function(t,...n){let i=_C.get(t);return i||(i=new t,_C.set(t,i)),r&&r(i),Promise.all(n.map(s=>new Promise((o,l)=>i.load(s,u=>{u.scene&&Object.assign(u,f4(u.scene)),o(u)},e,u=>l(new Error(`Could not load ${s}: ${u==null?void 0:u.message}`)))))).finally(()=>i.dispose==null?void 0:i.dispose())}}function Oh(r,e,t,n){const i=Array.isArray(e)?e:[e],s=o4(QS(t,n),[r,...i],{equal:tr.equ});return Array.isArray(e)?s:s[0]}Oh.preload=function(r,e,t){const n=Array.isArray(e)?e:[e];return a4(QS(t),[r,...n])};Oh.clear=function(r,e){const t=Array.isArray(e)?e:[e];return l4([r,...t])};const Th=new Map,{invalidate:CC,advance:wC}=C4(Th),{reconciler:Ip,applyProps:ih}=c4(Th,m4),sh={objects:"shallow",strict:!1},w4=(r,e)=>{const t=typeof r=="function"?r(e):r;return $S(t)?t:new NA({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...r})};function S4(r,e){const t=typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement;if(e){const{width:n,height:i,top:s,left:o,updateStyle:l=t}=e;return{width:n,height:i,top:s,left:o,updateStyle:l}}else if(typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement&&r.parentElement){const{width:n,height:i,top:s,left:o}=r.parentElement.getBoundingClientRect();return{width:n,height:i,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&r instanceof OffscreenCanvas)return{width:r.width,height:r.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function B4(r){const e=Th.get(r),t=e==null?void 0:e.fiber,n=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=n||A4(CC,wC),o=t||Ip.createContainer(s,vh.ConcurrentRoot,null,!1,null,"",i,null);e||Th.set(r,{fiber:o,store:s});let l,u=!1,h;return{configure(p={}){let{gl:m,size:v,scene:y,events:E,onCreated:w,shadows:C=!1,linear:x=!1,flat:M=!1,legacy:S=!1,orthographic:R=!1,frameloop:N="always",dpr:I=[1,2],performance:O,raycaster:j,camera:F,onPointerMissed:H}=p,ee=s.getState(),de=ee.gl;ee.gl||ee.set({gl:de=w4(m,r)});let ve=ee.raycaster;ve||ee.set({raycaster:ve=new lE});const{params:Y,...me}=j||{};if(tr.equ(me,ve,sh)||ih(ve,{...me}),tr.equ(Y,ve.params,sh)||ih(ve,{params:{...ve.params,...Y}}),!ee.camera||ee.camera===h&&!tr.equ(h,F,sh)){h=F;const K=F instanceof jp,xe=K?F:R?new Ka(0,0,0,0,.1,1e3):new Ar(75,0,.1,1e3);K||(xe.position.z=5,F&&ih(xe,F),!ee.camera&&!(F!=null&&F.rotation)&&xe.lookAt(0,0,0)),ee.set({camera:xe}),ve.camera=xe}if(!ee.scene){let K;y instanceof Mp?K=y:(K=new Mp,y&&ih(K,y)),ee.set({scene:dh(K)})}if(!ee.xr){var pe;const K=(Ie,Oe)=>{const tt=s.getState();tt.frameloop!=="never"&&wC(Ie,!0,tt,Oe)},xe=()=>{const Ie=s.getState();Ie.gl.xr.enabled=Ie.gl.xr.isPresenting,Ie.gl.xr.setAnimationLoop(Ie.gl.xr.isPresenting?K:null),Ie.gl.xr.isPresenting||CC(Ie)},De={connect(){const Ie=s.getState().gl;Ie.xr.addEventListener("sessionstart",xe),Ie.xr.addEventListener("sessionend",xe)},disconnect(){const Ie=s.getState().gl;Ie.xr.removeEventListener("sessionstart",xe),Ie.xr.removeEventListener("sessionend",xe)}};typeof((pe=de.xr)==null?void 0:pe.addEventListener)=="function"&&De.connect(),ee.set({xr:De})}if(de.shadowMap){const K=de.shadowMap.enabled,xe=de.shadowMap.type;if(de.shadowMap.enabled=!!C,tr.boo(C))de.shadowMap.type=rp;else if(tr.str(C)){var Ae;const De={basic:Fw,percentage:Tg,soft:rp,variance:So};de.shadowMap.type=(Ae=De[C])!=null?Ae:rp}else tr.obj(C)&&Object.assign(de.shadowMap,C);(K!==de.shadowMap.enabled||xe!==de.shadowMap.type)&&(de.shadowMap.needsUpdate=!0)}const te=GS();te&&("enabled"in te?te.enabled=!S:"legacyMode"in te&&(te.legacyMode=S)),ih(de,{outputEncoding:x?3e3:3001,toneMapping:M?Jo:mA}),ee.legacy!==S&&ee.set(()=>({legacy:S})),ee.linear!==x&&ee.set(()=>({linear:x})),ee.flat!==M&&ee.set(()=>({flat:M})),m&&!tr.fun(m)&&!$S(m)&&!tr.equ(m,de,sh)&&ih(de,m),E&&!ee.events.handlers&&ee.set({events:E(s)});const z=S4(r,v);return tr.equ(z,ee.size,sh)||ee.setSize(z.width,z.height,z.updateStyle,z.top,z.left),I&&ee.viewport.dpr!==XS(I)&&ee.setDpr(I),ee.frameloop!==N&&ee.setFrameloop(N),ee.onPointerMissed||ee.set({onPointerMissed:H}),O&&!tr.equ(O,ee.performance,sh)&&ee.set(K=>({performance:{...K.performance,...O}})),l=w,u=!0,this},render(p){return u||this.configure(),Ip.updateContainer(V.createElement(b4,{store:s,children:p,onCreated:l,rootElement:r}),o,null,()=>{}),s},unmount(){ZS(r)}}}function b4({store:r,children:e,onCreated:t,rootElement:n}){return Qp(()=>{const i=r.getState();i.set(s=>({internal:{...s.internal,active:!0}})),t&&t(i),r.getState().events.connected||i.events.connect==null||i.events.connect(n)},[]),V.createElement(dE.Provider,{value:r},e)}function ZS(r,e){const t=Th.get(r),n=t==null?void 0:t.fiber;if(n){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),Ip.updateContainer(null,n,null,()=>{i&&setTimeout(()=>{try{var s,o,l,u;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(l=i.gl)==null||l.forceContextLoss==null||l.forceContextLoss(),(u=i.gl)!=null&&u.xr&&i.xr.disconnect(),p4(i),Th.delete(r)}catch{}},500)})}}function M4(r,e,t){return V.createElement(T4,{key:e.uuid,children:r,container:e,state:t})}function T4({state:r={},children:e,container:t}){const{events:n,size:i,...s}=r,o=hE(),[l]=V.useState(()=>new lE),[u]=V.useState(()=>new Ue),h=V.useCallback((m,v)=>{const y={...m};Object.keys(m).forEach(w=>{(y4.includes(w)||m[w]!==v[w]&&v[w])&&delete y[w]});let E;if(v&&i){const w=v.camera;E=m.viewport.getCurrentViewport(w,new X,i),w!==m.camera&&qS(w,i)}return{...y,scene:t,raycaster:l,pointer:u,mouse:u,previousRoot:o,events:{...m.events,...v==null?void 0:v.events,...n},size:{...m.size,...i},viewport:{...m.viewport,...E},...s}},[r]),[p]=V.useState(()=>{const m=o.getState();return OS((y,E)=>({...m,scene:t,raycaster:l,pointer:u,mouse:u,previousRoot:o,events:{...m.events,...n},size:{...m.size,...i},...s,set:y,get:E,setEvents:w=>y(C=>({...C,events:{...C.events,...w}}))}))});return V.useEffect(()=>{const m=o.subscribe(v=>p.setState(y=>h(v,y)));return()=>{m(),p.destroy()}},[]),V.useEffect(()=>{p.setState(m=>h(o.getState(),m))},[h]),V.createElement(V.Fragment,null,Ip.createPortal(V.createElement(dE.Provider,{value:p},e),p,null))}Ip.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:V.version});function Ss(){return Ss=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Ss.apply(null,arguments)}function SC(r,e){let t;return(...n)=>{window.clearTimeout(t),t=window.setTimeout(()=>r(...n),e)}}function R4({debounce:r,scroll:e,polyfill:t,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const i=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=V.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=V.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),u=r?typeof r=="number"?r:r.scroll:null,h=r?typeof r=="number"?r:r.resize:null,p=V.useRef(!1);V.useEffect(()=>(p.current=!0,()=>void(p.current=!1)));const[m,v,y]=V.useMemo(()=>{const x=()=>{if(!l.current.element)return;const{left:M,top:S,width:R,height:N,bottom:I,right:O,x:j,y:F}=l.current.element.getBoundingClientRect(),H={left:M,top:S,width:R,height:N,bottom:I,right:O,x:j,y:F};l.current.element instanceof HTMLElement&&n&&(H.height=l.current.element.offsetHeight,H.width=l.current.element.offsetWidth),Object.freeze(H),p.current&&!I4(l.current.lastBounds,H)&&o(l.current.lastBounds=H)};return[x,h?SC(x,h):x,u?SC(x,u):x]},[o,n,u,h]);function E(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(x=>x.removeEventListener("scroll",y,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function w(){l.current.element&&(l.current.resizeObserver=new i(y),l.current.resizeObserver.observe(l.current.element),e&&l.current.scrollContainers&&l.current.scrollContainers.forEach(x=>x.addEventListener("scroll",y,{capture:!0,passive:!0})),l.current.orientationHandler=()=>{y()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}const C=x=>{!x||x===l.current.element||(E(),l.current.element=x,l.current.scrollContainers=eB(x),w())};return P4(y,!!e),D4(v),V.useEffect(()=>{E(),w()},[e,y,v]),V.useEffect(()=>E,[]),[C,s,m]}function D4(r){V.useEffect(()=>{const e=r;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[r])}function P4(r,e){V.useEffect(()=>{if(e){const t=r;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[r,e])}function eB(r){const e=[];if(!r||r===document.body)return e;const{overflow:t,overflowX:n,overflowY:i}=window.getComputedStyle(r);return[t,n,i].some(s=>s==="auto"||s==="scroll")&&e.push(r),[...e,...eB(r.parentElement)]}const L4=["x","y","top","bottom","left","right","width","height"],I4=(r,e)=>L4.every(t=>r[t]===e[t]);var N4=Object.defineProperty,F4=Object.defineProperties,k4=Object.getOwnPropertyDescriptors,BC=Object.getOwnPropertySymbols,O4=Object.prototype.hasOwnProperty,U4=Object.prototype.propertyIsEnumerable,bC=(r,e,t)=>e in r?N4(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,MC=(r,e)=>{for(var t in e||(e={}))O4.call(e,t)&&bC(r,t,e[t]);if(BC)for(var t of BC(e))U4.call(e,t)&&bC(r,t,e[t]);return r},H4=(r,e)=>F4(r,k4(e)),TC,RC;typeof window<"u"&&((TC=window.document)!=null&&TC.createElement||((RC=window.navigator)==null?void 0:RC.product)==="ReactNative")?V.useLayoutEffect:V.useEffect;function tB(r,e,t){if(!r)return;if(t(r)===!0)return r;let n=r.child;for(;n;){const i=tB(n,e,t);if(i)return i;n=n.sibling}}function nB(r){try{return Object.defineProperties(r,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return r}}const DC=console.error;console.error=function(){const r=[...arguments].join("");if(r!=null&&r.startsWith("Warning:")&&r.includes("useContext")){console.error=DC;return}return DC.apply(this,arguments)};const fE=nB(V.createContext(null));class rB extends V.Component{render(){return V.createElement(fE.Provider,{value:this._reactInternals},this.props.children)}}function z4(){const r=V.useContext(fE);if(r===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=V.useId();return V.useMemo(()=>{for(const n of[r,r==null?void 0:r.alternate]){if(!n)continue;const i=tB(n,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(i)return i}},[r,e])}function G4(){const r=z4(),[e]=V.useState(()=>new Map);e.clear();let t=r;for(;t;){if(t.type&&typeof t.type=="object"){const i=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;i&&i!==fE&&!e.has(i)&&e.set(i,V.useContext(nB(i)))}t=t.return}return e}function j4(){const r=G4();return V.useMemo(()=>Array.from(r.keys()).reduce((e,t)=>n=>V.createElement(e,null,V.createElement(t.Provider,H4(MC({},n),{value:r.get(t)}))),e=>V.createElement(rB,MC({},e))),[r])}const jv={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function V4(r){const{handlePointer:e}=v4(r);return{priority:1,enabled:!0,compute(t,n,i){n.pointer.set(t.offsetX/n.size.width*2-1,-(t.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(jv).reduce((t,n)=>({...t,[n]:e(n)}),{}),update:()=>{var t;const{events:n,internal:i}=r.getState();(t=i.lastEvent)!=null&&t.current&&n.handlers&&n.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var n;const{set:i,events:s}=r.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:t}})),Object.entries((n=s.handlers)!=null?n:[]).forEach(([o,l])=>{const[u,h]=jv[o];t.addEventListener(u,l,{passive:h})})},disconnect:()=>{const{set:t,events:n}=r.getState();if(n.connected){var i;Object.entries((i=n.handlers)!=null?i:[]).forEach(([s,o])=>{if(n&&n.connected instanceof HTMLElement){const[l]=jv[s];n.connected.removeEventListener(l,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const W4=V.forwardRef(function({children:e,fallback:t,resize:n,style:i,gl:s,events:o=V4,eventSource:l,eventPrefix:u,shadows:h,linear:p,flat:m,legacy:v,orthographic:y,frameloop:E,dpr:w,performance:C,raycaster:x,camera:M,scene:S,onPointerMissed:R,onCreated:N,...I},O){V.useMemo(()=>uE(qN),[]);const j=j4(),[F,H]=R4({scroll:!0,debounce:{scroll:50,resize:0},...n}),ee=V.useRef(null),de=V.useRef(null);V.useImperativeHandle(O,()=>ee.current);const ve=VS(R),[Y,me]=V.useState(!1),[pe,Ae]=V.useState(!1);if(Y)throw Y;if(pe)throw pe;const te=V.useRef(null);Qp(()=>{const ne=ee.current;H.width>0&&H.height>0&&ne&&(te.current||(te.current=B4(ne)),te.current.configure({gl:s,events:o,shadows:h,linear:p,flat:m,legacy:v,orthographic:y,frameloop:E,dpr:w,performance:C,raycaster:x,camera:M,scene:S,size:H,onPointerMissed:(...z)=>ve.current==null?void 0:ve.current(...z),onCreated:z=>{z.events.connect==null||z.events.connect(l?u4(l)?l.current:l:de.current),u&&z.setEvents({compute:(K,xe)=>{const De=K[u+"X"],Ie=K[u+"Y"];xe.pointer.set(De/xe.size.width*2-1,-(Ie/xe.size.height)*2+1),xe.raycaster.setFromCamera(xe.pointer,xe.camera)}}),N==null||N(z)}}),te.current.render(V.createElement(j,null,V.createElement(WS,{set:Ae},V.createElement(V.Suspense,{fallback:V.createElement(d4,{set:me})},e)))))}),V.useEffect(()=>{const ne=ee.current;if(ne)return()=>ZS(ne)},[]);const ce=l?"none":"auto";return V.createElement("div",Ss({ref:de,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:ce,...i}},I),V.createElement("div",{ref:F,style:{width:"100%",height:"100%"}},V.createElement("canvas",{ref:ee,style:{display:"block"}},t)))}),iB=V.forwardRef(function(e,t){return V.createElement(rB,null,V.createElement(W4,Ss({},e,{ref:t})))}),pE=parseInt(Ru.replace(/\D+/g,""));function PC(r,e){if(e===w1)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),r;if(e===gg||e===wA){let t=r.getIndex();if(t===null){const o=[],l=r.getAttribute("position");if(l!==void 0){for(let u=0;u<l.count;u++)o.push(u);r.setIndex(o),t=r.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),r}const n=t.count-2,i=[];if(t)if(e===gg)for(let o=1;o<=n;o++)i.push(t.getX(0)),i.push(t.getX(o)),i.push(t.getX(o+1));else for(let o=0;o<n;o++)o%2===0?(i.push(t.getX(o)),i.push(t.getX(o+1)),i.push(t.getX(o+2))):(i.push(t.getX(o+2)),i.push(t.getX(o+1)),i.push(t.getX(o)));i.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=r.clone();return s.setIndex(i),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),r}var Ws=Uint8Array,Wl=Uint16Array,iA=Uint32Array,sB=new Ws([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),oB=new Ws([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),J4=new Ws([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),aB=function(r,e){for(var t=new Wl(31),n=0;n<31;++n)t[n]=e+=1<<r[n-1];for(var i=new iA(t[30]),n=1;n<30;++n)for(var s=t[n];s<t[n+1];++s)i[s]=s-t[n]<<5|n;return[t,i]},lB=aB(sB,2),cB=lB[0],X4=lB[1];cB[28]=258,X4[258]=28;var K4=aB(oB,0),q4=K4[0],sA=new Wl(32768);for(var nr=0;nr<32768;++nr){var Hl=(nr&43690)>>>1|(nr&21845)<<1;Hl=(Hl&52428)>>>2|(Hl&13107)<<2,Hl=(Hl&61680)>>>4|(Hl&3855)<<4,sA[nr]=((Hl&65280)>>>8|(Hl&255)<<8)>>>1}var lp=(function(r,e,t){for(var n=r.length,i=0,s=new Wl(e);i<n;++i)++s[r[i]-1];var o=new Wl(e);for(i=0;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var l;if(t){l=new Wl(1<<e);var u=15-e;for(i=0;i<n;++i)if(r[i])for(var h=i<<4|r[i],p=e-r[i],m=o[r[i]-1]++<<p,v=m|(1<<p)-1;m<=v;++m)l[sA[m]>>>u]=h}else for(l=new Wl(n),i=0;i<n;++i)r[i]&&(l[i]=sA[o[r[i]-1]++]>>>15-r[i]);return l}),em=new Ws(288);for(var nr=0;nr<144;++nr)em[nr]=8;for(var nr=144;nr<256;++nr)em[nr]=9;for(var nr=256;nr<280;++nr)em[nr]=7;for(var nr=280;nr<288;++nr)em[nr]=8;var uB=new Ws(32);for(var nr=0;nr<32;++nr)uB[nr]=5;var Y4=lp(em,9,1),$4=lp(uB,5,1),Vv=function(r){for(var e=r[0],t=1;t<r.length;++t)r[t]>e&&(e=r[t]);return e},xo=function(r,e,t){var n=e/8|0;return(r[n]|r[n+1]<<8)>>(e&7)&t},Wv=function(r,e){var t=e/8|0;return(r[t]|r[t+1]<<8|r[t+2]<<16)>>(e&7)},Q4=function(r){return(r/8|0)+(r&7&&1)},Z4=function(r,e,t){(t==null||t>r.length)&&(t=r.length);var n=new(r instanceof Wl?Wl:r instanceof iA?iA:Ws)(t-e);return n.set(r.subarray(e,t)),n},eF=function(r,e,t){var n=r.length;if(!n||t&&!t.l&&n<5)return e||new Ws(0);var i=!e||t,s=!t||t.i;t||(t={}),e||(e=new Ws(n*3));var o=function(Oe){var tt=e.length;if(Oe>tt){var rt=new Ws(Math.max(tt*2,Oe));rt.set(e),e=rt}},l=t.f||0,u=t.p||0,h=t.b||0,p=t.l,m=t.d,v=t.m,y=t.n,E=n*8;do{if(!p){t.f=l=xo(r,u,1);var w=xo(r,u+1,3);if(u+=3,w)if(w==1)p=Y4,m=$4,v=9,y=5;else if(w==2){var S=xo(r,u,31)+257,R=xo(r,u+10,15)+4,N=S+xo(r,u+5,31)+1;u+=14;for(var I=new Ws(N),O=new Ws(19),j=0;j<R;++j)O[J4[j]]=xo(r,u+j*3,7);u+=R*3;for(var F=Vv(O),H=(1<<F)-1,ee=lp(O,F,1),j=0;j<N;){var de=ee[xo(r,u,H)];u+=de&15;var C=de>>>4;if(C<16)I[j++]=C;else{var ve=0,Y=0;for(C==16?(Y=3+xo(r,u,3),u+=2,ve=I[j-1]):C==17?(Y=3+xo(r,u,7),u+=3):C==18&&(Y=11+xo(r,u,127),u+=7);Y--;)I[j++]=ve}}var me=I.subarray(0,S),pe=I.subarray(S);v=Vv(me),y=Vv(pe),p=lp(me,v,1),m=lp(pe,y,1)}else throw"invalid block type";else{var C=Q4(u)+4,x=r[C-4]|r[C-3]<<8,M=C+x;if(M>n){if(s)throw"unexpected EOF";break}i&&o(h+x),e.set(r.subarray(C,M),h),t.b=h+=x,t.p=u=M*8;continue}if(u>E){if(s)throw"unexpected EOF";break}}i&&o(h+131072);for(var Ae=(1<<v)-1,te=(1<<y)-1,ce=u;;ce=u){var ve=p[Wv(r,u)&Ae],ne=ve>>>4;if(u+=ve&15,u>E){if(s)throw"unexpected EOF";break}if(!ve)throw"invalid length/literal";if(ne<256)e[h++]=ne;else if(ne==256){ce=u,p=null;break}else{var z=ne-254;if(ne>264){var j=ne-257,K=sB[j];z=xo(r,u,(1<<K)-1)+cB[j],u+=K}var xe=m[Wv(r,u)&te],De=xe>>>4;if(!xe)throw"invalid distance";u+=xe&15;var pe=q4[De];if(De>3){var K=oB[De];pe+=Wv(r,u)&(1<<K)-1,u+=K}if(u>E){if(s)throw"unexpected EOF";break}i&&o(h+131072);for(var Ie=h+z;h<Ie;h+=4)e[h]=e[h-pe],e[h+1]=e[h+1-pe],e[h+2]=e[h+2-pe],e[h+3]=e[h+3-pe];h=Ie}}t.l=p,t.p=ce,t.b=h,p&&(l=1,t.m=v,t.d=m,t.n=y)}while(!l);return h==e.length?e:Z4(e,0,h)},tF=new Ws(0),nF=function(r){if((r[0]&15)!=8||r[0]>>>4>7||(r[0]<<8|r[1])%31)throw"invalid zlib data";if(r[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function K2(r,e){return eF((nF(r),r.subarray(2,-4)),e)}var rF=typeof TextDecoder<"u"&&new TextDecoder,iF=0;try{rF.decode(tF,{stream:!0}),iF=1}catch{}const sF=r=>r&&r.isCubeTexture;class oF extends Nr{constructor(e,t){var n,i;const s=sF(e),l=((i=s?(n=e.image[0])==null?void 0:n.width:e.image.width)!=null?i:1024)/4,u=Math.floor(Math.log2(l)),h=Math.pow(2,u),p=3*Math.max(h,112),m=4*h,v=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/p}`,`#define CUBEUV_TEXEL_HEIGHT ${1/m}`,`#define CUBEUV_MAX_MIP ${u}.0`],y=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,E=v.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${pE>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,w={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},C=new Kp(1,16),x=new as({uniforms:w,fragmentShader:E,vertexShader:y,side:Vs});super(C,x)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var aF=Object.defineProperty,lF=(r,e,t)=>e in r?aF(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,cF=(r,e,t)=>(lF(r,e+"",t),t);class uF{constructor(){cF(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}var dF=Object.defineProperty,hF=(r,e,t)=>e in r?dF(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Gt=(r,e,t)=>(hF(r,typeof e!="symbol"?e+"":e,t),t);const q2=new Du,LC=new Ga,fF=Math.cos(70*(Math.PI/180)),IC=(r,e)=>(r%e+e)%e;let pF=class extends uF{constructor(e,t){super(),Gt(this,"object"),Gt(this,"domElement"),Gt(this,"enabled",!0),Gt(this,"target",new X),Gt(this,"minDistance",0),Gt(this,"maxDistance",1/0),Gt(this,"minZoom",0),Gt(this,"maxZoom",1/0),Gt(this,"minPolarAngle",0),Gt(this,"maxPolarAngle",Math.PI),Gt(this,"minAzimuthAngle",-1/0),Gt(this,"maxAzimuthAngle",1/0),Gt(this,"enableDamping",!1),Gt(this,"dampingFactor",.05),Gt(this,"enableZoom",!0),Gt(this,"zoomSpeed",1),Gt(this,"enableRotate",!0),Gt(this,"rotateSpeed",1),Gt(this,"enablePan",!0),Gt(this,"panSpeed",1),Gt(this,"screenSpacePanning",!0),Gt(this,"keyPanSpeed",7),Gt(this,"zoomToCursor",!1),Gt(this,"autoRotate",!1),Gt(this,"autoRotateSpeed",2),Gt(this,"reverseOrbit",!1),Gt(this,"reverseHorizontalOrbit",!1),Gt(this,"reverseVerticalOrbit",!1),Gt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Gt(this,"mouseButtons",{LEFT:ru.ROTATE,MIDDLE:ru.DOLLY,RIGHT:ru.PAN}),Gt(this,"touches",{ONE:iu.ROTATE,TWO:iu.DOLLY_PAN}),Gt(this,"target0"),Gt(this,"position0"),Gt(this,"zoom0"),Gt(this,"_domElementKeyEvents",null),Gt(this,"getPolarAngle"),Gt(this,"getAzimuthalAngle"),Gt(this,"setPolarAngle"),Gt(this,"setAzimuthalAngle"),Gt(this,"getDistance"),Gt(this,"getZoomScale"),Gt(this,"listenToKeyEvents"),Gt(this,"stopListenToKeyEvents"),Gt(this,"saveState"),Gt(this,"reset"),Gt(this,"update"),Gt(this,"connect"),Gt(this,"dispose"),Gt(this,"dollyIn"),Gt(this,"dollyOut"),Gt(this,"getScale"),Gt(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>p.phi,this.getAzimuthalAngle=()=>p.theta,this.setPolarAngle=ae=>{let Me=IC(ae,2*Math.PI),He=p.phi;He<0&&(He+=2*Math.PI),Me<0&&(Me+=2*Math.PI);let We=Math.abs(Me-He);2*Math.PI-We<We&&(Me<He?Me+=2*Math.PI:He+=2*Math.PI),m.phi=Me-He,n.update()},this.setAzimuthalAngle=ae=>{let Me=IC(ae,2*Math.PI),He=p.theta;He<0&&(He+=2*Math.PI),Me<0&&(Me+=2*Math.PI);let We=Math.abs(Me-He);2*Math.PI-We<We&&(Me<He?Me+=2*Math.PI:He+=2*Math.PI),m.theta=Me-He,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=ae=>{ae.addEventListener("keydown",Ye),this._domElementKeyEvents=ae},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Ye),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(i),n.update(),u=l.NONE},this.update=(()=>{const ae=new X,Me=new X(0,1,0),He=new ni().setFromUnitVectors(e.up,Me),We=He.clone().invert(),ke=new X,ue=new ni,ot=2*Math.PI;return function(){const Ne=n.object.position;He.setFromUnitVectors(e.up,Me),We.copy(He).invert(),ae.copy(Ne).sub(n.target),ae.applyQuaternion(He),p.setFromVector3(ae),n.autoRotate&&u===l.NONE&&Y(de()),n.enableDamping?(p.theta+=m.theta*n.dampingFactor,p.phi+=m.phi*n.dampingFactor):(p.theta+=m.theta,p.phi+=m.phi);let Qe=n.minAzimuthAngle,Bt=n.maxAzimuthAngle;isFinite(Qe)&&isFinite(Bt)&&(Qe<-Math.PI?Qe+=ot:Qe>Math.PI&&(Qe-=ot),Bt<-Math.PI?Bt+=ot:Bt>Math.PI&&(Bt-=ot),Qe<=Bt?p.theta=Math.max(Qe,Math.min(Bt,p.theta)):p.theta=p.theta>(Qe+Bt)/2?Math.max(Qe,p.theta):Math.min(Bt,p.theta)),p.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,p.phi)),p.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(y,n.dampingFactor):n.target.add(y),n.zoomToCursor&&F||n.object.isOrthographicCamera?p.radius=xe(p.radius):p.radius=xe(p.radius*v),ae.setFromSpherical(p),ae.applyQuaternion(We),Ne.copy(n.target).add(ae),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),n.enableDamping===!0?(m.theta*=1-n.dampingFactor,m.phi*=1-n.dampingFactor,y.multiplyScalar(1-n.dampingFactor)):(m.set(0,0,0),y.set(0,0,0));let tn=!1;if(n.zoomToCursor&&F){let xn=null;if(n.object instanceof Ar&&n.object.isPerspectiveCamera){const Xn=ae.length();xn=xe(Xn*v);const un=Xn-xn;n.object.position.addScaledVector(O,un),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const Xn=new X(j.x,j.y,0);Xn.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/v)),n.object.updateProjectionMatrix(),tn=!0;const un=new X(j.x,j.y,0);un.unproject(n.object),n.object.position.sub(un).add(Xn),n.object.updateMatrixWorld(),xn=ae.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;xn!==null&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(xn).add(n.object.position):(q2.origin.copy(n.object.position),q2.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(q2.direction))<fF?e.lookAt(n.target):(LC.setFromNormalAndCoplanarPoint(n.object.up,n.target),q2.intersectPlane(LC,n.target))))}else n.object instanceof Ka&&n.object.isOrthographicCamera&&(tn=v!==1,tn&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/v)),n.object.updateProjectionMatrix()));return v=1,F=!1,tn||ke.distanceToSquared(n.object.position)>h||8*(1-ue.dot(n.object.quaternion))>h?(n.dispatchEvent(i),ke.copy(n.object.position),ue.copy(n.object.quaternion),tn=!1,!0):!1}})(),this.connect=ae=>{n.domElement=ae,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",ct),n.domElement.addEventListener("pointerdown",Mn),n.domElement.addEventListener("pointercancel",W),n.domElement.addEventListener("wheel",Ve)},this.dispose=()=>{var ae,Me,He,We,ke,ue;n.domElement&&(n.domElement.style.touchAction="auto"),(ae=n.domElement)==null||ae.removeEventListener("contextmenu",ct),(Me=n.domElement)==null||Me.removeEventListener("pointerdown",Mn),(He=n.domElement)==null||He.removeEventListener("pointercancel",W),(We=n.domElement)==null||We.removeEventListener("wheel",Ve),(ke=n.domElement)==null||ke.ownerDocument.removeEventListener("pointermove",Z),(ue=n.domElement)==null||ue.ownerDocument.removeEventListener("pointerup",W),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",Ye)};const n=this,i={type:"change"},s={type:"start"},o={type:"end"},l={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let u=l.NONE;const h=1e-6,p=new tA,m=new tA;let v=1;const y=new X,E=new Ue,w=new Ue,C=new Ue,x=new Ue,M=new Ue,S=new Ue,R=new Ue,N=new Ue,I=new Ue,O=new X,j=new Ue;let F=!1;const H=[],ee={};function de(){return 2*Math.PI/60/60*n.autoRotateSpeed}function ve(){return Math.pow(.95,n.zoomSpeed)}function Y(ae){n.reverseOrbit||n.reverseHorizontalOrbit?m.theta+=ae:m.theta-=ae}function me(ae){n.reverseOrbit||n.reverseVerticalOrbit?m.phi+=ae:m.phi-=ae}const pe=(()=>{const ae=new X;return function(He,We){ae.setFromMatrixColumn(We,0),ae.multiplyScalar(-He),y.add(ae)}})(),Ae=(()=>{const ae=new X;return function(He,We){n.screenSpacePanning===!0?ae.setFromMatrixColumn(We,1):(ae.setFromMatrixColumn(We,0),ae.crossVectors(n.object.up,ae)),ae.multiplyScalar(He),y.add(ae)}})(),te=(()=>{const ae=new X;return function(He,We){const ke=n.domElement;if(ke&&n.object instanceof Ar&&n.object.isPerspectiveCamera){const ue=n.object.position;ae.copy(ue).sub(n.target);let ot=ae.length();ot*=Math.tan(n.object.fov/2*Math.PI/180),pe(2*He*ot/ke.clientHeight,n.object.matrix),Ae(2*We*ot/ke.clientHeight,n.object.matrix)}else ke&&n.object instanceof Ka&&n.object.isOrthographicCamera?(pe(He*(n.object.right-n.object.left)/n.object.zoom/ke.clientWidth,n.object.matrix),Ae(We*(n.object.top-n.object.bottom)/n.object.zoom/ke.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function ce(ae){n.object instanceof Ar&&n.object.isPerspectiveCamera||n.object instanceof Ka&&n.object.isOrthographicCamera?v=ae:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function ne(ae){ce(v/ae)}function z(ae){ce(v*ae)}function K(ae){if(!n.zoomToCursor||!n.domElement)return;F=!0;const Me=n.domElement.getBoundingClientRect(),He=ae.clientX-Me.left,We=ae.clientY-Me.top,ke=Me.width,ue=Me.height;j.x=He/ke*2-1,j.y=-(We/ue)*2+1,O.set(j.x,j.y,1).unproject(n.object).sub(n.object.position).normalize()}function xe(ae){return Math.max(n.minDistance,Math.min(n.maxDistance,ae))}function De(ae){E.set(ae.clientX,ae.clientY)}function Ie(ae){K(ae),R.set(ae.clientX,ae.clientY)}function Oe(ae){x.set(ae.clientX,ae.clientY)}function tt(ae){w.set(ae.clientX,ae.clientY),C.subVectors(w,E).multiplyScalar(n.rotateSpeed);const Me=n.domElement;Me&&(Y(2*Math.PI*C.x/Me.clientHeight),me(2*Math.PI*C.y/Me.clientHeight)),E.copy(w),n.update()}function rt(ae){N.set(ae.clientX,ae.clientY),I.subVectors(N,R),I.y>0?ne(ve()):I.y<0&&z(ve()),R.copy(N),n.update()}function gt(ae){M.set(ae.clientX,ae.clientY),S.subVectors(M,x).multiplyScalar(n.panSpeed),te(S.x,S.y),x.copy(M),n.update()}function kt(ae){K(ae),ae.deltaY<0?z(ve()):ae.deltaY>0&&ne(ve()),n.update()}function xt(ae){let Me=!1;switch(ae.code){case n.keys.UP:te(0,n.keyPanSpeed),Me=!0;break;case n.keys.BOTTOM:te(0,-n.keyPanSpeed),Me=!0;break;case n.keys.LEFT:te(n.keyPanSpeed,0),Me=!0;break;case n.keys.RIGHT:te(-n.keyPanSpeed,0),Me=!0;break}Me&&(ae.preventDefault(),n.update())}function se(){if(H.length==1)E.set(H[0].pageX,H[0].pageY);else{const ae=.5*(H[0].pageX+H[1].pageX),Me=.5*(H[0].pageY+H[1].pageY);E.set(ae,Me)}}function Je(){if(H.length==1)x.set(H[0].pageX,H[0].pageY);else{const ae=.5*(H[0].pageX+H[1].pageX),Me=.5*(H[0].pageY+H[1].pageY);x.set(ae,Me)}}function Fe(){const ae=H[0].pageX-H[1].pageX,Me=H[0].pageY-H[1].pageY,He=Math.sqrt(ae*ae+Me*Me);R.set(0,He)}function $e(){n.enableZoom&&Fe(),n.enablePan&&Je()}function ze(){n.enableZoom&&Fe(),n.enableRotate&&se()}function bt(ae){if(H.length==1)w.set(ae.pageX,ae.pageY);else{const He=gn(ae),We=.5*(ae.pageX+He.x),ke=.5*(ae.pageY+He.y);w.set(We,ke)}C.subVectors(w,E).multiplyScalar(n.rotateSpeed);const Me=n.domElement;Me&&(Y(2*Math.PI*C.x/Me.clientHeight),me(2*Math.PI*C.y/Me.clientHeight)),E.copy(w)}function ft(ae){if(H.length==1)M.set(ae.pageX,ae.pageY);else{const Me=gn(ae),He=.5*(ae.pageX+Me.x),We=.5*(ae.pageY+Me.y);M.set(He,We)}S.subVectors(M,x).multiplyScalar(n.panSpeed),te(S.x,S.y),x.copy(M)}function yt(ae){const Me=gn(ae),He=ae.pageX-Me.x,We=ae.pageY-Me.y,ke=Math.sqrt(He*He+We*We);N.set(0,ke),I.set(0,Math.pow(N.y/R.y,n.zoomSpeed)),ne(I.y),R.copy(N)}function Lt(ae){n.enableZoom&&yt(ae),n.enablePan&&ft(ae)}function Kt(ae){n.enableZoom&&yt(ae),n.enableRotate&&bt(ae)}function Mn(ae){var Me,He;n.enabled!==!1&&(H.length===0&&((Me=n.domElement)==null||Me.ownerDocument.addEventListener("pointermove",Z),(He=n.domElement)==null||He.ownerDocument.addEventListener("pointerup",W)),Ut(ae),ae.pointerType==="touch"?Ct(ae):Se(ae))}function Z(ae){n.enabled!==!1&&(ae.pointerType==="touch"?nt(ae):Ze(ae))}function W(ae){var Me,He,We;rn(ae),H.length===0&&((Me=n.domElement)==null||Me.releasePointerCapture(ae.pointerId),(He=n.domElement)==null||He.ownerDocument.removeEventListener("pointermove",Z),(We=n.domElement)==null||We.ownerDocument.removeEventListener("pointerup",W)),n.dispatchEvent(o),u=l.NONE}function Se(ae){let Me;switch(ae.button){case 0:Me=n.mouseButtons.LEFT;break;case 1:Me=n.mouseButtons.MIDDLE;break;case 2:Me=n.mouseButtons.RIGHT;break;default:Me=-1}switch(Me){case ru.DOLLY:if(n.enableZoom===!1)return;Ie(ae),u=l.DOLLY;break;case ru.ROTATE:if(ae.ctrlKey||ae.metaKey||ae.shiftKey){if(n.enablePan===!1)return;Oe(ae),u=l.PAN}else{if(n.enableRotate===!1)return;De(ae),u=l.ROTATE}break;case ru.PAN:if(ae.ctrlKey||ae.metaKey||ae.shiftKey){if(n.enableRotate===!1)return;De(ae),u=l.ROTATE}else{if(n.enablePan===!1)return;Oe(ae),u=l.PAN}break;default:u=l.NONE}u!==l.NONE&&n.dispatchEvent(s)}function Ze(ae){if(n.enabled!==!1)switch(u){case l.ROTATE:if(n.enableRotate===!1)return;tt(ae);break;case l.DOLLY:if(n.enableZoom===!1)return;rt(ae);break;case l.PAN:if(n.enablePan===!1)return;gt(ae);break}}function Ve(ae){n.enabled===!1||n.enableZoom===!1||u!==l.NONE&&u!==l.ROTATE||(ae.preventDefault(),n.dispatchEvent(s),kt(ae),n.dispatchEvent(o))}function Ye(ae){n.enabled===!1||n.enablePan===!1||xt(ae)}function Ct(ae){switch(Ge(ae),H.length){case 1:switch(n.touches.ONE){case iu.ROTATE:if(n.enableRotate===!1)return;se(),u=l.TOUCH_ROTATE;break;case iu.PAN:if(n.enablePan===!1)return;Je(),u=l.TOUCH_PAN;break;default:u=l.NONE}break;case 2:switch(n.touches.TWO){case iu.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;$e(),u=l.TOUCH_DOLLY_PAN;break;case iu.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;ze(),u=l.TOUCH_DOLLY_ROTATE;break;default:u=l.NONE}break;default:u=l.NONE}u!==l.NONE&&n.dispatchEvent(s)}function nt(ae){switch(Ge(ae),u){case l.TOUCH_ROTATE:if(n.enableRotate===!1)return;bt(ae),n.update();break;case l.TOUCH_PAN:if(n.enablePan===!1)return;ft(ae),n.update();break;case l.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;Lt(ae),n.update();break;case l.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Kt(ae),n.update();break;default:u=l.NONE}}function ct(ae){n.enabled!==!1&&ae.preventDefault()}function Ut(ae){H.push(ae)}function rn(ae){delete ee[ae.pointerId];for(let Me=0;Me<H.length;Me++)if(H[Me].pointerId==ae.pointerId){H.splice(Me,1);return}}function Ge(ae){let Me=ee[ae.pointerId];Me===void 0&&(Me=new Ue,ee[ae.pointerId]=Me),Me.set(ae.pageX,ae.pageY)}function gn(ae){const Me=ae.pointerId===H[0].pointerId?H[1]:H[0];return ee[Me.pointerId]}this.dollyIn=(ae=ve())=>{z(ae),n.update()},this.dollyOut=(ae=ve())=>{ne(ae),n.update()},this.getScale=()=>v,this.setScale=ae=>{ce(ae),n.update()},this.getZoomScale=()=>ve(),t!==void 0&&this.connect(t),this.update()}};function Eg(r){if(typeof TextDecoder<"u")return new TextDecoder().decode(r);let e="";for(let t=0,n=r.length;t<n;t++)e+=String.fromCharCode(r[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const vu="srgb",qa="srgb-linear",NC=3001,mF=3e3;class mE extends Ri{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new EF(t)}),this.register(function(t){return new xF(t)}),this.register(function(t){return new RF(t)}),this.register(function(t){return new DF(t)}),this.register(function(t){return new PF(t)}),this.register(function(t){return new CF(t)}),this.register(function(t){return new wF(t)}),this.register(function(t){return new SF(t)}),this.register(function(t){return new BF(t)}),this.register(function(t){return new AF(t)}),this.register(function(t){return new bF(t)}),this.register(function(t){return new _F(t)}),this.register(function(t){return new TF(t)}),this.register(function(t){return new MF(t)}),this.register(function(t){return new vF(t)}),this.register(function(t){return new LF(t)}),this.register(function(t){return new IF(t)})}load(e,t,n,i){const s=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const h=ql.extractUrlBase(e);o=ql.resolveURL(h,this.path)}else o=ql.extractUrlBase(e);this.manager.itemStart(e);const l=function(h){i?i(h):console.error(h),s.manager.itemError(e),s.manager.itemEnd(e)},u=new bs(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(h){try{s.parse(h,o,function(p){t(p),s.manager.itemEnd(e)},l)}catch(p){l(p)}},n,l)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,i){let s;const o={},l={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(Eg(new Uint8Array(e.slice(0,4)))===dB){try{o[An.KHR_BINARY_GLTF]=new NF(e)}catch(p){i&&i(p);return}s=JSON.parse(o[An.KHR_BINARY_GLTF].content)}else s=JSON.parse(Eg(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const u=new KF(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(let h=0;h<this.pluginCallbacks.length;h++){const p=this.pluginCallbacks[h](u);p.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),l[p.name]=p,o[p.name]=!0}if(s.extensionsUsed)for(let h=0;h<s.extensionsUsed.length;++h){const p=s.extensionsUsed[h],m=s.extensionsRequired||[];switch(p){case An.KHR_MATERIALS_UNLIT:o[p]=new yF;break;case An.KHR_DRACO_MESH_COMPRESSION:o[p]=new FF(s,this.dracoLoader);break;case An.KHR_TEXTURE_TRANSFORM:o[p]=new kF;break;case An.KHR_MESH_QUANTIZATION:o[p]=new OF;break;default:m.indexOf(p)>=0&&l[p]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+p+'".')}}u.setExtensions(o),u.setPlugins(l),u.parse(n,i)}parseAsync(e,t){const n=this;return new Promise(function(i,s){n.parse(e,t,i,s)})}}function gF(){let r={};return{get:function(e){return r[e]},add:function(e,t){r[e]=t},remove:function(e){delete r[e]},removeAll:function(){r={}}}}const An={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class vF{constructor(e){this.parser=e,this.name=An.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,i=t.length;n<i;n++){const s=t[n];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let i=t.cache.get(n);if(i)return i;const s=t.json,u=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let h;const p=new ht(16777215);u.color!==void 0&&p.setRGB(u.color[0],u.color[1],u.color[2],qa);const m=u.range!==void 0?u.range:0;switch(u.type){case"directional":h=new nE(p),h.target.position.set(0,0,-1),h.add(h.target);break;case"point":h=new tE(p),h.distance=m;break;case"spot":h=new eE(p),h.distance=m,u.spot=u.spot||{},u.spot.innerConeAngle=u.spot.innerConeAngle!==void 0?u.spot.innerConeAngle:0,u.spot.outerConeAngle=u.spot.outerConeAngle!==void 0?u.spot.outerConeAngle:Math.PI/4,h.angle=u.spot.outerConeAngle,h.penumbra=1-u.spot.innerConeAngle/u.spot.outerConeAngle,h.target.position.set(0,0,-1),h.add(h.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+u.type)}return h.position.set(0,0,0),h.decay=2,za(h,u),u.intensity!==void 0&&(h.intensity=u.intensity),h.name=t.createUniqueName(u.name||"light_"+e),i=Promise.resolve(h),t.cache.add(n,i),i}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,s=n.json.nodes[e],l=(s.extensions&&s.extensions[this.name]||{}).light;return l===void 0?null:this._loadLight(l).then(function(u){return n._getNodeRef(t.cache,l,u)})}}class yF{constructor(){this.name=An.KHR_MATERIALS_UNLIT}getMaterialType(){return ws}extendParams(e,t,n){const i=[];e.color=new ht(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],qa),e.opacity=o[3]}s.baseColorTexture!==void 0&&i.push(n.assignTexture(e,"map",s.baseColorTexture,vu))}return Promise.all(i)}}class AF{constructor(e){this.parser=e,this.name=An.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class EF{constructor(e){this.parser=e,this.name=An.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Xs}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(n.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(n.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(n.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const l=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Ue(l,l)}return Promise.all(s)}}class xF{constructor(e){this.parser=e,this.name=An.KHR_MATERIALS_DISPERSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Xs}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class _F{constructor(e){this.parser=e,this.name=An.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Xs}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(n.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(n.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class CF{constructor(e){this.parser=e,this.name=An.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Xs}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new ht(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=i.extensions[this.name];if(o.sheenColorFactor!==void 0){const l=o.sheenColorFactor;t.sheenColor.setRGB(l[0],l[1],l[2],qa)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(n.assignTexture(t,"sheenColorMap",o.sheenColorTexture,vu)),o.sheenRoughnessTexture!==void 0&&s.push(n.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class wF{constructor(e){this.parser=e,this.name=An.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Xs}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(n.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class SF{constructor(e){this.parser=e,this.name=An.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Xs}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(n.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const l=o.attenuationColor||[1,1,1];return t.attenuationColor=new ht().setRGB(l[0],l[1],l[2],qa),Promise.all(s)}}class BF{constructor(e){this.parser=e,this.name=An.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Xs}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=i.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class bF{constructor(e){this.parser=e,this.name=An.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Xs}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(n.assignTexture(t,"specularIntensityMap",o.specularTexture));const l=o.specularColorFactor||[1,1,1];return t.specularColor=new ht().setRGB(l[0],l[1],l[2],qa),o.specularColorTexture!==void 0&&s.push(n.assignTexture(t,"specularColorMap",o.specularColorTexture,vu)),Promise.all(s)}}class MF{constructor(e){this.parser=e,this.name=An.EXT_MATERIALS_BUMP}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Xs}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&s.push(n.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}}class TF{constructor(e){this.parser=e,this.name=An.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:Xs}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(n.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class RF{constructor(e){this.parser=e,this.name=An.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,i=n.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const s=i.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class DF{constructor(e){this.parser=e,this.name=An.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,i=n.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],l=i.images[o.source];let u=n.textureLoader;if(l.uri){const h=n.options.manager.getHandler(l.uri);h!==null&&(u=h)}return this.detectSupport().then(function(h){if(h)return n.loadTextureImage(e,o.source,u);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class PF{constructor(e){this.parser=e,this.name=An.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,i=n.json,s=i.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],l=i.images[o.source];let u=n.textureLoader;if(l.uri){const h=n.options.manager.getHandler(l.uri);h!==null&&(u=h)}return this.detectSupport().then(function(h){if(h)return n.loadTextureImage(e,o.source,u);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class LF{constructor(e){this.name=An.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const i=n.extensions[this.name],s=this.parser.getDependency("buffer",i.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(l){const u=i.byteOffset||0,h=i.byteLength||0,p=i.count,m=i.byteStride,v=new Uint8Array(l,u,h);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(p,m,v,i.mode,i.filter).then(function(y){return y.buffer}):o.ready.then(function(){const y=new ArrayBuffer(p*m);return o.decodeGltfBuffer(new Uint8Array(y),p,m,v,i.mode,i.filter),y})})}else return null}}class IF{constructor(e){this.name=An.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const i=t.meshes[n.mesh];for(const h of i.primitives)if(h.mode!==js.TRIANGLES&&h.mode!==js.TRIANGLE_STRIP&&h.mode!==js.TRIANGLE_FAN&&h.mode!==void 0)return null;const o=n.extensions[this.name].attributes,l=[],u={};for(const h in o)l.push(this.parser.getDependency("accessor",o[h]).then(p=>(u[h]=p,u[h])));return l.length<1?null:(l.push(this.parser.createNodeMesh(e)),Promise.all(l).then(h=>{const p=h.pop(),m=p.isGroup?p.children:[p],v=h[0].count,y=[];for(const E of m){const w=new $t,C=new X,x=new ni,M=new X(1,1,1),S=new OA(E.geometry,E.material,v);for(let R=0;R<v;R++)u.TRANSLATION&&C.fromBufferAttribute(u.TRANSLATION,R),u.ROTATION&&x.fromBufferAttribute(u.ROTATION,R),u.SCALE&&M.fromBufferAttribute(u.SCALE,R),S.setMatrixAt(R,w.compose(C,x,M));for(const R in u)if(R==="_COLOR_0"){const N=u[R];S.instanceColor=new wu(N.array,N.itemSize,N.normalized)}else R!=="TRANSLATION"&&R!=="ROTATION"&&R!=="SCALE"&&E.geometry.setAttribute(R,u[R]);bn.prototype.copy.call(S,E),this.parser.assignFinalMaterial(S),y.push(S)}return p.isGroup?(p.clear(),p.add(...y),p):y[0]}))}}const dB="glTF",Yf=12,FC={JSON:1313821514,BIN:5130562};class NF{constructor(e){this.name=An.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Yf);if(this.header={magic:Eg(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==dB)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-Yf,i=new DataView(e,Yf);let s=0;for(;s<n;){const o=i.getUint32(s,!0);s+=4;const l=i.getUint32(s,!0);if(s+=4,l===FC.JSON){const u=new Uint8Array(e,Yf+s,o);this.content=Eg(u)}else if(l===FC.BIN){const u=Yf+s;this.body=e.slice(u,u+o)}s+=o}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class FF{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=An.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,l={},u={},h={};for(const p in o){const m=oA[p]||p.toLowerCase();l[m]=o[p]}for(const p in e.attributes){const m=oA[p]||p.toLowerCase();if(o[p]!==void 0){const v=n.accessors[e.attributes[p]],y=_h[v.componentType];h[m]=y.name,u[m]=v.normalized===!0}}return t.getDependency("bufferView",s).then(function(p){return new Promise(function(m,v){i.decodeDracoFile(p,function(y){for(const E in y.attributes){const w=y.attributes[E],C=u[E];C!==void 0&&(w.normalized=C)}m(y)},l,h,qa,v)})})}}class kF{constructor(){this.name=An.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class OF{constructor(){this.name=An.KHR_MESH_QUANTIZATION}}class hB extends kh{constructor(e,t,n,i){super(e,t,n,i)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,s=e*i*3+i;for(let o=0;o!==i;o++)t[o]=n[s+o];return t}interpolate_(e,t,n,i){const s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,u=l*2,h=l*3,p=i-t,m=(n-t)/p,v=m*m,y=v*m,E=e*h,w=E-h,C=-2*y+3*v,x=y-v,M=1-C,S=x-v+m;for(let R=0;R!==l;R++){const N=o[w+R+l],I=o[w+R+u]*p,O=o[E+R+l],j=o[E+R]*p;s[R]=M*N+S*I+C*O+x*j}return s}}const UF=new ni;class HF extends hB{interpolate_(e,t,n,i){const s=super.interpolate_(e,t,n,i);return UF.fromArray(s).normalize().toArray(s),s}}const js={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},_h={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},kC={9728:or,9729:Jn,9984:Ep,9985:Dg,9986:Ah,9987:Qo},OC={33071:gi,33648:wh,10497:$l},Jv={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},oA={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...pE>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},zl={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},zF={CUBICSPLINE:void 0,LINEAR:Cu,STEP:Sh},Xv={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function GF(r){return r.DefaultMaterial===void 0&&(r.DefaultMaterial=new $p({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Yo})),r.DefaultMaterial}function tu(r,e,t){for(const n in t.extensions)r[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function za(r,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(r.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function jF(r,e,t){let n=!1,i=!1,s=!1;for(let h=0,p=e.length;h<p;h++){const m=e[h];if(m.POSITION!==void 0&&(n=!0),m.NORMAL!==void 0&&(i=!0),m.COLOR_0!==void 0&&(s=!0),n&&i&&s)break}if(!n&&!i&&!s)return Promise.resolve(r);const o=[],l=[],u=[];for(let h=0,p=e.length;h<p;h++){const m=e[h];if(n){const v=m.POSITION!==void 0?t.getDependency("accessor",m.POSITION):r.attributes.position;o.push(v)}if(i){const v=m.NORMAL!==void 0?t.getDependency("accessor",m.NORMAL):r.attributes.normal;l.push(v)}if(s){const v=m.COLOR_0!==void 0?t.getDependency("accessor",m.COLOR_0):r.attributes.color;u.push(v)}}return Promise.all([Promise.all(o),Promise.all(l),Promise.all(u)]).then(function(h){const p=h[0],m=h[1],v=h[2];return n&&(r.morphAttributes.position=p),i&&(r.morphAttributes.normal=m),s&&(r.morphAttributes.color=v),r.morphTargetsRelative=!0,r})}function VF(r,e){if(r.updateMorphTargets(),e.weights!==void 0)for(let t=0,n=e.weights.length;t<n;t++)r.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(r.morphTargetInfluences.length===t.length){r.morphTargetDictionary={};for(let n=0,i=t.length;n<i;n++)r.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function WF(r){let e;const t=r.extensions&&r.extensions[An.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+Kv(t.attributes):e=r.indices+":"+Kv(r.attributes)+":"+r.mode,r.targets!==void 0)for(let n=0,i=r.targets.length;n<i;n++)e+=":"+Kv(r.targets[n]);return e}function Kv(r){let e="";const t=Object.keys(r).sort();for(let n=0,i=t.length;n<i;n++)e+=t[n]+":"+r[t[n]]+";";return e}function aA(r){switch(r){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function JF(r){return r.search(/\.jpe?g($|\?)/i)>0||r.search(/^data\:image\/jpeg/)===0?"image/jpeg":r.search(/\.webp($|\?)/i)>0||r.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const XF=new $t;class KF{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new gF,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,i=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,s=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||n||i&&s<98?this.textureLoader=new SS(this.options.manager):this.textureLoader=new LS(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new bs(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,i=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(o){const l={scene:o[0][i.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:i.asset,parser:n,userData:{}};return tu(s,l,i),za(l,i),Promise.all(n._invokeAll(function(u){return u.afterRoot&&u.afterRoot(l)})).then(function(){for(const u of l.scenes)u.updateMatrixWorld();e(l)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let i=0,s=t.length;i<s;i++){const o=t[i].joints;for(let l=0,u=o.length;l<u;l++)e[o[l]].isBone=!0}for(let i=0,s=e.length;i<s;i++){const o=e[i];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(n[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const i=n.clone(),s=(o,l)=>{const u=this.associations.get(o);u!=null&&this.associations.set(l,u);for(const[h,p]of o.children.entries())s(p,l.children[h])};return s(n,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const i=e(t[n]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let i=0;i<t.length;i++){const s=e(t[i]);s&&n.push(s)}return n}getDependency(e,t){const n=e+":"+t;let i=this.cache.get(n);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":i=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!i)throw new Error("Unknown type: "+e);break}this.cache.add(n,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(i.map(function(s,o){return n.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[An.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(s,o){n.load(ql.resolveURL(t.uri,i.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const i=t.byteLength||0,s=t.byteOffset||0;return n.slice(s,s+i)})}loadAccessor(e){const t=this,n=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0){const o=Jv[i.type],l=_h[i.componentType],u=i.normalized===!0,h=new l(i.count*o);return Promise.resolve(new Dn(h,o,u))}const s=[];return i.bufferView!==void 0?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),i.sparse!==void 0&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then(function(o){const l=o[0],u=Jv[i.type],h=_h[i.componentType],p=h.BYTES_PER_ELEMENT,m=p*u,v=i.byteOffset||0,y=i.bufferView!==void 0?n.bufferViews[i.bufferView].byteStride:void 0,E=i.normalized===!0;let w,C;if(y&&y!==m){const x=Math.floor(v/y),M="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+x+":"+i.count;let S=t.cache.get(M);S||(w=new h(l,x*y,i.count*y/p),S=new Wp(w,y/p),t.cache.add(M,S)),C=new Ql(S,u,v%y/p,E)}else l===null?w=new h(i.count*u):w=new h(l,v,i.count*u),C=new Dn(w,u,E);if(i.sparse!==void 0){const x=Jv.SCALAR,M=_h[i.sparse.indices.componentType],S=i.sparse.indices.byteOffset||0,R=i.sparse.values.byteOffset||0,N=new M(o[1],S,i.sparse.count*x),I=new h(o[2],R,i.sparse.count*u);l!==null&&(C=new Dn(C.array.slice(),C.itemSize,C.normalized));for(let O=0,j=N.length;O<j;O++){const F=N[O];if(C.setX(F,I[O*u]),u>=2&&C.setY(F,I[O*u+1]),u>=3&&C.setZ(F,I[O*u+2]),u>=4&&C.setW(F,I[O*u+3]),u>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return C})}loadTexture(e){const t=this.json,n=this.options,s=t.textures[e].source,o=t.images[s];let l=this.textureLoader;if(o.uri){const u=n.manager.getHandler(o.uri);u!==null&&(l=u)}return this.loadTextureImage(e,s,l)}loadTextureImage(e,t,n){const i=this,s=this.json,o=s.textures[e],l=s.images[t],u=(l.uri||l.bufferView)+":"+o.sampler;if(this.textureCache[u])return this.textureCache[u];const h=this.loadImageSource(t,n).then(function(p){p.flipY=!1,p.name=o.name||l.name||"",p.name===""&&typeof l.uri=="string"&&l.uri.startsWith("data:image/")===!1&&(p.name=l.uri);const v=(s.samplers||{})[o.sampler]||{};return p.magFilter=kC[v.magFilter]||Jn,p.minFilter=kC[v.minFilter]||Qo,p.wrapS=OC[v.wrapS]||$l,p.wrapT=OC[v.wrapT]||$l,i.associations.set(p,{textures:e}),p}).catch(function(){return null});return this.textureCache[u]=h,h}loadImageSource(e,t){const n=this,i=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(m=>m.clone());const o=i.images[e],l=self.URL||self.webkitURL;let u=o.uri||"",h=!1;if(o.bufferView!==void 0)u=n.getDependency("bufferView",o.bufferView).then(function(m){h=!0;const v=new Blob([m],{type:o.mimeType});return u=l.createObjectURL(v),u});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const p=Promise.resolve(u).then(function(m){return new Promise(function(v,y){let E=v;t.isImageBitmapLoader===!0&&(E=function(w){const C=new ar(w);C.needsUpdate=!0,v(C)}),t.load(ql.resolveURL(m,s.path),E,void 0,y)})}).then(function(m){return h===!0&&l.revokeObjectURL(u),za(m,o),m.userData.mimeType=o.mimeType||JF(o.uri),m}).catch(function(m){throw console.error("THREE.GLTFLoader: Couldn't load texture",u),m});return this.sourceCache[e]=p,p}assignTexture(e,t,n,i){const s=this;return this.getDependency("texture",n.index).then(function(o){if(!o)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(o=o.clone(),o.channel=n.texCoord),s.extensions[An.KHR_TEXTURE_TRANSFORM]){const l=n.extensions!==void 0?n.extensions[An.KHR_TEXTURE_TRANSFORM]:void 0;if(l){const u=s.associations.get(o);o=s.extensions[An.KHR_TEXTURE_TRANSFORM].extendTexture(o,l),s.associations.set(o,u)}}return i!==void 0&&(typeof i=="number"&&(i=i===NC?vu:qa),"colorSpace"in o?o.colorSpace=i:o.encoding=i===vu?NC:mF),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const i=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const l="PointsMaterial:"+n.uuid;let u=this.cache.get(l);u||(u=new Gg,Fr.prototype.copy.call(u,n),u.color.copy(n.color),u.map=n.map,u.sizeAttenuation=!1,this.cache.add(l,u)),n=u}else if(e.isLine){const l="LineBasicMaterial:"+n.uuid;let u=this.cache.get(l);u||(u=new Ti,Fr.prototype.copy.call(u,n),u.color.copy(n.color),u.map=n.map,this.cache.add(l,u)),n=u}if(i||s||o){let l="ClonedMaterial:"+n.uuid+":";i&&(l+="derivative-tangents:"),s&&(l+="vertex-colors:"),o&&(l+="flat-shading:");let u=this.cache.get(l);u||(u=n.clone(),s&&(u.vertexColors=!0),o&&(u.flatShading=!0),i&&(u.normalScale&&(u.normalScale.y*=-1),u.clearcoatNormalScale&&(u.clearcoatNormalScale.y*=-1)),this.cache.add(l,u),this.associations.set(u,this.associations.get(n))),n=u}e.material=n}getMaterialType(){return $p}loadMaterial(e){const t=this,n=this.json,i=this.extensions,s=n.materials[e];let o;const l={},u=s.extensions||{},h=[];if(u[An.KHR_MATERIALS_UNLIT]){const m=i[An.KHR_MATERIALS_UNLIT];o=m.getMaterialType(),h.push(m.extendParams(l,s,t))}else{const m=s.pbrMetallicRoughness||{};if(l.color=new ht(1,1,1),l.opacity=1,Array.isArray(m.baseColorFactor)){const v=m.baseColorFactor;l.color.setRGB(v[0],v[1],v[2],qa),l.opacity=v[3]}m.baseColorTexture!==void 0&&h.push(t.assignTexture(l,"map",m.baseColorTexture,vu)),l.metalness=m.metallicFactor!==void 0?m.metallicFactor:1,l.roughness=m.roughnessFactor!==void 0?m.roughnessFactor:1,m.metallicRoughnessTexture!==void 0&&(h.push(t.assignTexture(l,"metalnessMap",m.metallicRoughnessTexture)),h.push(t.assignTexture(l,"roughnessMap",m.metallicRoughnessTexture))),o=this._invokeOne(function(v){return v.getMaterialType&&v.getMaterialType(e)}),h.push(Promise.all(this._invokeAll(function(v){return v.extendMaterialParams&&v.extendMaterialParams(e,l)})))}s.doubleSided===!0&&(l.side=Vs);const p=s.alphaMode||Xv.OPAQUE;if(p===Xv.BLEND?(l.transparent=!0,l.depthWrite=!1):(l.transparent=!1,p===Xv.MASK&&(l.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==ws&&(h.push(t.assignTexture(l,"normalMap",s.normalTexture)),l.normalScale=new Ue(1,1),s.normalTexture.scale!==void 0)){const m=s.normalTexture.scale;l.normalScale.set(m,m)}if(s.occlusionTexture!==void 0&&o!==ws&&(h.push(t.assignTexture(l,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(l.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==ws){const m=s.emissiveFactor;l.emissive=new ht().setRGB(m[0],m[1],m[2],qa)}return s.emissiveTexture!==void 0&&o!==ws&&h.push(t.assignTexture(l,"emissiveMap",s.emissiveTexture,vu)),Promise.all(h).then(function(){const m=new o(l);return s.name&&(m.name=s.name),za(m,s),t.associations.set(m,{materials:e}),s.extensions&&tu(i,m,s),m})}createUniqueName(e){const t=Bn.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,i=this.primitiveCache;function s(l){return n[An.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(l,t).then(function(u){return UC(u,l,t)})}const o=[];for(let l=0,u=e.length;l<u;l++){const h=e[l],p=WF(h),m=i[p];if(m)o.push(m.promise);else{let v;h.extensions&&h.extensions[An.KHR_DRACO_MESH_COMPRESSION]?v=s(h):v=UC(new cn,h,t),i[p]={primitive:h,promise:v},o.push(v)}}return Promise.all(o)}loadMesh(e){const t=this,n=this.json,i=this.extensions,s=n.meshes[e],o=s.primitives,l=[];for(let u=0,h=o.length;u<h;u++){const p=o[u].material===void 0?GF(this.cache):this.getDependency("material",o[u].material);l.push(p)}return l.push(t.loadGeometries(o)),Promise.all(l).then(function(u){const h=u.slice(0,u.length-1),p=u[u.length-1],m=[];for(let y=0,E=p.length;y<E;y++){const w=p[y],C=o[y];let x;const M=h[y];if(C.mode===js.TRIANGLES||C.mode===js.TRIANGLE_STRIP||C.mode===js.TRIANGLE_FAN||C.mode===void 0)x=s.isSkinnedMesh===!0?new kA(w,M):new Nr(w,M),x.isSkinnedMesh===!0&&x.normalizeSkinWeights(),C.mode===js.TRIANGLE_STRIP?x.geometry=PC(x.geometry,wA):C.mode===js.TRIANGLE_FAN&&(x.geometry=PC(x.geometry,gg));else if(C.mode===js.LINES)x=new Mo(w,M);else if(C.mode===js.LINE_STRIP)x=new $a(w,M);else if(C.mode===js.LINE_LOOP)x=new UA(w,M);else if(C.mode===js.POINTS)x=new HA(w,M);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+C.mode);Object.keys(x.geometry.morphAttributes).length>0&&VF(x,s),x.name=t.createUniqueName(s.name||"mesh_"+e),za(x,s),C.extensions&&tu(i,x,C),t.assignFinalMaterial(x),m.push(x)}for(let y=0,E=m.length;y<E;y++)t.associations.set(m[y],{meshes:e,primitives:y});if(m.length===1)return s.extensions&&tu(i,m[0],s),m[0];const v=new Wa;s.extensions&&tu(i,v,s),t.associations.set(v,{meshes:e});for(let y=0,E=m.length;y<E;y++)v.add(m[y]);return v})}loadCamera(e){let t;const n=this.json.cameras[e],i=n[n.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?t=new Ar(Wo.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):n.type==="orthographic"&&(t=new Ka(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),za(t,n),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],n=[];for(let i=0,s=t.joints.length;i<s;i++)n.push(this._loadNodeShallow(t.joints[i]));return t.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(i){const s=i.pop(),o=i,l=[],u=[];for(let h=0,p=o.length;h<p;h++){const m=o[h];if(m){l.push(m);const v=new $t;s!==null&&v.fromArray(s.array,h*16),u.push(v)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[h])}return new Jp(l,u)})}loadAnimation(e){const t=this.json,n=this,i=t.animations[e],s=i.name?i.name:"animation_"+e,o=[],l=[],u=[],h=[],p=[];for(let m=0,v=i.channels.length;m<v;m++){const y=i.channels[m],E=i.samplers[y.sampler],w=y.target,C=w.node,x=i.parameters!==void 0?i.parameters[E.input]:E.input,M=i.parameters!==void 0?i.parameters[E.output]:E.output;w.node!==void 0&&(o.push(this.getDependency("node",C)),l.push(this.getDependency("accessor",x)),u.push(this.getDependency("accessor",M)),h.push(E),p.push(w))}return Promise.all([Promise.all(o),Promise.all(l),Promise.all(u),Promise.all(h),Promise.all(p)]).then(function(m){const v=m[0],y=m[1],E=m[2],w=m[3],C=m[4],x=[];for(let M=0,S=v.length;M<S;M++){const R=v[M],N=y[M],I=E[M],O=w[M],j=C[M];if(R===void 0)continue;R.updateMatrix&&R.updateMatrix();const F=n._createAnimationTracks(R,N,I,O,j);if(F)for(let H=0;H<F.length;H++)x.push(F[H])}return new Mh(s,void 0,x)})}createNodeMesh(e){const t=this.json,n=this,i=t.nodes[e];return i.mesh===void 0?null:n.getDependency("mesh",i.mesh).then(function(s){const o=n._getNodeRef(n.meshCache,i.mesh,s);return i.weights!==void 0&&o.traverse(function(l){if(l.isMesh)for(let u=0,h=i.weights.length;u<h;u++)l.morphTargetInfluences[u]=i.weights[u]}),o})}loadNode(e){const t=this.json,n=this,i=t.nodes[e],s=n._loadNodeShallow(e),o=[],l=i.children||[];for(let h=0,p=l.length;h<p;h++)o.push(n.getDependency("node",l[h]));const u=i.skin===void 0?Promise.resolve(null):n.getDependency("skin",i.skin);return Promise.all([s,Promise.all(o),u]).then(function(h){const p=h[0],m=h[1],v=h[2];v!==null&&p.traverse(function(y){y.isSkinnedMesh&&y.bind(v,XF)});for(let y=0,E=m.length;y<E;y++)p.add(m[y]);return p})}_loadNodeShallow(e){const t=this.json,n=this.extensions,i=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?i.createUniqueName(s.name):"",l=[],u=i._invokeOne(function(h){return h.createNodeMesh&&h.createNodeMesh(e)});return u&&l.push(u),s.camera!==void 0&&l.push(i.getDependency("camera",s.camera).then(function(h){return i._getNodeRef(i.cameraCache,s.camera,h)})),i._invokeAll(function(h){return h.createNodeAttachment&&h.createNodeAttachment(e)}).forEach(function(h){l.push(h)}),this.nodeCache[e]=Promise.all(l).then(function(h){let p;if(s.isBone===!0?p=new zg:h.length>1?p=new Wa:h.length===1?p=h[0]:p=new bn,p!==h[0])for(let m=0,v=h.length;m<v;m++)p.add(h[m]);if(s.name&&(p.userData.name=s.name,p.name=o),za(p,s),s.extensions&&tu(n,p,s),s.matrix!==void 0){const m=new $t;m.fromArray(s.matrix),p.applyMatrix4(m)}else s.translation!==void 0&&p.position.fromArray(s.translation),s.rotation!==void 0&&p.quaternion.fromArray(s.rotation),s.scale!==void 0&&p.scale.fromArray(s.scale);return i.associations.has(p)||i.associations.set(p,{}),i.associations.get(p).nodes=e,p}),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],i=this,s=new Wa;n.name&&(s.name=i.createUniqueName(n.name)),za(s,n),n.extensions&&tu(t,s,n);const o=n.nodes||[],l=[];for(let u=0,h=o.length;u<h;u++)l.push(i.getDependency("node",o[u]));return Promise.all(l).then(function(u){for(let p=0,m=u.length;p<m;p++)s.add(u[p]);const h=p=>{const m=new Map;for(const[v,y]of i.associations)(v instanceof Fr||v instanceof ar)&&m.set(v,y);return p.traverse(v=>{const y=i.associations.get(v);y!=null&&m.set(v,y)}),m};return i.associations=h(s),s})}_createAnimationTracks(e,t,n,i,s){const o=[],l=e.name?e.name:e.uuid,u=[];zl[s.path]===zl.weights?e.traverse(function(v){v.morphTargetInfluences&&u.push(v.name?v.name:v.uuid)}):u.push(l);let h;switch(zl[s.path]){case zl.weights:h=Bu;break;case zl.rotation:h=Zl;break;case zl.position:case zl.scale:h=bu;break;default:switch(n.itemSize){case 1:h=Bu;break;case 2:case 3:default:h=bu;break}break}const p=i.interpolation!==void 0?zF[i.interpolation]:Cu,m=this._getArrayFromAccessor(n);for(let v=0,y=u.length;v<y;v++){const E=new h(u[v]+"."+zl[s.path],t.array,m,p);i.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(E),o.push(E)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const n=aA(t.constructor),i=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)i[s]=t[s]*n;t=i}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(n){const i=this instanceof Zl?HF:hB;return new i(this.times,this.values,this.getValueSize()/3,n)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function qF(r,e,t){const n=e.attributes,i=new Ms;if(n.POSITION!==void 0){const l=t.json.accessors[n.POSITION],u=l.min,h=l.max;if(u!==void 0&&h!==void 0){if(i.set(new X(u[0],u[1],u[2]),new X(h[0],h[1],h[2])),l.normalized){const p=aA(_h[l.componentType]);i.min.multiplyScalar(p),i.max.multiplyScalar(p)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const l=new X,u=new X;for(let h=0,p=s.length;h<p;h++){const m=s[h];if(m.POSITION!==void 0){const v=t.json.accessors[m.POSITION],y=v.min,E=v.max;if(y!==void 0&&E!==void 0){if(u.setX(Math.max(Math.abs(y[0]),Math.abs(E[0]))),u.setY(Math.max(Math.abs(y[1]),Math.abs(E[1]))),u.setZ(Math.max(Math.abs(y[2]),Math.abs(E[2]))),v.normalized){const w=aA(_h[v.componentType]);u.multiplyScalar(w)}l.max(u)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(l)}r.boundingBox=i;const o=new Ts;i.getCenter(o.center),o.radius=i.min.distanceTo(i.max)/2,r.boundingSphere=o}function UC(r,e,t){const n=e.attributes,i=[];function s(o,l){return t.getDependency("accessor",o).then(function(u){r.setAttribute(l,u)})}for(const o in n){const l=oA[o]||o.toLowerCase();l in r.attributes||i.push(s(n[o],l))}if(e.indices!==void 0&&!r.index){const o=t.getDependency("accessor",e.indices).then(function(l){r.setIndex(l)});i.push(o)}return za(r,e),qF(r,e,t),Promise.all(i).then(function(){return e.targets!==void 0?jF(r,e.targets,t):r})}const YF={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`
      varying vec2 vUv;

      void main() {

        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float h;

    varying vec2 vUv;

    void main() {

    	vec4 sum = vec4( 0.0 );

    	sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

    	gl_FragColor = sum;

    }
  `},$F={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`
    varying vec2 vUv;

    void main() {

      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `,fragmentShader:`

  uniform sampler2D tDiffuse;
  uniform float v;

  varying vec2 vUv;

  void main() {

    vec4 sum = vec4( 0.0 );

    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

    gl_FragColor = sum;

  }
  `};class QF extends QA{constructor(e){super(e),this.type=Mi}parse(e){const o=function(j,F){switch(j){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(F||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(F||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(F||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(F||""))}},m=function(j,F,H){F=F||1024;let de=j.pos,ve=-1,Y=0,me="",pe=String.fromCharCode.apply(null,new Uint16Array(j.subarray(de,de+128)));for(;0>(ve=pe.indexOf(`
`))&&Y<F&&de<j.byteLength;)me+=pe,Y+=pe.length,de+=128,pe+=String.fromCharCode.apply(null,new Uint16Array(j.subarray(de,de+128)));return-1<ve?(j.pos+=Y+ve+1,me+pe.slice(0,ve)):!1},v=function(j){const F=/^#\?(\S+)/,H=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,ee=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,de=/^\s*FORMAT=(\S+)\s*$/,ve=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,Y={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let me,pe;for((j.pos>=j.byteLength||!(me=m(j)))&&o(1,"no header found"),(pe=me.match(F))||o(3,"bad initial token"),Y.valid|=1,Y.programtype=pe[1],Y.string+=me+`
`;me=m(j),me!==!1;){if(Y.string+=me+`
`,me.charAt(0)==="#"){Y.comments+=me+`
`;continue}if((pe=me.match(H))&&(Y.gamma=parseFloat(pe[1])),(pe=me.match(ee))&&(Y.exposure=parseFloat(pe[1])),(pe=me.match(de))&&(Y.valid|=2,Y.format=pe[1]),(pe=me.match(ve))&&(Y.valid|=4,Y.height=parseInt(pe[1],10),Y.width=parseInt(pe[2],10)),Y.valid&2&&Y.valid&4)break}return Y.valid&2||o(3,"missing format specifier"),Y.valid&4||o(3,"missing image size specifier"),Y},y=function(j,F,H){const ee=F;if(ee<8||ee>32767||j[0]!==2||j[1]!==2||j[2]&128)return new Uint8Array(j);ee!==(j[2]<<8|j[3])&&o(3,"wrong scanline width");const de=new Uint8Array(4*F*H);de.length||o(4,"unable to allocate buffer space");let ve=0,Y=0;const me=4*ee,pe=new Uint8Array(4),Ae=new Uint8Array(me);let te=H;for(;te>0&&Y<j.byteLength;){Y+4>j.byteLength&&o(1),pe[0]=j[Y++],pe[1]=j[Y++],pe[2]=j[Y++],pe[3]=j[Y++],(pe[0]!=2||pe[1]!=2||(pe[2]<<8|pe[3])!=ee)&&o(3,"bad rgbe scanline format");let ce=0,ne;for(;ce<me&&Y<j.byteLength;){ne=j[Y++];const K=ne>128;if(K&&(ne-=128),(ne===0||ce+ne>me)&&o(3,"bad scanline data"),K){const xe=j[Y++];for(let De=0;De<ne;De++)Ae[ce++]=xe}else Ae.set(j.subarray(Y,Y+ne),ce),ce+=ne,Y+=ne}const z=ee;for(let K=0;K<z;K++){let xe=0;de[ve]=Ae[K+xe],xe+=ee,de[ve+1]=Ae[K+xe],xe+=ee,de[ve+2]=Ae[K+xe],xe+=ee,de[ve+3]=Ae[K+xe],ve+=4}te--}return de},E=function(j,F,H,ee){const de=j[F+3],ve=Math.pow(2,de-128)/255;H[ee+0]=j[F+0]*ve,H[ee+1]=j[F+1]*ve,H[ee+2]=j[F+2]*ve,H[ee+3]=1},w=function(j,F,H,ee){const de=j[F+3],ve=Math.pow(2,de-128)/255;H[ee+0]=pu.toHalfFloat(Math.min(j[F+0]*ve,65504)),H[ee+1]=pu.toHalfFloat(Math.min(j[F+1]*ve,65504)),H[ee+2]=pu.toHalfFloat(Math.min(j[F+2]*ve,65504)),H[ee+3]=pu.toHalfFloat(1)},C=new Uint8Array(e);C.pos=0;const x=v(C),M=x.width,S=x.height,R=y(C.subarray(C.pos),M,S);let N,I,O;switch(this.type){case bi:O=R.length/4;const j=new Float32Array(O*4);for(let H=0;H<O;H++)E(R,H*4,j,H*4);N=j,I=bi;break;case Mi:O=R.length/4;const F=new Uint16Array(O*4);for(let H=0;H<O;H++)w(R,H*4,F,H*4);N=F,I=Mi;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:M,height:S,data:N,header:x.string,gamma:x.gamma,exposure:x.exposure,type:I}}setDataType(e){return this.type=e,this}load(e,t,n,i){function s(o,l){switch(o.type){case bi:case Mi:"colorSpace"in o?o.colorSpace="srgb-linear":o.encoding=3e3,o.minFilter=Jn,o.magFilter=Jn,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,l)}return super.load(e,s,n,i)}}const $f=pE>=152;class ZF extends QA{constructor(e){super(e),this.type=Mi}parse(e){const F=Math.pow(2.7182818,2.2);function H(U,J){for(var le=0,k=0;k<65536;++k)(k==0||U[k>>3]&1<<(k&7))&&(J[le++]=k);for(var q=le-1;le<65536;)J[le++]=0;return q}function ee(U){for(var J=0;J<16384;J++)U[J]={},U[J].len=0,U[J].lit=0,U[J].p=null}const de={l:0,c:0,lc:0};function ve(U,J,le,k,q){for(;le<U;)J=J<<8|gn(k,q),le+=8;le-=U,de.l=J>>le&(1<<U)-1,de.c=J,de.lc=le}const Y=new Array(59);function me(U){for(var J=0;J<=58;++J)Y[J]=0;for(var J=0;J<65537;++J)Y[U[J]]+=1;for(var le=0,J=58;J>0;--J){var k=le+Y[J]>>1;Y[J]=le,le=k}for(var J=0;J<65537;++J){var q=U[J];q>0&&(U[J]=q|Y[q]++<<6)}}function pe(U,J,le,k,q,$,oe){for(var ie=le,Be=0,Te=0;q<=$;q++){if(ie.value-le.value>k)return!1;ve(6,Be,Te,U,ie);var Pe=de.l;if(Be=de.c,Te=de.lc,oe[q]=Pe,Pe==63){if(ie.value-le.value>k)throw"Something wrong with hufUnpackEncTable";ve(8,Be,Te,U,ie);var Ce=de.l+6;if(Be=de.c,Te=de.lc,q+Ce>$+1)throw"Something wrong with hufUnpackEncTable";for(;Ce--;)oe[q++]=0;q--}else if(Pe>=59){var Ce=Pe-59+2;if(q+Ce>$+1)throw"Something wrong with hufUnpackEncTable";for(;Ce--;)oe[q++]=0;q--}}me(oe)}function Ae(U){return U&63}function te(U){return U>>6}function ce(U,J,le,k){for(;J<=le;J++){var q=te(U[J]),$=Ae(U[J]);if(q>>$)throw"Invalid table entry";if($>14){var oe=k[q>>$-14];if(oe.len)throw"Invalid table entry";if(oe.lit++,oe.p){var ie=oe.p;oe.p=new Array(oe.lit);for(var Be=0;Be<oe.lit-1;++Be)oe.p[Be]=ie[Be]}else oe.p=new Array(1);oe.p[oe.lit-1]=J}else if($)for(var Te=0,Be=1<<14-$;Be>0;Be--){var oe=k[(q<<14-$)+Te];if(oe.len||oe.p)throw"Invalid table entry";oe.len=$,oe.lit=J,Te++}}return!0}const ne={c:0,lc:0};function z(U,J,le,k){U=U<<8|gn(le,k),J+=8,ne.c=U,ne.lc=J}const K={c:0,lc:0};function xe(U,J,le,k,q,$,oe,ie,Be,Te){if(U==J){k<8&&(z(le,k,q,oe),le=ne.c,k=ne.lc),k-=8;var Pe=le>>k,Pe=new Uint8Array([Pe])[0];if(Be.value+Pe>Te)return!1;for(var Ce=ie[Be.value-1];Pe-- >0;)ie[Be.value++]=Ce}else if(Be.value<Te)ie[Be.value++]=U;else return!1;K.c=le,K.lc=k}function De(U){return U&65535}function Ie(U){var J=De(U);return J>32767?J-65536:J}const Oe={a:0,b:0};function tt(U,J){var le=Ie(U),k=Ie(J),q=k,$=le+(q&1)+(q>>1),oe=$,ie=$-q;Oe.a=oe,Oe.b=ie}function rt(U,J){var le=De(U),k=De(J),q=le-(k>>1)&65535,$=k+q-32768&65535;Oe.a=$,Oe.b=q}function gt(U,J,le,k,q,$,oe){for(var ie=oe<16384,Be=le>q?q:le,Te=1,Pe;Te<=Be;)Te<<=1;for(Te>>=1,Pe=Te,Te>>=1;Te>=1;){for(var Ce=0,At=Ce+$*(q-Pe),je=$*Te,Ke=$*Pe,Et=k*Te,Nt=k*Pe,Ft,Vt,dt,ut;Ce<=At;Ce+=Ke){for(var jt=Ce,Wt=Ce+k*(le-Pe);jt<=Wt;jt+=Nt){var Jt=jt+Et,Pn=jt+je,jn=Pn+Et;ie?(tt(U[jt+J],U[Pn+J]),Ft=Oe.a,dt=Oe.b,tt(U[Jt+J],U[jn+J]),Vt=Oe.a,ut=Oe.b,tt(Ft,Vt),U[jt+J]=Oe.a,U[Jt+J]=Oe.b,tt(dt,ut),U[Pn+J]=Oe.a,U[jn+J]=Oe.b):(rt(U[jt+J],U[Pn+J]),Ft=Oe.a,dt=Oe.b,rt(U[Jt+J],U[jn+J]),Vt=Oe.a,ut=Oe.b,rt(Ft,Vt),U[jt+J]=Oe.a,U[Jt+J]=Oe.b,rt(dt,ut),U[Pn+J]=Oe.a,U[jn+J]=Oe.b)}if(le&Te){var Pn=jt+je;ie?tt(U[jt+J],U[Pn+J]):rt(U[jt+J],U[Pn+J]),Ft=Oe.a,U[Pn+J]=Oe.b,U[jt+J]=Ft}}if(q&Te)for(var jt=Ce,Wt=Ce+k*(le-Pe);jt<=Wt;jt+=Nt){var Jt=jt+Et;ie?tt(U[jt+J],U[Jt+J]):rt(U[jt+J],U[Jt+J]),Ft=Oe.a,U[Jt+J]=Oe.b,U[jt+J]=Ft}Pe=Te,Te>>=1}return Ce}function kt(U,J,le,k,q,$,oe,ie,Be,Te){for(var Pe=0,Ce=0,At=ie,je=Math.trunc(q.value+($+7)/8);q.value<je;)for(z(Pe,Ce,le,q),Pe=ne.c,Ce=ne.lc;Ce>=14;){var Ke=Pe>>Ce-14&16383,Et=J[Ke];if(Et.len)Ce-=Et.len,xe(Et.lit,oe,Pe,Ce,le,k,q,Be,Te,At),Pe=K.c,Ce=K.lc;else{if(!Et.p)throw"hufDecode issues";var Nt;for(Nt=0;Nt<Et.lit;Nt++){for(var Ft=Ae(U[Et.p[Nt]]);Ce<Ft&&q.value<je;)z(Pe,Ce,le,q),Pe=ne.c,Ce=ne.lc;if(Ce>=Ft&&te(U[Et.p[Nt]])==(Pe>>Ce-Ft&(1<<Ft)-1)){Ce-=Ft,xe(Et.p[Nt],oe,Pe,Ce,le,k,q,Be,Te,At),Pe=K.c,Ce=K.lc;break}}if(Nt==Et.lit)throw"hufDecode issues"}}var Vt=8-$&7;for(Pe>>=Vt,Ce-=Vt;Ce>0;){var Et=J[Pe<<14-Ce&16383];if(Et.len)Ce-=Et.len,xe(Et.lit,oe,Pe,Ce,le,k,q,Be,Te,At),Pe=K.c,Ce=K.lc;else throw"hufDecode issues"}return!0}function xt(U,J,le,k,q,$){var oe={value:0},ie=le.value,Be=Ge(J,le),Te=Ge(J,le);le.value+=4;var Pe=Ge(J,le);if(le.value+=4,Be<0||Be>=65537||Te<0||Te>=65537)throw"Something wrong with HUF_ENCSIZE";var Ce=new Array(65537),At=new Array(16384);ee(At);var je=k-(le.value-ie);if(pe(U,J,le,je,Be,Te,Ce),Pe>8*(k-(le.value-ie)))throw"Something wrong with hufUncompress";ce(Ce,Be,Te,At),kt(Ce,At,U,J,le,Pe,Te,$,q,oe)}function se(U,J,le){for(var k=0;k<le;++k)J[k]=U[J[k]]}function Je(U){for(var J=1;J<U.length;J++){var le=U[J-1]+U[J]-128;U[J]=le}}function Fe(U,J){for(var le=0,k=Math.floor((U.length+1)/2),q=0,$=U.length-1;!(q>$||(J[q++]=U[le++],q>$));)J[q++]=U[k++]}function $e(U){for(var J=U.byteLength,le=new Array,k=0,q=new DataView(U);J>0;){var $=q.getInt8(k++);if($<0){var oe=-$;J-=oe+1;for(var ie=0;ie<oe;ie++)le.push(q.getUint8(k++))}else{var oe=$;J-=2;for(var Be=q.getUint8(k++),ie=0;ie<oe+1;ie++)le.push(Be)}}return le}function ze(U,J,le,k,q,$){var Jt=new DataView($.buffer),oe=le[U.idx[0]].width,ie=le[U.idx[0]].height,Be=3,Te=Math.floor(oe/8),Pe=Math.ceil(oe/8),Ce=Math.ceil(ie/8),At=oe-(Pe-1)*8,je=ie-(Ce-1)*8,Ke={value:0},Et=new Array(Be),Nt=new Array(Be),Ft=new Array(Be),Vt=new Array(Be),dt=new Array(Be);for(let on=0;on<Be;++on)dt[on]=J[U.idx[on]],Et[on]=on<1?0:Et[on-1]+Pe*Ce,Nt[on]=new Float32Array(64),Ft[on]=new Uint16Array(64),Vt[on]=new Uint16Array(Pe*64);for(let on=0;on<Ce;++on){var ut=8;on==Ce-1&&(ut=je);var jt=8;for(let nn=0;nn<Pe;++nn){nn==Pe-1&&(jt=At);for(let pn=0;pn<Be;++pn)Ft[pn].fill(0),Ft[pn][0]=q[Et[pn]++],bt(Ke,k,Ft[pn]),ft(Ft[pn],Nt[pn]),yt(Nt[pn]);Lt(Nt);for(let pn=0;pn<Be;++pn)Kt(Nt[pn],Vt[pn],nn*64)}let Qn=0;for(let nn=0;nn<Be;++nn){const pn=le[U.idx[nn]].type;for(let Fn=8*on;Fn<8*on+ut;++Fn){Qn=dt[nn][Fn];for(let vi=0;vi<Te;++vi){const Er=vi*64+(Fn&7)*8;Jt.setUint16(Qn+0*pn,Vt[nn][Er+0],!0),Jt.setUint16(Qn+2*pn,Vt[nn][Er+1],!0),Jt.setUint16(Qn+4*pn,Vt[nn][Er+2],!0),Jt.setUint16(Qn+6*pn,Vt[nn][Er+3],!0),Jt.setUint16(Qn+8*pn,Vt[nn][Er+4],!0),Jt.setUint16(Qn+10*pn,Vt[nn][Er+5],!0),Jt.setUint16(Qn+12*pn,Vt[nn][Er+6],!0),Jt.setUint16(Qn+14*pn,Vt[nn][Er+7],!0),Qn+=16*pn}}if(Te!=Pe)for(let Fn=8*on;Fn<8*on+ut;++Fn){const vi=dt[nn][Fn]+8*Te*2*pn,Er=Te*64+(Fn&7)*8;for(let Ds=0;Ds<jt;++Ds)Jt.setUint16(vi+Ds*2*pn,Vt[nn][Er+Ds],!0)}}}for(var Wt=new Uint16Array(oe),Jt=new DataView($.buffer),Pn=0;Pn<Be;++Pn){le[U.idx[Pn]].decoded=!0;var jn=le[U.idx[Pn]].type;if(le[Pn].type==2)for(var Nn=0;Nn<ie;++Nn){const on=dt[Pn][Nn];for(var vn=0;vn<oe;++vn)Wt[vn]=Jt.getUint16(on+vn*2*jn,!0);for(var vn=0;vn<oe;++vn)Jt.setFloat32(on+vn*2*jn,ke(Wt[vn]),!0)}}}function bt(U,J,le){for(var k,q=1;q<64;)k=J[U.value],k==65280?q=64:k>>8==255?q+=k&255:(le[q]=k,q++),U.value++}function ft(U,J){J[0]=ke(U[0]),J[1]=ke(U[1]),J[2]=ke(U[5]),J[3]=ke(U[6]),J[4]=ke(U[14]),J[5]=ke(U[15]),J[6]=ke(U[27]),J[7]=ke(U[28]),J[8]=ke(U[2]),J[9]=ke(U[4]),J[10]=ke(U[7]),J[11]=ke(U[13]),J[12]=ke(U[16]),J[13]=ke(U[26]),J[14]=ke(U[29]),J[15]=ke(U[42]),J[16]=ke(U[3]),J[17]=ke(U[8]),J[18]=ke(U[12]),J[19]=ke(U[17]),J[20]=ke(U[25]),J[21]=ke(U[30]),J[22]=ke(U[41]),J[23]=ke(U[43]),J[24]=ke(U[9]),J[25]=ke(U[11]),J[26]=ke(U[18]),J[27]=ke(U[24]),J[28]=ke(U[31]),J[29]=ke(U[40]),J[30]=ke(U[44]),J[31]=ke(U[53]),J[32]=ke(U[10]),J[33]=ke(U[19]),J[34]=ke(U[23]),J[35]=ke(U[32]),J[36]=ke(U[39]),J[37]=ke(U[45]),J[38]=ke(U[52]),J[39]=ke(U[54]),J[40]=ke(U[20]),J[41]=ke(U[22]),J[42]=ke(U[33]),J[43]=ke(U[38]),J[44]=ke(U[46]),J[45]=ke(U[51]),J[46]=ke(U[55]),J[47]=ke(U[60]),J[48]=ke(U[21]),J[49]=ke(U[34]),J[50]=ke(U[37]),J[51]=ke(U[47]),J[52]=ke(U[50]),J[53]=ke(U[56]),J[54]=ke(U[59]),J[55]=ke(U[61]),J[56]=ke(U[35]),J[57]=ke(U[36]),J[58]=ke(U[48]),J[59]=ke(U[49]),J[60]=ke(U[57]),J[61]=ke(U[58]),J[62]=ke(U[62]),J[63]=ke(U[63])}function yt(U){const J=.5*Math.cos(.7853975),le=.5*Math.cos(3.14159/16),k=.5*Math.cos(3.14159/8),q=.5*Math.cos(3*3.14159/16),$=.5*Math.cos(5*3.14159/16),oe=.5*Math.cos(3*3.14159/8),ie=.5*Math.cos(7*3.14159/16);for(var Be=new Array(4),Te=new Array(4),Pe=new Array(4),Ce=new Array(4),At=0;At<8;++At){var je=At*8;Be[0]=k*U[je+2],Be[1]=oe*U[je+2],Be[2]=k*U[je+6],Be[3]=oe*U[je+6],Te[0]=le*U[je+1]+q*U[je+3]+$*U[je+5]+ie*U[je+7],Te[1]=q*U[je+1]-ie*U[je+3]-le*U[je+5]-$*U[je+7],Te[2]=$*U[je+1]-le*U[je+3]+ie*U[je+5]+q*U[je+7],Te[3]=ie*U[je+1]-$*U[je+3]+q*U[je+5]-le*U[je+7],Pe[0]=J*(U[je+0]+U[je+4]),Pe[3]=J*(U[je+0]-U[je+4]),Pe[1]=Be[0]+Be[3],Pe[2]=Be[1]-Be[2],Ce[0]=Pe[0]+Pe[1],Ce[1]=Pe[3]+Pe[2],Ce[2]=Pe[3]-Pe[2],Ce[3]=Pe[0]-Pe[1],U[je+0]=Ce[0]+Te[0],U[je+1]=Ce[1]+Te[1],U[je+2]=Ce[2]+Te[2],U[je+3]=Ce[3]+Te[3],U[je+4]=Ce[3]-Te[3],U[je+5]=Ce[2]-Te[2],U[je+6]=Ce[1]-Te[1],U[je+7]=Ce[0]-Te[0]}for(var Ke=0;Ke<8;++Ke)Be[0]=k*U[16+Ke],Be[1]=oe*U[16+Ke],Be[2]=k*U[48+Ke],Be[3]=oe*U[48+Ke],Te[0]=le*U[8+Ke]+q*U[24+Ke]+$*U[40+Ke]+ie*U[56+Ke],Te[1]=q*U[8+Ke]-ie*U[24+Ke]-le*U[40+Ke]-$*U[56+Ke],Te[2]=$*U[8+Ke]-le*U[24+Ke]+ie*U[40+Ke]+q*U[56+Ke],Te[3]=ie*U[8+Ke]-$*U[24+Ke]+q*U[40+Ke]-le*U[56+Ke],Pe[0]=J*(U[Ke]+U[32+Ke]),Pe[3]=J*(U[Ke]-U[32+Ke]),Pe[1]=Be[0]+Be[3],Pe[2]=Be[1]-Be[2],Ce[0]=Pe[0]+Pe[1],Ce[1]=Pe[3]+Pe[2],Ce[2]=Pe[3]-Pe[2],Ce[3]=Pe[0]-Pe[1],U[0+Ke]=Ce[0]+Te[0],U[8+Ke]=Ce[1]+Te[1],U[16+Ke]=Ce[2]+Te[2],U[24+Ke]=Ce[3]+Te[3],U[32+Ke]=Ce[3]-Te[3],U[40+Ke]=Ce[2]-Te[2],U[48+Ke]=Ce[1]-Te[1],U[56+Ke]=Ce[0]-Te[0]}function Lt(U){for(var J=0;J<64;++J){var le=U[0][J],k=U[1][J],q=U[2][J];U[0][J]=le+1.5747*q,U[1][J]=le-.1873*k-.4682*q,U[2][J]=le+1.8556*k}}function Kt(U,J,le){for(var k=0;k<64;++k)J[le+k]=pu.toHalfFloat(Mn(U[k]))}function Mn(U){return U<=1?Math.sign(U)*Math.pow(Math.abs(U),2.2):Math.sign(U)*Math.pow(F,Math.abs(U)-1)}function Z(U){return new DataView(U.array.buffer,U.offset.value,U.size)}function W(U){var J=U.viewer.buffer.slice(U.offset.value,U.offset.value+U.size),le=new Uint8Array($e(J)),k=new Uint8Array(le.length);return Je(le),Fe(le,k),new DataView(k.buffer)}function Se(U){var J=U.array.slice(U.offset.value,U.offset.value+U.size),le=K2(J),k=new Uint8Array(le.length);return Je(le),Fe(le,k),new DataView(k.buffer)}function Ze(U){for(var J=U.viewer,le={value:U.offset.value},k=new Uint16Array(U.width*U.scanlineBlockSize*(U.channels*U.type)),q=new Uint8Array(8192),$=0,oe=new Array(U.channels),ie=0;ie<U.channels;ie++)oe[ie]={},oe[ie].start=$,oe[ie].end=oe[ie].start,oe[ie].nx=U.width,oe[ie].ny=U.lines,oe[ie].size=U.type,$+=oe[ie].nx*oe[ie].ny*oe[ie].size;var Be=ue(J,le),Te=ue(J,le);if(Te>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(Be<=Te)for(var ie=0;ie<Te-Be+1;ie++)q[ie+Be]=ae(J,le);var Pe=new Uint16Array(65536),Ce=H(q,Pe),At=Ge(J,le);xt(U.array,J,le,At,k,$);for(var ie=0;ie<U.channels;++ie)for(var je=oe[ie],Ke=0;Ke<oe[ie].size;++Ke)gt(k,je.start+Ke,je.nx,je.size,je.ny,je.nx*je.size,Ce);se(Pe,k,$);for(var Et=0,Nt=new Uint8Array(k.buffer.byteLength),Ft=0;Ft<U.lines;Ft++)for(var Vt=0;Vt<U.channels;Vt++){var je=oe[Vt],dt=je.nx*je.size,ut=new Uint8Array(k.buffer,je.end*2,dt*2);Nt.set(ut,Et),Et+=dt*2,je.end+=dt}return new DataView(Nt.buffer)}function Ve(U){var J=U.array.slice(U.offset.value,U.offset.value+U.size),le=K2(J);const k=U.lines*U.channels*U.width,q=U.type==1?new Uint16Array(k):new Uint32Array(k);let $=0,oe=0;const ie=new Array(4);for(let Be=0;Be<U.lines;Be++)for(let Te=0;Te<U.channels;Te++){let Pe=0;switch(U.type){case 1:ie[0]=$,ie[1]=ie[0]+U.width,$=ie[1]+U.width;for(let Ce=0;Ce<U.width;++Ce){const At=le[ie[0]++]<<8|le[ie[1]++];Pe+=At,q[oe]=Pe,oe++}break;case 2:ie[0]=$,ie[1]=ie[0]+U.width,ie[2]=ie[1]+U.width,$=ie[2]+U.width;for(let Ce=0;Ce<U.width;++Ce){const At=le[ie[0]++]<<24|le[ie[1]++]<<16|le[ie[2]++]<<8;Pe+=At,q[oe]=Pe,oe++}break}}return new DataView(q.buffer)}function Ye(U){var J=U.viewer,le={value:U.offset.value},k=new Uint8Array(U.width*U.lines*(U.channels*U.type*2)),q={version:Me(J,le),unknownUncompressedSize:Me(J,le),unknownCompressedSize:Me(J,le),acCompressedSize:Me(J,le),dcCompressedSize:Me(J,le),rleCompressedSize:Me(J,le),rleUncompressedSize:Me(J,le),rleRawSize:Me(J,le),totalAcUncompressedCount:Me(J,le),totalDcUncompressedCount:Me(J,le),acCompression:Me(J,le)};if(q.version<2)throw"EXRLoader.parse: "+kr.compression+" version "+q.version+" is unsupported";for(var $=new Array,oe=ue(J,le)-2;oe>0;){var ie=Ct(J.buffer,le),Be=ae(J,le),Te=Be>>2&3,Pe=(Be>>4)-1,Ce=new Int8Array([Pe])[0],At=ae(J,le);$.push({name:ie,index:Ce,type:At,compression:Te}),oe-=ie.length+3}for(var je=kr.channels,Ke=new Array(U.channels),Et=0;Et<U.channels;++Et){var Nt=Ke[Et]={},Ft=je[Et];Nt.name=Ft.name,Nt.compression=0,Nt.decoded=!1,Nt.type=Ft.pixelType,Nt.pLinear=Ft.pLinear,Nt.width=U.width,Nt.height=U.lines}for(var Vt={idx:new Array(3)},dt=0;dt<U.channels;++dt)for(var Nt=Ke[dt],Et=0;Et<$.length;++Et){var ut=$[Et];Nt.name==ut.name&&(Nt.compression=ut.compression,ut.index>=0&&(Vt.idx[ut.index]=dt),Nt.offset=dt)}if(q.acCompressedSize>0)switch(q.acCompression){case 0:var Jt=new Uint16Array(q.totalAcUncompressedCount);xt(U.array,J,le,q.acCompressedSize,Jt,q.totalAcUncompressedCount);break;case 1:var jt=U.array.slice(le.value,le.value+q.totalAcUncompressedCount),Wt=K2(jt),Jt=new Uint16Array(Wt.buffer);le.value+=q.totalAcUncompressedCount;break}if(q.dcCompressedSize>0){var Pn={array:U.array,offset:le,size:q.dcCompressedSize},jn=new Uint16Array(Se(Pn).buffer);le.value+=q.dcCompressedSize}if(q.rleRawSize>0){var jt=U.array.slice(le.value,le.value+q.rleCompressedSize),Wt=K2(jt),Nn=$e(Wt.buffer);le.value+=q.rleCompressedSize}for(var vn=0,on=new Array(Ke.length),Et=0;Et<on.length;++Et)on[Et]=new Array;for(var Qn=0;Qn<U.lines;++Qn)for(var nn=0;nn<Ke.length;++nn)on[nn].push(vn),vn+=Ke[nn].width*U.type*2;ze(Vt,on,Ke,Jt,jn,k);for(var Et=0;Et<Ke.length;++Et){var Nt=Ke[Et];if(!Nt.decoded)switch(Nt.compression){case 2:for(var pn=0,Fn=0,Qn=0;Qn<U.lines;++Qn){for(var vi=on[Et][pn],Er=0;Er<Nt.width;++Er){for(var Ds=0;Ds<2*Nt.type;++Ds)k[vi++]=Nn[Fn+Ds*Nt.width*Nt.height];Fn++}pn++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(k.buffer)}function Ct(U,J){for(var le=new Uint8Array(U),k=0;le[J.value+k]!=0;)k+=1;var q=new TextDecoder().decode(le.slice(J.value,J.value+k));return J.value=J.value+k+1,q}function nt(U,J,le){var k=new TextDecoder().decode(new Uint8Array(U).slice(J.value,J.value+le));return J.value=J.value+le,k}function ct(U,J){var le=rn(U,J),k=Ge(U,J);return[le,k]}function Ut(U,J){var le=Ge(U,J),k=Ge(U,J);return[le,k]}function rn(U,J){var le=U.getInt32(J.value,!0);return J.value=J.value+4,le}function Ge(U,J){var le=U.getUint32(J.value,!0);return J.value=J.value+4,le}function gn(U,J){var le=U[J.value];return J.value=J.value+1,le}function ae(U,J){var le=U.getUint8(J.value);return J.value=J.value+1,le}const Me=function(U,J){let le;return"getBigInt64"in DataView.prototype?le=Number(U.getBigInt64(J.value,!0)):le=U.getUint32(J.value+4,!0)+Number(U.getUint32(J.value,!0)<<32),J.value+=8,le};function He(U,J){var le=U.getFloat32(J.value,!0);return J.value+=4,le}function We(U,J){return pu.toHalfFloat(He(U,J))}function ke(U){var J=(U&31744)>>10,le=U&1023;return(U>>15?-1:1)*(J?J===31?le?NaN:1/0:Math.pow(2,J-15)*(1+le/1024):6103515625e-14*(le/1024))}function ue(U,J){var le=U.getUint16(J.value,!0);return J.value+=2,le}function ot(U,J){return ke(ue(U,J))}function it(U,J,le,k){for(var q=le.value,$=[];le.value<q+k-1;){var oe=Ct(J,le),ie=rn(U,le),Be=ae(U,le);le.value+=3;var Te=rn(U,le),Pe=rn(U,le);$.push({name:oe,pixelType:ie,pLinear:Be,xSampling:Te,ySampling:Pe})}return le.value+=1,$}function Ne(U,J){var le=He(U,J),k=He(U,J),q=He(U,J),$=He(U,J),oe=He(U,J),ie=He(U,J),Be=He(U,J),Te=He(U,J);return{redX:le,redY:k,greenX:q,greenY:$,blueX:oe,blueY:ie,whiteX:Be,whiteY:Te}}function Qe(U,J){var le=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],k=ae(U,J);return le[k]}function Bt(U,J){var le=Ge(U,J),k=Ge(U,J),q=Ge(U,J),$=Ge(U,J);return{xMin:le,yMin:k,xMax:q,yMax:$}}function tn(U,J){var le=["INCREASING_Y"],k=ae(U,J);return le[k]}function xn(U,J){var le=He(U,J),k=He(U,J);return[le,k]}function Xn(U,J){var le=He(U,J),k=He(U,J),q=He(U,J);return[le,k,q]}function un(U,J,le,k,q){if(k==="string"||k==="stringvector"||k==="iccProfile")return nt(J,le,q);if(k==="chlist")return it(U,J,le,q);if(k==="chromaticities")return Ne(U,le);if(k==="compression")return Qe(U,le);if(k==="box2i")return Bt(U,le);if(k==="lineOrder")return tn(U,le);if(k==="float")return He(U,le);if(k==="v2f")return xn(U,le);if(k==="v3f")return Xn(U,le);if(k==="int")return rn(U,le);if(k==="rational")return ct(U,le);if(k==="timecode")return Ut(U,le);if(k==="preview")return le.value+=q,"skipped";le.value+=q}function lr(U,J,le){const k={};if(U.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";k.version=U.getUint8(4);const q=U.getUint8(5);k.spec={singleTile:!!(q&2),longName:!!(q&4),deepFormat:!!(q&8),multiPart:!!(q&16)},le.value=8;for(var $=!0;$;){var oe=Ct(J,le);if(oe==0)$=!1;else{var ie=Ct(J,le),Be=Ge(U,le),Te=un(U,J,le,ie,Be);Te===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${ie}'.`):k[oe]=Te}}if((q&-5)!=0)throw console.error("EXRHeader:",k),"THREE.EXRLoader: provided file is currently unsupported.";return k}function Br(U,J,le,k,q){const $={size:0,viewer:J,array:le,offset:k,width:U.dataWindow.xMax-U.dataWindow.xMin+1,height:U.dataWindow.yMax-U.dataWindow.yMin+1,channels:U.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:U.channels[0].pixelType,uncompress:null,getter:null,format:null,[$f?"colorSpace":"encoding"]:null};switch(U.compression){case"NO_COMPRESSION":$.lines=1,$.uncompress=Z;break;case"RLE_COMPRESSION":$.lines=1,$.uncompress=W;break;case"ZIPS_COMPRESSION":$.lines=1,$.uncompress=Se;break;case"ZIP_COMPRESSION":$.lines=16,$.uncompress=Se;break;case"PIZ_COMPRESSION":$.lines=32,$.uncompress=Ze;break;case"PXR24_COMPRESSION":$.lines=16,$.uncompress=Ve;break;case"DWAA_COMPRESSION":$.lines=32,$.uncompress=Ye;break;case"DWAB_COMPRESSION":$.lines=256,$.uncompress=Ye;break;default:throw"EXRLoader.parse: "+U.compression+" is unsupported"}if($.scanlineBlockSize=$.lines,$.type==1)switch(q){case bi:$.getter=ot,$.inputSize=2;break;case Mi:$.getter=ue,$.inputSize=2;break}else if($.type==2)switch(q){case bi:$.getter=He,$.inputSize=4;break;case Mi:$.getter=We,$.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+$.type+" for "+U.compression+".";$.blockCount=(U.dataWindow.yMax+1)/$.scanlineBlockSize;for(var oe=0;oe<$.blockCount;oe++)Me(J,k);$.outputChannels=$.channels==3?4:$.channels;const ie=$.width*$.height*$.outputChannels;switch(q){case bi:$.byteArray=new Float32Array(ie),$.channels<$.outputChannels&&$.byteArray.fill(1,0,ie);break;case Mi:$.byteArray=new Uint16Array(ie),$.channels<$.outputChannels&&$.byteArray.fill(15360,0,ie);break;default:console.error("THREE.EXRLoader: unsupported type: ",q);break}return $.bytesPerLine=$.width*$.inputSize*$.channels,$.outputChannels==4?$.format=ji:$.format=AA,$f?$.colorSpace="srgb-linear":$.encoding=3e3,$}const Rs=new DataView(e),ls=new Uint8Array(e),ri={value:0},kr=lr(Rs,e,ri),Qt=Br(kr,Rs,ls,ri,this.type),ta={value:0},el={R:0,G:1,B:2,A:3,Y:0};for(let U=0;U<Qt.height/Qt.scanlineBlockSize;U++){const J=Ge(Rs,ri);Qt.size=Ge(Rs,ri),Qt.lines=J+Qt.scanlineBlockSize>Qt.height?Qt.height-J:Qt.scanlineBlockSize;const k=Qt.size<Qt.lines*Qt.bytesPerLine?Qt.uncompress(Qt):Z(Qt);ri.value+=Qt.size;for(let q=0;q<Qt.scanlineBlockSize;q++){const $=q+U*Qt.scanlineBlockSize;if($>=Qt.height)break;for(let oe=0;oe<Qt.channels;oe++){const ie=el[kr.channels[oe].name];for(let Be=0;Be<Qt.width;Be++){ta.value=(q*(Qt.channels*Qt.width)+oe*Qt.width+Be)*Qt.inputSize;const Te=(Qt.height-1-$)*(Qt.width*Qt.outputChannels)+Be*Qt.outputChannels+ie;Qt.byteArray[Te]=Qt.getter(k,ta)}}}}return{header:kr,width:Qt.width,height:Qt.height,data:Qt.byteArray,format:Qt.format,[$f?"colorSpace":"encoding"]:Qt[$f?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,n,i){function s(o,l){$f?o.colorSpace=l.colorSpace:o.encoding=l.encoding,o.minFilter=Jn,o.magFilter=Jn,o.generateMipmaps=!1,o.flipY=!1,t&&t(o,l)}return super.load(e,s,n,i)}}const qv=new WeakMap;class ek extends Ri{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,i){const s=new bs(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{const l={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(o,l).then(t).catch(i)},n,i)}decodeDracoFile(e,t,n,i){const s={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const u in t.attributeTypes){const h=t.attributeTypes[u];h.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[u]=h.name)}const n=JSON.stringify(t);if(qv.has(e)){const u=qv.get(e);if(u.key===n)return u.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const s=this.workerNextTaskID++,o=e.byteLength,l=this._getWorker(s,o).then(u=>(i=u,new Promise((h,p)=>{i._callbacks[s]={resolve:h,reject:p},i.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(u=>this._createGeometry(u.geometry));return l.catch(()=>!0).then(()=>{i&&s&&this._releaseTask(i,s)}),qv.set(e,{key:n,promise:l}),l}_createGeometry(e){const t=new cn;e.index&&t.setIndex(new Dn(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const i=e.attributes[n],s=i.name,o=i.array,l=i.itemSize;t.setAttribute(s,new Dn(o,l))}return t}_loadLibrary(e,t){const n=new bs(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((i,s)=>{n.load(e,i,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(n=>{const i=n[0];e||(this.decoderConfig.wasmBinary=n[1]);const s=tk.toString(),o=["/* draco decoder */",i,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(s){const o=s.data;switch(o.type){case"decode":i._callbacks[o.id].resolve(o);break;case"error":i._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,s){return i._taskLoad>s._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function tk(){let r,e;onmessage=function(o){const l=o.data;switch(l.type){case"init":r=l.decoderConfig,e=new Promise(function(p){r.onModuleLoaded=function(m){p({draco:m})},DracoDecoderModule(r)});break;case"decode":const u=l.buffer,h=l.taskConfig;e.then(p=>{const m=p.draco,v=new m.Decoder,y=new m.DecoderBuffer;y.Init(new Int8Array(u),u.byteLength);try{const E=t(m,v,y,h),w=E.attributes.map(C=>C.array.buffer);E.index&&w.push(E.index.array.buffer),self.postMessage({type:"decode",id:l.id,geometry:E},w)}catch(E){console.error(E),self.postMessage({type:"error",id:l.id,error:E.message})}finally{m.destroy(y),m.destroy(v)}});break}};function t(o,l,u,h){const p=h.attributeIDs,m=h.attributeTypes;let v,y;const E=l.GetEncodedGeometryType(u);if(E===o.TRIANGULAR_MESH)v=new o.Mesh,y=l.DecodeBufferToMesh(u,v);else if(E===o.POINT_CLOUD)v=new o.PointCloud,y=l.DecodeBufferToPointCloud(u,v);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!y.ok()||v.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+y.error_msg());const w={index:null,attributes:[]};for(const C in p){const x=self[m[C]];let M,S;if(h.useUniqueIDs)S=p[C],M=l.GetAttributeByUniqueId(v,S);else{if(S=l.GetAttributeId(v,o[p[C]]),S===-1)continue;M=l.GetAttribute(v,S)}w.attributes.push(i(o,l,v,C,x,M))}return E===o.TRIANGULAR_MESH&&(w.index=n(o,l,v)),o.destroy(v),w}function n(o,l,u){const p=u.num_faces()*3,m=p*4,v=o._malloc(m);l.GetTrianglesUInt32Array(u,m,v);const y=new Uint32Array(o.HEAPF32.buffer,v,p).slice();return o._free(v),{array:y,itemSize:1}}function i(o,l,u,h,p,m){const v=m.num_components(),E=u.num_points()*v,w=E*p.BYTES_PER_ELEMENT,C=s(o,p),x=o._malloc(w);l.GetAttributeDataArrayForAllPoints(u,m,C,w,x);const M=new p(o.HEAPF32.buffer,x,E).slice();return o._free(x),{name:h,array:M,itemSize:v}}function s(o,l){switch(l){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}let Y2;const Yv=()=>{if(Y2)return Y2;const r="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),n=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let i=r;WebAssembly.validate(t)&&(i=e);let s;const o=WebAssembly.instantiate(l(i),{}).then(m=>{s=m.instance,s.exports.__wasm_call_ctors()});function l(m){const v=new Uint8Array(m.length);for(let E=0;E<m.length;++E){const w=m.charCodeAt(E);v[E]=w>96?w-71:w>64?w-65:w>47?w+4:w>46?63:62}let y=0;for(let E=0;E<m.length;++E)v[y++]=v[E]<60?n[v[E]]:(v[E]-60)*64+v[++E];return v.buffer.slice(0,y)}function u(m,v,y,E,w,C){const x=s.exports.sbrk,M=y+3&-4,S=x(M*E),R=x(w.length),N=new Uint8Array(s.exports.memory.buffer);N.set(w,R);const I=m(S,y,E,R,w.length);if(I===0&&C&&C(S,M,E),v.set(N.subarray(S,S+y*E)),x(S-x(0)),I!==0)throw new Error(`Malformed buffer data: ${I}`)}const h={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},p={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return Y2={ready:o,supported:!0,decodeVertexBuffer(m,v,y,E,w){u(s.exports.meshopt_decodeVertexBuffer,m,v,y,E,s.exports[h[w]])},decodeIndexBuffer(m,v,y,E){u(s.exports.meshopt_decodeIndexBuffer,m,v,y,E)},decodeIndexSequence(m,v,y,E){u(s.exports.meshopt_decodeIndexSequence,m,v,y,E)},decodeGltfBuffer(m,v,y,E,w,C){u(s.exports[p[w]],m,v,y,E,s.exports[h[C]])}},Y2};function fB(r,e,t,n){const i=class extends as{constructor(o={}){const l=Object.entries(r);super({uniforms:l.reduce((u,[h,p])=>{const m=DA.clone({[h]:{value:p}});return{...u,...m}},{}),vertexShader:e,fragmentShader:t}),this.key="",l.forEach(([u])=>Object.defineProperty(this,u,{get:()=>this.uniforms[u].value,set:h=>this.uniforms[u].value=h})),Object.assign(this,o)}};return i.key=Wo.generateUUID(),i}let $2=null,pB="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function mB(r,e,t){return n=>{t&&t(n),r&&($2||($2=new ek),$2.setDecoderPath(typeof r=="string"?r:pB),n.setDRACOLoader($2)),e&&n.setMeshoptDecoder(typeof Yv=="function"?Yv():Yv)}}function i0(r,e=!0,t=!0,n){return Oh(mE,r,mB(e,t,n))}i0.preload=(r,e=!0,t=!0,n)=>Oh.preload(mE,r,mB(e,t,n));i0.clear=r=>Oh.clear(mE,r);i0.setDecoderPath=r=>{pB=r};const gB=V.forwardRef(({makeDefault:r,camera:e,regress:t,domElement:n,enableDamping:i=!0,keyEvents:s=!1,onChange:o,onStart:l,onEnd:u,...h},p)=>{const m=Jr(I=>I.invalidate),v=Jr(I=>I.camera),y=Jr(I=>I.gl),E=Jr(I=>I.events),w=Jr(I=>I.setEvents),C=Jr(I=>I.set),x=Jr(I=>I.get),M=Jr(I=>I.performance),S=e||v,R=n||E.connected||y.domElement,N=V.useMemo(()=>new pF(S),[S]);return Zp(()=>{N.enabled&&N.update()},-1),V.useEffect(()=>(s&&N.connect(s===!0?R:s),N.connect(R),()=>void N.dispose()),[s,R,t,N,m]),V.useEffect(()=>{const I=F=>{m(),t&&M.regress(),o&&o(F)},O=F=>{l&&l(F)},j=F=>{u&&u(F)};return N.addEventListener("change",I),N.addEventListener("start",O),N.addEventListener("end",j),()=>{N.removeEventListener("start",O),N.removeEventListener("end",j),N.removeEventListener("change",I)}},[o,l,u,N,m,w]),V.useEffect(()=>{if(r){const I=x().controls;return C({controls:N}),()=>C({controls:I})}},[r,N]),V.createElement("primitive",Ss({ref:p,object:N,enableDamping:i},h))}),nk=V.forwardRef(function({children:e,disable:t,disableX:n,disableY:i,disableZ:s,left:o,right:l,top:u,bottom:h,front:p,back:m,onCentered:v,precise:y=!0,cacheKey:E=0,...w},C){const x=V.useRef(null),M=V.useRef(null),S=V.useRef(null);return V.useLayoutEffect(()=>{M.current.matrixWorld.identity();const R=new Ms().setFromObject(S.current,y),N=new X,I=new Ts,O=R.max.x-R.min.x,j=R.max.y-R.min.y,F=R.max.z-R.min.z;R.getCenter(N),R.getBoundingSphere(I);const H=u?j/2:h?-j/2:0,ee=o?-O/2:l?O/2:0,de=p?F/2:m?-F/2:0;M.current.position.set(t||n?0:-N.x+ee,t||i?0:-N.y+H,t||s?0:-N.z+de),typeof v<"u"&&v({parent:x.current.parent,container:x.current,width:O,height:j,depth:F,boundingBox:R,boundingSphere:I,center:N,verticalAlignment:H,horizontalAlignment:ee,depthAlignment:de})},[E,v,u,o,p,t,n,i,s,y,l,h,m]),V.useImperativeHandle(C,()=>x.current,[]),V.createElement("group",Ss({ref:x},w),V.createElement("group",{ref:M},V.createElement("group",{ref:S},e)))}),rk=fB({},"void main() { }","void main() { gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0); discard;  }"),oh=r=>r&&r.isOrthographicCamera,ik=r=>r&&r.isBox3,vB=V.createContext(null);function sk({children:r,damping:e=6,fit:t,clip:n,observe:i,margin:s=1.2,eps:o=.01,onFit:l}){const u=V.useRef(null),{camera:h,invalidate:p,size:m,controls:v}=Jr(),y=v,E=V.useRef(l);E.current=l;function w(I,O){return Math.abs(I.x-O.x)<o&&Math.abs(I.y-O.y)<o&&Math.abs(I.z-O.z)<o}function C(I,O,j,F){I.x=Wo.damp(I.x,O.x,j,F),I.y=Wo.damp(I.y,O.y,j,F),I.z=Wo.damp(I.z,O.z,j,F)}const[x]=V.useState(()=>({animating:!1,focus:new X,camera:new X,zoom:1})),[M]=V.useState(()=>({focus:new X,camera:new X,zoom:1})),[S]=V.useState(()=>new Ms),R=V.useMemo(()=>{function I(){const O=S.getSize(new X),j=S.getCenter(new X),F=Math.max(O.x,O.y,O.z),H=oh(h)?F*4:F/(2*Math.atan(Math.PI*h.fov/360)),ee=oh(h)?F*4:H/h.aspect,de=s*Math.max(H,ee);return{box:S,size:O,center:j,distance:de}}return{getSize:I,refresh(O){if(ik(O))S.copy(O);else{const j=O||u.current;if(!j)return this;j.updateWorldMatrix(!0,!0),S.setFromObject(j)}if(S.isEmpty()){const j=h.position.length()||10;S.setFromCenterAndSize(new X,new X(j,j,j))}if((y==null?void 0:y.constructor.name)==="OrthographicTrackballControls"){const{distance:j}=I(),F=h.position.clone().sub(y.target).normalize().multiplyScalar(j),H=y.target.clone().add(F);h.position.copy(H)}return this},clip(){const{distance:O}=I();return y&&(y.maxDistance=O*10),h.near=O/100,h.far=O*100,h.updateProjectionMatrix(),y&&y.update(),p(),this},to({position:O,target:j}){x.camera.copy(h.position);const{center:F}=I();return M.camera.set(...O),j?M.focus.set(...j):M.focus.copy(F),e?x.animating=!0:h.position.set(...O),this},fit(){x.camera.copy(h.position),y&&x.focus.copy(y.target);const{center:O,distance:j}=I(),F=O.clone().sub(h.position).normalize().multiplyScalar(j);if(M.camera.copy(O).sub(F),M.focus.copy(O),oh(h)){x.zoom=h.zoom;let H=0,ee=0;const de=[new X(S.min.x,S.min.y,S.min.z),new X(S.min.x,S.max.y,S.min.z),new X(S.min.x,S.min.y,S.max.z),new X(S.min.x,S.max.y,S.max.z),new X(S.max.x,S.max.y,S.max.z),new X(S.max.x,S.max.y,S.min.z),new X(S.max.x,S.min.y,S.max.z),new X(S.max.x,S.min.y,S.min.z)];O.applyMatrix4(h.matrixWorldInverse);for(const me of de)me.applyMatrix4(h.matrixWorldInverse),H=Math.max(H,Math.abs(me.y-O.y)),ee=Math.max(ee,Math.abs(me.x-O.x));H*=2,ee*=2;const ve=(h.top-h.bottom)/H,Y=(h.right-h.left)/ee;M.zoom=Math.min(ve,Y)/s,e||(h.zoom=M.zoom,h.updateProjectionMatrix())}return e?x.animating=!0:(h.position.copy(M.camera),h.lookAt(M.focus),y&&(y.target.copy(M.focus),y.update())),E.current&&E.current(this.getSize()),p(),this}}},[S,h,y,s,e,p]);V.useLayoutEffect(()=>{if(y){const I=()=>x.animating=!1;return y.addEventListener("start",I),()=>y.removeEventListener("start",I)}},[y]);const N=V.useRef(0);return V.useLayoutEffect(()=>{(i||N.current++===0)&&(R.refresh(),t&&R.fit(),n&&R.clip())},[m,n,t,i,h,y]),Zp((I,O)=>{if(x.animating){if(C(x.focus,M.focus,e,O),C(x.camera,M.camera,e,O),x.zoom=Wo.damp(x.zoom,M.zoom,e,O),h.position.copy(x.camera),oh(h)&&(h.zoom=x.zoom,h.updateProjectionMatrix()),y?(y.target.copy(x.focus),y.update()):h.lookAt(x.focus),p(),oh(h)&&!(Math.abs(x.zoom-M.zoom)<o)||!oh(h)&&!w(x.camera,M.camera)||y&&!w(x.focus,M.focus))return;x.animating=!1}}),V.createElement("group",{ref:u},V.createElement(vB.Provider,{value:R},r))}function ok(){return V.useContext(vB)}const $v={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},ak="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",HC=r=>Array.isArray(r);function yB({files:r=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:e="",preset:t=void 0,encoding:n=void 0,extensions:i}={}){var s;let o=null,l=!1,u;if(t){if(!(t in $v))throw new Error("Preset must be one of: "+Object.keys($v).join(", "));r=$v[t],e=ak}if(l=HC(r),u=HC(r)?"cube":r.startsWith("data:application/exr")?"exr":r.startsWith("data:application/hdr")?"hdr":(s=r.split(".").pop())==null||(s=s.split("?"))==null||(s=s.shift())==null?void 0:s.toLowerCase(),o=l?wS:u==="hdr"?QF:u==="exr"?ZF:null,!o)throw new Error("useEnvironment: Unrecognized file extension: "+r);const h=Oh(o,l?[r]:r,y=>{y.setPath==null||y.setPath(e),i&&i(y)}),p=l?h[0]:h;p.mapping=l?$o:Ch;const m=3001,v=3e3;return"colorSpace"in p?p.colorSpace=n??l?"srgb":"srgb-linear":p.encoding=n??l?m:v,p}const lk=r=>r.current&&r.current.isScene,ck=r=>lk(r)?r.current:r;function gE(r,e,t,n,i=0){const s=ck(e||t),o=s.background,l=s.environment,u=s.backgroundBlurriness||0;return r!=="only"&&(s.environment=n),r&&(s.background=n),r&&s.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=i),()=>{r!=="only"&&(s.environment=l),r&&(s.background=o),r&&s.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=u)}}function vE({scene:r,background:e=!1,blur:t,map:n}){const i=Jr(s=>s.scene);return V.useLayoutEffect(()=>{if(n)return gE(e,r,i,n,t)},[i,r,n,e,t]),null}function AB({background:r=!1,scene:e,blur:t,...n}){const i=yB(n),s=Jr(o=>o.scene);return V.useLayoutEffect(()=>gE(r,e,s,i,t),[i,r,e,s,t]),null}function uk({children:r,near:e=1,far:t=1e3,resolution:n=256,frames:i=1,map:s,background:o=!1,blur:l,scene:u,files:h,path:p,preset:m=void 0,extensions:v}){const y=Jr(S=>S.gl),E=Jr(S=>S.scene),w=V.useRef(null),[C]=V.useState(()=>new Mp),x=V.useMemo(()=>{const S=new PA(n);return S.texture.type=Mi,S},[n]);V.useLayoutEffect(()=>(i===1&&w.current.update(y,C),gE(o,u,E,x.texture,l)),[r,C,x.texture,u,E,o,i,y]);let M=1;return Zp(()=>{(i===1/0||M<i)&&(w.current.update(y,C),M++)}),V.createElement(V.Fragment,null,M4(V.createElement(V.Fragment,null,r,V.createElement("cubeCamera",{ref:w,args:[e,t,x]}),h||m?V.createElement(AB,{background:!0,files:h,preset:m,path:p,extensions:v}):s?V.createElement(vE,{background:!0,map:s,extensions:v}):null),C))}function dk(r){var e,t,n,i;const s=yB(r),o=r.map||s;V.useMemo(()=>uE({GroundProjectedEnvImpl:oF}),[]);const l=V.useMemo(()=>[o],[o]),u=(e=r.ground)==null?void 0:e.height,h=(t=r.ground)==null?void 0:t.radius,p=(n=(i=r.ground)==null?void 0:i.scale)!==null&&n!==void 0?n:1e3;return V.createElement(V.Fragment,null,V.createElement(vE,Ss({},r,{map:o})),V.createElement("groundProjectedEnvImpl",{args:l,scale:p,height:u,radius:h}))}function hk(r){return r.ground?V.createElement(dk,r):r.map?V.createElement(vE,r):r.children?V.createElement(uk,r):V.createElement(AB,r)}const fk=V.forwardRef(({scale:r=10,frames:e=1/0,opacity:t=1,width:n=1,height:i=1,blur:s=1,near:o=0,far:l=10,resolution:u=512,smooth:h=!0,color:p="#000000",depthWrite:m=!1,renderOrder:v,...y},E)=>{const w=V.useRef(null),C=Jr(Y=>Y.scene),x=Jr(Y=>Y.gl),M=V.useRef(null);n=n*(Array.isArray(r)?r[0]:r||1),i=i*(Array.isArray(r)?r[1]:r||1);const[S,R,N,I,O,j,F]=V.useMemo(()=>{const Y=new Wi(u,u),me=new Wi(u,u);me.texture.generateMipmaps=Y.texture.generateMipmaps=!1;const pe=new Ih(n,i).rotateX(Math.PI/2),Ae=new Nr(pe),te=new Og;te.depthTest=te.depthWrite=!1,te.onBeforeCompile=z=>{z.uniforms={...z.uniforms,ucolor:{value:new ht(p)}},z.fragmentShader=z.fragmentShader.replace("void main() {",`uniform vec3 ucolor;
           void main() {
          `),z.fragmentShader=z.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};const ce=new as(YF),ne=new as($F);return ne.depthTest=ce.depthTest=!1,[Y,pe,te,Ae,ce,ne,me]},[u,n,i,r,p]),H=Y=>{I.visible=!0,I.material=O,O.uniforms.tDiffuse.value=S.texture,O.uniforms.h.value=Y*1/256,x.setRenderTarget(F),x.render(I,M.current),I.material=j,j.uniforms.tDiffuse.value=F.texture,j.uniforms.v.value=Y*1/256,x.setRenderTarget(S),x.render(I,M.current),I.visible=!1};let ee=0,de,ve;return Zp(()=>{M.current&&(e===1/0||ee<e)&&(ee++,de=C.background,ve=C.overrideMaterial,w.current.visible=!1,C.background=null,C.overrideMaterial=N,x.setRenderTarget(S),x.render(C,M.current),H(s),h&&H(s*.4),x.setRenderTarget(null),w.current.visible=!0,C.overrideMaterial=ve,C.background=de)}),V.useImperativeHandle(E,()=>w.current,[]),V.createElement("group",Ss({"rotation-x":Math.PI/2},y,{ref:w}),V.createElement("mesh",{renderOrder:v,geometry:R,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},V.createElement("meshBasicMaterial",{transparent:!0,map:S.texture,opacity:t,depthWrite:m})),V.createElement("orthographicCamera",{ref:M,args:[-n/2,n/2,i/2,-i/2,o,l]}))});function pk(r){return r.isLight}function mk(r){return!!r.geometry}const EB=V.createContext(null),gk=fB({color:new ht,blend:2,alphaTest:.75,opacity:0,map:null},`varying vec2 vUv;
   void main() {
     gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
     vUv = uv;
   }`,`varying vec2 vUv;
   uniform sampler2D map;
   uniform vec3 color;
   uniform float opacity;
   uniform float alphaTest;
   uniform float blend;
   void main() {
     vec4 sampledDiffuseColor = texture2D(map, vUv);
     gl_FragColor = vec4(color * sampledDiffuseColor.r * blend, max(0.0, (1.0 - (sampledDiffuseColor.r + sampledDiffuseColor.g + sampledDiffuseColor.b) / alphaTest)) * opacity);
     #include <tonemapping_fragment>
     #include <${parseInt(Ru.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
   }`),vk=V.forwardRef(({children:r,temporal:e,frames:t=40,limit:n=1/0,blend:i=20,scale:s=10,opacity:o=1,alphaTest:l=.75,color:u="black",colorBlend:h=2,resolution:p=1024,toneMapped:m=!0,...v},y)=>{uE({SoftShadowMaterial:gk});const E=Jr(I=>I.gl),w=Jr(I=>I.scene),C=Jr(I=>I.camera),x=Jr(I=>I.invalidate),M=V.useRef(null),S=V.useRef(null),[R]=V.useState(()=>new Ak(E,w,p));V.useLayoutEffect(()=>{R.configure(M.current)},[]);const N=V.useMemo(()=>({lights:new Map,temporal:!!e,frames:Math.max(2,t),blend:Math.max(2,t===1/0?i:t),count:0,getMesh:()=>M.current,reset:()=>{R.clear();const I=M.current.material;I.opacity=0,I.alphaTest=0,N.count=0},update:(I=1)=>{const O=M.current.material;N.temporal?(O.opacity=Math.min(o,O.opacity+o/N.blend),O.alphaTest=Math.min(l,O.alphaTest+l/N.blend)):(O.opacity=o,O.alphaTest=l),S.current.visible=!0,R.prepare();for(let j=0;j<I;j++)N.lights.forEach(F=>F.update()),R.update(C,N.blend);S.current.visible=!1,R.finish()}}),[R,C,w,e,t,i,o,l]);return V.useLayoutEffect(()=>{N.reset(),!N.temporal&&N.frames!==1/0&&N.update(N.blend)}),V.useImperativeHandle(y,()=>N,[N]),Zp(()=>{(N.temporal||N.frames===1/0)&&N.count<N.frames&&N.count<n&&(x(),N.update(),N.count++)}),V.createElement("group",v,V.createElement("group",{traverse:()=>null,ref:S},V.createElement(EB.Provider,{value:N},r)),V.createElement("mesh",{receiveShadow:!0,ref:M,scale:s,rotation:[-Math.PI/2,0,0]},V.createElement("planeGeometry",null),V.createElement("softShadowMaterial",{transparent:!0,depthWrite:!1,toneMapped:m,color:u,blend:h,map:R.progressiveLightMap2.texture})))}),yk=V.forwardRef(({castShadow:r=!0,bias:e=.001,mapSize:t=512,size:n=5,near:i=.5,far:s=500,frames:o=1,position:l=[0,0,0],radius:u=1,amount:h=8,intensity:p=parseInt(Ru.replace(/\D+/g,""))>=155?Math.PI:1,ambient:m=.5,...v},y)=>{const E=V.useRef(null),w=new X(...l).length(),C=V.useContext(EB),x=V.useCallback(()=>{let S;if(E.current)for(let R=0;R<E.current.children.length;R++)if(S=E.current.children[R],Math.random()>m)S.position.set(l[0]+Wo.randFloatSpread(u),l[1]+Wo.randFloatSpread(u),l[2]+Wo.randFloatSpread(u));else{let N=Math.acos(2*Math.random()-1)-Math.PI/2,I=2*Math.PI*Math.random();S.position.set(Math.cos(N)*Math.cos(I)*w,Math.abs(Math.cos(N)*Math.sin(I)*w),Math.sin(N)*w)}},[u,m,w,...l]),M=V.useMemo(()=>({update:x}),[x]);return V.useImperativeHandle(y,()=>M,[M]),V.useLayoutEffect(()=>{const S=E.current;return C&&C.lights.set(S.uuid,M),()=>void C.lights.delete(S.uuid)},[C,M]),V.createElement("group",Ss({ref:E},v),Array.from({length:h},(S,R)=>V.createElement("directionalLight",{key:R,castShadow:r,"shadow-bias":e,"shadow-mapSize":[t,t],intensity:p/h},V.createElement("orthographicCamera",{attach:"shadow-camera",args:[-n,n,n,-n,i,s]}))))});class Ak{constructor(e,t,n=1024){this.renderer=e,this.res=n,this.scene=t,this.buffer1Active=!1,this.lights=[],this.meshes=[],this.object=null,this.clearColor=new ht,this.clearAlpha=0;const i={type:Mi,magFilter:or,minFilter:or};this.progressiveLightMap1=new Wi(this.res,this.res,i),this.progressiveLightMap2=new Wi(this.res,this.res,i),this.discardMat=new rk,this.targetMat=new XA({fog:!1}),this.previousShadowMap={value:this.progressiveLightMap1.texture},this.averagingWindow={value:100},this.targetMat.onBeforeCompile=s=>{s.vertexShader=`varying vec2 vUv;
`+s.vertexShader.slice(0,-1)+"vUv = uv; gl_Position = vec4((uv - 0.5) * 2.0, 1.0, 1.0); }";const o=s.fragmentShader.indexOf("void main() {");s.fragmentShader=`varying vec2 vUv;
`+s.fragmentShader.slice(0,o)+`uniform sampler2D previousShadowMap;
	uniform float averagingWindow;
`+s.fragmentShader.slice(o-1,-1)+`
vec3 texelOld = texture2D(previousShadowMap, vUv).rgb;
        gl_FragColor.rgb = mix(texelOld, gl_FragColor.rgb, 1.0/ averagingWindow);
      }`,s.uniforms.previousShadowMap=this.previousShadowMap,s.uniforms.averagingWindow=this.averagingWindow}}clear(){this.renderer.getClearColor(this.clearColor),this.clearAlpha=this.renderer.getClearAlpha(),this.renderer.setClearColor("black",1),this.renderer.setRenderTarget(this.progressiveLightMap1),this.renderer.clear(),this.renderer.setRenderTarget(this.progressiveLightMap2),this.renderer.clear(),this.renderer.setRenderTarget(null),this.renderer.setClearColor(this.clearColor,this.clearAlpha),this.lights=[],this.meshes=[],this.scene.traverse(e=>{mk(e)?this.meshes.push({object:e,material:e.material}):pk(e)&&this.lights.push({object:e,intensity:e.intensity})})}prepare(){this.lights.forEach(e=>e.object.intensity=0),this.meshes.forEach(e=>e.object.material=this.discardMat)}finish(){this.lights.forEach(e=>e.object.intensity=e.intensity),this.meshes.forEach(e=>e.object.material=e.material)}configure(e){this.object=e}update(e,t=100){if(!this.object)return;this.averagingWindow.value=t,this.object.material=this.targetMat;const n=this.buffer1Active?this.progressiveLightMap1:this.progressiveLightMap2,i=this.buffer1Active?this.progressiveLightMap2:this.progressiveLightMap1,s=this.scene.background;this.scene.background=null,this.renderer.setRenderTarget(n),this.previousShadowMap.value=i.texture,this.buffer1Active=!this.buffer1Active,this.renderer.render(this.scene,e),this.renderer.setRenderTarget(null),this.scene.background=s}}const Ek={rembrandt:{main:[1,2,1],fill:[-2,-.5,-2]},portrait:{main:[-1,2,.5],fill:[-1,.5,-1.5]},upfront:{main:[0,2,1],fill:[-1,.5,-1.5]},soft:{main:[-2,4,4],fill:[-1,.5,-1.5]}};function xk({radius:r,adjustCamera:e}){const t=ok();return V.useEffect(()=>{e&&t.refresh().clip().fit()},[r,e]),null}function _k({children:r,center:e,adjustCamera:t=!0,intensity:n=.5,shadows:i="contact",environment:s="city",preset:o="rembrandt",...l}){var u,h,p,m,v,y,E,w;const C=typeof o=="string"?Ek[o]:o,[{radius:x,height:M},S]=V.useState({radius:0,width:0,height:0,depth:0}),R=(u=i==null?void 0:i.bias)!==null&&u!==void 0?u:-1e-4,N=(h=i==null?void 0:i.normalBias)!==null&&h!==void 0?h:0,I=(p=i==null?void 0:i.size)!==null&&p!==void 0?p:1024,O=(m=i==null?void 0:i.offset)!==null&&m!==void 0?m:0,j=i==="contact"||(i==null?void 0:i.type)==="contact",F=i==="accumulative"||(i==null?void 0:i.type)==="accumulative",H={...typeof i=="object"?i:{}},ee=s?typeof s=="string"?{preset:s}:s:null,de=V.useCallback(ve=>{const{width:Y,height:me,depth:pe,boundingSphere:Ae}=ve;S({radius:Ae.radius,width:Y,height:me,depth:pe}),e!=null&&e.onCentered&&e.onCentered(ve)},[]);return V.createElement(V.Fragment,null,V.createElement("ambientLight",{intensity:n/3}),V.createElement("spotLight",{penumbra:1,position:[C.main[0]*x,C.main[1]*x,C.main[2]*x],intensity:n*2,castShadow:!!i,"shadow-bias":R,"shadow-normalBias":N,"shadow-mapSize":I}),V.createElement("pointLight",{position:[C.fill[0]*x,C.fill[1]*x,C.fill[2]*x],intensity:n}),V.createElement(sk,Ss({fit:!!t,clip:!!t,margin:Number(t),observe:!0},l),V.createElement(xk,{radius:x,adjustCamera:t}),V.createElement(nk,Ss({},e,{position:[0,O/2,0],onCentered:de}),r)),V.createElement("group",{position:[0,-M/2-O/2,0]},j&&V.createElement(fk,Ss({scale:x*4,far:x,blur:2},H)),F&&V.createElement(vk,Ss({temporal:!0,frames:100,alphaTest:.9,toneMapped:!0,scale:x*4},H),V.createElement(yk,{amount:(v=H.amount)!==null&&v!==void 0?v:8,radius:(y=H.radius)!==null&&y!==void 0?y:x,ambient:(E=H.ambient)!==null&&E!==void 0?E:.5,intensity:(w=H.intensity)!==null&&w!==void 0?w:1,position:[C.main[0]*x,C.main[1]*x,C.main[2]*x],size:x*4,bias:-R,mapSize:I}))),s&&V.createElement(hk,ee))}const Ck=({url:r,scale:e})=>{const{scene:t}=i0(r);return P.jsx("primitive",{object:t,scale:e})},wk=()=>P.jsxs("mesh",{children:[P.jsx("boxGeometry",{args:[1,1,1]}),P.jsx("meshStandardMaterial",{color:"#DC2626",wireframe:!0})]}),xB=({modelUrl:r,imageUrl:e,autoRotate:t=!0,scale:n=1})=>r?P.jsxs("div",{"trae-inspector-start-line":"52","trae-inspector-start-column":"4","trae-inspector-end-line":"64","trae-inspector-end-column":"10","trae-inspector-file-path":"src\\\\components\\\\3d\\\\ModelViewer.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"w-full h-full min-h-[300px] bg-gray-100 rounded-lg overflow-hidden relative",children:[P.jsxs(iB,{shadows:!0,dpr:[1,2],camera:{fov:50},children:[P.jsx(V.Suspense,{fallback:P.jsx(wk,{}),children:P.jsx(_k,{environment:"city",intensity:.6,children:P.jsx(Ck,{url:r,scale:n})})}),P.jsx(gB,{autoRotate:t})]}),P.jsx("div",{"trae-inspector-start-line":"61","trae-inspector-start-column":"7","trae-inspector-end-line":"63","trae-inspector-end-column":"13","trae-inspector-file-path":"src\\\\components\\\\3d\\\\ModelViewer.tsx","trae-inspector-static-props":"%7B%22text%22%3A%223D%20%E4%BA%A4%E4%BA%92%E4%B8%AD%22%2C%22textStartLine%22%3A%2261%22%2C%22textStartColumn%22%3A%22138%22%2C%22textEndLine%22%3A%2263%22%2C%22textEndColumn%22%3A%227%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"absolute bottom-2 right-2 bg-red-600/80 text-white text-xs px-2 py-1 rounded backdrop-blur-sm pointer-events-none",children:"3D "})]}):P.jsxs("div",{"trae-inspector-start-line":"35","trae-inspector-start-column":"6","trae-inspector-end-line":"47","trae-inspector-end-column":"12","trae-inspector-file-path":"src\\\\components\\\\3d\\\\ModelViewer.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"w-full h-full min-h-[250px] bg-gray-100 rounded-lg overflow-hidden flex items-center justify-center relative group",children:[e?P.jsx("img",{"trae-inspector-start-line":"37","trae-inspector-start-column":"10","trae-inspector-end-line":"37","trae-inspector-end-column":"150","trae-inspector-file-path":"src\\\\components\\\\3d\\\\ModelViewer.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",src:e,alt:"Heritage Preview",className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"}):P.jsx("div",{"trae-inspector-start-line":"39","trae-inspector-start-column":"10","trae-inspector-end-line":"39","trae-inspector-end-column":"63","trae-inspector-file-path":"src\\\\components\\\\3d\\\\ModelViewer.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E6%9A%82%E6%97%A0%203D%20%E6%A8%A1%E5%9E%8B%22%2C%22textStartLine%22%3A%2239%22%2C%22textStartColumn%22%3A%2249%22%2C%22textEndLine%22%3A%2239%22%2C%22textEndColumn%22%3A%2257%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-gray-400 text-sm",children:" 3D "}),P.jsx("div",{"trae-inspector-start-line":"41","trae-inspector-start-column":"8","trae-inspector-end-line":"41","trae-inspector-end-column":"117","trae-inspector-file-path":"src\\\\components\\\\3d\\\\ModelViewer.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"absolute inset-0 bg-black/10 group-hover:bg-black/0 transition-colors pointer-events-none"}),e&&P.jsx("div",{"trae-inspector-start-line":"43","trae-inspector-start-column":"11","trae-inspector-end-line":"45","trae-inspector-end-column":"17","trae-inspector-file-path":"src\\\\components\\\\3d\\\\ModelViewer.tsx","trae-inspector-static-props":"%7B%22text%22%3A%222D%20%E9%A2%84%E8%A7%88%22%2C%22textStartLine%22%3A%2243%22%2C%22textStartColumn%22%3A%22120%22%2C%22textEndLine%22%3A%2245%22%2C%22textEndColumn%22%3A%2211%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"absolute bottom-2 right-2 bg-black/60 text-white text-xs px-2 py-1 rounded backdrop-blur-sm",children:"2D "})]}),zC=[{id:"1",name:"",category:"",region:"",desc:"",fullDesc:"...",imageUrl:"https://coresg-normal.trae.ai/api/ide/v1/text_to_image?prompt=Chinese%20paper%20cutting%20art%20of%20horses%2C%20red%20paper%20texture&image_size=square_hd",tags:["","",""]},{id:"2",name:"",category:"",region:"",desc:"",fullDesc:"",imageUrl:"https://coresg-normal.trae.ai/api/ide/v1/text_to_image?prompt=Tang%20Sancai%20horse%20sculpture%2C%20tricolor%20glazed%20pottery&image_size=square_hd",tags:["","",""]},{id:"3",name:"",category:"",region:"",desc:"",fullDesc:"",imageUrl:"https://coresg-normal.trae.ai/api/ide/v1/text_to_image?prompt=Fengxiang%20clay%20sculpture%20of%20a%20horse%2C%20colorful%20folk%20art&image_size=square_hd",tags:["","",""]},{id:"4",name:"",category:"",region:"",desc:"",fullDesc:"",imageUrl:"https://coresg-normal.trae.ai/api/ide/v1/text_to_image?prompt=Taohuawu%20woodblock%20new%20year%20print%2C%20traditional%20chinese%20art&image_size=square_hd",tags:["","",""]},{id:"5",name:"",category:"",region:"",desc:"",fullDesc:"",imageUrl:"https://coresg-normal.trae.ai/api/ide/v1/text_to_image?prompt=Zigong%20Lantern%20Festival%2C%20huge%20colorful%20lanterns%20at%20night&image_size=square_hd",tags:["","",""]},{id:"6",name:"",category:"",region:"",desc:"",fullDesc:"",imageUrl:"https://coresg-normal.trae.ai/api/ide/v1/text_to_image?prompt=Beijing%20Rabbit%20God%20clay%20figurine%2C%20traditional%20toy&image_size=square_hd",tags:["","",""]},{id:"7",name:"",category:"",region:"",desc:"",fullDesc:"",imageUrl:"https://coresg-normal.trae.ai/api/ide/v1/text_to_image?prompt=Yangliuqing%20woodblock%20print%2C%20chubby%20baby%20holding%20fish%2C%20traditional%20Chinese%20New%20Year%20art&image_size=square_hd",tags:["","",""]},{id:"8",name:"",category:"",region:"",desc:"",fullDesc:"",imageUrl:"https://coresg-normal.trae.ai/api/ide/v1/text_to_image?prompt=Suzhou%20embroidery%20art%2C%20silk%20thread%2C%20cat%20or%20flower%20pattern%2C%20exquisite%20details&image_size=square_hd",tags:["","",""]},{id:"9",name:"",category:"",region:"",desc:"",fullDesc:"",imageUrl:"https://coresg-normal.trae.ai/api/ide/v1/text_to_image?prompt=Chinese%20shadow%20puppetry%2C%20traditional%20performance%20behind%20screen%2C%20colorful%20figures&image_size=square_hd",tags:["","",""]},{id:"10",name:"",category:"",region:"",desc:"",fullDesc:"",imageUrl:"https://coresg-normal.trae.ai/api/ide/v1/text_to_image?prompt=Qinhuai%20Lantern%20Festival%20in%20Nanjing%2C%20colorful%20lanterns%20reflecting%20on%20river%2C%20night%20scene&image_size=square_hd",tags:["","",""]},{id:"11",name:"",category:"",region:"",desc:"",fullDesc:"",imageUrl:"https://coresg-normal.trae.ai/api/ide/v1/text_to_image?prompt=Chinese%20Lion%20Dance%20performance%2C%20festive%20atmosphere%2C%20red%20and%20gold%20colors&image_size=square_hd",tags:["","",""]},{id:"12",name:"",category:"",region:"",desc:"",fullDesc:"",imageUrl:"https://coresg-normal.trae.ai/api/ide/v1/text_to_image?prompt=Jingdezhen%20porcelain%20making%2C%20blue%20and%20white%20ceramics%2C%20traditional%20craftsmanship&image_size=square_hd",tags:["","","China"]},{id:"13",name:"",category:"",region:"",desc:"",fullDesc:"",imageUrl:"https://coresg-normal.trae.ai/api/ide/v1/text_to_image?prompt=Nanjing%20Yunjin%20brocade%2C%20intricate%20silk%20weaving%2C%20gold%20thread%2C%20dragon%20pattern&image_size=square_hd",tags:["","",""]},{id:"14",name:"",category:"",region:"",desc:"",fullDesc:"",imageUrl:"https://coresg-normal.trae.ai/api/ide/v1/text_to_image?prompt=Weifang%20traditional%20kites%20flying%20in%20sky%2C%20dragon%20centipede%20kite%2C%20colorful&image_size=square_hd",tags:["","",""]},{id:"15",name:"",category:"",region:"",desc:"",fullDesc:"",imageUrl:"https://coresg-normal.trae.ai/api/ide/v1/text_to_image?prompt=Miao%20ethnic%20silver%20headdress%20and%20jewelry%2C%20intricate%20silverwork%2C%20traditional%20attire&image_size=square_hd",tags:["","",""]},{id:"16",name:"",category:"",region:"",desc:"",fullDesc:"",imageUrl:"https://coresg-normal.trae.ai/api/ide/v1/text_to_image?prompt=Chinese%20snuff%20bottle%20inside%20painting%2C%20glass%20bottle%20art%2C%20macro%20shot&image_size=square_hd",tags:["","",""]}],Sk=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Bk=["","","","","","","","","",""],bk=["","","","","","","","","","","",""],Mk=["","","","","","","","","","","","","",""],GC=["","","","","","","","","",""],Tk={:"Chinese paper cutting, intricate patterns, red paper",:"Chinese embroidery, silk, needlework, detailed",:"Chinese pottery, ceramic art, clay vessel",:"Chinese dough figurine, colorful sculpture",:"Chinese festive lantern, glowing, colorful",:"Chinese New Year painting, woodblock print, traditional",:"Chinese shadow puppetry, leather silhouette, backlight",:"Chinese wood carving, intricate relief, wooden",:"Chinese brick carving, architectural detail",:"Chinese batik, indigo fabric, wax resist pattern",:"Miao silver ornaments, intricate jewelry, silver headdress",:"Chinese lacquerware, glossy finish, red and black",:"Chinese bamboo weaving, basketry, craft",:"Chinese kite, traditional dragon kite, colorful"},Rk={:"imperial style, elegant, grand",:"folk art style, rustic, lively",:"royal court style, golden, majestic",:"ancient technique, traditional, historical",:"handcrafted, artisan, detailed",:"gold thread, filigree, shiny",:"colorful painting, vibrant colors",:"openwork, pierced design, delicate",:"freehand brushwork style, artistic",:"blessing ceremony, festive atmosphere",:"prosperous era style, magnificent",:"auspicious symbols, lucky patterns"},Dk=(r,e)=>Math.floor(Math.random()*(e-r+1))+r,ah=r=>r[Dk(0,r.length-1)];function Pk(r){const e=[...zC];let t=Math.max(...zC.map(n=>parseInt(n.id)))+1;for(;e.length<r;){const n=ah(Sk),i=ah(Bk),s=ah(bk),o=ah(Mk),l=Tk[o]||"Chinese traditional art",u=Rk[s]||"traditional style",h=`close up shot of ${l}, ${u}, high quality, cultural heritage, ${o===""||o===""?"lighting effect":"studio lighting"}`,m=`https://coreva-normal.trae.ai/api/ide/v1/text_to_image?prompt=${encodeURIComponent(h)}&image_size=square_hd`,v={id:String(t++),name:`${n}${s}${o}`,category:i,region:n,desc:`${n}${s}${o}${i}`,fullDesc:`${n}${s}${o}${n}${i}${s}${o}${n}`,imageUrl:m,tags:[i,n,ah(GC),ah(GC)]};e.push(v)}return e}const Lk=Pk(208),cp=Lk,_B={:["","","","",""],:["","",""],:["","","","","","",""],:["","",""],:["","",""],:["","","","",""],:["","","","",""],:["","",""]};function Ik(r){for(const[e,t]of Object.entries(_B))if(t.some(n=>r.includes(n)))return e;return""}const CB=({contribution:r,onLikeToggle:e})=>{var m,v;const{user:t}=Tu(),[n,i]=V.useState(r.likes||0),[s,o]=V.useState(!1),[l,u]=V.useState(!1);VC.useEffect(()=>{t&&h()},[t,r.id]);const h=async()=>{if(!t)return;const{data:y}=await Sr.from("contribution_likes").select("id").eq("user_id",t.id).eq("contribution_id",r.id).maybeSingle();y&&o(!0)},p=async y=>{if(y.preventDefault(),y.stopPropagation(),!t){alert("");return}if(!l){u(!0);try{const E=!s,w=E?n+1:n-1;o(E),i(w);const{data:C,error:x}=await Sr.rpc("toggle_like",{p_user_id:t.id,p_contribution_id:r.id});if(x)throw x;C!==E&&(o(C),i(C?n+1:n-1)),e&&e(w,E)}catch(E){console.error("Error toggling like:",E),o(!s),i(s?n+1:n-1)}finally{u(!1)}}};return P.jsxs("div",{"trae-inspector-start-line":"97","trae-inspector-start-column":"4","trae-inspector-end-line":"156","trae-inspector-end-column":"10","trae-inspector-file-path":"src\\\\components\\\\ContributionCard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"bg-white rounded-xl overflow-hidden shadow-md hover:shadow-xl transition-all duration-300 border border-gray-100 flex flex-col h-full group",children:[P.jsxs("div",{"trae-inspector-start-line":"98","trae-inspector-start-column":"6","trae-inspector-end-line":"114","trae-inspector-end-column":"12","trae-inspector-file-path":"src\\\\components\\\\ContributionCard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"h-48 overflow-hidden relative bg-gray-100",children:[r.images&&r.images.length>0?P.jsx("img",{"trae-inspector-start-line":"100","trae-inspector-start-column":"10","trae-inspector-end-line":"104","trae-inspector-end-column":"12","trae-inspector-file-path":"src\\\\components\\\\ContributionCard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",src:r.images[0],alt:r.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}):P.jsx("div",{"trae-inspector-start-line":"106","trae-inspector-start-column":"10","trae-inspector-end-line":"108","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\ContributionCard.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E6%97%A0%E5%9B%BE%E7%89%87%22%2C%22textStartLine%22%3A%22106%22%2C%22textStartColumn%22%3A%2288%22%2C%22textEndLine%22%3A%22108%22%2C%22textEndColumn%22%3A%2210%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"w-full h-full flex items-center justify-center text-gray-400",children:""}),P.jsxs("div",{"trae-inspector-start-line":"110","trae-inspector-start-column":"8","trae-inspector-end-line":"113","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\components\\\\ContributionCard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"absolute top-2 right-2 bg-black/50 backdrop-blur-sm text-white text-xs px-2 py-1 rounded flex items-center",children:[P.jsx(Up,{className:"w-3 h-3 mr-1"}),r.region]})]}),P.jsxs("div",{"trae-inspector-start-line":"116","trae-inspector-start-column":"6","trae-inspector-end-line":"155","trae-inspector-end-column":"12","trae-inspector-file-path":"src\\\\components\\\\ContributionCard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"p-4 flex flex-col flex-1",children:[P.jsx("div",{"trae-inspector-start-line":"117","trae-inspector-start-column":"8","trae-inspector-end-line":"121","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\components\\\\ContributionCard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"flex justify-between items-start mb-2",children:P.jsx("span",{"trae-inspector-start-line":"118","trae-inspector-start-column":"10","trae-inspector-end-line":"120","trae-inspector-end-column":"17","trae-inspector-file-path":"src\\\\components\\\\ContributionCard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-xs font-medium text-blue-600 bg-blue-50 px-2 py-0.5 rounded-full",children:r.category})}),P.jsx("h3",{"trae-inspector-start-line":"123","trae-inspector-start-column":"8","trae-inspector-end-line":"125","trae-inspector-end-column":"13","trae-inspector-file-path":"src\\\\components\\\\ContributionCard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"font-bold text-lg mb-2 text-gray-800 line-clamp-1 group-hover:text-red-600 transition-colors",children:r.title}),P.jsx("p",{"trae-inspector-start-line":"127","trae-inspector-start-column":"8","trae-inspector-end-line":"129","trae-inspector-end-column":"12","trae-inspector-file-path":"src\\\\components\\\\ContributionCard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-gray-500 text-sm mb-4 line-clamp-2 flex-1",children:r.description}),P.jsxs("div",{"trae-inspector-start-line":"131","trae-inspector-start-column":"8","trae-inspector-end-line":"154","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\components\\\\ContributionCard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"flex items-center justify-between pt-3 border-t border-gray-100 mt-auto",children:[P.jsxs("div",{"trae-inspector-start-line":"132","trae-inspector-start-column":"10","trae-inspector-end-line":"141","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\components\\\\ContributionCard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"flex items-center text-gray-600 text-sm",children:[P.jsx("div",{"trae-inspector-start-line":"133","trae-inspector-start-column":"12","trae-inspector-end-line":"139","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\components\\\\ContributionCard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center overflow-hidden mr-2",children:(m=r.users)!=null&&m.avatar_url?P.jsx("img",{"trae-inspector-start-line":"135","trae-inspector-start-column":"16","trae-inspector-end-line":"135","trae-inspector-end-column":"99","trae-inspector-file-path":"src\\\\components\\\\ContributionCard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",src:r.users.avatar_url,alt:r.users.name||"User"}):P.jsx(Mg,{className:"w-3 h-3 text-gray-500"})}),P.jsx("span",{"trae-inspector-start-line":"140","trae-inspector-start-column":"12","trae-inspector-end-line":"140","trae-inspector-end-column":"95","trae-inspector-file-path":"src\\\\components\\\\ContributionCard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"truncate max-w-[80px]",children:((v=r.users)==null?void 0:v.name)||""})]}),P.jsxs("button",{"trae-inspector-start-line":"143","trae-inspector-start-column":"10","trae-inspector-end-line":"153","trae-inspector-end-column":"19","trae-inspector-file-path":"src\\\\components\\\\ContributionCard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",onClick:p,className:`flex items-center space-x-1 px-3 py-1.5 rounded-full transition-colors ${s?"text-red-600 bg-red-50":"text-gray-500 hover:text-red-500 hover:bg-gray-50"}`,children:[P.jsx(jR,{className:`w-4 h-4 ${s?"fill-current":""}`}),P.jsx("span",{"trae-inspector-start-line":"152","trae-inspector-start-column":"12","trae-inspector-end-line":"152","trae-inspector-end-column":"64","trae-inspector-file-path":"src\\\\components\\\\ContributionCard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-sm font-medium",children:n})]})]})]})]})},Nk=()=>{const r=cp.slice(0,6),[e,t]=V.useState([]);V.useEffect(()=>{n()},[]);const n=async()=>{const{data:i,error:s}=await Sr.from("user_contributions").select(`
        *,
        users (
          name,
          avatar_url,
          hometown
        )
      `).eq("status","approved").order("likes",{ascending:!1}).limit(4);!s&&i&&t(i)};return P.jsxs("div",{"trae-inspector-start-line":"39","trae-inspector-start-column":"4","trae-inspector-end-line":"175","trae-inspector-end-column":"10","trae-inspector-file-path":"src\\\\pages\\\\Home.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"min-h-screen bg-stone-50 text-stone-900",children:[P.jsxs("div",{"trae-inspector-start-line":"41","trae-inspector-start-column":"6","trae-inspector-end-line":"71","trae-inspector-end-column":"12","trae-inspector-file-path":"src\\\\pages\\\\Home.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"bg-gradient-to-b from-red-800 to-red-700 text-yellow-50 py-24 px-4 text-center relative overflow-hidden",children:[P.jsx("div",{"trae-inspector-start-line":"43","trae-inspector-start-column":"8","trae-inspector-end-line":"48","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\Home.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"absolute inset-0 opacity-10 pointer-events-none",children:P.jsxs("svg",{"trae-inspector-start-line":"44","trae-inspector-start-column":"11","trae-inspector-end-line":"47","trae-inspector-end-column":"17","trae-inspector-file-path":"src\\\\pages\\\\Home.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"w-full h-full",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[P.jsx("path",{d:"M10,50 Q30,20 50,50 T90,50",fill:"none",stroke:"currentColor",strokeWidth:"0.5"}),P.jsx("path",{d:"M10,60 Q30,30 50,60 T90,60",fill:"none",stroke:"currentColor",strokeWidth:"0.5"})]})}),P.jsxs("div",{"trae-inspector-start-line":"50","trae-inspector-start-column":"8","trae-inspector-end-line":"67","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\Home.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"relative z-10",children:[P.jsx("div",{"trae-inspector-start-line":"51","trae-inspector-start-column":"10","trae-inspector-end-line":"53","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\Home.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"mb-4 inline-block p-3 border-2 border-yellow-500 rounded-full bg-red-900/50 backdrop-blur-sm",children:P.jsx("span",{"trae-inspector-start-line":"52","trae-inspector-start-column":"13","trae-inspector-end-line":"52","trae-inspector-end-column":"49","trae-inspector-file-path":"src\\\\pages\\\\Home.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%F0%9F%90%8E%22%2C%22textStartLine%22%3A%2252%22%2C%22textStartColumn%22%3A%2240%22%2C%22textEndLine%22%3A%2252%22%2C%22textEndColumn%22%3A%2242%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-3xl",children:""})}),P.jsx("h1",{"trae-inspector-start-line":"54","trae-inspector-start-column":"10","trae-inspector-end-line":"56","trae-inspector-end-column":"15","trae-inspector-file-path":"src\\\\pages\\\\Home.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E9%87%91%E9%A9%AC%E8%B4%BA%E5%B2%81%20%C2%B7%20%E5%B9%B4%E5%91%B3%E5%9F%BA%E5%9B%A0%22%2C%22textStartLine%22%3A%2254%22%2C%22textStartColumn%22%3A%22106%22%2C%22textEndLine%22%3A%2256%22%2C%22textEndColumn%22%3A%2210%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-6xl font-bold mb-4 font-serif tracking-wide text-yellow-400 drop-shadow-md",children:"  "}),P.jsx("p",{"trae-inspector-start-line":"57","trae-inspector-start-column":"10","trae-inspector-end-line":"59","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\Home.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E8%B7%83%E9%A9%AC%E8%BF%8E%E6%98%A5%EF%BC%8C%E6%8E%A2%E7%B4%A2%E5%9B%BD%E5%AE%B6%E7%BA%A7%E9%9D%9E%E9%81%97%E5%B9%B4%E4%BF%97%EF%BC%8C%E8%A7%A3%E9%94%81%E6%82%A8%E7%9A%84%E4%B8%93%E5%B1%9E%E6%96%87%E5%8C%96%E8%A1%80%E8%84%89%22%2C%22textStartLine%22%3A%2257%22%2C%22textStartColumn%22%3A%2296%22%2C%22textEndLine%22%3A%2259%22%2C%22textEndColumn%22%3A%2210%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-xl mb-10 max-w-2xl mx-auto text-red-100 font-light tracking-wider",children:""}),P.jsxs(mi,{to:"/ar-scan",className:"inline-flex items-center px-10 py-4 bg-yellow-500 text-red-900 rounded-full font-bold text-xl hover:bg-yellow-400 transition-all shadow-xl hover:shadow-2xl hover:-translate-y-1 transform border-2 border-yellow-300",children:[P.jsx(hy,{className:"mr-3 w-6 h-6"}),"AR "]})]}),P.jsx("div",{"trae-inspector-start-line":"70","trae-inspector-start-column":"8","trae-inspector-end-line":"70","trae-inspector-end-column":"323","trae-inspector-file-path":"src\\\\pages\\\\Home.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"absolute bottom-0 left-0 w-full h-12 bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMjAwIDEyMCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+PHBhdGggZD0iTTAgMGw2MDAgMTAwTDEyMDAgMHYxMjBIMHoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=')] bg-cover opacity-20"})]}),P.jsx("div",{"trae-inspector-start-line":"74","trae-inspector-start-column":"6","trae-inspector-end-line":"108","trae-inspector-end-column":"12","trae-inspector-file-path":"src\\\\pages\\\\Home.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"container mx-auto px-4 py-12",children:P.jsxs("div",{"trae-inspector-start-line":"75","trae-inspector-start-column":"8","trae-inspector-end-line":"107","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\Home.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[P.jsxs(mi,{to:"/heritage/list",className:"bg-white p-6 rounded-xl shadow-md hover:shadow-xl transition-shadow border-t-4 border-red-600 group",children:[P.jsx("div",{"trae-inspector-start-line":"77","trae-inspector-start-column":"12","trae-inspector-end-line":"79","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\pages\\\\Home.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mb-4 group-hover:bg-red-200 transition-colors",children:P.jsx(Tw,{className:"text-red-700"})}),P.jsx("h3",{"trae-inspector-start-line":"80","trae-inspector-start-column":"12","trae-inspector-end-line":"80","trae-inspector-end-column":"60","trae-inspector-file-path":"src\\\\pages\\\\Home.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E9%9D%9E%E9%81%97%E7%99%BE%E7%A7%91%22%2C%22textStartLine%22%3A%2280%22%2C%22textStartColumn%22%3A%2251%22%2C%22textEndLine%22%3A%2280%22%2C%22textEndColumn%22%3A%2255%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-xl font-bold mb-2",children:""}),P.jsx("p",{"trae-inspector-start-line":"81","trae-inspector-start-column":"12","trae-inspector-end-line":"81","trae-inspector-end-column":"67","trae-inspector-file-path":"src\\\\pages\\\\Home.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E6%8E%A2%E7%B4%A2200%2B%E9%A1%B9%E6%98%A5%E8%8A%82%E9%9D%9E%E9%81%97%E6%8A%80%E8%89%BA%EF%BC%8C%E4%BA%86%E8%A7%A3%E8%83%8C%E5%90%8E%E7%9A%84%E6%95%85%E4%BA%8B%E3%80%82%22%2C%22textStartLine%22%3A%2281%22%2C%22textStartColumn%22%3A%2241%22%2C%22textEndLine%22%3A%2281%22%2C%22textEndColumn%22%3A%2263%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-gray-600",children:"200+"})]}),P.jsxs(mi,{to:"/gene-profile",className:"bg-white p-6 rounded-xl shadow-md hover:shadow-xl transition-shadow border-t-4 border-yellow-500 group",children:[P.jsx("div",{"trae-inspector-start-line":"85","trae-inspector-start-column":"12","trae-inspector-end-line":"87","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\pages\\\\Home.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center mb-4 group-hover:bg-yellow-200 transition-colors",children:P.jsx(NR,{className:"text-yellow-700"})}),P.jsx("h3",{"trae-inspector-start-line":"88","trae-inspector-start-column":"12","trae-inspector-end-line":"88","trae-inspector-end-column":"60","trae-inspector-file-path":"src\\\\pages\\\\Home.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E5%B9%B4%E5%91%B3%E5%9F%BA%E5%9B%A0%22%2C%22textStartLine%22%3A%2288%22%2C%22textStartColumn%22%3A%2251%22%2C%22textEndLine%22%3A%2288%22%2C%22textEndColumn%22%3A%2255%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-xl font-bold mb-2",children:""}),P.jsx("p",{"trae-inspector-start-line":"89","trae-inspector-start-column":"12","trae-inspector-end-line":"89","trae-inspector-end-column":"65","trae-inspector-file-path":"src\\\\pages\\\\Home.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E7%94%9F%E6%88%90%E6%82%A8%E7%9A%84%E4%B8%93%E5%B1%9E%E5%B9%B4%E5%91%B3%E5%9F%BA%E5%9B%A0%E6%8A%A5%E5%91%8A%EF%BC%8C%E5%8F%91%E7%8E%B0%E6%96%87%E5%8C%96%E8%A1%80%E8%84%89%E3%80%82%22%2C%22textStartLine%22%3A%2289%22%2C%22textStartColumn%22%3A%2241%22%2C%22textEndLine%22%3A%2289%22%2C%22textEndColumn%22%3A%2261%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-gray-600",children:""})]}),P.jsxs(mi,{to:"/co-creation",className:"bg-white p-6 rounded-xl shadow-md hover:shadow-xl transition-shadow border-t-4 border-blue-500 group",children:[P.jsx("div",{"trae-inspector-start-line":"93","trae-inspector-start-column":"12","trae-inspector-end-line":"95","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\pages\\\\Home.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mb-4 group-hover:bg-blue-200 transition-colors",children:P.jsx(Dw,{className:"text-blue-700"})}),P.jsx("h3",{"trae-inspector-start-line":"96","trae-inspector-start-column":"12","trae-inspector-end-line":"96","trae-inspector-end-column":"60","trae-inspector-file-path":"src\\\\pages\\\\Home.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E9%9D%9E%E9%81%97%E5%85%B1%E5%88%9B%22%2C%22textStartLine%22%3A%2296%22%2C%22textStartColumn%22%3A%2251%22%2C%22textEndLine%22%3A%2296%22%2C%22textEndColumn%22%3A%2255%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-xl font-bold mb-2",children:""}),P.jsx("p",{"trae-inspector-start-line":"97","trae-inspector-start-column":"12","trae-inspector-end-line":"97","trae-inspector-end-column":"65","trae-inspector-file-path":"src\\\\pages\\\\Home.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E5%88%86%E4%BA%AB%E6%82%A8%E8%BA%AB%E8%BE%B9%E7%9A%84%E7%8B%AC%E7%89%B9%E5%B9%B4%E4%BF%97%EF%BC%8C%E5%85%B1%E5%90%8C%E4%BC%A0%E6%89%BF%E6%96%87%E5%8C%96%E8%AE%B0%E5%BF%86%E3%80%82%22%2C%22textStartLine%22%3A%2297%22%2C%22textStartColumn%22%3A%2241%22%2C%22textEndLine%22%3A%2297%22%2C%22textEndColumn%22%3A%2261%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-gray-600",children:""})]}),P.jsxs(mi,{to:"/profile",className:"bg-white p-6 rounded-xl shadow-md hover:shadow-xl transition-shadow border-t-4 border-purple-500 group",children:[P.jsx("div",{"trae-inspector-start-line":"101","trae-inspector-start-column":"12","trae-inspector-end-line":"103","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\pages\\\\Home.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center mb-4 group-hover:bg-purple-200 transition-colors",children:P.jsx(Mg,{className:"text-purple-700"})}),P.jsx("h3",{"trae-inspector-start-line":"104","trae-inspector-start-column":"12","trae-inspector-end-line":"104","trae-inspector-end-column":"60","trae-inspector-file-path":"src\\\\pages\\\\Home.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E4%B8%AA%E4%BA%BA%E4%B8%AD%E5%BF%83%22%2C%22textStartLine%22%3A%22104%22%2C%22textStartColumn%22%3A%2251%22%2C%22textEndLine%22%3A%22104%22%2C%22textEndColumn%22%3A%2255%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-xl font-bold mb-2",children:""}),P.jsx("p",{"trae-inspector-start-line":"105","trae-inspector-start-column":"12","trae-inspector-end-line":"105","trae-inspector-end-column":"62","trae-inspector-file-path":"src\\\\pages\\\\Home.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E7%AE%A1%E7%90%86%E6%82%A8%E7%9A%84%E6%94%B6%E8%97%8F%E3%80%81%E4%B8%8A%E4%BC%A0%E5%92%8C%E5%9F%BA%E5%9B%A0%E6%8A%A5%E5%91%8A%E5%8E%86%E5%8F%B2%E3%80%82%22%2C%22textStartLine%22%3A%22105%22%2C%22textStartColumn%22%3A%2241%22%2C%22textEndLine%22%3A%22105%22%2C%22textEndColumn%22%3A%2258%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-gray-600",children:""})]})]})}),P.jsx("div",{"trae-inspector-start-line":"111","trae-inspector-start-column":"6","trae-inspector-end-line":"140","trae-inspector-end-column":"12","trae-inspector-file-path":"src\\\\pages\\\\Home.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"bg-stone-50 py-16",children:P.jsxs("div",{"trae-inspector-start-line":"112","trae-inspector-start-column":"8","trae-inspector-end-line":"139","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\Home.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"container mx-auto px-4",children:[P.jsxs("div",{"trae-inspector-start-line":"113","trae-inspector-start-column":"10","trae-inspector-end-line":"119","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\Home.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"flex items-center justify-center mb-10",children:[P.jsx("span",{"trae-inspector-start-line":"114","trae-inspector-start-column":"12","trae-inspector-end-line":"114","trae-inspector-end-column":"76","trae-inspector-file-path":"src\\\\pages\\\\Home.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E2%9D%96%22%2C%22textStartLine%22%3A%22114%22%2C%22textStartColumn%22%3A%2268%22%2C%22textEndLine%22%3A%22114%22%2C%22textEndColumn%22%3A%2269%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-red-800 text-2xl mr-4 opacity-80",children:""}),P.jsx("h2",{"trae-inspector-start-line":"115","trae-inspector-start-column":"12","trae-inspector-end-line":"117","trae-inspector-end-column":"17","trae-inspector-file-path":"src\\\\pages\\\\Home.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E9%A9%AC%E5%B9%B4%E9%99%90%E5%AE%9A%20%C2%B7%20%E9%9D%9E%E9%81%97%E7%B2%BE%E9%80%89%22%2C%22textStartLine%22%3A%22115%22%2C%22textStartColumn%22%3A%2299%22%2C%22textEndLine%22%3A%22117%22%2C%22textEndColumn%22%3A%2212%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-3xl font-bold text-center font-serif text-red-900 tracking-widest",children:"  "}),P.jsx("span",{"trae-inspector-start-line":"118","trae-inspector-start-column":"12","trae-inspector-end-line":"118","trae-inspector-end-column":"76","trae-inspector-file-path":"src\\\\pages\\\\Home.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E2%9D%96%22%2C%22textStartLine%22%3A%22118%22%2C%22textStartColumn%22%3A%2268%22%2C%22textEndLine%22%3A%22118%22%2C%22textEndColumn%22%3A%2269%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-red-800 text-2xl ml-4 opacity-80",children:""})]}),P.jsx("div",{"trae-inspector-start-line":"121","trae-inspector-start-column":"10","trae-inspector-end-line":"138","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\Home.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:r.map(i=>P.jsxs("div",{"trae-inspector-start-line":"123","trae-inspector-start-column":"14","trae-inspector-end-line":"136","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\pages\\\\Home.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"rounded-xl overflow-hidden shadow-lg border border-red-100 bg-white group hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 flex flex-col h-full",children:[P.jsxs("div",{"trae-inspector-start-line":"124","trae-inspector-start-column":"16","trae-inspector-end-line":"128","trae-inspector-end-column":"22","trae-inspector-file-path":"src\\\\pages\\\\Home.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"h-56 bg-gray-50 relative flex-shrink-0",children:[P.jsx(xB,{imageUrl:i.imageUrl,autoRotate:!1}),P.jsx("div",{"trae-inspector-start-line":"127","trae-inspector-start-column":"18","trae-inspector-end-line":"127","trae-inspector-end-column":"116","trae-inspector-file-path":"src\\\\pages\\\\Home.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E9%A9%AC%E5%B9%B4%E7%89%B9%E4%BE%9B%22%2C%22textStartLine%22%3A%22127%22%2C%22textStartColumn%22%3A%22106%22%2C%22textEndLine%22%3A%22127%22%2C%22textEndColumn%22%3A%22110%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"absolute top-2 right-2 bg-red-600 text-white text-xs px-2 py-1 rounded",children:""})]}),P.jsxs("div",{"trae-inspector-start-line":"129","trae-inspector-start-column":"16","trae-inspector-end-line":"135","trae-inspector-end-column":"22","trae-inspector-file-path":"src\\\\pages\\\\Home.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"p-6 flex flex-col flex-1",children:[P.jsx("h3",{"trae-inspector-start-line":"130","trae-inspector-start-column":"18","trae-inspector-end-line":"130","trae-inspector-end-column":"130","trae-inspector-file-path":"src\\\\pages\\\\Home.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-xl font-bold mb-2 text-gray-800 group-hover:text-red-700 transition-colors",children:i.name}),P.jsx("p",{"trae-inspector-start-line":"131","trae-inspector-start-column":"18","trae-inspector-end-line":"131","trae-inspector-end-column":"111","trae-inspector-file-path":"src\\\\pages\\\\Home.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-gray-600 text-sm mb-6 leading-relaxed line-clamp-2 flex-1",children:i.desc}),P.jsx(mi,{to:`/heritage/${i.id}`,className:"inline-block w-full text-center py-2 border border-red-600 text-red-600 rounded-lg hover:bg-red-600 hover:text-white transition-colors font-medium",children:""})]})]},i.id))})]})}),e.length>0&&P.jsx("div",{"trae-inspector-start-line":"144","trae-inspector-start-column":"8","trae-inspector-end-line":"164","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\Home.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"bg-white py-16 border-t border-stone-100",children:P.jsxs("div",{"trae-inspector-start-line":"145","trae-inspector-start-column":"10","trae-inspector-end-line":"163","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\Home.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"container mx-auto px-4",children:[P.jsxs("div",{"trae-inspector-start-line":"146","trae-inspector-start-column":"12","trae-inspector-end-line":"156","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\pages\\\\Home.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"flex items-center justify-between mb-10",children:[P.jsxs("div",{"trae-inspector-start-line":"147","trae-inspector-start-column":"14","trae-inspector-end-line":"152","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\pages\\\\Home.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"flex items-center",children:[P.jsx("span",{"trae-inspector-start-line":"148","trae-inspector-start-column":"16","trae-inspector-end-line":"148","trae-inspector-end-column":"81","trae-inspector-file-path":"src\\\\pages\\\\Home.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E2%9D%96%22%2C%22textStartLine%22%3A%22148%22%2C%22textStartColumn%22%3A%2273%22%2C%22textEndLine%22%3A%22148%22%2C%22textEndColumn%22%3A%2274%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-blue-800 text-2xl mr-4 opacity-80",children:""}),P.jsx("h2",{"trae-inspector-start-line":"149","trae-inspector-start-column":"16","trae-inspector-end-line":"151","trae-inspector-end-column":"21","trae-inspector-file-path":"src\\\\pages\\\\Home.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E9%9D%9E%E9%81%97%E5%85%B1%E5%88%9B%20%C2%B7%20%E7%83%AD%E9%97%A8%E5%88%86%E4%BA%AB%22%2C%22textStartLine%22%3A%22149%22%2C%22textStartColumn%22%3A%2292%22%2C%22textEndLine%22%3A%22151%22%2C%22textEndColumn%22%3A%2216%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-3xl font-bold font-serif text-blue-900 tracking-widest",children:"  "})]}),P.jsxs(mi,{to:"/co-creation",className:"flex items-center text-blue-600 hover:text-blue-800 font-medium transition-colors",children:[" ",P.jsx(Mw,{className:"ml-2 w-4 h-4"})]})]}),P.jsx("div",{"trae-inspector-start-line":"158","trae-inspector-start-column":"12","trae-inspector-end-line":"162","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\pages\\\\Home.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:e.map(i=>P.jsx(CB,{contribution:i},i.id))})]})}),P.jsx("footer",{"trae-inspector-start-line":"168","trae-inspector-start-column":"6","trae-inspector-end-line":"174","trae-inspector-end-column":"15","trae-inspector-file-path":"src\\\\pages\\\\Home.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"bg-red-50 text-red-800 py-8 text-center border-t border-red-100",children:P.jsx("div",{"trae-inspector-start-line":"169","trae-inspector-start-column":"8","trae-inspector-end-line":"173","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\Home.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"container mx-auto px-4",children:P.jsx("p",{"trae-inspector-start-line":"170","trae-inspector-start-column":"10","trae-inspector-end-line":"172","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\Home.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E5%BC%80%E5%8F%91%E8%80%85%EF%BC%9AWood%20grass%22%2C%22textStartLine%22%3A%22170%22%2C%22textStartColumn%22%3A%2282%22%2C%22textEndLine%22%3A%22172%22%2C%22textEndColumn%22%3A%2210%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-sm tracking-widest uppercase font-serif font-medium",children:"Wood grass"})})})]})},Fk=()=>P.jsxs("mesh",{position:[0,0,-2],rotation:[0,.5,0],children:[P.jsx("boxGeometry",{args:[1,1,1]}),P.jsx("meshStandardMaterial",{color:"#ef4444",wireframe:!0}),P.jsxs("mesh",{position:[0,0,0],children:[P.jsx("sphereGeometry",{args:[.3,32,32]}),P.jsx("meshStandardMaterial",{color:"#fbbf24"})]})]}),kk=()=>{const r=tc(),[e,t]=V.useState(!1),[n,i]=V.useState(!1),[s,o]=V.useState(!1),[l,u]=V.useState(!1),[h,p]=V.useState({city:"",item:""}),m=V.useRef(null),[v,y]=V.useState(""),E=async()=>{t(!0),o(!1),y("");try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("BrowserNotSupported");const S=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1280},height:{ideal:720}},audio:!1});m.current&&(m.current.srcObject=S),setTimeout(()=>{i(!0)},3e3)}catch(S){console.error("Camera access error:",S);let R="";S.name==="NotAllowedError"||S.name==="PermissionDeniedError"?R="":S.name==="NotFoundError"||S.name==="DevicesNotFoundError"?R="":S.name==="NotReadableError"||S.name==="TrackStartError"?R="":S.message==="BrowserNotSupported"&&(R="ChromeSafari"),y(R)}},w=()=>{u(!0)},C=()=>{!h.city||!h.item||(u(!1),t(!0),o(!0),y(""),setTimeout(()=>{i(!0)},2500))},x=()=>{t(!1),i(!1),o(!1),u(!1),m.current&&m.current.srcObject&&(m.current.srcObject.getTracks().forEach(R=>R.stop()),m.current.srcObject=null)};V.useEffect(()=>()=>{x()},[]);const M=()=>{r("/gene-profile")};return P.jsxs("div",{"trae-inspector-start-line":"118","trae-inspector-start-column":"4","trae-inspector-end-line":"309","trae-inspector-end-column":"10","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"flex flex-col items-center justify-center min-h-[100dvh] bg-black text-white relative overflow-hidden",children:[(e||l)&&P.jsx("div",{"trae-inspector-start-line":"121","trae-inspector-start-column":"8","trae-inspector-end-line":"125","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"absolute top-4 left-4 z-20",children:P.jsx("button",{"trae-inspector-start-line":"122","trae-inspector-start-column":"11","trae-inspector-end-line":"124","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",onClick:x,className:"p-2 bg-black/50 rounded-full text-white hover:bg-black/70 transition-colors",children:P.jsx(Lw,{})})}),l&&P.jsx("div",{"trae-inspector-start-line":"130","trae-inspector-start-column":"8","trae-inspector-end-line":"180","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"absolute inset-0 z-30 flex items-center justify-center bg-black/90 backdrop-blur-sm p-6 animate-in fade-in zoom-in duration-300",children:P.jsxs("div",{"trae-inspector-start-line":"131","trae-inspector-start-column":"11","trae-inspector-end-line":"179","trae-inspector-end-column":"17","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"w-full max-w-sm bg-gray-900 border border-gray-800 rounded-2xl p-6 shadow-2xl",children:[P.jsx("div",{"trae-inspector-start-line":"132","trae-inspector-start-column":"14","trae-inspector-end-line":"134","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"flex items-center justify-center w-12 h-12 bg-indigo-600 rounded-full mx-auto mb-4 shadow-lg shadow-indigo-600/30",children:P.jsx(q0,{className:"w-6 h-6 text-white"})}),P.jsx("h2",{"trae-inspector-start-line":"135","trae-inspector-start-column":"14","trae-inspector-end-line":"135","trae-inspector-end-column":"77","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E5%AE%9A%E5%88%B6%E6%82%A8%E7%9A%84%E5%B9%B4%E5%91%B3%22%2C%22textStartLine%22%3A%22135%22%2C%22textStartColumn%22%3A%2266%22%2C%22textEndLine%22%3A%22135%22%2C%22textEndColumn%22%3A%2272%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-2xl font-bold text-center mb-2",children:""}),P.jsx("p",{"trae-inspector-start-line":"136","trae-inspector-start-column":"14","trae-inspector-end-line":"136","trae-inspector-end-column":"91","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E8%BE%93%E5%85%A5%E4%BF%A1%E6%81%AF%EF%BC%8CAI%20%E5%B0%86%E4%B8%BA%E6%82%A8%E7%94%9F%E6%88%90%E4%B8%93%E5%B1%9E%E5%B9%B4%E5%91%B3%E5%9F%BA%E5%9B%A0%22%2C%22textStartLine%22%3A%22136%22%2C%22textStartColumn%22%3A%2268%22%2C%22textEndLine%22%3A%22136%22%2C%22textEndColumn%22%3A%2287%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-gray-400 text-center text-sm mb-6",children:"AI "}),P.jsxs("div",{"trae-inspector-start-line":"138","trae-inspector-start-column":"14","trae-inspector-end-line":"178","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"space-y-4",children:[P.jsxs("div",{"trae-inspector-start-line":"139","trae-inspector-start-column":"17","trae-inspector-end-line":"151","trae-inspector-end-column":"23","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",children:[P.jsx("label",{"trae-inspector-start-line":"140","trae-inspector-start-column":"20","trae-inspector-end-line":"140","trae-inspector-end-column":"114","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E6%89%80%E5%9C%A8%E5%9F%8E%E5%B8%82%20%2F%20%E5%AE%B6%E4%B9%A1%22%2C%22textStartLine%22%3A%22140%22%2C%22textStartColumn%22%3A%2297%22%2C%22textEndLine%22%3A%22140%22%2C%22textEndColumn%22%3A%22106%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:" / "}),P.jsxs("div",{"trae-inspector-start-line":"141","trae-inspector-start-column":"20","trae-inspector-end-line":"150","trae-inspector-end-column":"26","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"relative",children:[P.jsx(Up,{className:"absolute left-3 top-3.5 w-5 h-5 text-gray-500"}),P.jsx("input",{"trae-inspector-start-line":"143","trae-inspector-start-column":"23","trae-inspector-end-line":"149","trae-inspector-end-column":"25","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",type:"text",value:h.city,onChange:S=>p({...h,city:S.target.value}),className:"w-full bg-gray-800 border border-gray-700 rounded-xl py-3 pl-10 pr-4 text-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all placeholder-gray-600",placeholder:"..."})]})]}),P.jsxs("div",{"trae-inspector-start-line":"153","trae-inspector-start-column":"17","trae-inspector-end-line":"165","trae-inspector-end-column":"23","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",children:[P.jsx("label",{"trae-inspector-start-line":"154","trae-inspector-start-column":"20","trae-inspector-end-line":"154","trae-inspector-end-column":"112","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E8%BA%AB%E8%BE%B9%E7%9A%84%E5%B9%B4%E4%BF%97%E7%89%A9%E4%BB%B6%22%2C%22textStartLine%22%3A%22154%22%2C%22textStartColumn%22%3A%2297%22%2C%22textEndLine%22%3A%22154%22%2C%22textEndColumn%22%3A%22104%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:""}),P.jsxs("div",{"trae-inspector-start-line":"155","trae-inspector-start-column":"20","trae-inspector-end-line":"164","trae-inspector-end-column":"26","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"relative",children:[P.jsx(uD,{className:"absolute left-3 top-3.5 w-5 h-5 text-gray-500"}),P.jsx("input",{"trae-inspector-start-line":"157","trae-inspector-start-column":"23","trae-inspector-end-line":"163","trae-inspector-end-column":"25","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",type:"text",value:h.item,onChange:S=>p({...h,item:S.target.value}),className:"w-full bg-gray-800 border border-gray-700 rounded-xl py-3 pl-10 pr-4 text-white focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all placeholder-gray-600",placeholder:"..."})]})]}),P.jsx("button",{"trae-inspector-start-line":"167","trae-inspector-start-column":"17","trae-inspector-end-line":"177","trae-inspector-end-column":"26","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E5%BC%80%E5%A7%8B%E6%99%BA%E8%83%BD%E7%94%9F%E6%88%90%22%2C%22textStartLine%22%3A%22175%22%2C%22textStartColumn%22%3A%2218%22%2C%22textEndLine%22%3A%22177%22%2C%22textEndColumn%22%3A%2217%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",onClick:C,disabled:!h.city||!h.item,className:`w-full py-3.5 rounded-xl font-bold text-lg shadow-lg flex items-center justify-center transition-all mt-4 ${h.city&&h.item?"bg-gradient-to-r from-indigo-600 to-purple-600 text-white hover:shadow-indigo-600/40 transform active:scale-95":"bg-gray-800 text-gray-500 cursor-not-allowed"}`,children:""})]})]})}),P.jsx("div",{"trae-inspector-start-line":"184","trae-inspector-start-column":"6","trae-inspector-end-line":"308","trae-inspector-end-column":"12","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"relative w-full h-[100dvh] flex items-center justify-center bg-gray-900",children:e?P.jsxs(P.Fragment,{children:[!s&&P.jsx("video",{"trae-inspector-start-line":"188","trae-inspector-start-column":"16","trae-inspector-end-line":"194","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",ref:m,autoPlay:!0,playsInline:!0,muted:!0,className:"absolute inset-0 w-full h-full object-cover z-0"}),s&&P.jsxs("div",{"trae-inspector-start-line":"199","trae-inspector-start-column":"16","trae-inspector-end-line":"204","trae-inspector-end-column":"22","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"absolute inset-0 w-full h-full bg-gradient-to-br from-gray-800 to-black z-0 flex items-center justify-center flex-col",children:[P.jsxs("p",{"trae-inspector-start-line":"200","trae-inspector-start-column":"20","trae-inspector-end-line":"200","trae-inspector-end-column":"112","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-gray-500 animate-pulse mb-2",children:["",h.city,"  ",h.item]}),P.jsx("div",{"trae-inspector-start-line":"201","trae-inspector-start-column":"20","trae-inspector-end-line":"203","trae-inspector-end-column":"26","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"w-48 h-1 bg-gray-700 rounded-full overflow-hidden",children:P.jsx("div",{"trae-inspector-start-line":"202","trae-inspector-start-column":"23","trae-inspector-end-line":"202","trae-inspector-end-column":"115","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"h-full bg-indigo-500 animate-[loading_2s_ease-in-out_infinite] w-1/2"})})]}),n&&P.jsxs("div",{"trae-inspector-start-line":"209","trae-inspector-start-column":"15","trae-inspector-end-line":"237","trae-inspector-end-column":"21","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"absolute inset-0 z-10 flex flex-col items-center justify-center bg-black/40 backdrop-blur-sm animate-in fade-in duration-500",children:[P.jsx("div",{"trae-inspector-start-line":"210","trae-inspector-start-column":"17","trae-inspector-end-line":"217","trae-inspector-end-column":"23","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"h-64 w-full",children:P.jsxs(iB,{camera:{position:[0,0,4],fov:50},children:[P.jsx("ambientLight",{intensity:.8}),P.jsx("pointLight",{position:[10,10,10],intensity:1.5}),P.jsx(Fk,{}),P.jsx(gB,{enableZoom:!1,autoRotate:!0,autoRotateSpeed:5})]})}),P.jsxs("div",{"trae-inspector-start-line":"219","trae-inspector-start-column":"17","trae-inspector-end-line":"236","trae-inspector-end-column":"23","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-center p-6 bg-white/10 backdrop-blur-md rounded-xl border border-yellow-500/30 mx-4 max-w-sm shadow-2xl",children:[P.jsx("div",{"trae-inspector-start-line":"220","trae-inspector-start-column":"20","trae-inspector-end-line":"222","trae-inspector-end-column":"26","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"inline-block p-3 bg-red-600 rounded-full mb-4 shadow-lg shadow-red-600/30",children:P.jsx(lD,{className:"w-8 h-8 text-white"})}),P.jsx("h2",{"trae-inspector-start-line":"223","trae-inspector-start-column":"20","trae-inspector-end-line":"223","trae-inspector-end-column":"86","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E8%AF%86%E5%88%AB%E6%88%90%E5%8A%9F%EF%BC%81%22%2C%22textStartLine%22%3A%22223%22%2C%22textStartColumn%22%3A%2276%22%2C%22textEndLine%22%3A%22223%22%2C%22textEndColumn%22%3A%2281%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-2xl font-bold text-yellow-400 mb-2",children:""}),P.jsxs("p",{"trae-inspector-start-line":"224","trae-inspector-start-column":"20","trae-inspector-end-line":"228","trae-inspector-end-column":"24","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-gray-200 mb-6",children:[" ",P.jsx("span",{"trae-inspector-start-line":"225","trae-inspector-start-column":"26","trae-inspector-end-line":"225","trae-inspector-end-column":"101","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-yellow-400 font-bold",children:h.city||""})," ",P.jsx("br",{"trae-inspector-start-line":"226","trae-inspector-start-column":"23","trae-inspector-end-line":"226","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D"}),"",h.item||""," "]}),P.jsxs("button",{"trae-inspector-start-line":"230","trae-inspector-start-column":"20","trae-inspector-end-line":"235","trae-inspector-end-column":"29","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",onClick:M,className:"w-full py-3 bg-gradient-to-r from-red-600 to-orange-600 rounded-lg text-white font-bold flex items-center justify-center gap-2 hover:shadow-lg hover:shadow-red-600/40 transition-all active:scale-95",children:[" &  ",P.jsx(Mw,{className:"w-5 h-5"})]})]})]}),!n&&!v&&P.jsx("div",{"trae-inspector-start-line":"242","trae-inspector-start-column":"8","trae-inspector-end-line":"259","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"absolute inset-0 z-10 flex items-center justify-center pointer-events-none",children:P.jsxs("div",{"trae-inspector-start-line":"243","trae-inspector-start-column":"10","trae-inspector-end-line":"258","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"w-72 h-72 border-2 border-yellow-400/50 rounded-lg relative",children:[P.jsx("div",{"trae-inspector-start-line":"245","trae-inspector-start-column":"13","trae-inspector-end-line":"245","trae-inspector-end-column":"180","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-red-500 to-transparent animate-[scan_2s_ease-in-out_infinite] opacity-70"}),P.jsx("div",{"trae-inspector-start-line":"248","trae-inspector-start-column":"12","trae-inspector-end-line":"248","trae-inspector-end-column":"131","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"absolute top-0 left-0 w-8 h-8 border-t-4 border-l-4 border-yellow-500 -mt-1 -ml-1 rounded-tl-lg"}),P.jsx("div",{"trae-inspector-start-line":"249","trae-inspector-start-column":"12","trae-inspector-end-line":"249","trae-inspector-end-column":"132","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"absolute top-0 right-0 w-8 h-8 border-t-4 border-r-4 border-yellow-500 -mt-1 -mr-1 rounded-tr-lg"}),P.jsx("div",{"trae-inspector-start-line":"250","trae-inspector-start-column":"12","trae-inspector-end-line":"250","trae-inspector-end-column":"134","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"absolute bottom-0 left-0 w-8 h-8 border-b-4 border-l-4 border-yellow-500 -mb-1 -ml-1 rounded-bl-lg"}),P.jsx("div",{"trae-inspector-start-line":"251","trae-inspector-start-column":"12","trae-inspector-end-line":"251","trae-inspector-end-column":"135","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"absolute bottom-0 right-0 w-8 h-8 border-b-4 border-r-4 border-yellow-500 -mb-1 -mr-1 rounded-br-lg"}),P.jsx("div",{"trae-inspector-start-line":"253","trae-inspector-start-column":"12","trae-inspector-end-line":"257","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"absolute -bottom-16 w-full text-center",children:P.jsx("p",{"trae-inspector-start-line":"254","trae-inspector-start-column":"14","trae-inspector-end-line":"256","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-yellow-100 text-sm bg-black/40 px-4 py-2 rounded-full inline-block backdrop-blur-md border border-white/10",children:s?" ...":" /"})})]})}),v&&P.jsx("div",{"trae-inspector-start-line":"264","trae-inspector-start-column":"15","trae-inspector-end-line":"276","trae-inspector-end-column":"21","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"absolute inset-0 z-10 flex items-center justify-center bg-black/80",children:P.jsxs("div",{"trae-inspector-start-line":"265","trae-inspector-start-column":"17","trae-inspector-end-line":"275","trae-inspector-end-column":"23","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-center p-6 max-w-xs",children:[P.jsx("p",{"trae-inspector-start-line":"266","trae-inspector-start-column":"19","trae-inspector-end-line":"266","trae-inspector-end-column":"63","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-red-500 mb-6",children:v}),P.jsxs("div",{"trae-inspector-start-line":"267","trae-inspector-start-column":"19","trae-inspector-end-line":"274","trae-inspector-end-column":"25","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"space-y-3",children:[P.jsxs("button",{"trae-inspector-start-line":"268","trae-inspector-start-column":"24","trae-inspector-end-line":"270","trae-inspector-end-column":"33","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",onClick:E,className:"w-full flex items-center justify-center px-4 py-3 bg-gray-800 rounded-lg hover:bg-gray-700 transition-colors",children:[P.jsx(nD,{className:"mr-2 h-4 w-4"})," "]}),P.jsxs("button",{"trae-inspector-start-line":"271","trae-inspector-start-column":"24","trae-inspector-end-line":"273","trae-inspector-end-column":"33","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",onClick:w,className:"w-full flex items-center justify-center px-4 py-3 bg-red-900/50 text-red-200 rounded-lg hover:bg-red-900/70 transition-colors border border-red-800",children:[P.jsx(q0,{className:"mr-2 h-4 w-4"})," "]})]})]})})]}):P.jsxs("div",{"trae-inspector-start-line":"280","trae-inspector-start-column":"10","trae-inspector-end-line":"306","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"flex flex-col items-center p-8 text-center max-w-md z-10 animate-in fade-in duration-700",children:[P.jsx("div",{"trae-inspector-start-line":"281","trae-inspector-start-column":"12","trae-inspector-end-line":"283","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"w-24 h-24 bg-gradient-to-br from-red-600 to-red-800 rounded-full flex items-center justify-center mb-8 shadow-[0_0_40px_rgba(220,38,38,0.6)] border-4 border-red-500/30",children:P.jsx(hy,{size:48,className:"text-white"})}),P.jsx("h1",{"trae-inspector-start-line":"284","trae-inspector-start-column":"12","trae-inspector-end-line":"284","trae-inspector-end-column":"155","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22AR%20%E6%89%AB%E5%B9%B4%E4%BF%97%22%2C%22textStartLine%22%3A%22284%22%2C%22textStartColumn%22%3A%22144%22%2C%22textEndLine%22%3A%22284%22%2C%22textEndColumn%22%3A%22150%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-4xl font-bold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-yellow-200 via-yellow-400 to-yellow-200",children:"AR "}),P.jsxs("p",{"trae-inspector-start-line":"285","trae-inspector-start-column":"12","trae-inspector-end-line":"288","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-gray-300 mb-10 text-lg leading-relaxed",children:["",P.jsx("span",{"trae-inspector-start-line":"286","trae-inspector-start-column":"25","trae-inspector-end-line":"286","trae-inspector-end-column":"68","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E6%98%A5%E8%81%94%22%2C%22textStartLine%22%3A%22286%22%2C%22textStartColumn%22%3A%2259%22%2C%22textEndLine%22%3A%22286%22%2C%22textEndColumn%22%3A%2261%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-yellow-400",children:""}),"",P.jsx("span",{"trae-inspector-start-line":"286","trae-inspector-start-column":"69","trae-inspector-end-line":"286","trae-inspector-end-column":"112","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E7%AA%97%E8%8A%B1%22%2C%22textStartLine%22%3A%22286%22%2C%22textStartColumn%22%3A%22103%22%2C%22textEndLine%22%3A%22286%22%2C%22textEndColumn%22%3A%22105%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-yellow-400",children:""}),"",P.jsx("span",{"trae-inspector-start-line":"286","trae-inspector-start-column":"113","trae-inspector-end-line":"286","trae-inspector-end-column":"156","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E7%81%AF%E7%AC%BC%22%2C%22textStartLine%22%3A%22286%22%2C%22textStartColumn%22%3A%22147%22%2C%22textEndLine%22%3A%22286%22%2C%22textEndColumn%22%3A%22149%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-yellow-400",children:""})," AI 3D "]}),P.jsxs("div",{"trae-inspector-start-line":"290","trae-inspector-start-column":"12","trae-inspector-end-line":"304","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"w-full space-y-4",children:[P.jsxs("button",{"trae-inspector-start-line":"291","trae-inspector-start-column":"16","trae-inspector-end-line":"296","trae-inspector-end-column":"25","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",onClick:E,className:"w-full py-4 bg-gradient-to-r from-red-600 to-orange-600 rounded-xl text-white font-bold text-lg hover:shadow-lg hover:shadow-red-600/40 transform transition-all active:scale-95 flex items-center justify-center",children:[P.jsx(hy,{className:"mr-2 w-5 h-5"})," "]}),P.jsxs("button",{"trae-inspector-start-line":"298","trae-inspector-start-column":"16","trae-inspector-end-line":"303","trae-inspector-end-column":"25","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",onClick:w,className:"w-full py-4 bg-white/10 backdrop-blur-md border border-white/20 rounded-xl text-white font-semibold text-lg hover:bg-white/20 transition-all active:scale-95 flex items-center justify-center",children:[P.jsx(q0,{className:"mr-2 w-5 h-5"})," "]})]}),P.jsx("p",{"trae-inspector-start-line":"305","trae-inspector-start-column":"12","trae-inspector-end-line":"305","trae-inspector-end-column":"81","trae-inspector-file-path":"src\\\\pages\\\\ARScan.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E6%8F%90%E7%A4%BA%EF%BC%9A%E5%A6%82%E6%97%A0%E6%B3%95%E4%BD%BF%E7%94%A8%E6%91%84%E5%83%8F%E5%A4%B4%EF%BC%8C%E8%AF%B7%E4%BD%BF%E7%94%A8%E4%BF%A1%E6%81%AF%E6%A8%A1%E6%8B%9F%E4%BD%93%E9%AA%8C%E5%8A%9F%E8%83%BD%22%2C%22textStartLine%22%3A%22305%22%2C%22textStartColumn%22%3A%2254%22%2C%22textEndLine%22%3A%22305%22%2C%22textEndColumn%22%3A%2277%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"mt-6 text-xs text-gray-500",children:""})]})})]})},Ok=()=>{const{id:r}=Ub(),e=V.useMemo(()=>cp.find(t=>t.id===r),[r]);return e?P.jsxs("div",{"trae-inspector-start-line":"26","trae-inspector-start-column":"4","trae-inspector-end-line":"107","trae-inspector-end-column":"10","trae-inspector-file-path":"src\\\\pages\\\\HeritageDetail.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"min-h-screen bg-stone-50 pb-12",children:[P.jsx("div",{"trae-inspector-start-line":"28","trae-inspector-start-column":"6","trae-inspector-end-line":"34","trae-inspector-end-column":"12","trae-inspector-file-path":"src\\\\pages\\\\HeritageDetail.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"bg-white shadow-sm sticky top-0 z-20",children:P.jsx("div",{"trae-inspector-start-line":"29","trae-inspector-start-column":"8","trae-inspector-end-line":"33","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\HeritageDetail.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"container mx-auto px-4 py-4",children:P.jsxs(mi,{to:"/",className:"text-gray-500 hover:text-red-600 inline-flex items-center transition-colors",children:[P.jsx(fg,{className:"mr-2 w-4 h-4"})," "]})})}),P.jsx("div",{"trae-inspector-start-line":"36","trae-inspector-start-column":"6","trae-inspector-end-line":"106","trae-inspector-end-column":"12","trae-inspector-file-path":"src\\\\pages\\\\HeritageDetail.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"container mx-auto px-4 py-8",children:P.jsxs("div",{"trae-inspector-start-line":"37","trae-inspector-start-column":"8","trae-inspector-end-line":"105","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\HeritageDetail.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[P.jsxs("div",{"trae-inspector-start-line":"39","trae-inspector-start-column":"10","trae-inspector-end-line":"57","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\HeritageDetail.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"space-y-6",children:[P.jsx("div",{"trae-inspector-start-line":"40","trae-inspector-start-column":"13","trae-inspector-end-line":"46","trae-inspector-end-column":"19","trae-inspector-file-path":"src\\\\pages\\\\HeritageDetail.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"bg-white rounded-2xl shadow-lg overflow-hidden border border-gray-100 aspect-square relative",children:P.jsx(xB,{modelUrl:e.modelUrl,imageUrl:e.imageUrl,autoRotate:!0})}),P.jsxs("div",{"trae-inspector-start-line":"47","trae-inspector-start-column":"13","trae-inspector-end-line":"56","trae-inspector-end-column":"19","trae-inspector-file-path":"src\\\\pages\\\\HeritageDetail.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"bg-yellow-50 p-6 rounded-xl border border-yellow-100",children:[P.jsx("h3",{"trae-inspector-start-line":"48","trae-inspector-start-column":"15","trae-inspector-end-line":"50","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\pages\\\\HeritageDetail.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%F0%9F%92%A1%20%E4%BA%92%E5%8A%A8%E6%8F%90%E7%A4%BA%22%2C%22textStartLine%22%3A%2248%22%2C%22textStartColumn%22%3A%2280%22%2C%22textEndLine%22%3A%2250%22%2C%22textEndColumn%22%3A%2215%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"font-bold text-yellow-800 mb-2 flex items-center",children:" "}),P.jsx("p",{"trae-inspector-start-line":"51","trae-inspector-start-column":"15","trae-inspector-end-line":"55","trae-inspector-end-column":"19","trae-inspector-file-path":"src\\\\pages\\\\HeritageDetail.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-yellow-700 text-sm",children:e.modelUrl?" AR ":" 2D  3D "})]})]}),P.jsxs("div",{"trae-inspector-start-line":"60","trae-inspector-start-column":"10","trae-inspector-end-line":"104","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\HeritageDetail.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",children:[P.jsx("div",{"trae-inspector-start-line":"61","trae-inspector-start-column":"12","trae-inspector-end-line":"65","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\pages\\\\HeritageDetail.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"mb-2",children:P.jsx("span",{"trae-inspector-start-line":"62","trae-inspector-start-column":"14","trae-inspector-end-line":"64","trae-inspector-end-column":"21","trae-inspector-file-path":"src\\\\pages\\\\HeritageDetail.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"inline-block px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm font-semibold mb-4",children:e.category})}),P.jsx("h1",{"trae-inspector-start-line":"66","trae-inspector-start-column":"12","trae-inspector-end-line":"66","trae-inspector-end-column":"97","trae-inspector-file-path":"src\\\\pages\\\\HeritageDetail.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-4xl font-bold mb-4 font-serif text-gray-900",children:e.name}),P.jsxs("div",{"trae-inspector-start-line":"68","trae-inspector-start-column":"12","trae-inspector-end-line":"79","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\pages\\\\HeritageDetail.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"flex flex-wrap gap-4 mb-8 text-gray-600",children:[P.jsxs("div",{"trae-inspector-start-line":"69","trae-inspector-start-column":"14","trae-inspector-end-line":"72","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\pages\\\\HeritageDetail.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"flex items-center bg-white px-3 py-1 rounded-md shadow-sm",children:[P.jsx(Up,{className:"w-4 h-4 mr-2 text-red-500"}),e.region]}),e.tags.map(t=>P.jsxs("div",{"trae-inspector-start-line":"74","trae-inspector-start-column":"16","trae-inspector-end-line":"77","trae-inspector-end-column":"22","trae-inspector-file-path":"src\\\\pages\\\\HeritageDetail.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"flex items-center bg-white px-3 py-1 rounded-md shadow-sm",children:[P.jsx(pD,{className:"w-4 h-4 mr-2 text-blue-500"}),t]},t))]}),P.jsxs("div",{"trae-inspector-start-line":"81","trae-inspector-start-column":"12","trae-inspector-end-line":"93","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\pages\\\\HeritageDetail.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"prose prose-lg max-w-none text-gray-700",children:[P.jsx("h3",{"trae-inspector-start-line":"82","trae-inspector-start-column":"14","trae-inspector-end-line":"82","trae-inspector-end-column":"105","trae-inspector-file-path":"src\\\\pages\\\\HeritageDetail.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E6%8A%80%E8%89%BA%E4%BB%8B%E7%BB%8D%22%2C%22textStartLine%22%3A%2282%22%2C%22textStartColumn%22%3A%2296%22%2C%22textEndLine%22%3A%2282%22%2C%22textEndColumn%22%3A%22100%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-2xl font-bold mb-4 font-serif border-l-4 border-red-600 pl-4",children:""}),P.jsx("p",{"trae-inspector-start-line":"83","trae-inspector-start-column":"14","trae-inspector-end-line":"85","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\pages\\\\HeritageDetail.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"leading-relaxed mb-8",children:e.fullDesc}),P.jsx("h3",{"trae-inspector-start-line":"87","trae-inspector-start-column":"14","trae-inspector-end-line":"87","trae-inspector-end-column":"105","trae-inspector-file-path":"src\\\\pages\\\\HeritageDetail.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E4%BC%A0%E6%89%BF%E4%BB%B7%E5%80%BC%22%2C%22textStartLine%22%3A%2287%22%2C%22textStartColumn%22%3A%2296%22%2C%22textEndLine%22%3A%2287%22%2C%22textEndColumn%22%3A%22100%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-2xl font-bold mb-4 font-serif border-l-4 border-red-600 pl-4",children:""}),P.jsxs("p",{"trae-inspector-start-line":"88","trae-inspector-start-column":"14","trae-inspector-end-line":"92","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\pages\\\\HeritageDetail.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"leading-relaxed mb-8",children:[e.name,"",e.region,"  "]})]}),P.jsxs("div",{"trae-inspector-start-line":"96","trae-inspector-start-column":"12","trae-inspector-end-line":"103","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\pages\\\\HeritageDetail.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"flex gap-4 mt-8 pt-8 border-t border-gray-200",children:[P.jsx("button",{"trae-inspector-start-line":"97","trae-inspector-start-column":"14","trae-inspector-end-line":"99","trae-inspector-end-column":"23","trae-inspector-file-path":"src\\\\pages\\\\HeritageDetail.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E6%94%B6%E8%97%8F%E9%A1%B9%E7%9B%AE%22%2C%22textStartLine%22%3A%2297%22%2C%22textStartColumn%22%3A%22150%22%2C%22textEndLine%22%3A%2299%22%2C%22textEndColumn%22%3A%2214%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"flex-1 bg-red-600 text-white py-3 rounded-lg font-bold hover:bg-red-700 transition-colors shadow-md hover:shadow-lg",children:""}),P.jsx("button",{"trae-inspector-start-line":"100","trae-inspector-start-column":"14","trae-inspector-end-line":"102","trae-inspector-end-column":"23","trae-inspector-file-path":"src\\\\pages\\\\HeritageDetail.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E5%88%86%E4%BA%AB%E7%BB%99%E5%A5%BD%E5%8F%8B%22%2C%22textStartLine%22%3A%22100%22%2C%22textStartColumn%22%3A%22148%22%2C%22textEndLine%22%3A%22102%22%2C%22textEndColumn%22%3A%2214%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"flex-1 bg-white text-gray-800 border border-gray-300 py-3 rounded-lg font-bold hover:bg-gray-50 transition-colors",children:""})]})]})]})})]}):P.jsxs("div",{"trae-inspector-start-line":"16","trae-inspector-start-column":"6","trae-inspector-end-line":"21","trae-inspector-end-column":"12","trae-inspector-file-path":"src\\\\pages\\\\HeritageDetail.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"min-h-screen flex flex-col items-center justify-center bg-stone-50",children:[P.jsx("h1",{"trae-inspector-start-line":"17","trae-inspector-start-column":"8","trae-inspector-end-line":"17","trae-inspector-end-column":"75","trae-inspector-file-path":"src\\\\pages\\\\HeritageDetail.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E6%9C%AA%E6%89%BE%E5%88%B0%E8%AF%A5%E9%9D%9E%E9%81%97%E9%A1%B9%E7%9B%AE%22%2C%22textStartLine%22%3A%2217%22%2C%22textStartColumn%22%3A%2262%22%2C%22textEndLine%22%3A%2217%22%2C%22textEndColumn%22%3A%2270%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-2xl font-bold text-gray-800 mb-4",children:""}),P.jsxs(mi,{to:"/",className:"text-red-600 hover:underline flex items-center",children:[P.jsx(fg,{className:"mr-2 w-4 h-4"})," "]})]})},Qv=12,Uk=()=>{const[r,e]=V.useState(""),[t,n]=V.useState(""),[i,s]=V.useState(""),[o,l]=V.useState(1),u=V.useMemo(()=>["",...Array.from(new Set(cp.map(y=>y.category)))],[]),h=["",...Object.keys(_B)],p=V.useMemo(()=>cp.filter(y=>{const E=y.name.toLowerCase().includes(r.toLowerCase())||y.desc.toLowerCase().includes(r.toLowerCase()),w=t===""||y.category===t;let C=!0;return i!==""&&(C=Ik(y.region)===i),E&&w&&C}),[r,t,i]),m=Math.ceil(p.length/Qv),v=p.slice((o-1)*Qv,o*Qv);return VC.useEffect(()=>{l(1)},[r,t,i]),P.jsxs("div",{"trae-inspector-start-line":"51","trae-inspector-start-column":"4","trae-inspector-end-line":"239","trae-inspector-end-column":"10","trae-inspector-file-path":"src\\\\pages\\\\HeritageList.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"min-h-screen bg-stone-50 text-stone-900 font-sans",children:[P.jsxs("div",{"trae-inspector-start-line":"53","trae-inspector-start-column":"6","trae-inspector-end-line":"61","trae-inspector-end-column":"12","trae-inspector-file-path":"src\\\\pages\\\\HeritageList.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"bg-red-900 text-white py-16 px-4 text-center relative overflow-hidden",children:[P.jsx("div",{"trae-inspector-start-line":"54","trae-inspector-start-column":"8","trae-inspector-end-line":"54","trae-inspector-end-column":"195","trae-inspector-file-path":"src\\\\pages\\\\HeritageList.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"absolute inset-0 bg-[url('https://images.unsplash.com/photo-1523726491678-bf852e717f63?auto=format&fit=crop&q=80')] opacity-10 bg-cover bg-center mix-blend-overlay"}),P.jsxs("div",{"trae-inspector-start-line":"55","trae-inspector-start-column":"8","trae-inspector-end-line":"60","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\HeritageList.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"relative z-10",children:[P.jsx("h1",{"trae-inspector-start-line":"56","trae-inspector-start-column":"10","trae-inspector-end-line":"56","trae-inspector-end-column":"84","trae-inspector-file-path":"src\\\\pages\\\\HeritageList.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E9%9D%9E%E9%81%97%E7%99%BE%E7%A7%91%22%2C%22textStartLine%22%3A%2256%22%2C%22textStartColumn%22%3A%2275%22%2C%22textEndLine%22%3A%2256%22%2C%22textEndColumn%22%3A%2279%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-5xl font-bold font-serif mb-6 tracking-wide",children:""}),P.jsxs("p",{"trae-inspector-start-line":"57","trae-inspector-start-column":"10","trae-inspector-end-line":"59","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\HeritageList.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-red-100 max-w-2xl mx-auto text-lg",children:[" ",cp.length,"+ "]})]})]}),P.jsxs("div",{"trae-inspector-start-line":"63","trae-inspector-start-column":"6","trae-inspector-end-line":"238","trae-inspector-end-column":"12","trae-inspector-file-path":"src\\\\pages\\\\HeritageList.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"container mx-auto px-4 py-8 max-w-7xl",children:[P.jsxs("div",{"trae-inspector-start-line":"65","trae-inspector-start-column":"8","trae-inspector-end-line":"124","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\HeritageList.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"bg-white p-6 rounded-2xl shadow-sm border border-stone-100 mb-8 sticky top-4 z-20 backdrop-blur-md bg-white/90",children:[P.jsxs("div",{"trae-inspector-start-line":"67","trae-inspector-start-column":"10","trae-inspector-end-line":"76","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\HeritageList.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"relative mb-6",children:[P.jsx("input",{"trae-inspector-start-line":"68","trae-inspector-start-column":"12","trae-inspector-end-line":"74","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\HeritageList.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",type:"text",placeholder:"...",value:r,onChange:y=>e(y.target.value),className:"w-full pl-12 pr-4 py-4 rounded-xl border border-stone-200 bg-stone-50 focus:ring-2 focus:ring-red-500 focus:border-transparent outline-none transition-all text-lg"}),P.jsx(iD,{className:"absolute left-4 top-4.5 text-stone-400 w-6 h-6"})]}),P.jsxs("div",{"trae-inspector-start-line":"79","trae-inspector-start-column":"10","trae-inspector-end-line":"123","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\HeritageList.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"flex flex-col md:flex-row gap-6",children:[P.jsxs("div",{"trae-inspector-start-line":"81","trae-inspector-start-column":"12","trae-inspector-end-line":"100","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\pages\\\\HeritageList.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"flex-1",children:[P.jsxs("div",{"trae-inspector-start-line":"82","trae-inspector-start-column":"14","trae-inspector-end-line":"84","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\pages\\\\HeritageList.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"flex items-center gap-2 mb-3 text-sm font-medium text-stone-500",children:[P.jsx(zR,{className:"w-4 h-4"})," "]}),P.jsx("div",{"trae-inspector-start-line":"85","trae-inspector-start-column":"14","trae-inspector-end-line":"99","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\pages\\\\HeritageList.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"flex flex-wrap gap-2",children:u.map(y=>P.jsx("button",{"trae-inspector-start-line":"87","trae-inspector-start-column":"18","trae-inspector-end-line":"97","trae-inspector-end-column":"27","trae-inspector-file-path":"src\\\\pages\\\\HeritageList.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",onClick:()=>n(y),className:`px-3 py-1.5 rounded-lg text-sm transition-colors mb-2 mr-2 ${t===y?"bg-red-600 text-white shadow-md":"bg-stone-100 text-stone-600 hover:bg-stone-200"}`,children:y},y))})]}),P.jsxs("div",{"trae-inspector-start-line":"103","trae-inspector-start-column":"12","trae-inspector-end-line":"122","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\pages\\\\HeritageList.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"flex-1 md:border-l md:pl-6 border-stone-200",children:[P.jsxs("div",{"trae-inspector-start-line":"104","trae-inspector-start-column":"14","trae-inspector-end-line":"106","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\pages\\\\HeritageList.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"flex items-center gap-2 mb-3 text-sm font-medium text-stone-500",children:[P.jsx(Up,{className:"w-4 h-4"})," "]}),P.jsx("div",{"trae-inspector-start-line":"107","trae-inspector-start-column":"14","trae-inspector-end-line":"121","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\pages\\\\HeritageList.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"flex flex-wrap gap-2",children:h.map(y=>P.jsx("button",{"trae-inspector-start-line":"109","trae-inspector-start-column":"18","trae-inspector-end-line":"119","trae-inspector-end-column":"27","trae-inspector-file-path":"src\\\\pages\\\\HeritageList.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",onClick:()=>s(y),className:`px-3 py-1.5 rounded-lg text-sm transition-colors mb-2 mr-2 ${i===y?"bg-red-600 text-white shadow-md":"bg-stone-100 text-stone-600 hover:bg-stone-200"}`,children:y},y))})]})]})]}),P.jsxs("div",{"trae-inspector-start-line":"127","trae-inspector-start-column":"8","trae-inspector-end-line":"132","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\HeritageList.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"mb-6 flex justify-between items-center text-stone-500",children:[P.jsxs("span",{"trae-inspector-start-line":"128","trae-inspector-start-column":"10","trae-inspector-end-line":"128","trae-inspector-end-column":"53","trae-inspector-file-path":"src\\\\pages\\\\HeritageList.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",children:[" ",p.length," "]}),p.length>0&&P.jsxs("span",{"trae-inspector-start-line":"130","trae-inspector-start-column":"12","trae-inspector-end-line":"130","trae-inspector-end-column":"57","trae-inspector-file-path":"src\\\\pages\\\\HeritageList.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",children:[" ",o," / ",m," "]})]}),P.jsx("div",{"trae-inspector-start-line":"135","trae-inspector-start-column":"8","trae-inspector-end-line":"166","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\HeritageList.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mb-12",children:v.map(y=>P.jsxs(mi,{to:`/heritage/${y.id}`,className:"group block bg-white rounded-xl overflow-hidden shadow-sm hover:shadow-xl transition-all duration-300 hover:-translate-y-1 border border-stone-100",children:[P.jsxs("div",{"trae-inspector-start-line":"138","trae-inspector-start-column":"14","trae-inspector-end-line":"149","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\pages\\\\HeritageList.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"aspect-[4/3] bg-stone-100 relative overflow-hidden",children:[P.jsx("img",{"trae-inspector-start-line":"140","trae-inspector-start-column":"16","trae-inspector-end-line":"145","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\pages\\\\HeritageList.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",src:y.imageUrl,alt:y.name,loading:"lazy",className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"}),P.jsx("div",{"trae-inspector-start-line":"146","trae-inspector-start-column":"16","trae-inspector-end-line":"148","trae-inspector-end-column":"22","trae-inspector-file-path":"src\\\\pages\\\\HeritageList.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"absolute top-2 left-2 bg-black/60 text-white text-xs px-2 py-1 rounded backdrop-blur-sm",children:y.category})]}),P.jsxs("div",{"trae-inspector-start-line":"150","trae-inspector-start-column":"14","trae-inspector-end-line":"163","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\pages\\\\HeritageList.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"p-4",children:[P.jsxs("div",{"trae-inspector-start-line":"151","trae-inspector-start-column":"16","trae-inspector-end-line":"154","trae-inspector-end-column":"22","trae-inspector-file-path":"src\\\\pages\\\\HeritageList.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"flex justify-between items-start mb-2",children:[P.jsx("h3",{"trae-inspector-start-line":"152","trae-inspector-start-column":"18","trae-inspector-end-line":"152","trae-inspector-end-column":"139","trae-inspector-file-path":"src\\\\pages\\\\HeritageList.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"font-bold text-lg text-stone-900 group-hover:text-red-700 transition-colors line-clamp-1",children:y.name}),P.jsx("span",{"trae-inspector-start-line":"153","trae-inspector-start-column":"18","trae-inspector-end-line":"153","trae-inspector-end-column":"134","trae-inspector-file-path":"src\\\\pages\\\\HeritageList.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-xs text-stone-500 bg-stone-100 px-2 py-1 rounded border border-stone-200",children:y.region})]}),P.jsx("p",{"trae-inspector-start-line":"155","trae-inspector-start-column":"16","trae-inspector-end-line":"155","trae-inspector-end-column":"87","trae-inspector-file-path":"src\\\\pages\\\\HeritageList.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-sm text-stone-500 line-clamp-2 mb-3",children:y.desc}),P.jsx("div",{"trae-inspector-start-line":"156","trae-inspector-start-column":"16","trae-inspector-end-line":"162","trae-inspector-end-column":"22","trae-inspector-file-path":"src\\\\pages\\\\HeritageList.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"flex flex-wrap gap-1",children:y.tags.slice(0,3).map((E,w)=>P.jsxs("span",{"trae-inspector-start-line":"158","trae-inspector-start-column":"20","trae-inspector-end-line":"160","trae-inspector-end-column":"27","trae-inspector-file-path":"src\\\\pages\\\\HeritageList.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-xs text-red-600 bg-red-50 px-2 py-0.5 rounded",children:["#",E]},w))})]})]},y.id))}),m>1&&P.jsxs("div",{"trae-inspector-start-line":"170","trae-inspector-start-column":"10","trae-inspector-end-line":"218","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\HeritageList.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"flex justify-center items-center gap-4 py-8",children:[P.jsx("button",{"trae-inspector-start-line":"171","trae-inspector-start-column":"12","trae-inspector-end-line":"177","trae-inspector-end-column":"21","trae-inspector-file-path":"src\\\\pages\\\\HeritageList.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",onClick:()=>l(y=>Math.max(1,y-1)),disabled:o===1,className:"p-2 rounded-full border border-stone-200 hover:bg-stone-100 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:P.jsx(wR,{className:"w-6 h-6"})}),P.jsx("div",{"trae-inspector-start-line":"179","trae-inspector-start-column":"12","trae-inspector-end-line":"209","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\pages\\\\HeritageList.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"flex gap-2",children:Array.from({length:m},(y,E)=>E+1).map(y=>y===1||y===m||y>=o-1&&y<=o+1?P.jsx("button",{"trae-inspector-start-line":"189","trae-inspector-start-column":"20","trae-inspector-end-line":"199","trae-inspector-end-column":"29","trae-inspector-file-path":"src\\\\pages\\\\HeritageList.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",onClick:()=>l(y),className:`w-10 h-10 rounded-full flex items-center justify-center font-medium transition-colors ${o===y?"bg-red-600 text-white shadow-lg transform scale-110":"bg-white text-stone-600 hover:bg-stone-100 border border-stone-200"}`,children:y},y):y===o-2||y===o+2?P.jsx("span",{"trae-inspector-start-line":"205","trae-inspector-start-column":"26","trae-inspector-end-line":"205","trae-inspector-end-column":"123","trae-inspector-file-path":"src\\\\pages\\\\HeritageList.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22...%22%2C%22textStartLine%22%3A%22205%22%2C%22textStartColumn%22%3A%22113%22%2C%22textEndLine%22%3A%22205%22%2C%22textEndColumn%22%3A%22116%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"w-10 h-10 flex items-center justify-center text-stone-400",children:"..."},y):null)}),P.jsx("button",{"trae-inspector-start-line":"211","trae-inspector-start-column":"12","trae-inspector-end-line":"217","trae-inspector-end-column":"21","trae-inspector-file-path":"src\\\\pages\\\\HeritageList.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",onClick:()=>l(y=>Math.min(m,y+1)),disabled:o===m,className:"p-2 rounded-full border border-stone-200 hover:bg-stone-100 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:P.jsx(BR,{className:"w-6 h-6"})})]}),p.length===0&&P.jsxs("div",{"trae-inspector-start-line":"223","trae-inspector-start-column":"10","trae-inspector-end-line":"236","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\HeritageList.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-center py-20 text-stone-500 bg-stone-50 rounded-xl border border-dashed border-stone-300",children:[P.jsx("p",{"trae-inspector-start-line":"224","trae-inspector-start-column":"12","trae-inspector-end-line":"224","trae-inspector-end-column":"53","trae-inspector-file-path":"src\\\\pages\\\\HeritageList.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E6%9C%AA%E6%89%BE%E5%88%B0%E7%9B%B8%E5%85%B3%E9%9D%9E%E9%81%97%E9%A1%B9%E7%9B%AE%22%2C%22textStartLine%22%3A%22224%22%2C%22textStartColumn%22%3A%2240%22%2C%22textEndLine%22%3A%22224%22%2C%22textEndColumn%22%3A%2249%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-xl mb-2",children:""}),P.jsx("p",{"trae-inspector-start-line":"225","trae-inspector-start-column":"12","trae-inspector-end-line":"225","trae-inspector-end-column":"51","trae-inspector-file-path":"src\\\\pages\\\\HeritageList.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E5%B0%9D%E8%AF%95%E6%9B%B4%E6%8D%A2%E6%90%9C%E7%B4%A2%E8%AF%8D%E6%88%96%E7%AD%9B%E9%80%89%E6%9D%A1%E4%BB%B6%22%2C%22textStartLine%22%3A%22225%22%2C%22textStartColumn%22%3A%2235%22%2C%22textEndLine%22%3A%22225%22%2C%22textEndColumn%22%3A%2247%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-sm",children:""}),P.jsx("button",{"trae-inspector-start-line":"226","trae-inspector-start-column":"12","trae-inspector-end-line":"235","trae-inspector-end-column":"21","trae-inspector-file-path":"src\\\\pages\\\\HeritageList.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E6%B8%85%E9%99%A4%E6%89%80%E6%9C%89%E7%AD%9B%E9%80%89%22%2C%22textStartLine%22%3A%22233%22%2C%22textStartColumn%22%3A%2213%22%2C%22textEndLine%22%3A%22235%22%2C%22textEndColumn%22%3A%2212%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",onClick:()=>{e(""),n(""),s("")},className:"mt-6 px-6 py-2 bg-red-600 text-white rounded-full hover:bg-red-700 transition-colors",children:""})]})]})]})},Zv=[{id:"gold",title:"",keyword:"",traits:["","",""],description:"",blessing:"",color:"from-yellow-500 to-amber-700",bgColor:"bg-amber-50",iconColor:"text-amber-600",pattern:"",steps:[{title:"",desc:"",icon:""},{title:"",desc:"",icon:""},{title:"",desc:"",icon:""},{title:"",desc:"",icon:""}]},{id:"gallop",title:"",keyword:"",traits:["","",""],description:"",blessing:"",color:"from-red-600 to-red-800",bgColor:"bg-red-50",iconColor:"text-red-600",pattern:"",steps:[{title:"",desc:"",icon:""},{title:"",desc:"",icon:""},{title:"",desc:"",icon:""},{title:"",desc:"",icon:""}]},{id:"papercut",title:"",keyword:"",traits:["","",""],description:"",blessing:"",color:"from-red-500 to-rose-600",bgColor:"bg-rose-50",iconColor:"text-rose-600",pattern:"",steps:[{title:"",desc:"",icon:""},{title:"",desc:"",icon:""},{title:"",desc:"",icon:""},{title:"",desc:"",icon:""}]},{id:"lantern",title:"",keyword:"",traits:["","",""],description:"",blessing:"",color:"from-orange-500 to-orange-700",bgColor:"bg-orange-50",iconColor:"text-orange-600",pattern:"",steps:[{title:"",desc:"",icon:""},{title:"",desc:"",icon:""},{title:"",desc:"",icon:""},{title:"",desc:"",icon:""}]},{id:"clay",title:"",keyword:"",traits:["","",""],description:"",blessing:"",color:"from-stone-500 to-stone-700",bgColor:"bg-stone-50",iconColor:"text-stone-600",pattern:"",steps:[{title:"",desc:"",icon:""},{title:"",desc:"",icon:""},{title:"",desc:"",icon:""},{title:"",desc:"",icon:""}]},{id:"embroidery",title:"",keyword:"",traits:["","",""],description:"",blessing:"",color:"from-purple-500 to-purple-700",bgColor:"bg-purple-50",iconColor:"text-purple-600",pattern:"",steps:[{title:"",desc:"",icon:""},{title:"",desc:"",icon:""},{title:"",desc:"",icon:""},{title:"",desc:"",icon:""}]},{id:"shadow",title:"",keyword:"",traits:["","",""],description:"",blessing:"",color:"from-indigo-800 to-slate-900",bgColor:"bg-slate-50",iconColor:"text-indigo-800",pattern:"",steps:[{title:"",desc:"",icon:""},{title:"",desc:"",icon:""},{title:"",desc:"",icon:""},{title:"",desc:"",icon:""}]}],Hk=()=>{const r=tc(),{user:e,updateUserGene:t}=Tu(),[n,i]=V.useState(null),[s,o]=V.useState(!0);V.useEffect(()=>{(async()=>{if(e!=null&&e.gene_profile){const y=Zv.find(E=>E.id===e.gene_profile.id);if(y){i(y),o(!1);return}}await new Promise(y=>setTimeout(y,1500));const m=Math.floor(Math.random()*Zv.length),v=Zv[m];i(v),e&&t({id:v.id,generated_at:new Date().toISOString()}),o(!1)})()},[e]);const l=(n==null?void 0:n.steps)||[],u=()=>{r("/co-creation")},h=async()=>{try{const v=await(await fetch("https://images.unsplash.com/photo-1638896068224-b05423f7390c?q=80&w=1000&auto=format&fit=crop")).blob();if("showSaveFilePicker"in window)try{const C=await(await window.showSaveFilePicker({suggestedName:`-${n.title}.jpg`,types:[{description:"JPEG Image",accept:{"image/jpeg":[".jpg"]}}]})).createWritable();await C.write(v),await C.close();return}catch(w){if(w.name==="AbortError")return;console.log("File picker cancelled or failed, falling back to download link")}const y=window.URL.createObjectURL(v),E=document.createElement("a");E.href=y,E.download=`-${n.title}.jpg`,document.body.appendChild(E),E.click(),document.body.removeChild(E),window.URL.revokeObjectURL(y),navigator.share&&/Mobi|Android/i.test(navigator.userAgent)&&navigator.share({title:"",text:` ${Math.floor(Math.random()*1e4)+8888} ${n.title}`,url:window.location.href}).catch(console.error)}catch(p){console.error("Download failed:",p),alert("")}};return s||!n?P.jsxs("div",{"trae-inspector-start-line":"239","trae-inspector-start-column":"6","trae-inspector-end-line":"243","trae-inspector-end-column":"12","trae-inspector-file-path":"src\\\\pages\\\\GeneProfile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"min-h-screen bg-neutral-900 flex flex-col items-center justify-center text-white",children:[P.jsx("div",{"trae-inspector-start-line":"240","trae-inspector-start-column":"8","trae-inspector-end-line":"240","trae-inspector-end-column":"117","trae-inspector-file-path":"src\\\\pages\\\\GeneProfile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"w-20 h-20 border-4 border-red-600 border-t-transparent rounded-full animate-spin mb-8"}),P.jsx("h2",{"trae-inspector-start-line":"241","trae-inspector-start-column":"8","trae-inspector-end-line":"241","trae-inspector-end-column":"75","trae-inspector-file-path":"src\\\\pages\\\\GeneProfile.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E6%AD%A3%E5%9C%A8%E8%A7%A3%E6%9E%90%E6%82%A8%E7%9A%84%E5%B9%B4%E5%91%B3%E5%9F%BA%E5%9B%A0...%22%2C%22textStartLine%22%3A%22241%22%2C%22textStartColumn%22%3A%2257%22%2C%22textEndLine%22%3A%22241%22%2C%22textEndColumn%22%3A%2270%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-2xl font-bold animate-pulse",children:"..."}),P.jsx("p",{"trae-inspector-start-line":"242","trae-inspector-start-column":"8","trae-inspector-end-line":"242","trae-inspector-end-column":"64","trae-inspector-file-path":"src\\\\pages\\\\GeneProfile.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22AI%20%E6%AD%A3%E5%9C%A8%E6%AF%94%E5%AF%B9%20200%2B%20%E9%A1%B9%E9%9D%9E%E9%81%97%E6%95%B0%E6%8D%AE%22%2C%22textStartLine%22%3A%22242%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22242%22%2C%22textEndColumn%22%3A%2260%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-gray-400 mt-2",children:"AI  200+ "})]}):P.jsxs("div",{"trae-inspector-start-line":"248","trae-inspector-start-column":"4","trae-inspector-end-line":"340","trae-inspector-end-column":"10","trae-inspector-file-path":"src\\\\pages\\\\GeneProfile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"min-h-screen bg-stone-100 pb-20",children:[P.jsxs("div",{"trae-inspector-start-line":"250","trae-inspector-start-column":"6","trae-inspector-end-line":"265","trae-inspector-end-column":"12","trae-inspector-file-path":"src\\\\pages\\\\GeneProfile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:`bg-gradient-to-br ${n.color} text-white p-6 pt-12 rounded-b-[3rem] shadow-2xl relative overflow-hidden transition-all duration-1000`,children:[P.jsxs("div",{"trae-inspector-start-line":"251","trae-inspector-start-column":"8","trae-inspector-end-line":"254","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\GeneProfile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"absolute top-0 left-0 w-full h-full opacity-20 pointer-events-none",children:[P.jsx("div",{"trae-inspector-start-line":"252","trae-inspector-start-column":"12","trae-inspector-end-line":"252","trae-inspector-end-column":"127","trae-inspector-file-path":"src\\\\pages\\\\GeneProfile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"absolute top-[-20%] right-[-10%] w-64 h-64 rounded-full bg-white blur-3xl mix-blend-overlay"}),P.jsx("div",{"trae-inspector-start-line":"253","trae-inspector-start-column":"12","trae-inspector-end-line":"253","trae-inspector-end-column":"129","trae-inspector-file-path":"src\\\\pages\\\\GeneProfile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"absolute bottom-[-20%] left-[-10%] w-64 h-64 rounded-full bg-black blur-3xl mix-blend-overlay"})]}),P.jsxs("div",{"trae-inspector-start-line":"256","trae-inspector-start-column":"8","trae-inspector-end-line":"264","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\GeneProfile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"relative z-10 text-center",children:[P.jsxs("div",{"trae-inspector-start-line":"257","trae-inspector-start-column":"12","trae-inspector-end-line":"259","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\pages\\\\GeneProfile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"inline-block p-2 px-4 rounded-full bg-white/20 backdrop-blur-md text-xs font-bold mb-4 border border-white/30",children:["NO. ",Math.floor(Math.random()*1e4)+8888," "]}),P.jsx("h1",{"trae-inspector-start-line":"260","trae-inspector-start-column":"12","trae-inspector-end-line":"260","trae-inspector-end-column":"79","trae-inspector-file-path":"src\\\\pages\\\\GeneProfile.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E6%88%91%E7%9A%84%E5%B9%B4%E5%91%B3%E5%9F%BA%E5%9B%A0%22%2C%22textStartLine%22%3A%22260%22%2C%22textStartColumn%22%3A%2268%22%2C%22textEndLine%22%3A%22260%22%2C%22textEndColumn%22%3A%2274%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-3xl font-bold mb-2 tracking-widest",children:""}),P.jsxs("p",{"trae-inspector-start-line":"261","trae-inspector-start-column":"12","trae-inspector-end-line":"263","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\GeneProfile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-white/90 text-sm opacity-90 flex items-center justify-center gap-2",children:[P.jsx(hD,{className:"w-4 h-4 fill-current"}),"   "]})]})]}),P.jsxs("div",{"trae-inspector-start-line":"267","trae-inspector-start-column":"6","trae-inspector-end-line":"339","trae-inspector-end-column":"12","trae-inspector-file-path":"src\\\\pages\\\\GeneProfile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"container mx-auto px-4 -mt-12 relative z-20",children:[P.jsxs("div",{"trae-inspector-start-line":"269","trae-inspector-start-column":"8","trae-inspector-end-line":"300","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\GeneProfile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"bg-white rounded-2xl shadow-2xl overflow-hidden mb-8 animate-in slide-in-from-bottom-8 duration-700",children:[P.jsxs("div",{"trae-inspector-start-line":"271","trae-inspector-start-column":"10","trae-inspector-end-line":"278","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\GeneProfile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:`h-32 bg-gradient-to-r ${n.color} relative flex items-center justify-center overflow-hidden`,children:[P.jsx("div",{"trae-inspector-start-line":"272","trae-inspector-start-column":"13","trae-inspector-end-line":"274","trae-inspector-end-column":"19","trae-inspector-file-path":"src\\\\pages\\\\GeneProfile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"absolute inset-0 opacity-10 text-[10rem] flex items-center justify-center select-none pointer-events-none",children:n.pattern}),P.jsx("div",{"trae-inspector-start-line":"275","trae-inspector-start-column":"13","trae-inspector-end-line":"277","trae-inspector-end-column":"19","trae-inspector-file-path":"src\\\\pages\\\\GeneProfile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"w-20 h-20 bg-white rounded-full flex items-center justify-center shadow-lg z-10 text-4xl border-4 border-white/50 backdrop-blur-sm",children:n.pattern})]}),P.jsxs("div",{"trae-inspector-start-line":"280","trae-inspector-start-column":"10","trae-inspector-end-line":"299","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\GeneProfile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"p-8 pt-4 text-center",children:[P.jsx("h2",{"trae-inspector-start-line":"281","trae-inspector-start-column":"12","trae-inspector-end-line":"281","trae-inspector-end-column":"105","trae-inspector-file-path":"src\\\\pages\\\\GeneProfile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:`text-3xl font-bold ${n.iconColor} mb-2`,children:n.title}),P.jsx("div",{"trae-inspector-start-line":"282","trae-inspector-start-column":"12","trae-inspector-end-line":"288","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\pages\\\\GeneProfile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"flex justify-center gap-3 mb-6",children:n.traits.map(p=>P.jsx("span",{"trae-inspector-start-line":"284","trae-inspector-start-column":"20","trae-inspector-end-line":"286","trae-inspector-end-column":"27","trae-inspector-file-path":"src\\\\pages\\\\GeneProfile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:`px-3 py-1 ${n.bgColor} ${n.iconColor} text-xs rounded-full font-bold uppercase tracking-wider`,children:p},p))}),P.jsx("p",{"trae-inspector-start-line":"290","trae-inspector-start-column":"12","trae-inspector-end-line":"292","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\GeneProfile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-gray-600 leading-relaxed mb-8 font-serif",children:n.description}),P.jsx("div",{"trae-inspector-start-line":"294","trae-inspector-start-column":"12","trae-inspector-end-line":"298","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\pages\\\\GeneProfile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:`p-4 rounded-xl ${n.bgColor} border border-dashed border-gray-200`,children:P.jsxs("p",{"trae-inspector-start-line":"295","trae-inspector-start-column":"16","trae-inspector-end-line":"297","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\pages\\\\GeneProfile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:`font-bold text-lg ${n.iconColor}`,children:[" ",n.blessing," "]})})]})]}),P.jsxs("div",{"trae-inspector-start-line":"303","trae-inspector-start-column":"8","trae-inspector-end-line":"322","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\GeneProfile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"bg-white rounded-2xl shadow-lg p-6 animate-in slide-in-from-bottom-8 duration-1000 delay-200",children:[P.jsxs("div",{"trae-inspector-start-line":"304","trae-inspector-start-column":"12","trae-inspector-end-line":"307","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\pages\\\\GeneProfile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"flex items-center gap-2 mb-6 border-b border-gray-100 pb-4",children:[P.jsx(Tw,{className:`w-5 h-5 ${n.iconColor}`}),P.jsx("h3",{"trae-inspector-start-line":"306","trae-inspector-start-column":"16","trae-inspector-end-line":"306","trae-inspector-end-column":"75","trae-inspector-file-path":"src\\\\pages\\\\GeneProfile.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E4%B8%93%E5%B1%9E%E6%8A%80%E8%89%BA%E4%BD%93%E9%AA%8C%22%2C%22textStartLine%22%3A%22306%22%2C%22textStartColumn%22%3A%2264%22%2C%22textEndLine%22%3A%22306%22%2C%22textEndColumn%22%3A%2270%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-lg font-bold text-gray-800",children:""})]}),P.jsx("div",{"trae-inspector-start-line":"309","trae-inspector-start-column":"12","trae-inspector-end-line":"321","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\pages\\\\GeneProfile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"space-y-6",children:l.map((p,m)=>P.jsxs("div",{"trae-inspector-start-line":"311","trae-inspector-start-column":"20","trae-inspector-end-line":"319","trae-inspector-end-column":"26","trae-inspector-file-path":"src\\\\pages\\\\GeneProfile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"flex gap-4 group",children:[P.jsx("div",{"trae-inspector-start-line":"312","trae-inspector-start-column":"24","trae-inspector-end-line":"314","trae-inspector-end-column":"30","trae-inspector-file-path":"src\\\\pages\\\\GeneProfile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:`flex-shrink-0 w-10 h-10 ${n.bgColor} rounded-full flex items-center justify-center text-xl shadow-sm border border-white group-hover:scale-110 transition-transform`,children:p.icon}),P.jsxs("div",{"trae-inspector-start-line":"315","trae-inspector-start-column":"24","trae-inspector-end-line":"318","trae-inspector-end-column":"30","trae-inspector-file-path":"src\\\\pages\\\\GeneProfile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",children:[P.jsxs("h4",{"trae-inspector-start-line":"316","trae-inspector-start-column":"28","trae-inspector-end-line":"316","trae-inspector-end-column":"108","trae-inspector-file-path":"src\\\\pages\\\\GeneProfile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"font-bold text-gray-800 mb-1",children:["Step ",m+1,": ",p.title]}),P.jsx("p",{"trae-inspector-start-line":"317","trae-inspector-start-column":"28","trae-inspector-end-line":"317","trae-inspector-end-column":"96","trae-inspector-file-path":"src\\\\pages\\\\GeneProfile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-gray-500 text-sm leading-relaxed",children:p.desc})]})]},m))})]}),P.jsxs("div",{"trae-inspector-start-line":"325","trae-inspector-start-column":"8","trae-inspector-end-line":"338","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\GeneProfile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"mt-8 flex gap-4 mb-8",children:[P.jsxs("button",{"trae-inspector-start-line":"326","trae-inspector-start-column":"12","trae-inspector-end-line":"331","trae-inspector-end-column":"21","trae-inspector-file-path":"src\\\\pages\\\\GeneProfile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",onClick:u,className:"flex-1 py-4 bg-white border border-gray-200 rounded-xl text-gray-700 font-bold flex items-center justify-center gap-2 hover:bg-gray-50 transition-colors shadow-sm",children:[P.jsx(Dw,{className:"w-5 h-5"})," "]}),P.jsxs("button",{"trae-inspector-start-line":"332","trae-inspector-start-column":"12","trae-inspector-end-line":"337","trae-inspector-end-column":"21","trae-inspector-file-path":"src\\\\pages\\\\GeneProfile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",onClick:h,className:`flex-1 py-4 bg-gradient-to-r ${n.color} text-white rounded-xl font-bold flex items-center justify-center gap-2 hover:shadow-lg hover:shadow-red-600/30 transition-all transform hover:-translate-y-1`,children:[P.jsx(kR,{className:"w-5 h-5"})," "]})]})]})]})},zk=["","","","","",""],Gk=["","","","","","",""],jk=()=>{const{user:r}=Tu(),[e,t]=V.useState(!1),[n,i]=V.useState(!1),[s,o]=V.useState(null),[l,u]=V.useState([]),[h,p]=V.useState({title:"",description:"",category:"",region:""}),[m,v]=V.useState(null),[y,E]=V.useState(null);V.useEffect(()=>{w()},[]);const w=async()=>{const{data:S}=await Sr.from("user_contributions").select(`
        *,
        users (
          name,
          avatar_url,
          hometown
        )
      `).eq("status","approved").order("likes",{ascending:!1}).limit(20);S&&u(S)},C=S=>{if(S.target.files&&S.target.files[0]){const R=S.target.files[0];if(R.size>5*1024*1024){o(" 5MB");return}v(R),E(URL.createObjectURL(R)),o(null)}},x=async S=>{if(S.preventDefault(),!!r){if(!h.title||!h.category||!h.region){o("");return}t(!0),o(null);try{let R=[];if(m){const I=m.name.split(".").pop(),O=`${r.id}/${Date.now()}.${I}`,{error:j}=await Sr.storage.from("contributions").upload(O,m);if(j)throw j;const{data:{publicUrl:F}}=Sr.storage.from("contributions").getPublicUrl(O);R.push(F)}const{error:N}=await Sr.from("user_contributions").insert({user_id:r.id,title:h.title,description:h.description,category:h.category,region:h.region,images:R,status:"pending"});if(N)throw N;i(!0),p({title:"",description:"",category:"",region:""}),v(null),E(null)}catch(R){console.error("Submission error:",R),o(R.message||"")}finally{t(!1)}}},M=()=>r?n?P.jsxs("div",{"trae-inspector-start-line":"143","trae-inspector-start-column":"8","trae-inspector-end-line":"155","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"bg-white p-8 rounded-2xl shadow-lg border border-gray-100 text-center mb-12",children:[P.jsx("div",{"trae-inspector-start-line":"144","trae-inspector-start-column":"10","trae-inspector-end-line":"146","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:P.jsx(Rw,{className:"w-8 h-8 text-green-600"})}),P.jsx("h2",{"trae-inspector-start-line":"147","trae-inspector-start-column":"10","trae-inspector-end-line":"147","trae-inspector-end-column":"60","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E6%8F%90%E4%BA%A4%E6%88%90%E5%8A%9F%EF%BC%81%22%2C%22textStartLine%22%3A%22147%22%2C%22textStartColumn%22%3A%2250%22%2C%22textEndLine%22%3A%22147%22%2C%22textEndColumn%22%3A%2255%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-2xl font-bold mb-4",children:""}),P.jsx("p",{"trae-inspector-start-line":"148","trae-inspector-start-column":"10","trae-inspector-end-line":"148","trae-inspector-end-column":"73","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E6%82%A8%E7%9A%84%E5%86%85%E5%AE%B9%E5%B7%B2%E6%8F%90%E4%BA%A4%E5%AE%A1%E6%A0%B8%EF%BC%8C%E5%AE%A1%E6%A0%B8%E9%80%9A%E8%BF%87%E5%90%8E%E5%B0%86%E5%B1%95%E7%A4%BA%E5%9C%A8%E4%B8%8B%E6%96%B9%E5%88%97%E8%A1%A8%E4%B8%AD%E3%80%82%22%2C%22textStartLine%22%3A%22148%22%2C%22textStartColumn%22%3A%2244%22%2C%22textEndLine%22%3A%22148%22%2C%22textEndColumn%22%3A%2269%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-gray-600 mb-8",children:""}),P.jsx("button",{"trae-inspector-start-line":"149","trae-inspector-start-column":"10","trae-inspector-end-line":"154","trae-inspector-end-column":"19","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E7%BB%A7%E7%BB%AD%E4%B8%8A%E4%BC%A0%22%2C%22textStartLine%22%3A%22152%22%2C%22textStartColumn%22%3A%2211%22%2C%22textEndLine%22%3A%22154%22%2C%22textEndColumn%22%3A%2210%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",onClick:()=>i(!1),className:"inline-block px-10 py-3 bg-red-600 text-white rounded-lg font-bold hover:bg-red-700 transition-colors",children:""})]}):P.jsxs("div",{"trae-inspector-start-line":"160","trae-inspector-start-column":"6","trae-inspector-end-line":"276","trae-inspector-end-column":"12","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"bg-white p-6 md:p-8 rounded-2xl shadow-lg border border-gray-100 mb-12",children:[P.jsx("h2",{"trae-inspector-start-line":"161","trae-inspector-start-column":"8","trae-inspector-end-line":"163","trae-inspector-end-column":"13","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E4%B8%8A%E4%BC%A0%E6%82%A8%E7%9A%84%E5%B9%B4%E4%BF%97%E8%AE%B0%E5%BF%86%22%2C%22textStartLine%22%3A%22161%22%2C%22textStartColumn%22%3A%22100%22%2C%22textEndLine%22%3A%22163%22%2C%22textEndColumn%22%3A%228%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-xl font-semibold mb-6 flex items-center border-l-4 border-red-600 pl-4",children:""}),s&&P.jsxs("div",{"trae-inspector-start-line":"166","trae-inspector-start-column":"10","trae-inspector-end-line":"169","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"bg-red-50 text-red-700 p-4 rounded-lg mb-6 flex items-center",children:[P.jsx(MR,{className:"w-5 h-5 mr-2 flex-shrink-0"}),s]}),P.jsxs("form",{"trae-inspector-start-line":"172","trae-inspector-start-column":"8","trae-inspector-end-line":"275","trae-inspector-end-column":"15","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",onSubmit:x,className:"space-y-6",children:[P.jsxs("div",{"trae-inspector-start-line":"173","trae-inspector-start-column":"10","trae-inspector-end-line":"202","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[P.jsxs("div",{"trae-inspector-start-line":"174","trae-inspector-start-column":"12","trae-inspector-end-line":"186","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",children:[P.jsxs("label",{"trae-inspector-start-line":"175","trae-inspector-start-column":"14","trae-inspector-end-line":"177","trae-inspector-end-column":"22","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"block text-sm font-medium text-gray-700 mb-2",children:[" ",P.jsx("span",{"trae-inspector-start-line":"176","trae-inspector-start-column":"21","trae-inspector-end-line":"176","trae-inspector-end-column":"60","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22*%22%2C%22textStartLine%22%3A%22176%22%2C%22textStartColumn%22%3A%2252%22%2C%22textEndLine%22%3A%22176%22%2C%22textEndColumn%22%3A%2253%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-red-500",children:"*"})]}),P.jsx("input",{"trae-inspector-start-line":"178","trae-inspector-start-column":"14","trae-inspector-end-line":"185","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",type:"text",required:!0,className:"w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-red-500 focus:border-transparent outline-none transition-all",placeholder:"",value:h.title,onChange:S=>p({...h,title:S.target.value})})]}),P.jsxs("div",{"trae-inspector-start-line":"188","trae-inspector-start-column":"12","trae-inspector-end-line":"201","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",children:[P.jsxs("label",{"trae-inspector-start-line":"189","trae-inspector-start-column":"14","trae-inspector-end-line":"191","trae-inspector-end-column":"22","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"block text-sm font-medium text-gray-700 mb-2",children:[" ",P.jsx("span",{"trae-inspector-start-line":"190","trae-inspector-start-column":"21","trae-inspector-end-line":"190","trae-inspector-end-column":"60","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22*%22%2C%22textStartLine%22%3A%22190%22%2C%22textStartColumn%22%3A%2252%22%2C%22textEndLine%22%3A%22190%22%2C%22textEndColumn%22%3A%2253%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-red-500",children:"*"})]}),P.jsxs("select",{"trae-inspector-start-line":"192","trae-inspector-start-column":"14","trae-inspector-end-line":"200","trae-inspector-end-column":"23","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",required:!0,className:"w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-red-500 focus:border-transparent outline-none bg-white",value:h.category,onChange:S=>p({...h,category:S.target.value}),children:[P.jsx("option",{"trae-inspector-start-line":"198","trae-inspector-start-column":"16","trae-inspector-end-line":"198","trae-inspector-end-column":"47","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E8%AF%B7%E9%80%89%E6%8B%A9%E7%B1%BB%E5%88%AB%22%2C%22textStartLine%22%3A%22198%22%2C%22textStartColumn%22%3A%2233%22%2C%22textEndLine%22%3A%22198%22%2C%22textEndColumn%22%3A%2238%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",value:"",children:""}),Gk.map(S=>P.jsx("option",{"trae-inspector-start-line":"199","trae-inspector-start-column":"37","trae-inspector-end-line":"199","trae-inspector-end-column":"75","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",value:S,children:S},S))]})]})]}),P.jsxs("div",{"trae-inspector-start-line":"204","trae-inspector-start-column":"10","trae-inspector-end-line":"217","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",children:[P.jsxs("label",{"trae-inspector-start-line":"205","trae-inspector-start-column":"12","trae-inspector-end-line":"207","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"block text-sm font-medium text-gray-700 mb-2",children:[" ",P.jsx("span",{"trae-inspector-start-line":"206","trae-inspector-start-column":"19","trae-inspector-end-line":"206","trae-inspector-end-column":"58","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22*%22%2C%22textStartLine%22%3A%22206%22%2C%22textStartColumn%22%3A%2250%22%2C%22textEndLine%22%3A%22206%22%2C%22textEndColumn%22%3A%2251%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-red-500",children:"*"})]}),P.jsxs("select",{"trae-inspector-start-line":"208","trae-inspector-start-column":"12","trae-inspector-end-line":"216","trae-inspector-end-column":"21","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",required:!0,className:"w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-red-500 focus:border-transparent outline-none bg-white",value:h.region,onChange:S=>p({...h,region:S.target.value}),children:[P.jsx("option",{"trae-inspector-start-line":"214","trae-inspector-start-column":"14","trae-inspector-end-line":"214","trae-inspector-end-column":"45","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E8%AF%B7%E9%80%89%E6%8B%A9%E5%9C%B0%E5%8C%BA%22%2C%22textStartLine%22%3A%22214%22%2C%22textStartColumn%22%3A%2231%22%2C%22textEndLine%22%3A%22214%22%2C%22textEndColumn%22%3A%2236%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",value:"",children:""}),zk.map(S=>P.jsx("option",{"trae-inspector-start-line":"215","trae-inspector-start-column":"32","trae-inspector-end-line":"215","trae-inspector-end-column":"70","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",value:S,children:S},S))]})]}),P.jsxs("div",{"trae-inspector-start-line":"219","trae-inspector-start-column":"10","trae-inspector-end-line":"229","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",children:[P.jsx("label",{"trae-inspector-start-line":"220","trae-inspector-start-column":"12","trae-inspector-end-line":"222","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E8%AF%A6%E7%BB%86%E6%8F%8F%E8%BF%B0%22%2C%22textStartLine%22%3A%22220%22%2C%22textStartColumn%22%3A%2276%22%2C%22textEndLine%22%3A%22222%22%2C%22textEndColumn%22%3A%2212%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"block text-sm font-medium text-gray-700 mb-2",children:""}),P.jsx("textarea",{"trae-inspector-start-line":"223","trae-inspector-start-column":"12","trae-inspector-end-line":"228","trae-inspector-end-column":"24","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"w-full border border-gray-300 rounded-lg p-3 h-32 focus:ring-2 focus:ring-red-500 focus:border-transparent outline-none transition-all resize-none",placeholder:"...",value:h.description,onChange:S=>p({...h,description:S.target.value})})]}),P.jsxs("div",{"trae-inspector-start-line":"231","trae-inspector-start-column":"10","trae-inspector-end-line":"257","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",children:[P.jsx("label",{"trae-inspector-start-line":"232","trae-inspector-start-column":"12","trae-inspector-end-line":"234","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%20(%E6%94%AF%E6%8C%81%20JPG%2C%20PNG)%22%2C%22textStartLine%22%3A%22232%22%2C%22textStartColumn%22%3A%2276%22%2C%22textEndLine%22%3A%22234%22%2C%22textEndColumn%22%3A%2212%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"block text-sm font-medium text-gray-700 mb-2",children:" ( JPG, PNG)"}),P.jsxs("div",{"trae-inspector-start-line":"235","trae-inspector-start-column":"12","trae-inspector-end-line":"256","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"border-2 border-dashed border-gray-300 rounded-xl p-8 text-center hover:border-red-400 transition-colors bg-gray-50 group cursor-pointer relative",children:[P.jsx("input",{"trae-inspector-start-line":"236","trae-inspector-start-column":"14","trae-inspector-end-line":"241","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",type:"file",accept:"image/*",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10",onChange:C}),y?P.jsxs("div",{"trae-inspector-start-line":"243","trae-inspector-start-column":"16","trae-inspector-end-line":"246","trae-inspector-end-column":"22","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"relative z-0",children:[P.jsx("img",{"trae-inspector-start-line":"244","trae-inspector-start-column":"19","trae-inspector-end-line":"244","trae-inspector-end-column":"107","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",src:y,alt:"Preview",className:"max-h-48 mx-auto rounded-lg shadow-sm"}),P.jsx("p",{"trae-inspector-start-line":"245","trae-inspector-start-column":"19","trae-inspector-end-line":"245","trae-inspector-end-column":"71","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E7%82%B9%E5%87%BB%E6%9B%B4%E6%8D%A2%E5%9B%BE%E7%89%87%22%2C%22textStartLine%22%3A%22245%22%2C%22textStartColumn%22%3A%2261%22%2C%22textEndLine%22%3A%22245%22%2C%22textEndColumn%22%3A%2267%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"mt-2 text-sm text-gray-500",children:""})]}):P.jsxs("div",{"trae-inspector-start-line":"248","trae-inspector-start-column":"16","trae-inspector-end-line":"254","trae-inspector-end-column":"22","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"space-y-2",children:[P.jsx("div",{"trae-inspector-start-line":"249","trae-inspector-start-column":"18","trae-inspector-end-line":"251","trae-inspector-end-column":"24","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"w-12 h-12 bg-white rounded-full shadow-sm flex items-center justify-center mx-auto group-hover:scale-110 transition-transform",children:P.jsx(XR,{className:"w-6 h-6 text-gray-400 group-hover:text-red-500"})}),P.jsx("p",{"trae-inspector-start-line":"252","trae-inspector-start-column":"18","trae-inspector-end-line":"252","trae-inspector-end-column":"70","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E7%82%B9%E5%87%BB%E6%88%96%E6%8B%96%E6%8B%BD%E4%B8%8A%E4%BC%A0%22%2C%22textStartLine%22%3A%22252%22%2C%22textStartColumn%22%3A%2259%22%2C%22textEndLine%22%3A%22252%22%2C%22textEndColumn%22%3A%2266%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-gray-600 font-medium",children:""}),P.jsx("p",{"trae-inspector-start-line":"253","trae-inspector-start-column":"18","trae-inspector-end-line":"253","trae-inspector-end-column":"67","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E6%9C%80%E5%A4%A7%E6%94%AF%E6%8C%81%205MB%22%2C%22textStartLine%22%3A%22253%22%2C%22textStartColumn%22%3A%2255%22%2C%22textEndLine%22%3A%22253%22%2C%22textEndColumn%22%3A%2263%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-xs text-gray-400",children:" 5MB"})]})]})]}),P.jsx("div",{"trae-inspector-start-line":"259","trae-inspector-start-column":"10","trae-inspector-end-line":"274","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"pt-4",children:P.jsx("button",{"trae-inspector-start-line":"260","trae-inspector-start-column":"12","trae-inspector-end-line":"273","trae-inspector-end-column":"21","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",type:"submit",disabled:e,className:`w-full bg-red-600 text-white py-3 rounded-lg font-bold hover:bg-red-700 transition-colors shadow-md hover:shadow-lg flex items-center justify-center ${e?"opacity-70 cursor-not-allowed":""}`,children:e?P.jsxs(P.Fragment,{children:[P.jsx(eg,{className:"animate-spin mr-2 w-5 h-5"}),"..."]}):""})})]})]}):P.jsxs("div",{"trae-inspector-start-line":"126","trae-inspector-start-column":"8","trae-inspector-end-line":"137","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"bg-white p-8 rounded-2xl shadow-lg border border-gray-100 text-center mb-12",children:[P.jsx("div",{"trae-inspector-start-line":"127","trae-inspector-start-column":"10","trae-inspector-end-line":"129","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:P.jsx(yD,{className:"w-8 h-8 text-red-600"})}),P.jsx("h2",{"trae-inspector-start-line":"130","trae-inspector-start-column":"10","trae-inspector-end-line":"130","trae-inspector-end-column":"65","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E7%99%BB%E5%BD%95%E5%88%86%E4%BA%AB%E6%82%A8%E7%9A%84%E5%B9%B4%E4%BF%97%E8%AE%B0%E5%BF%86%22%2C%22textStartLine%22%3A%22130%22%2C%22textStartColumn%22%3A%2250%22%2C%22textEndLine%22%3A%22130%22%2C%22textEndColumn%22%3A%2260%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-2xl font-bold mb-4",children:""}),P.jsx("p",{"trae-inspector-start-line":"131","trae-inspector-start-column":"10","trae-inspector-end-line":"133","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E7%99%BB%E5%BD%95%E8%B4%A6%E5%8F%B7%E5%90%8E%EF%BC%8C%E6%82%A8%E5%8F%AF%E4%BB%A5%E4%B8%8A%E4%BC%A0%E8%BA%AB%E8%BE%B9%E7%9A%84%E9%9D%9E%E9%81%97%E6%95%85%E4%BA%8B%EF%BC%8C%E4%B8%8E%E5%85%A8%E5%9B%BD%E7%94%A8%E6%88%B7%E5%85%B1%E5%90%8C%E6%9E%84%E5%BB%BA%E5%B9%B4%E4%BF%97%E5%9F%BA%E5%9B%A0%E5%BA%93%E3%80%82%22%2C%22textStartLine%22%3A%22131%22%2C%22textStartColumn%22%3A%2261%22%2C%22textEndLine%22%3A%22133%22%2C%22textEndColumn%22%3A%2210%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-gray-600 mb-8 max-w-md mx-auto",children:""}),P.jsx(mi,{to:"/login",className:"inline-block px-10 py-3 bg-red-600 text-white rounded-lg font-bold hover:bg-red-700 transition-colors",children:""})]});return P.jsxs("div",{"trae-inspector-start-line":"281","trae-inspector-start-column":"4","trae-inspector-end-line":"313","trae-inspector-end-column":"10","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"container mx-auto px-4 py-8 max-w-5xl",children:[P.jsx("div",{"trae-inspector-start-line":"282","trae-inspector-start-column":"6","trae-inspector-end-line":"287","trae-inspector-end-column":"12","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"flex items-center justify-between mb-8",children:P.jsxs("div",{"trae-inspector-start-line":"283","trae-inspector-start-column":"8","trae-inspector-end-line":"286","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",children:[P.jsx("h1",{"trae-inspector-start-line":"284","trae-inspector-start-column":"10","trae-inspector-end-line":"284","trae-inspector-end-column":"70","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E9%9D%9E%E9%81%97%E5%85%B1%E5%88%9B%E5%B9%B3%E5%8F%B0%22%2C%22textStartLine%22%3A%22284%22%2C%22textStartColumn%22%3A%2259%22%2C%22textEndLine%22%3A%22284%22%2C%22textEndColumn%22%3A%2265%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-3xl font-bold text-gray-900",children:""}),P.jsx("p",{"trae-inspector-start-line":"285","trae-inspector-start-column":"10","trae-inspector-end-line":"285","trae-inspector-end-column":"66","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E5%88%86%E4%BA%AB%E6%82%A8%E8%BA%AB%E8%BE%B9%E7%9A%84%E5%B9%B4%E5%91%B3%EF%BC%8C%E5%85%B1%E5%90%8C%E6%9E%84%E5%BB%BA%E9%9D%9E%E9%81%97%E5%9F%BA%E5%9B%A0%E5%BA%93%22%2C%22textStartLine%22%3A%22285%22%2C%22textStartColumn%22%3A%2244%22%2C%22textEndLine%22%3A%22285%22%2C%22textEndColumn%22%3A%2262%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-gray-500 mt-2",children:""})]})}),M(),P.jsxs("div",{"trae-inspector-start-line":"292","trae-inspector-start-column":"6","trae-inspector-end-line":"312","trae-inspector-end-column":"12","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"mt-16 border-t border-gray-200 pt-10",children:[P.jsxs("div",{"trae-inspector-start-line":"293","trae-inspector-start-column":"8","trae-inspector-end-line":"298","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"flex items-center mb-8",children:[P.jsx("div",{"trae-inspector-start-line":"294","trae-inspector-start-column":"11","trae-inspector-end-line":"296","trae-inspector-end-column":"17","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"p-2 bg-red-100 rounded-full mr-3",children:P.jsx(gD,{className:"w-6 h-6 text-red-600"})}),P.jsx("h2",{"trae-inspector-start-line":"297","trae-inspector-start-column":"10","trae-inspector-end-line":"297","trae-inspector-end-column":"70","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E5%85%B1%E5%88%9B%E7%83%AD%E9%97%A8%E6%8E%92%E8%A1%8C%22%2C%22textStartLine%22%3A%22297%22%2C%22textStartColumn%22%3A%2259%22%2C%22textEndLine%22%3A%22297%22%2C%22textEndColumn%22%3A%2265%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-2xl font-bold text-gray-900",children:""})]}),l.length>0?P.jsx("div",{"trae-inspector-start-line":"301","trae-inspector-start-column":"10","trae-inspector-end-line":"305","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(S=>P.jsx(CB,{contribution:S},S.id))}):P.jsxs("div",{"trae-inspector-start-line":"307","trae-inspector-start-column":"10","trae-inspector-end-line":"310","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-center py-16 bg-gray-50 rounded-xl border border-dashed border-gray-300",children:[P.jsx("p",{"trae-inspector-start-line":"308","trae-inspector-start-column":"13","trae-inspector-end-line":"308","trae-inspector-end-column":"57","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E6%9A%82%E6%97%A0%E7%83%AD%E9%97%A8%E5%86%85%E5%AE%B9%22%2C%22textStartLine%22%3A%22308%22%2C%22textStartColumn%22%3A%2247%22%2C%22textEndLine%22%3A%22308%22%2C%22textEndColumn%22%3A%2253%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-gray-400 mb-2",children:""}),P.jsx("p",{"trae-inspector-start-line":"309","trae-inspector-start-column":"13","trae-inspector-end-line":"309","trae-inspector-end-column":"63","trae-inspector-file-path":"src\\\\pages\\\\CoCreation.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E5%BF%AB%E6%9D%A5%E6%8A%A2%E5%8D%A0%E6%B2%99%E5%8F%91%EF%BC%8C%E5%88%86%E4%BA%AB%E6%82%A8%E7%9A%84%E5%B9%B4%E4%BF%97%E6%95%85%E4%BA%8B%E5%90%A7%EF%BC%81%22%2C%22textStartLine%22%3A%22309%22%2C%22textStartColumn%22%3A%2242%22%2C%22textEndLine%22%3A%22309%22%2C%22textEndColumn%22%3A%2259%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-gray-500",children:""})]})]})]})},Vk=()=>{var m,v;const{user:r,loading:e,signOut:t}=Tu(),n=tc(),[i,s]=V.useState([]),[o,l]=V.useState(!1);V.useEffect(()=>{!e&&!r?n("/login"):r&&u()},[r,e,n]);const u=async()=>{if(r){l(!0);try{const{data:y,error:E}=await Sr.from("user_contributions").select("*").eq("user_id",r.id).order("created_at",{ascending:!1});if(E)throw E;s(y||[])}catch(y){console.error("Error fetching contributions:",y)}finally{l(!1)}}},h=async()=>{await t(),n("/")},p=y=>{switch(y){case"approved":return P.jsxs("span",{"trae-inspector-start-line":"55","trae-inspector-start-column":"15","trae-inspector-end-line":"55","trae-inspector-end-column":"125","trae-inspector-file-path":"src\\\\pages\\\\Profile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-green-600 flex items-center text-xs",children:[P.jsx(Rw,{className:"w-3 h-3 mr-1"})," "]});case"rejected":return P.jsxs("span",{"trae-inspector-start-line":"57","trae-inspector-start-column":"15","trae-inspector-end-line":"57","trae-inspector-end-column":"119","trae-inspector-file-path":"src\\\\pages\\\\Profile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-red-600 flex items-center text-xs",children:[P.jsx(DR,{className:"w-3 h-3 mr-1"})," "]});default:return P.jsxs("span",{"trae-inspector-start-line":"59","trae-inspector-start-column":"15","trae-inspector-end-line":"59","trae-inspector-end-column":"120","trae-inspector-file-path":"src\\\\pages\\\\Profile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-yellow-600 flex items-center text-xs",children:[P.jsx(LR,{className:"w-3 h-3 mr-1"})," "]})}};return e?P.jsx("div",{"trae-inspector-start-line":"64","trae-inspector-start-column":"11","trae-inspector-end-line":"64","trae-inspector-end-column":"86","trae-inspector-file-path":"src\\\\pages\\\\Profile.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E5%8A%A0%E8%BD%BD%E4%B8%AD...%22%2C%22textStartLine%22%3A%2264%22%2C%22textStartColumn%22%3A%2274%22%2C%22textEndLine%22%3A%2264%22%2C%22textEndColumn%22%3A%2280%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"flex items-center justify-center min-h-screen",children:"..."}):r?P.jsxs("div",{"trae-inspector-start-line":"72","trae-inspector-start-column":"4","trae-inspector-end-line":"153","trae-inspector-end-column":"10","trae-inspector-file-path":"src\\\\pages\\\\Profile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"container mx-auto px-4 py-8",children:[P.jsxs("div",{"trae-inspector-start-line":"73","trae-inspector-start-column":"6","trae-inspector-end-line":"81","trae-inspector-end-column":"12","trae-inspector-file-path":"src\\\\pages\\\\Profile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"flex justify-between items-center mb-8",children:[P.jsx("h1",{"trae-inspector-start-line":"74","trae-inspector-start-column":"8","trae-inspector-end-line":"74","trae-inspector-end-column":"76","trae-inspector-file-path":"src\\\\pages\\\\Profile.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E4%B8%AA%E4%BA%BA%E4%B8%AD%E5%BF%83%22%2C%22textStartLine%22%3A%2274%22%2C%22textStartColumn%22%3A%2267%22%2C%22textEndLine%22%3A%2274%22%2C%22textEndColumn%22%3A%2271%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-3xl font-bold font-serif text-red-900",children:""}),P.jsx("button",{"trae-inspector-start-line":"75","trae-inspector-start-column":"8","trae-inspector-end-line":"80","trae-inspector-end-column":"17","trae-inspector-file-path":"src\\\\pages\\\\Profile.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E9%80%80%E5%87%BA%E7%99%BB%E5%BD%95%22%2C%22textStartLine%22%3A%2278%22%2C%22textStartColumn%22%3A%229%22%2C%22textEndLine%22%3A%2280%22%2C%22textEndColumn%22%3A%228%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",onClick:h,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-600 hover:bg-gray-100 transition-colors",children:""})]}),P.jsxs("div",{"trae-inspector-start-line":"83","trae-inspector-start-column":"6","trae-inspector-end-line":"101","trae-inspector-end-column":"12","trae-inspector-file-path":"src\\\\pages\\\\Profile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"bg-white p-8 rounded-lg shadow-md mb-8 flex items-center border-t-4 border-yellow-500 relative overflow-hidden",children:[P.jsx("div",{"trae-inspector-start-line":"85","trae-inspector-start-column":"8","trae-inspector-end-line":"85","trae-inspector-end-column":"127","trae-inspector-file-path":"src\\\\pages\\\\Profile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"absolute right-0 top-0 h-full w-1/3 bg-gradient-to-l from-red-50 to-transparent pointer-events-none"}),P.jsx("div",{"trae-inspector-start-line":"87","trae-inspector-start-column":"8","trae-inspector-end-line":"89","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\Profile.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%F0%9F%91%A4%22%2C%22textStartLine%22%3A%2287%22%2C%22textStartColumn%22%3A%22152%22%2C%22textEndLine%22%3A%2289%22%2C%22textEndColumn%22%3A%228%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"w-20 h-20 bg-red-100 rounded-full mr-6 flex items-center justify-center text-3xl relative z-10 border-2 border-white shadow-sm",children:""}),P.jsxs("div",{"trae-inspector-start-line":"90","trae-inspector-start-column":"8","trae-inspector-end-line":"100","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\Profile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"relative z-10",children:[P.jsx("h2",{"trae-inspector-start-line":"91","trae-inspector-start-column":"10","trae-inspector-end-line":"91","trae-inspector-end-column":"117","trae-inspector-file-path":"src\\\\pages\\\\Profile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-2xl font-bold mb-1 text-gray-900",children:((m=r.user_metadata)==null?void 0:m.name)||r.phone||""}),P.jsxs("p",{"trae-inspector-start-line":"92","trae-inspector-start-column":"10","trae-inspector-end-line":"96","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\Profile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-gray-500 text-sm flex items-center gap-2",children:[P.jsx("span",{"trae-inspector-start-line":"93","trae-inspector-start-column":"12","trae-inspector-end-line":"93","trae-inspector-end-column":"65","trae-inspector-file-path":"src\\\\pages\\\\Profile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",children:((v=r.user_metadata)==null?void 0:v.hometown)||""}),P.jsx("span",{"trae-inspector-start-line":"94","trae-inspector-start-column":"12","trae-inspector-end-line":"94","trae-inspector-end-column":"52","trae-inspector-file-path":"src\\\\pages\\\\Profile.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%7C%22%2C%22textStartLine%22%3A%2294%22%2C%22textStartColumn%22%3A%2244%22%2C%22textEndLine%22%3A%2294%22%2C%22textEndColumn%22%3A%2245%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-gray-300",children:"|"}),P.jsx("span",{"trae-inspector-start-line":"95","trae-inspector-start-column":"12","trae-inspector-end-line":"95","trae-inspector-end-column":"59","trae-inspector-file-path":"src\\\\pages\\\\Profile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"font-mono",children:r.phone})]}),P.jsx("div",{"trae-inspector-start-line":"97","trae-inspector-start-column":"10","trae-inspector-end-line":"99","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\Profile.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%F0%9F%90%B4%20%E9%A9%AC%E5%B9%B4%E5%9F%BA%E5%9B%A0%E6%8E%A2%E7%B4%A2%E8%80%85%22%2C%22textStartLine%22%3A%2297%22%2C%22textStartColumn%22%3A%22118%22%2C%22textEndLine%22%3A%2299%22%2C%22textEndColumn%22%3A%2210%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"mt-2 inline-flex items-center px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full",children:" "})]})]}),P.jsxs("div",{"trae-inspector-start-line":"103","trae-inspector-start-column":"6","trae-inspector-end-line":"152","trae-inspector-end-column":"12","trae-inspector-file-path":"src\\\\pages\\\\Profile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[P.jsxs("div",{"trae-inspector-start-line":"104","trae-inspector-start-column":"8","trae-inspector-end-line":"112","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\Profile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"bg-white p-6 rounded-lg shadow-md border border-gray-100",children:[P.jsxs("h3",{"trae-inspector-start-line":"105","trae-inspector-start-column":"10","trae-inspector-end-line":"107","trae-inspector-end-column":"15","trae-inspector-file-path":"src\\\\pages\\\\Profile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-lg font-bold mb-4 flex items-center text-gray-800",children:[P.jsx("span",{"trae-inspector-start-line":"106","trae-inspector-start-column":"12","trae-inspector-end-line":"106","trae-inspector-end-column":"44","trae-inspector-file-path":"src\\\\pages\\\\Profile.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E2%9D%A4%EF%B8%8F%22%2C%22textStartLine%22%3A%22106%22%2C%22textStartColumn%22%3A%2235%22%2C%22textEndLine%22%3A%22106%22%2C%22textEndColumn%22%3A%2237%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"mr-2",children:""})," "]}),P.jsxs("div",{"trae-inspector-start-line":"108","trae-inspector-start-column":"10","trae-inspector-end-line":"111","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\Profile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-center py-12 text-gray-500 bg-gray-50 rounded-lg border border-dashed border-gray-300",children:[P.jsx("p",{"trae-inspector-start-line":"109","trae-inspector-start-column":"12","trae-inspector-end-line":"109","trae-inspector-end-column":"25","trae-inspector-file-path":"src\\\\pages\\\\Profile.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E6%9A%82%E6%97%A0%E6%94%B6%E8%97%8F%E5%86%85%E5%AE%B9%22%2C%22textStartLine%22%3A%22109%22%2C%22textStartColumn%22%3A%2215%22%2C%22textEndLine%22%3A%22109%22%2C%22textEndColumn%22%3A%2221%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",children:""}),P.jsx("p",{"trae-inspector-start-line":"110","trae-inspector-start-column":"12","trae-inspector-end-line":"110","trae-inspector-end-column":"68","trae-inspector-file-path":"src\\\\pages\\\\Profile.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E5%BF%AB%E5%8E%BB%E6%8E%A2%E7%B4%A2%E9%9D%9E%E9%81%97%E6%8A%80%E8%89%BA%E5%90%A7%EF%BC%81%22%2C%22textStartLine%22%3A%22110%22%2C%22textStartColumn%22%3A%2254%22%2C%22textEndLine%22%3A%22110%22%2C%22textEndColumn%22%3A%2264%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-sm mt-2 text-gray-400",children:""})]})]}),P.jsxs("div",{"trae-inspector-start-line":"114","trae-inspector-start-column":"8","trae-inspector-end-line":"151","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\Profile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"bg-white p-6 rounded-lg shadow-md border border-gray-100",children:[P.jsxs("h3",{"trae-inspector-start-line":"115","trae-inspector-start-column":"10","trae-inspector-end-line":"120","trae-inspector-end-column":"15","trae-inspector-file-path":"src\\\\pages\\\\Profile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-lg font-bold mb-4 flex items-center justify-between text-gray-800",children:[P.jsxs("div",{"trae-inspector-start-line":"116","trae-inspector-start-column":"12","trae-inspector-end-line":"118","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\pages\\\\Profile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"flex items-center",children:[P.jsx("span",{"trae-inspector-start-line":"117","trae-inspector-start-column":"14","trae-inspector-end-line":"117","trae-inspector-end-column":"46","trae-inspector-file-path":"src\\\\pages\\\\Profile.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%F0%9F%93%A4%22%2C%22textStartLine%22%3A%22117%22%2C%22textStartColumn%22%3A%2237%22%2C%22textEndLine%22%3A%22117%22%2C%22textEndColumn%22%3A%2239%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"mr-2",children:""})," "]}),P.jsxs("span",{"trae-inspector-start-line":"119","trae-inspector-start-column":"12","trae-inspector-end-line":"119","trae-inspector-end-column":"130","trae-inspector-file-path":"src\\\\pages\\\\Profile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-xs font-normal text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:[i.length," "]})]}),o?P.jsx("div",{"trae-inspector-start-line":"123","trae-inspector-start-column":"12","trae-inspector-end-line":"123","trae-inspector-end-column":"75","trae-inspector-file-path":"src\\\\pages\\\\Profile.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E5%8A%A0%E8%BD%BD%E8%AE%B0%E5%BD%95%E4%B8%AD...%22%2C%22textStartLine%22%3A%22123%22%2C%22textStartColumn%22%3A%2261%22%2C%22textEndLine%22%3A%22123%22%2C%22textEndColumn%22%3A%2269%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"py-12 text-center text-gray-400",children:"..."}):i.length===0?P.jsxs("div",{"trae-inspector-start-line":"125","trae-inspector-start-column":"12","trae-inspector-end-line":"128","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\pages\\\\Profile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-center py-12 text-gray-500 bg-gray-50 rounded-lg border border-dashed border-gray-300",children:[P.jsx("p",{"trae-inspector-start-line":"126","trae-inspector-start-column":"14","trae-inspector-end-line":"126","trae-inspector-end-column":"27","trae-inspector-file-path":"src\\\\pages\\\\Profile.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E6%9A%82%E6%97%A0%E4%B8%8A%E4%BC%A0%E8%AE%B0%E5%BD%95%22%2C%22textStartLine%22%3A%22126%22%2C%22textStartColumn%22%3A%2217%22%2C%22textEndLine%22%3A%22126%22%2C%22textEndColumn%22%3A%2223%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",children:""}),P.jsx("p",{"trae-inspector-start-line":"127","trae-inspector-start-column":"14","trae-inspector-end-line":"127","trae-inspector-end-column":"70","trae-inspector-file-path":"src\\\\pages\\\\Profile.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E5%88%86%E4%BA%AB%E6%82%A8%E8%BA%AB%E8%BE%B9%E7%9A%84%E5%B9%B4%E4%BF%97%E6%95%85%E4%BA%8B%22%2C%22textStartLine%22%3A%22127%22%2C%22textStartColumn%22%3A%2256%22%2C%22textEndLine%22%3A%22127%22%2C%22textEndColumn%22%3A%2266%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-sm mt-2 text-gray-400",children:""})]}):P.jsx("div",{"trae-inspector-start-line":"130","trae-inspector-start-column":"12","trae-inspector-end-line":"149","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\pages\\\\Profile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"space-y-3 max-h-[400px] overflow-y-auto pr-2",children:i.map(y=>P.jsxs("div",{"trae-inspector-start-line":"132","trae-inspector-start-column":"16","trae-inspector-end-line":"147","trae-inspector-end-column":"22","trae-inspector-file-path":"src\\\\pages\\\\Profile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"flex items-center p-3 bg-gray-50 rounded-lg border border-gray-100 hover:border-red-200 transition-colors",children:[P.jsx("div",{"trae-inspector-start-line":"133","trae-inspector-start-column":"18","trae-inspector-end-line":"139","trae-inspector-end-column":"24","trae-inspector-file-path":"src\\\\pages\\\\Profile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"w-12 h-12 bg-gray-200 rounded-md overflow-hidden flex-shrink-0 mr-3",children:y.images&&y.images.length>0?P.jsx("img",{"trae-inspector-start-line":"135","trae-inspector-start-column":"22","trae-inspector-end-line":"135","trae-inspector-end-column":"106","trae-inspector-file-path":"src\\\\pages\\\\Profile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",src:y.images[0],alt:y.title,className:"w-full h-full object-cover"}):P.jsx("div",{"trae-inspector-start-line":"137","trae-inspector-start-column":"22","trae-inspector-end-line":"137","trae-inspector-end-column":"116","trae-inspector-file-path":"src\\\\pages\\\\Profile.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E6%97%A0%E5%9B%BE%22%2C%22textStartLine%22%3A%22137%22%2C%22textStartColumn%22%3A%22108%22%2C%22textEndLine%22%3A%22137%22%2C%22textEndColumn%22%3A%22110%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"w-full h-full flex items-center justify-center text-gray-400 text-xs",children:""})}),P.jsxs("div",{"trae-inspector-start-line":"140","trae-inspector-start-column":"18","trae-inspector-end-line":"143","trae-inspector-end-column":"24","trae-inspector-file-path":"src\\\\pages\\\\Profile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"flex-1 min-w-0",children:[P.jsx("h4",{"trae-inspector-start-line":"141","trae-inspector-start-column":"20","trae-inspector-end-line":"141","trae-inspector-end-column":"88","trae-inspector-file-path":"src\\\\pages\\\\Profile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"font-medium text-gray-900 truncate",children:y.title}),P.jsx("p",{"trae-inspector-start-line":"142","trae-inspector-start-column":"20","trae-inspector-end-line":"142","trae-inspector-end-column":"109","trae-inspector-file-path":"src\\\\pages\\\\Profile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-xs text-gray-500",children:new Date(y.created_at).toLocaleDateString()})]}),P.jsx("div",{"trae-inspector-start-line":"144","trae-inspector-start-column":"18","trae-inspector-end-line":"146","trae-inspector-end-column":"24","trae-inspector-file-path":"src\\\\pages\\\\Profile.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"flex-shrink-0 ml-2",children:p(y.status)})]},y.id))})]})]})]}):null},Wk=()=>{const[r,e]=V.useState({name:"",hometown:"",phone:""}),[t,n]=V.useState(!1),[i,s]=V.useState(""),{simpleLogin:o}=Tu(),l=tc(),u=async()=>{const{name:h,hometown:p,phone:m}=r;if(!h||!p||!m)return s("");if(!/^1[3-9]\d{9}$/.test(m))return s("");n(!0),s("");try{const{error:v}=await o(m,h,p);if(v)throw v;l("/profile")}catch(v){console.error(v),s(v.message||"")}finally{n(!1)}};return P.jsx("div",{"trae-inspector-start-line":"44","trae-inspector-start-column":"4","trae-inspector-end-line":"134","trae-inspector-end-column":"10","trae-inspector-file-path":"src\\\\pages\\\\Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"min-h-screen flex items-center justify-center bg-stone-50 bg-[url('https://images.unsplash.com/photo-1548625361-1c5c52c67923?auto=format&fit=crop&q=80')] bg-cover bg-center bg-no-repeat bg-blend-overlay bg-white/90",children:P.jsxs("div",{"trae-inspector-start-line":"45","trae-inspector-start-column":"6","trae-inspector-end-line":"133","trae-inspector-end-column":"12","trae-inspector-file-path":"src\\\\pages\\\\Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"bg-white p-8 rounded-xl shadow-2xl w-full max-w-md border-t-8 border-red-600 relative overflow-hidden",children:[P.jsx("div",{"trae-inspector-start-line":"47","trae-inspector-start-column":"8","trae-inspector-end-line":"51","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"absolute top-0 right-0 p-4 opacity-10 pointer-events-none",children:P.jsx("svg",{"trae-inspector-start-line":"48","trae-inspector-start-column":"10","trae-inspector-end-line":"50","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",width:"100",height:"100",viewBox:"0 0 100 100",children:P.jsx("text",{"trae-inspector-start-line":"49","trae-inspector-start-column":"13","trae-inspector-end-line":"49","trae-inspector-end-column":"102","trae-inspector-file-path":"src\\\\pages\\\\Login.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E9%A9%AC%22%2C%22textStartLine%22%3A%2249%22%2C%22textStartColumn%22%3A%2294%22%2C%22textEndLine%22%3A%2249%22%2C%22textEndColumn%22%3A%2295%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",x:"50%",y:"50%",textAnchor:"middle",dy:".3em",fontSize:"80",fill:"#DC2626",children:""})})}),P.jsx("h1",{"trae-inspector-start-line":"53","trae-inspector-start-column":"8","trae-inspector-end-line":"53","trae-inspector-end-column":"109","trae-inspector-file-path":"src\\\\pages\\\\Login.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E5%B9%B4%E5%91%B3%E5%9F%BA%E5%9B%A0%E5%BA%93%22%2C%22textStartLine%22%3A%2253%22%2C%22textStartColumn%22%3A%2299%22%2C%22textEndLine%22%3A%2253%22%2C%22textEndColumn%22%3A%22104%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-3xl font-bold text-center mb-2 text-red-900 font-serif tracking-wider",children:""}),P.jsx("p",{"trae-inspector-start-line":"54","trae-inspector-start-column":"8","trae-inspector-end-line":"54","trae-inspector-end-column":"75","trae-inspector-file-path":"src\\\\pages\\\\Login.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E8%BE%93%E5%85%A5%E4%BF%A1%E6%81%AF%EF%BC%8C%E7%AB%8B%E5%8D%B3%E5%BC%80%E5%90%AF%E6%82%A8%E7%9A%84%E6%96%87%E5%8C%96%E5%AF%BB%E6%A0%B9%E4%B9%8B%E6%97%85%22%2C%22textStartLine%22%3A%2254%22%2C%22textStartColumn%22%3A%2254%22%2C%22textEndLine%22%3A%2254%22%2C%22textEndColumn%22%3A%2271%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-center text-gray-500 mb-8",children:""}),i&&P.jsxs("div",{"trae-inspector-start-line":"57","trae-inspector-start-column":"10","trae-inspector-end-line":"59","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"bg-red-50 text-red-600 p-3 rounded-lg mb-6 text-sm border border-red-100 flex items-center",children:[P.jsx("span",{"trae-inspector-start-line":"58","trae-inspector-start-column":"12","trae-inspector-end-line":"58","trae-inspector-end-column":"44","trae-inspector-file-path":"src\\\\pages\\\\Login.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E2%9A%A0%EF%B8%8F%22%2C%22textStartLine%22%3A%2258%22%2C%22textStartColumn%22%3A%2235%22%2C%22textEndLine%22%3A%2258%22%2C%22textEndColumn%22%3A%2237%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"mr-2",children:""})," ",i]}),P.jsxs("form",{"trae-inspector-start-line":"62","trae-inspector-start-column":"8","trae-inspector-end-line":"120","trae-inspector-end-column":"15","trae-inspector-file-path":"src\\\\pages\\\\Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"space-y-5",children:[P.jsxs("div",{"trae-inspector-start-line":"63","trae-inspector-start-column":"10","trae-inspector-end-line":"77","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",children:[P.jsx("label",{"trae-inspector-start-line":"64","trae-inspector-start-column":"12","trae-inspector-end-line":"64","trae-inspector-end-column":"86","trae-inspector-file-path":"src\\\\pages\\\\Login.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E6%98%B5%E7%A7%B0%22%2C%22textStartLine%22%3A%2264%22%2C%22textStartColumn%22%3A%2276%22%2C%22textEndLine%22%3A%2264%22%2C%22textEndColumn%22%3A%2278%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"block text-sm font-medium text-gray-700 mb-1",children:""}),P.jsxs("div",{"trae-inspector-start-line":"65","trae-inspector-start-column":"12","trae-inspector-end-line":"76","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\pages\\\\Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"relative",children:[P.jsx("div",{"trae-inspector-start-line":"66","trae-inspector-start-column":"14","trae-inspector-end-line":"68","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\pages\\\\Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:P.jsx(Mg,{className:"h-5 w-5 text-gray-400"})}),P.jsx("input",{"trae-inspector-start-line":"69","trae-inspector-start-column":"14","trae-inspector-end-line":"75","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",type:"text",value:r.name,onChange:h=>e({...r,name:h.target.value}),className:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent outline-none transition-all",placeholder:""})]})]}),P.jsxs("div",{"trae-inspector-start-line":"79","trae-inspector-start-column":"10","trae-inspector-end-line":"93","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",children:[P.jsx("label",{"trae-inspector-start-line":"80","trae-inspector-start-column":"12","trae-inspector-end-line":"80","trae-inspector-end-column":"88","trae-inspector-file-path":"src\\\\pages\\\\Login.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E5%AE%B6%E4%B9%A1%E5%9F%8E%E5%B8%82%22%2C%22textStartLine%22%3A%2280%22%2C%22textStartColumn%22%3A%2276%22%2C%22textEndLine%22%3A%2280%22%2C%22textEndColumn%22%3A%2280%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"block text-sm font-medium text-gray-700 mb-1",children:""}),P.jsxs("div",{"trae-inspector-start-line":"81","trae-inspector-start-column":"12","trae-inspector-end-line":"92","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\pages\\\\Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"relative",children:[P.jsx("div",{"trae-inspector-start-line":"82","trae-inspector-start-column":"14","trae-inspector-end-line":"84","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\pages\\\\Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:P.jsx(Up,{className:"h-5 w-5 text-gray-400"})}),P.jsx("input",{"trae-inspector-start-line":"85","trae-inspector-start-column":"14","trae-inspector-end-line":"91","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",type:"text",value:r.hometown,onChange:h=>e({...r,hometown:h.target.value}),className:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent outline-none transition-all",placeholder:""})]})]}),P.jsxs("div",{"trae-inspector-start-line":"95","trae-inspector-start-column":"10","trae-inspector-end-line":"110","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",children:[P.jsx("label",{"trae-inspector-start-line":"96","trae-inspector-start-column":"12","trae-inspector-end-line":"96","trae-inspector-end-column":"88","trae-inspector-file-path":"src\\\\pages\\\\Login.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E6%89%8B%E6%9C%BA%E5%8F%B7%E7%A0%81%22%2C%22textStartLine%22%3A%2296%22%2C%22textStartColumn%22%3A%2276%22%2C%22textEndLine%22%3A%2296%22%2C%22textEndColumn%22%3A%2280%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"block text-sm font-medium text-gray-700 mb-1",children:""}),P.jsxs("div",{"trae-inspector-start-line":"97","trae-inspector-start-column":"12","trae-inspector-end-line":"109","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\pages\\\\Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"relative",children:[P.jsx("div",{"trae-inspector-start-line":"98","trae-inspector-start-column":"14","trae-inspector-end-line":"100","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\pages\\\\Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:P.jsx(eD,{className:"h-5 w-5 text-gray-400"})}),P.jsx("input",{"trae-inspector-start-line":"101","trae-inspector-start-column":"14","trae-inspector-end-line":"108","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",type:"tel",value:r.phone,onChange:h=>e({...r,phone:h.target.value}),className:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent outline-none transition-all",placeholder:"",maxLength:11})]})]}),P.jsx("button",{"trae-inspector-start-line":"112","trae-inspector-start-column":"10","trae-inspector-end-line":"119","trae-inspector-end-column":"19","trae-inspector-file-path":"src\\\\pages\\\\Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",type:"button",onClick:u,disabled:t,className:"w-full bg-red-600 text-white py-3.5 rounded-lg hover:bg-red-700 transition-all font-bold shadow-lg disabled:opacity-70 disabled:cursor-not-allowed mt-2 transform hover:-translate-y-0.5",children:t?"...":""})]}),P.jsxs("div",{"trae-inspector-start-line":"122","trae-inspector-start-column":"8","trae-inspector-end-line":"132","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\Login.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"mt-8 pt-6 border-t border-gray-100 flex items-center justify-between",children:[P.jsxs(mi,{to:"/",className:"text-sm text-gray-500 hover:text-red-700 inline-flex items-center transition-colors",children:["",P.jsx("span",{"trae-inspector-start-line":"125","trae-inspector-start-column":"12","trae-inspector-end-line":"125","trae-inspector-end-column":"51","trae-inspector-file-path":"src\\\\pages\\\\Login.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E2%86%92%22%2C%22textStartLine%22%3A%22125%22%2C%22textStartColumn%22%3A%2243%22%2C%22textEndLine%22%3A%22125%22%2C%22textEndColumn%22%3A%2244%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"ml-1 text-lg",children:""})]}),P.jsxs(mi,{to:"/admin/login",className:"text-xs text-gray-400 hover:text-gray-600 flex items-center transition-colors",children:[P.jsx(Pw,{className:"w-3 h-3 mr-1"}),""]})]})]})})},Jk=()=>{var p;const{user:r}=Tu(),e=tc(),[t,n]=V.useState([]),[i,s]=V.useState(!0),[o,l]=V.useState(null);V.useEffect(()=>{if(!r){e("/login");return}r.role!=="admin"&&r.phone,u()},[r,e]);const u=async()=>{try{s(!0);const{data:m,error:v}=await Sr.from("user_contributions").select(`
          *,
          user:users!user_contributions_user_id_fkey ( name, phone )
        `).eq("status","pending").order("created_at",{ascending:!1});if(v){console.warn("Join fetch failed, falling back to simple fetch",v);const{data:y,error:E}=await Sr.from("user_contributions").select("*").eq("status","pending").order("created_at",{ascending:!1});if(E)throw E;if(y&&y.length>0){const w=[...new Set(y.map(S=>S.user_id))],{data:C}=await Sr.from("users").select("id, name, phone").in("id",w),x=new Map(C==null?void 0:C.map(S=>[S.id,S])),M=y.map(S=>({...S,user:x.get(S.user_id)}));n(M)}else n(y||[]);return}n(m||[])}catch(m){console.error("Error fetching contributions:",m)}finally{s(!1)}},h=async(m,v)=>{try{l(m);const{error:y}=await Sr.from("user_contributions").update({status:v,reviewer_id:r==null?void 0:r.id,reviewed_at:new Date().toISOString()}).eq("id",m);if(y)throw y;n(E=>E.filter(w=>w.id!==m))}catch(y){console.error("Error updating status:",y),alert("")}finally{l(null)}};return r?P.jsx("div",{"trae-inspector-start-line":"122","trae-inspector-start-column":"4","trae-inspector-end-line":"220","trae-inspector-end-column":"10","trae-inspector-file-path":"src\\\\pages\\\\AdminDashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"min-h-screen bg-stone-50 p-8",children:P.jsxs("div",{"trae-inspector-start-line":"123","trae-inspector-start-column":"6","trae-inspector-end-line":"219","trae-inspector-end-column":"12","trae-inspector-file-path":"src\\\\pages\\\\AdminDashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"max-w-6xl mx-auto",children:[P.jsxs("div",{"trae-inspector-start-line":"124","trae-inspector-start-column":"8","trae-inspector-end-line":"134","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\AdminDashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"flex items-center justify-between mb-8",children:[P.jsxs("div",{"trae-inspector-start-line":"125","trae-inspector-start-column":"10","trae-inspector-end-line":"130","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\AdminDashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"flex items-center gap-4",children:[P.jsx(mi,{to:"/",className:"p-2 bg-white rounded-full shadow-sm hover:shadow-md transition-all",children:P.jsx(fg,{className:"w-5 h-5 text-gray-600"})}),P.jsx("h1",{"trae-inspector-start-line":"129","trae-inspector-start-column":"12","trae-inspector-end-line":"129","trae-inspector-end-column":"74","trae-inspector-file-path":"src\\\\pages\\\\AdminDashboard.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E9%9D%9E%E9%81%97%E5%86%85%E5%AE%B9%E5%AE%A1%E6%A0%B8%E5%90%8E%E5%8F%B0%22%2C%22textStartLine%22%3A%22129%22%2C%22textStartColumn%22%3A%2261%22%2C%22textEndLine%22%3A%22129%22%2C%22textEndColumn%22%3A%2269%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-2xl font-bold text-gray-900",children:""})]}),P.jsxs("div",{"trae-inspector-start-line":"131","trae-inspector-start-column":"10","trae-inspector-end-line":"133","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\AdminDashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-sm text-gray-500",children:[": ",((p=r.user_metadata)==null?void 0:p.name)||r.phone]})]}),i?P.jsx("div",{"trae-inspector-start-line":"137","trae-inspector-start-column":"10","trae-inspector-end-line":"139","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\AdminDashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"flex justify-center py-20",children:P.jsx(eg,{className:"w-8 h-8 animate-spin text-red-600"})}):t.length===0?P.jsxs("div",{"trae-inspector-start-line":"141","trae-inspector-start-column":"10","trae-inspector-end-line":"147","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\AdminDashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"bg-white rounded-xl shadow-sm p-12 text-center",children:[P.jsx("div",{"trae-inspector-start-line":"142","trae-inspector-start-column":"12","trae-inspector-end-line":"144","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\pages\\\\AdminDashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:P.jsx(Nx,{className:"w-8 h-8 text-green-600"})}),P.jsx("h3",{"trae-inspector-start-line":"145","trae-inspector-start-column":"12","trae-inspector-end-line":"145","trae-inspector-end-column":"77","trae-inspector-file-path":"src\\\\pages\\\\AdminDashboard.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E6%9A%82%E6%97%A0%E5%BE%85%E5%AE%A1%E6%A0%B8%E5%86%85%E5%AE%B9%22%2C%22textStartLine%22%3A%22145%22%2C%22textStartColumn%22%3A%2265%22%2C%22textEndLine%22%3A%22145%22%2C%22textEndColumn%22%3A%2272%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-xl font-bold text-gray-900 mb-2",children:""}),P.jsx("p",{"trae-inspector-start-line":"146","trae-inspector-start-column":"12","trae-inspector-end-line":"146","trae-inspector-end-column":"59","trae-inspector-file-path":"src\\\\pages\\\\AdminDashboard.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E6%89%80%E6%9C%89%E6%8F%90%E4%BA%A4%E7%9A%84%E5%86%85%E5%AE%B9%E9%83%BD%E5%B7%B2%E5%A4%84%E7%90%86%E5%AE%8C%E6%AF%95%E3%80%82%22%2C%22textStartLine%22%3A%22146%22%2C%22textStartColumn%22%3A%2241%22%2C%22textEndLine%22%3A%22146%22%2C%22textEndColumn%22%3A%2255%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-gray-500",children:""})]}):P.jsx("div",{"trae-inspector-start-line":"149","trae-inspector-start-column":"10","trae-inspector-end-line":"217","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\AdminDashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"grid gap-6",children:t.map(m=>{var v,y;return P.jsxs("div",{"trae-inspector-start-line":"151","trae-inspector-start-column":"14","trae-inspector-end-line":"215","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\pages\\\\AdminDashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden flex flex-col md:flex-row",children:[P.jsxs("div",{"trae-inspector-start-line":"152","trae-inspector-start-column":"16","trae-inspector-end-line":"174","trae-inspector-end-column":"22","trae-inspector-file-path":"src\\\\pages\\\\AdminDashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"w-full md:w-64 h-48 md:h-auto bg-gray-100 flex-shrink-0 relative group",children:[m.images&&m.images.length>0?P.jsx("img",{"trae-inspector-start-line":"154","trae-inspector-start-column":"20","trae-inspector-end-line":"158","trae-inspector-end-column":"22","trae-inspector-file-path":"src\\\\pages\\\\AdminDashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",src:m.images[0],alt:m.title,className:"w-full h-full object-cover"}):P.jsx("div",{"trae-inspector-start-line":"160","trae-inspector-start-column":"20","trae-inspector-end-line":"162","trae-inspector-end-column":"26","trae-inspector-file-path":"src\\\\pages\\\\AdminDashboard.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E6%97%A0%E5%9B%BE%E7%89%87%22%2C%22textStartLine%22%3A%22160%22%2C%22textStartColumn%22%3A%22106%22%2C%22textEndLine%22%3A%22162%22%2C%22textEndColumn%22%3A%2220%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"w-full h-full flex items-center justify-center text-gray-400 text-sm",children:""}),m.images&&m.images.length>0&&P.jsxs("a",{"trae-inspector-start-line":"165","trae-inspector-start-column":"21","trae-inspector-end-line":"172","trae-inspector-end-column":"25","trae-inspector-file-path":"src\\\\pages\\\\AdminDashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",href:m.images[0],target:"_blank",rel:"noopener noreferrer",className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity text-white",children:[P.jsx(UR,{className:"w-6 h-6 mr-2"})," "]})]}),P.jsxs("div",{"trae-inspector-start-line":"176","trae-inspector-start-column":"16","trae-inspector-end-line":"214","trae-inspector-end-column":"22","trae-inspector-file-path":"src\\\\pages\\\\AdminDashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"p-6 flex-1 flex flex-col justify-between",children:[P.jsxs("div",{"trae-inspector-start-line":"177","trae-inspector-start-column":"18","trae-inspector-end-line":"196","trae-inspector-end-column":"24","trae-inspector-file-path":"src\\\\pages\\\\AdminDashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",children:[P.jsxs("div",{"trae-inspector-start-line":"178","trae-inspector-start-column":"20","trae-inspector-end-line":"186","trae-inspector-end-column":"26","trae-inspector-file-path":"src\\\\pages\\\\AdminDashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"flex justify-between items-start mb-2",children:[P.jsxs("div",{"trae-inspector-start-line":"179","trae-inspector-start-column":"22","trae-inspector-end-line":"182","trae-inspector-end-column":"28","trae-inspector-file-path":"src\\\\pages\\\\AdminDashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"flex gap-2 mb-2",children:[P.jsx("span",{"trae-inspector-start-line":"180","trae-inspector-start-column":"24","trae-inspector-end-line":"180","trae-inspector-end-column":"118","trae-inspector-file-path":"src\\\\pages\\\\AdminDashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"px-2 py-1 bg-blue-50 text-blue-700 text-xs rounded-md",children:m.category}),P.jsx("span",{"trae-inspector-start-line":"181","trae-inspector-start-column":"24","trae-inspector-end-line":"181","trae-inspector-end-column":"120","trae-inspector-file-path":"src\\\\pages\\\\AdminDashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"px-2 py-1 bg-orange-50 text-orange-700 text-xs rounded-md",children:m.region})]}),P.jsx("span",{"trae-inspector-start-line":"183","trae-inspector-start-column":"22","trae-inspector-end-line":"185","trae-inspector-end-column":"29","trae-inspector-file-path":"src\\\\pages\\\\AdminDashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-xs text-gray-400",children:new Date(m.created_at).toLocaleString()})]}),P.jsx("h3",{"trae-inspector-start-line":"188","trae-inspector-start-column":"20","trae-inspector-end-line":"188","trae-inspector-end-column":"90","trae-inspector-file-path":"src\\\\pages\\\\AdminDashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-lg font-bold text-gray-900 mb-2",children:m.title}),P.jsx("p",{"trae-inspector-start-line":"189","trae-inspector-start-column":"20","trae-inspector-end-line":"189","trae-inspector-end-column":"97","trae-inspector-file-path":"src\\\\pages\\\\AdminDashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-gray-600 text-sm line-clamp-3 mb-4",children:m.description}),P.jsxs("div",{"trae-inspector-start-line":"191","trae-inspector-start-column":"20","trae-inspector-end-line":"195","trae-inspector-end-column":"26","trae-inspector-file-path":"src\\\\pages\\\\AdminDashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"flex items-center text-xs text-gray-500 mt-2",children:[P.jsx("span",{"trae-inspector-start-line":"192","trae-inspector-start-column":"22","trae-inspector-end-line":"192","trae-inspector-end-column":"68","trae-inspector-file-path":"src\\\\pages\\\\AdminDashboard.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E6%8F%90%E4%BA%A4%E4%BA%BA%3A%22%2C%22textStartLine%22%3A%22192%22%2C%22textStartColumn%22%3A%2257%22%2C%22textEndLine%22%3A%22192%22%2C%22textEndColumn%22%3A%2261%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"font-medium mr-2",children:":"}),((v=m.user)==null?void 0:v.name)||""," (",((y=m.user)==null?void 0:y.phone)||m.user_id,")"]})]}),P.jsxs("div",{"trae-inspector-start-line":"198","trae-inspector-start-column":"18","trae-inspector-end-line":"213","trae-inspector-end-column":"24","trae-inspector-file-path":"src\\\\pages\\\\AdminDashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"flex gap-3 mt-6 pt-4 border-t border-gray-50",children:[P.jsx("button",{"trae-inspector-start-line":"199","trae-inspector-start-column":"20","trae-inspector-end-line":"205","trae-inspector-end-column":"29","trae-inspector-file-path":"src\\\\pages\\\\AdminDashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",onClick:()=>h(m.id,"approved"),disabled:o===m.id,className:"flex-1 bg-green-600 text-white py-2 rounded-lg text-sm font-bold hover:bg-green-700 transition-colors flex items-center justify-center disabled:opacity-50",children:o===m.id?P.jsx(eg,{className:"animate-spin w-4 h-4"}):P.jsxs(P.Fragment,{children:[P.jsx(Nx,{className:"w-4 h-4 mr-1"})," "]})}),P.jsx("button",{"trae-inspector-start-line":"206","trae-inspector-start-column":"20","trae-inspector-end-line":"212","trae-inspector-end-column":"29","trae-inspector-file-path":"src\\\\pages\\\\AdminDashboard.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",onClick:()=>h(m.id,"rejected"),disabled:o===m.id,className:"flex-1 bg-red-100 text-red-700 py-2 rounded-lg text-sm font-bold hover:bg-red-200 transition-colors flex items-center justify-center disabled:opacity-50",children:o===m.id?P.jsx(eg,{className:"animate-spin w-4 h-4"}):P.jsxs(P.Fragment,{children:[P.jsx(Lw,{className:"w-4 h-4 mr-1"})," "]})})]})]})]},m.id)})})]})}):null},Xk=[{username:"admin01",password:"password123",name:""},{username:"reviewer_bj",password:"password123",name:""},{username:"reviewer_sh",password:"password123",name:""}],Kk=()=>{const[r,e]=V.useState({username:"",password:""}),[t,n]=V.useState(!1),[i,s]=V.useState(""),{simpleLogin:o}=Tu(),l=tc(),u=async h=>{h.preventDefault();const{username:p,password:m}=r;if(!p||!m)return s("");n(!0),s(""),await new Promise(y=>setTimeout(y,800));const v=Xk.find(y=>y.username===p&&y.password===m);if(v){`${Math.random().toString().slice(2,10)}`;try{await o("13800138000",v.name,"Admin HQ"),l("/admin")}catch{s("")}}else s("");n(!1)};return P.jsx("div",{"trae-inspector-start-line":"69","trae-inspector-start-column":"4","trae-inspector-end-line":"136","trae-inspector-end-column":"10","trae-inspector-file-path":"src\\\\pages\\\\AdminLogin.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"min-h-screen flex items-center justify-center bg-stone-900 text-stone-100",children:P.jsxs("div",{"trae-inspector-start-line":"70","trae-inspector-start-column":"6","trae-inspector-end-line":"135","trae-inspector-end-column":"12","trae-inspector-file-path":"src\\\\pages\\\\AdminLogin.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"w-full max-w-md p-8 bg-stone-800 rounded-xl shadow-2xl border border-stone-700",children:[P.jsxs("div",{"trae-inspector-start-line":"71","trae-inspector-start-column":"8","trae-inspector-end-line":"80","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\AdminLogin.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"flex items-center justify-between mb-8",children:[P.jsx(mi,{to:"/login",className:"text-stone-400 hover:text-white transition-colors",children:P.jsx(fg,{className:"w-5 h-5"})}),P.jsxs("div",{"trae-inspector-start-line":"75","trae-inspector-start-column":"11","trae-inspector-end-line":"78","trae-inspector-end-column":"17","trae-inspector-file-path":"src\\\\pages\\\\AdminLogin.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"flex items-center text-red-500 font-bold tracking-wider",children:[P.jsx(Pw,{className:"w-5 h-5 mr-2"}),"ADMIN PORTAL"]}),P.jsx("div",{"trae-inspector-start-line":"79","trae-inspector-start-column":"11","trae-inspector-end-line":"79","trae-inspector-end-column":"34","trae-inspector-file-path":"src\\\\pages\\\\AdminLogin.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"w-5"})," "]}),P.jsx("h2",{"trae-inspector-start-line":"82","trae-inspector-start-column":"8","trae-inspector-end-line":"82","trae-inspector-end-column":"81","trae-inspector-file-path":"src\\\\pages\\\\AdminLogin.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E7%AE%A1%E7%90%86%E5%91%98%E7%99%BB%E5%BD%95%22%2C%22textStartLine%22%3A%2282%22%2C%22textStartColumn%22%3A%2271%22%2C%22textEndLine%22%3A%2282%22%2C%22textEndColumn%22%3A%2276%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"text-2xl font-bold text-center mb-8 text-white",children:""}),i&&P.jsx("div",{"trae-inspector-start-line":"85","trae-inspector-start-column":"10","trae-inspector-end-line":"87","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\AdminLogin.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"bg-red-900/30 border border-red-800 text-red-300 p-3 rounded-lg mb-6 text-sm text-center",children:i}),P.jsxs("form",{"trae-inspector-start-line":"90","trae-inspector-start-column":"8","trae-inspector-end-line":"130","trae-inspector-end-column":"15","trae-inspector-file-path":"src\\\\pages\\\\AdminLogin.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",onSubmit:u,className:"space-y-6",children:[P.jsxs("div",{"trae-inspector-start-line":"91","trae-inspector-start-column":"10","trae-inspector-end-line":"105","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\AdminLogin.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",children:[P.jsx("label",{"trae-inspector-start-line":"92","trae-inspector-start-column":"12","trae-inspector-end-line":"92","trae-inspector-end-column":"117","trae-inspector-file-path":"src\\\\pages\\\\AdminLogin.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Account%22%2C%22textStartLine%22%3A%2292%22%2C%22textStartColumn%22%3A%22102%22%2C%22textEndLine%22%3A%2292%22%2C%22textEndColumn%22%3A%22109%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"block text-xs font-medium text-stone-400 uppercase tracking-wider mb-2",children:"Account"}),P.jsxs("div",{"trae-inspector-start-line":"93","trae-inspector-start-column":"12","trae-inspector-end-line":"104","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\pages\\\\AdminLogin.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"relative",children:[P.jsx("div",{"trae-inspector-start-line":"94","trae-inspector-start-column":"14","trae-inspector-end-line":"96","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\pages\\\\AdminLogin.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:P.jsx(Mg,{className:"h-5 w-5 text-stone-500"})}),P.jsx("input",{"trae-inspector-start-line":"97","trae-inspector-start-column":"14","trae-inspector-end-line":"103","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\AdminLogin.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",type:"text",value:r.username,onChange:h=>e({...r,username:h.target.value}),className:"w-full pl-10 pr-3 py-3 bg-stone-900 border border-stone-700 rounded-lg focus:ring-2 focus:ring-red-600 focus:border-transparent outline-none transition-all text-white placeholder-stone-600",placeholder:""})]})]}),P.jsxs("div",{"trae-inspector-start-line":"107","trae-inspector-start-column":"10","trae-inspector-end-line":"121","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\AdminLogin.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",children:[P.jsx("label",{"trae-inspector-start-line":"108","trae-inspector-start-column":"12","trae-inspector-end-line":"108","trae-inspector-end-column":"118","trae-inspector-file-path":"src\\\\pages\\\\AdminLogin.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22Password%22%2C%22textStartLine%22%3A%22108%22%2C%22textStartColumn%22%3A%22102%22%2C%22textEndLine%22%3A%22108%22%2C%22textEndColumn%22%3A%22110%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"block text-xs font-medium text-stone-400 uppercase tracking-wider mb-2",children:"Password"}),P.jsxs("div",{"trae-inspector-start-line":"109","trae-inspector-start-column":"12","trae-inspector-end-line":"120","trae-inspector-end-column":"18","trae-inspector-file-path":"src\\\\pages\\\\AdminLogin.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"relative",children:[P.jsx("div",{"trae-inspector-start-line":"110","trae-inspector-start-column":"14","trae-inspector-end-line":"112","trae-inspector-end-column":"20","trae-inspector-file-path":"src\\\\pages\\\\AdminLogin.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:P.jsx(YR,{className:"h-5 w-5 text-stone-500"})}),P.jsx("input",{"trae-inspector-start-line":"113","trae-inspector-start-column":"14","trae-inspector-end-line":"119","trae-inspector-end-column":"16","trae-inspector-file-path":"src\\\\pages\\\\AdminLogin.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",type:"password",value:r.password,onChange:h=>e({...r,password:h.target.value}),className:"w-full pl-10 pr-3 py-3 bg-stone-900 border border-stone-700 rounded-lg focus:ring-2 focus:ring-red-600 focus:border-transparent outline-none transition-all text-white placeholder-stone-600",placeholder:""})]})]}),P.jsx("button",{"trae-inspector-start-line":"123","trae-inspector-start-column":"10","trae-inspector-end-line":"129","trae-inspector-end-column":"19","trae-inspector-file-path":"src\\\\pages\\\\AdminLogin.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",type:"submit",disabled:t,className:"w-full bg-red-700 text-white py-3 rounded-lg hover:bg-red-600 transition-all font-bold shadow-lg disabled:opacity-50 mt-4",children:t?"Verifying...":"Login to Dashboard"})]}),P.jsx("div",{"trae-inspector-start-line":"132","trae-inspector-start-column":"8","trae-inspector-end-line":"134","trae-inspector-end-column":"14","trae-inspector-file-path":"src\\\\pages\\\\AdminLogin.tsx","trae-inspector-static-props":"%7B%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",className:"mt-8 text-center text-xs text-stone-600",children:P.jsx("p",{"trae-inspector-start-line":"133","trae-inspector-start-column":"10","trae-inspector-end-line":"133","trae-inspector-end-column":"44","trae-inspector-file-path":"src\\\\pages\\\\AdminLogin.tsx","trae-inspector-static-props":"%7B%22text%22%3A%22%E6%B5%8B%E8%AF%95%E8%B4%A6%E5%8F%B7%3A%20admin01%20%2F%20password123%22%2C%22textStartLine%22%3A%22133%22%2C%22textStartColumn%22%3A%2213%22%2C%22textEndLine%22%3A%22133%22%2C%22textEndColumn%22%3A%2240%22%2C%22cwd%22%3A%22D%3A%5C%5C%E9%A9%AC%E5%B9%B4%E5%88%9B%E6%84%8F%22%7D",children:": admin01 / password123"})})]})})};function qk(){return P.jsx(xD,{children:P.jsxs(eM,{children:[P.jsx(_o,{path:"/",element:P.jsx(Nk,{})}),P.jsx(_o,{path:"/ar-scan",element:P.jsx(kk,{})}),P.jsx(_o,{path:"/heritage/:id",element:P.jsx(Ok,{})}),P.jsx(_o,{path:"/heritage/list",element:P.jsx(Uk,{})}),P.jsx(_o,{path:"/gene-profile",element:P.jsx(Hk,{})}),P.jsx(_o,{path:"/co-creation",element:P.jsx(jk,{})}),P.jsx(_o,{path:"/profile",element:P.jsx(Vk,{})}),P.jsx(_o,{path:"/login",element:P.jsx(Wk,{})}),P.jsx(_o,{path:"/admin",element:P.jsx(Jk,{})}),P.jsx(_o,{path:"/admin/login",element:P.jsx(Kk,{})})]})})}nb.createRoot(document.getElementById("root")).render(P.jsx(V.StrictMode,{children:P.jsx(wM,{basename:"/Happy-New-Year/",children:P.jsx(hR,{children:P.jsx(qk,{})})})}));
